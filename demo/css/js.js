function Sanitize(){var e,i;for(i=arguments[0]||{},this.config={},this.config.elements=i.elements?i.elements:[],this.config.attributes=i.attributes?i.attributes:{},this.config.attributes[Sanitize.ALL]=this.config.attributes[Sanitize.ALL]?this.config.attributes[Sanitize.ALL]:[],this.config.allow_comments=i.allow_comments?i.allow_comments:!1,this.allowed_elements={},this.config.protocols=i.protocols?i.protocols:{},this.config.add_attributes=i.add_attributes?i.add_attributes:{},this.dom=i.dom?i.dom:document,e=0;this.config.elements.length>e;e++)this.allowed_elements[this.config.elements[e]]=!0;if(this.config.remove_element_contents={},this.config.remove_all_contents=!1,i.remove_contents)if(i.remove_contents instanceof Array)for(e=0;i.remove_contents.length>e;e++)this.config.remove_element_contents[i.remove_contents[e]]=!0;else this.config.remove_all_contents=!0;this.transformers=i.transformers?i.transformers:[]}function b64_sha1(e){return binb2b64(core_sha1(str2binb(e),8*e.length))}function str_sha1(e){return binb2str(core_sha1(str2binb(e),8*e.length))}function b64_hmac_sha1(e,t){return binb2b64(core_hmac_sha1(e,t))}function str_hmac_sha1(e,t){return binb2str(core_hmac_sha1(e,t))}function core_sha1(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;var l,c,d,u,p,f,h,m,i=new Array(80),n=1732584193,a=-271733879,s=-1732584194,r=271733878,o=-1009589776;for(l=0;e.length>l;l+=16){for(u=n,p=a,f=s,h=r,m=o,c=0;80>c;c++)i[c]=16>c?e[l+c]:rol(i[c-3]^i[c-8]^i[c-14]^i[c-16],1),d=safe_add(safe_add(rol(n,5),sha1_ft(c,a,s,r)),safe_add(safe_add(o,i[c]),sha1_kt(c))),o=r,r=s,s=rol(a,30),a=n,n=d;n=safe_add(n,u),a=safe_add(a,p),s=safe_add(s,f),r=safe_add(r,h),o=safe_add(o,m)}return[n,a,s,r,o]}function sha1_ft(e,t,i,n){return 20>e?t&i|~t&n:40>e?t^i^n:60>e?t&i|t&n|i&n:t^i^n}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function core_hmac_sha1(e,t){var i=str2binb(e);i.length>16&&(i=core_sha1(i,8*e.length));for(var n=new Array(16),a=new Array(16),s=0;16>s;s++)n[s]=909522486^i[s],a[s]=1549556828^i[s];var r=core_sha1(n.concat(str2binb(t)),512+8*t.length);return core_sha1(a.concat(r),672)}function safe_add(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function rol(e,t){return e<<t|e>>>32-t}function str2binb(e){for(var t=[],i=255,n=0;8*e.length>n;n+=8)t[n>>5]|=(e.charCodeAt(n/8)&i)<<24-n%32;return t}function binb2str(e){for(var t="",i=255,n=0;32*e.length>n;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&i);return t}function binb2b64(e){for(var n,a,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",s=0;4*e.length>s;s+=3)for(n=(255&e[s>>2]>>8*(3-s%4))<<16|(255&e[s+1>>2]>>8*(3-(s+1)%4))<<8|255&e[s+2>>2]>>8*(3-(s+2)%4),a=0;4>a;a++)i+=8*s+6*a>32*e.length?"=":t.charAt(63&n>>6*(3-a));return i}if(function(){var e=this,t=e._,i={},n=Array.prototype,a=Object.prototype,s=Function.prototype,r=n.push,o=n.slice,l=n.concat,c=a.toString,d=a.hasOwnProperty,u=n.forEach,p=n.map,f=n.reduce,h=n.reduceRight,m=n.filter,_=n.every,g=n.some,v=n.indexOf,b=n.lastIndexOf,y=Array.isArray,w=Object.keys,k=s.bind,j=function(e){return e instanceof j?e:this instanceof j?(this._wrapped=e,void 0):new j(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):e._=j,j.VERSION="1.6.0";var x=j.each=j.forEach=function(e,t,n){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var a=0,s=e.length;s>a;a++)if(t.call(n,e[a],a,e)===i)return}else for(var r=j.keys(e),a=0,s=r.length;s>a;a++)if(t.call(n,e[r[a]],r[a],e)===i)return;return e};j.map=j.collect=function(e,t,i){var n=[];return null==e?n:p&&e.map===p?e.map(t,i):(x(e,function(e,a,s){n.push(t.call(i,e,a,s))}),n)};var $="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=j.bind(t,n)),a?e.reduce(t,i):e.reduce(t);if(x(e,function(e,s,r){a?i=t.call(n,i,e,s,r):(i=e,a=!0)}),!a)throw new TypeError($);return i},j.reduceRight=j.foldr=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return n&&(t=j.bind(t,n)),a?e.reduceRight(t,i):e.reduceRight(t);var s=e.length;if(s!==+s){var r=j.keys(e);s=r.length}if(x(e,function(o,l,c){l=r?r[--s]:--s,a?i=t.call(n,i,e[l],l,c):(i=e[l],a=!0)}),!a)throw new TypeError($);return i},j.find=j.detect=function(e,t,i){var n;return C(e,function(e,a,s){return t.call(i,e,a,s)?(n=e,!0):void 0}),n},j.filter=j.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(x(e,function(e,a,s){t.call(i,e,a,s)&&n.push(e)}),n)},j.reject=function(e,t,i){return j.filter(e,function(e,n,a){return!t.call(i,e,n,a)},i)},j.every=j.all=function(e,t,n){t||(t=j.identity);var a=!0;return null==e?a:_&&e.every===_?e.every(t,n):(x(e,function(e,s,r){return(a=a&&t.call(n,e,s,r))?void 0:i}),!!a)};var C=j.some=j.any=function(e,t,n){t||(t=j.identity);var a=!1;return null==e?a:g&&e.some===g?e.some(t,n):(x(e,function(e,s,r){return a||(a=t.call(n,e,s,r))?i:void 0}),!!a)};j.contains=j.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):C(e,function(e){return e===t})},j.invoke=function(e,t){var i=o.call(arguments,2),n=j.isFunction(t);return j.map(e,function(e){return(n?t:e[t]).apply(e,i)})},j.pluck=function(e,t){return j.map(e,j.property(t))},j.where=function(e,t){return j.filter(e,j.matches(t))},j.findWhere=function(e,t){return j.find(e,j.matches(t))},j.max=function(e,t,i){if(!t&&j.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);var n=-1/0,a=-1/0;return x(e,function(e,s,r){var o=t?t.call(i,e,s,r):e;o>a&&(n=e,a=o)}),n},j.min=function(e,t,i){if(!t&&j.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);var n=1/0,a=1/0;return x(e,function(e,s,r){var o=t?t.call(i,e,s,r):e;a>o&&(n=e,a=o)}),n},j.shuffle=function(e){var t,i=0,n=[];return x(e,function(e){t=j.random(i++),n[i-1]=n[t],n[t]=e}),n},j.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=j.values(e)),e[j.random(e.length-1)]):j.shuffle(e).slice(0,Math.max(0,t))};var S=function(e){return null==e?j.identity:j.isFunction(e)?e:j.property(e)};j.sortBy=function(e,t,i){return t=S(t),j.pluck(j.map(e,function(e,n,a){return{value:e,index:n,criteria:t.call(i,e,n,a)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,i,n){var a={};return i=S(i),x(t,function(s,r){var o=i.call(n,s,r,t);e(a,o,s)}),a}};j.groupBy=D(function(e,t,i){j.has(e,t)?e[t].push(i):e[t]=[i]}),j.indexBy=D(function(e,t,i){e[t]=i}),j.countBy=D(function(e,t){j.has(e,t)?e[t]++:e[t]=1}),j.sortedIndex=function(e,t,i,n){i=S(i);for(var a=i.call(n,t),s=0,r=e.length;r>s;){var o=s+r>>>1;a>i.call(n,e[o])?s=o+1:r=o}return s},j.toArray=function(e){return e?j.isArray(e)?o.call(e):e.length===+e.length?j.map(e,j.identity):j.values(e):[]},j.size=function(e){return null==e?0:e.length===+e.length?e.length:j.keys(e).length},j.first=j.head=j.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:o.call(e,0,t)},j.initial=function(e,t,i){return o.call(e,0,e.length-(null==t||i?1:t))},j.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},j.rest=j.tail=j.drop=function(e,t,i){return o.call(e,null==t||i?1:t)},j.compact=function(e){return j.filter(e,j.identity)};var E=function(e,t,i){return t&&j.every(e,j.isArray)?l.apply(i,e):(x(e,function(e){j.isArray(e)||j.isArguments(e)?t?r.apply(i,e):E(e,t,i):i.push(e)}),i)};j.flatten=function(e,t){return E(e,t,[])},j.without=function(e){return j.difference(e,o.call(arguments,1))},j.partition=function(e,t,i){t=S(t);var n=[],a=[];return x(e,function(e){(t.call(i,e)?n:a).push(e)}),[n,a]},j.uniq=j.unique=function(e,t,i,n){j.isFunction(t)&&(n=i,i=t,t=!1);var a=i?j.map(e,i,n):e,s=[],r=[];return x(a,function(i,n){(t?n&&r[r.length-1]===i:j.contains(r,i))||(r.push(i),s.push(e[n]))}),s},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(e){var t=o.call(arguments,1);return j.filter(j.uniq(e),function(e){return j.every(t,function(t){return j.contains(t,e)})})},j.difference=function(e){var t=l.apply(n,o.call(arguments,1));return j.filter(e,function(e){return!j.contains(t,e)})},j.zip=function(){for(var e=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=j.pluck(arguments,""+i);return t},j.object=function(e,t){if(null==e)return{};for(var i={},n=0,a=e.length;a>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},j.indexOf=function(e,t,i){if(null==e)return-1;var n=0,a=e.length;if(i){if("number"!=typeof i)return n=j.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,a+i):i}if(v&&e.indexOf===v)return e.indexOf(t,i);for(;a>n;n++)if(e[n]===t)return n;return-1},j.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(b&&e.lastIndexOf===b)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var a=n?i:e.length;a--;)if(e[a]===t)return a;return-1},j.range=function(e,t,i){1>=arguments.length&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),a=0,s=new Array(n);n>a;)s[a++]=e,e+=i;return s};var T=function(){};j.bind=function(e,t){var i,n;if(k&&e.bind===k)return k.apply(e,o.call(arguments,1));if(!j.isFunction(e))throw new TypeError;return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(o.call(arguments)));T.prototype=e.prototype;var a=new T;T.prototype=null;var s=e.apply(a,i.concat(o.call(arguments)));return Object(s)===s?s:a}},j.partial=function(e){var t=o.call(arguments,1);return function(){for(var i=0,n=t.slice(),a=0,s=n.length;s>a;a++)n[a]===j&&(n[a]=arguments[i++]);for(;arguments.length>i;)n.push(arguments[i++]);return e.apply(this,n)}},j.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return x(t,function(t){e[t]=j.bind(e[t],e)}),e},j.memoize=function(e,t){var i={};return t||(t=j.identity),function(){var n=t.apply(this,arguments);return j.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},j.delay=function(e,t){var i=o.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},j.defer=function(e){return j.delay.apply(j,[e,1].concat(o.call(arguments,1)))},j.throttle=function(e,t,i){var n,a,s,r=null,o=0;i||(i={});var l=function(){o=i.leading===!1?0:j.now(),r=null,s=e.apply(n,a),n=a=null};return function(){var c=j.now();o||i.leading!==!1||(o=c);var d=t-(c-o);return n=this,a=arguments,0>=d?(clearTimeout(r),r=null,o=c,s=e.apply(n,a),n=a=null):r||i.trailing===!1||(r=setTimeout(l,d)),s}},j.debounce=function(e,t,i){var n,a,s,r,o,l=function(){var c=j.now()-r;t>c?n=setTimeout(l,t-c):(n=null,i||(o=e.apply(s,a),s=a=null))};return function(){s=this,a=arguments,r=j.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(o=e.apply(s,a),s=a=null),o}},j.once=function(e){var i,t=!1;return function(){return t?i:(t=!0,i=e.apply(this,arguments),e=null,i)}},j.wrap=function(e,t){return j.partial(t,e)},j.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},j.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},j.keys=function(e){if(!j.isObject(e))return[];if(w)return w(e);var t=[];for(var i in e)j.has(e,i)&&t.push(i);return t},j.values=function(e){for(var t=j.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=e[t[a]];return n},j.pairs=function(e){for(var t=j.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=[t[a],e[t[a]]];return n},j.invert=function(e){for(var t={},i=j.keys(e),n=0,a=i.length;a>n;n++)t[e[i[n]]]=i[n];return t},j.functions=j.methods=function(e){var t=[];for(var i in e)j.isFunction(e[i])&&t.push(i);return t.sort()},j.extend=function(e){return x(o.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},j.pick=function(e){var t={},i=l.apply(n,o.call(arguments,1));return x(i,function(i){i in e&&(t[i]=e[i])}),t},j.omit=function(e){var t={},i=l.apply(n,o.call(arguments,1));for(var a in e)j.contains(i,a)||(t[a]=e[a]);return t},j.defaults=function(e){return x(o.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},j.clone=function(e){return j.isObject(e)?j.isArray(e)?e.slice():j.extend({},e):e},j.tap=function(e,t){return t(e),e};var z=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof j&&(e=e._wrapped),t instanceof j&&(t=t._wrapped);var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=i.length;s--;)if(i[s]==e)return n[s]==t;var r=e.constructor,o=t.constructor;if(r!==o&&!(j.isFunction(r)&&r instanceof r&&j.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,d=!0;if("[object Array]"==a){if(l=e.length,d=l==t.length)for(;l--&&(d=z(e[l],t[l],i,n)););}else{for(var u in e)if(j.has(e,u)&&(l++,!(d=j.has(t,u)&&z(e[u],t[u],i,n))))break;if(d){for(u in t)if(j.has(t,u)&&!l--)break;d=!l}}return i.pop(),n.pop(),d};j.isEqual=function(e,t){return z(e,t,[],[])},j.isEmpty=function(e){if(null==e)return!0;if(j.isArray(e)||j.isString(e))return 0===e.length;for(var t in e)if(j.has(e,t))return!1;return!0},j.isElement=function(e){return!(!e||1!==e.nodeType)},j.isArray=y||function(e){return"[object Array]"==c.call(e)},j.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){j["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),j.isArguments(arguments)||(j.isArguments=function(e){return!(!e||!j.has(e,"callee"))}),j.isFunction=function(e){return"function"==typeof e},j.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},j.isNaN=function(e){return j.isNumber(e)&&e!=+e},j.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},j.isNull=function(e){return null===e},j.isUndefined=function(e){return void 0===e},j.has=function(e,t){return d.call(e,t)},j.noConflict=function(){return e._=t,this},j.identity=function(e){return e},j.constant=function(e){return function(){return e}},j.property=function(e){return function(t){return t[e]}},j.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},j.times=function(e,t,i){for(var n=Array(Math.max(0,e)),a=0;e>a;a++)n[a]=t.call(i,a);return n},j.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},j.now=Date.now||function(){return(new Date).getTime()};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=j.invert(M.escape);var A={escape:new RegExp("["+j.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(M.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(e){j[e]=function(t){return null==t?"":(""+t).replace(A[e],function(t){return M[e][t]})}}),j.result=function(e,t){if(null==e)return void 0;var i=e[t];return j.isFunction(i)?i.call(e):i},j.mixin=function(e){x(j.functions(e),function(t){var i=j[t]=e[t];j.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),N.call(this,i.apply(j,e))}})};var P=0;j.uniqueId=function(e){var t=++P+"";return e?e+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(e,t,i){var n;i=j.defaults({},i,j.templateSettings);var a=new RegExp([(i.escape||F).source,(i.interpolate||F).source,(i.evaluate||F).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(a,function(t,i,n,a,o){return r+=e.slice(s,o).replace(O,function(e){return"\\"+I[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(r+="';\n"+a+"\n__p+='"),s=o+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(o){throw o.source=r,o}if(t)return n(t,j);var l=function(e){return n.call(this,e,j)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},j.chain=function(e){return j(e).chain()};var N=function(e){return this._chain?j(e).chain():e};j.mixin(j),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];j.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],N.call(this,i)}}),x(["concat","join","slice"],function(e){var t=n[e];j.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}.call(this),function(e,t){function P(e){var t=e.length,i=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function I(e){var t=F[e]={};return b.each(e.match(w)||[],function(e,i){t[i]=!0}),t}function L(e,i,n,a){if(b.acceptData(e)){var s,r,o=b.expando,l="string"==typeof i,c=e.nodeType,u=c?b.cache:e,p=c?e[o]:e[o]&&o;if(p&&u[p]&&(a||u[p].data)||!l||n!==t)return p||(c?e[o]=p=d.pop()||b.guid++:p=o),u[p]||(u[p]={},c||(u[p].toJSON=b.noop)),("object"==typeof i||"function"==typeof i)&&(a?u[p]=b.extend(u[p],i):u[p].data=b.extend(u[p].data,i)),s=u[p],a||(s.data||(s.data={}),s=s.data),n!==t&&(s[b.camelCase(i)]=n),l?(r=s[i],null==r&&(r=s[b.camelCase(i)])):r=s,r}}function H(e,t,i){if(b.acceptData(e)){var n,a,s,r=e.nodeType,o=r?b.cache:e,l=r?e[b.expando]:b.expando;if(o[l]){if(t&&(s=i?o[l]:o[l].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(n=0,a=t.length;a>n;n++)delete s[t[n]];if(!(i?q:b.isEmptyObject)(s))return}(i||(delete o[l].data,q(o[l])))&&(r?b.cleanData([e],!0):b.support.deleteExpando||o!=o.window?delete o[l]:o[l]=null)}}}function R(e,i,n){if(n===t&&1===e.nodeType){var a="data-"+i.replace(N,"-$1").toLowerCase();if(n=e.getAttribute(a),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:O.test(n)?b.parseJSON(n):n}catch(s){}b.data(e,i,n)}else n=t}return n}function q(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function at(){return!0}function st(){return!1}function ut(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function pt(e,t,i){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,n){var a=!!t.call(e,n,e);return a===i});if(t.nodeType)return b.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=b.grep(e,function(e){return 1===e.nodeType});if(lt.test(t))return b.filter(t,n,!i);t=b.filter(t,n)}return b.grep(e,function(e){return b.inArray(e,t)>=0===i})}function ft(e){var t=ht.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function zt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Mt(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function At(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){for(var i,n=0;null!=(i=e[n]);n++)b._data(i,"globalEval",!t||b._data(t[n],"globalEval"))}function Ft(e,t){if(1===t.nodeType&&b.hasData(e)){var i,n,a,s=b._data(e),r=b._data(t,s),o=s.events;if(o){delete r.handle,r.events={};for(i in o)for(n=0,a=o[i].length;a>n;n++)b.event.add(t,i,o[i][n])}r.data&&(r.data=b.extend({},r.data))}}function It(e,t){var i,n,a;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){a=b._data(t);for(n in a.events)b.removeEvent(t,n,a.handle);t.removeAttribute(b.expando)}"script"===i&&t.text!==e.text?(Mt(t).text=e.text,At(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&jt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function Ot(e,i){var n,s,r=0,o=typeof e.getElementsByTagName!==a?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==a?e.querySelectorAll(i||"*"):t;if(!o)for(o=[],n=e.childNodes||e;null!=(s=n[r]);r++)!i||b.nodeName(s,i)?o.push(s):b.merge(o,Ot(s,i));return i===t||i&&b.nodeName(e,i)?b.merge([e],o):o}function Nt(e){jt.test(e.type)&&(e.defaultChecked=e.checked)}function ti(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,a=ei.length;a--;)if(t=ei[a]+i,t in e)return t;return n}function ii(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function ni(e,t){for(var i,n,a,s=[],r=0,o=e.length;o>r;r++)n=e[r],n.style&&(s[r]=b._data(n,"olddisplay"),i=n.style.display,t?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&ii(n)&&(s[r]=b._data(n,"olddisplay",oi(n.nodeName)))):s[r]||(a=ii(n),(i&&"none"!==i||!a)&&b._data(n,"olddisplay",a?i:b.css(n,"display"))));for(r=0;o>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[r]||"":"none"));return e}function ai(e,t,i){var n=Vt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function si(e,t,i,n,a){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=b.css(e,i+Jt[s],!0,a)),n?("content"===i&&(r-=b.css(e,"padding"+Jt[s],!0,a)),"margin"!==i&&(r-=b.css(e,"border"+Jt[s]+"Width",!0,a))):(r+=b.css(e,"padding"+Jt[s],!0,a),"padding"!==i&&(r+=b.css(e,"border"+Jt[s]+"Width",!0,a)));return r}function ri(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Ht(e),r=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=Rt(e,t,s),(0>a||null==a)&&(a=e.style[t]),Xt.test(a))return a;n=r&&(b.support.boxSizingReliable||a===e.style[t]),a=parseFloat(a)||0}return a+si(e,t,i||(r?"border":"content"),n,s)+"px"}function oi(e){var t=s,i=Kt[e];return i||(i=li(e,t),"none"!==i&&i||(Lt=(Lt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Lt[0].contentWindow||Lt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=li(e,t),Lt.detach()),Kt[e]=i),i}function li(e,t){var i=b(t.createElement(e)).appendTo(t.body),n=b.css(i[0],"display");return i.remove(),n}function hi(e,t,i,n){var a;if(b.isArray(t))b.each(t,function(t,a){i||di.test(e)?n(e,a):hi(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==b.type(t))n(e,t);else for(a in t)hi(e+"["+a+"]",t[a],i,n)}function zi(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,s=t.toLowerCase().match(w)||[];if(b.isFunction(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Mi(e,t,i,n){function r(o){var l;return a[o]=!0,b.each(e[o]||[],function(e,o){var c=o(t,i,n);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var a={},s=e===Di;return r(t.dataTypes[0])||!a["*"]&&r("*")}function Ai(e,i){var n,a,s=b.ajaxSettings.flatOptions||{};for(a in i)i[a]!==t&&((s[a]?e:n||(n={}))[a]=i[a]);return n&&b.extend(!0,e,n),e}function Pi(e,i,n){var a,s,r,o,l=e.contents,c=e.dataTypes,d=e.responseFields;for(o in d)o in n&&(i[d[o]]=n[o]);for(;"*"===c[0];)c.shift(),s===t&&(s=e.mimeType||i.getResponseHeader("Content-Type"));if(s)for(o in l)if(l[o]&&l[o].test(s)){c.unshift(o);break}if(c[0]in n)r=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){r=o;break}a||(a=o)}r=r||a}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function Fi(e,t){var i,n,a,s,r={},o=0,l=e.dataTypes.slice(),c=l[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l[1])for(a in e.converters)r[a.toLowerCase()]=e.converters[a];for(;n=l[++o];)if("*"!==n){if("*"!==c&&c!==n){if(a=r[c+" "+n]||r["* "+n],!a)for(i in r)if(s=i.split(" "),s[1]===n&&(a=r[c+" "+s[0]]||r["* "+s[0]])){a===!0?a=r[i]:r[i]!==!0&&(n=s[0],l.splice(o--,0,n));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+n}}}c=n}return{state:"success",data:t}}function qi(){try{return new e.XMLHttpRequest}catch(t){}}function Wi(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Zi(){return setTimeout(function(){Bi=t}),Bi=b.now()}function Qi(e,t){b.each(t,function(t,i){for(var n=(Ki[t]||[]).concat(Ki["*"]),a=0,s=n.length;s>a;a++)if(n[a].call(e,t,i))return})}function Ji(e,t,i){var n,a,s=0,r=Gi.length,o=b.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Bi||Zi(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return o.notifyWith(e,[c,s,i]),1>s&&l?i:(o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Bi||Zi(),duration:i.duration,tweens:[],createTween:function(t,i){var n=b.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;n>i;i++)c.tweens[i].run(1);return t?o.resolveWith(e,[c,t]):o.rejectWith(e,[c,t]),this}}),d=c.props;for(en(d,c.opts.specialEasing);r>s;s++)if(n=Gi[s].call(c,e,d,c.opts))return n;return Qi(c,d),b.isFunction(c.opts.start)&&c.opts.start.call(e,c),b.fx.timer(b.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function en(e,t){var i,n,a,s,r;for(a in e)if(n=b.camelCase(a),s=t[n],i=e[a],b.isArray(i)&&(s=i[1],i=e[a]=i[0]),a!==n&&(e[n]=i,delete e[a]),r=b.cssHooks[n],r&&"expand"in r){i=r.expand(i),delete e[n];for(a in i)a in e||(e[a]=i[a],t[a]=s)}else t[n]=s}function tn(e,t,i){var n,a,s,r,o,l,c,d,u,p=this,f=e.style,h={},m=[],_=e.nodeType&&ii(e);i.queue||(d=b._queueHooks(e,"fx"),null==d.unqueued&&(d.unqueued=0,u=d.empty.fire,d.empty.fire=function(){d.unqueued||u()}),d.unqueued++,p.always(function(){p.always(function(){d.unqueued--,b.queue(e,"fx").length||d.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==oi(e.nodeName)?f.zoom=1:f.display="inline-block")),i.overflow&&(f.overflow="hidden",b.support.shrinkWrapBlocks||p.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(a in t)if(r=t[a],Ui.exec(r)){if(delete t[a],l=l||"toggle"===r,r===(_?"hide":"show"))continue;m.push(a)}if(s=m.length){o=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in o&&(_=o.hidden),l&&(o.hidden=!_),_?b(e).show():p.done(function(){b(e).hide()}),p.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(a=0;s>a;a++)n=m[a],c=p.createTween(n,_?o[n]:0),h[n]=o[n]||b.style(e,n),n in o||(o[n]=c.start,_&&(c.end=c.start,c.start="width"===n||"height"===n?1:0))}}function nn(e,t,i,n,a){return new nn.prototype.init(e,t,i,n,a)}function an(e,t){var i,n={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)i=Jt[a],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function sn(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var i,n,a=typeof t,s=e.document,r=e.location,o=e.jQuery,l=e.$,c={},d=[],u="1.9.1",p=d.concat,f=d.push,h=d.slice,m=d.indexOf,_=c.toString,g=c.hasOwnProperty,v=u.trim,b=function(e,t){return new b.fn.init(e,t,n)},y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,k=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,j=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,D=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,E=/^-ms-/,T=/-([\da-z])/gi,z=function(e,t){return t.toUpperCase()},M=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(A(),b.ready())},A=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",M,!1),e.removeEventListener("load",M,!1)):(s.detachEvent("onreadystatechange",M),e.detachEvent("onload",M))};b.fn=b.prototype={jquery:u,constructor:b,init:function(e,i,n){var a,r;if(!e)return this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:j.exec(e),!a||!a[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(a[1]){if(i=i instanceof b?i[0]:i,b.merge(this,b.parseHTML(a[1],i&&i.nodeType?i.ownerDocument||i:s,!0)),x.test(a[1])&&b.isPlainObject(i))for(a in i)b.isFunction(this[a])?this[a](i[a]):this.attr(a,i[a]);return this}if(r=s.getElementById(a[2]),r&&r.parentNode){if(r.id!==a[2])return n.find(e);this.length=1,this[0]=r}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,i,n,a,s,r,o=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),"object"==typeof o||b.isFunction(o)||(o={}),c===l&&(o=this,--l);c>l;l++)if(null!=(s=arguments[l]))for(a in s)e=o[a],n=s[a],o!==n&&(d&&n&&(b.isPlainObject(n)||(i=b.isArray(n)))?(i?(i=!1,r=e&&b.isArray(e)?e:[]):r=e&&b.isPlainObject(e)?e:{},o[a]=b.extend(d,r,n)):n!==t&&(o[a]=n));return o},b.extend({noConflict:function(t){return e.$===b&&(e.$=l),t&&e.jQuery===b&&(e.jQuery=o),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(i.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?c[_.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||g.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||s;var n=x.exec(e),a=!i&&[];return n?[t.createElement(n[1])]:(n=b.buildFragment([e],t,a),a&&b(a).remove(),b.merge([],n.childNodes))
},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=b.trim(t),t&&$.test(t.replace(S,"@").replace(D,"]").replace(C,"")))?new Function("return "+t)():(b.error("Invalid JSON: "+t),void 0)},parseXML:function(i){var n,a;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(a=new DOMParser,n=a.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(s){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(E,"ms-").replace(T,z)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n,a=0,s=e.length,r=P(e);if(i){if(r)for(;s>a&&(n=t.apply(e[a],i),n!==!1);a++);else for(a in e)if(n=t.apply(e[a],i),n===!1)break}else if(r)for(;s>a&&(n=t.call(e[a],a,e[a]),n!==!1);a++);else for(a in e)if(n=t.call(e[a],a,e[a]),n===!1)break;return e},trim:v&&!v.call("﻿ ")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(k,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(P(Object(e))?b.merge(i,"string"==typeof e?[e]:e):f.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(m)return m.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,a=e.length,s=0;if("number"==typeof n)for(;n>s;s++)e[a++]=i[s];else for(;i[s]!==t;)e[a++]=i[s++];return e.length=a,e},grep:function(e,t,i){var n,a=[],s=0,r=e.length;for(i=!!i;r>s;s++)n=!!t(e[s],s),i!==n&&a.push(e[s]);return a},map:function(e,t,i){var n,a=0,s=e.length,r=P(e),o=[];if(r)for(;s>a;a++)n=t(e[a],a,i),null!=n&&(o[o.length]=n);else for(a in e)n=t(e[a],a,i),null!=n&&(o[o.length]=n);return p.apply([],o)},guid:1,proxy:function(e,i){var n,a,s;return"string"==typeof i&&(s=e[i],i=e,e=s),b.isFunction(e)?(n=h.call(arguments,2),a=function(){return e.apply(i||this,n.concat(h.call(arguments)))},a.guid=e.guid=e.guid||b.guid++,a):t},access:function(e,i,n,a,s,r,o){var l=0,c=e.length,d=null==n;if("object"===b.type(n)){s=!0;for(l in n)b.access(e,i,l,n[l],!0,r,o)}else if(a!==t&&(s=!0,b.isFunction(a)||(o=!0),d&&(o?(i.call(e,a),i=null):(d=i,i=function(e,t,i){return d.call(b(e),i)})),i))for(;c>l;l++)i(e[l],n,o?a:a.call(e[l],l,i(e[l],n)));return s?e:d?i.call(e):c?i(e[0],n):r},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!i)if(i=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",M,!1);else{s.attachEvent("onreadystatechange",M),e.attachEvent("onload",M);var n=!1;try{n=null==e.frameElement&&s.documentElement}catch(a){}n&&n.doScroll&&function r(){if(!b.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}A(),b.ready()}}()}return i.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),n=b(s);var F={};b.Callbacks=function(e){e="string"==typeof e?F[e]||I(e):b.extend({},e);var i,n,a,s,r,o,l=[],c=!e.once&&[],d=function(t){for(n=e.memory&&t,a=!0,r=o||0,o=0,s=l.length,i=!0;l&&s>r;r++)if(l[r].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,l&&(c?c.length&&d(c.shift()):n?l=[]:u.disable())},u={add:function(){if(l){var t=l.length;(function a(t){b.each(t,function(t,i){var n=b.type(i);"function"===n?e.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&a(i)})})(arguments),i?s=l.length:n&&(o=t,d(n))}return this},remove:function(){return l&&b.each(arguments,function(e,t){for(var n;(n=b.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,r>=n&&r--)}),this},has:function(e){return e?b.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],this},disable:function(){return l=c=n=t,this},disabled:function(){return!l},lock:function(){return c=t,n||u.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||a&&!c||(i?c.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(i){b.each(t,function(t,s){var r=s[0],o=b.isFunction(e[t])&&e[t];a[s[1]](function(){var e=o&&o.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,n):n}},a={};return n.pipe=n.then,b.each(t,function(e,s){var r=s[2],o=s[3];n[s[1]]=r.add,o&&r.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?n:this,arguments),this},a[s[0]+"With"]=r.fireWith}),n.promise(a),e&&e.call(a,a),a},when:function(e){var o,l,c,t=0,i=h.call(arguments),n=i.length,a=1!==n||e&&b.isFunction(e.promise)?n:0,s=1===a?e:b.Deferred(),r=function(e,t,i){return function(n){t[e]=this,i[e]=arguments.length>1?h.call(arguments):n,i===o?s.notifyWith(t,i):--a||s.resolveWith(t,i)}};if(n>1)for(o=new Array(n),l=new Array(n),c=new Array(n);n>t;t++)i[t]&&b.isFunction(i[t].promise)?i[t].promise().done(r(t,c,i)).fail(s.reject).progress(r(t,l,o)):--a;return a||s.resolveWith(c,i),s.promise()}}),b.support=function(){var t,i,n,r,o,l,c,d,u,p,f=s.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=f.getElementsByTagName("*"),n=f.getElementsByTagName("a")[0],!i||!n||!i.length)return{};o=s.createElement("select"),c=o.appendChild(s.createElement("option")),r=f.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==f.className,leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:!!r.value,optSelected:c.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!c.disabled;try{delete f.test}catch(h){t.deleteExpando=!1}r=s.createElement("input"),r.setAttribute("value",""),t.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),l=s.createDocumentFragment(),l.appendChild(r),t.appendChecked=r.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,f.attachEvent&&(f.attachEvent("onclick",function(){t.noCloneEvent=!1}),f.cloneNode(!0).click());for(p in{submit:!0,change:!0,focusin:!0})f.setAttribute(d="on"+p,"t"),t[p+"Bubbles"]=d in e||f.attributes[d].expando===!1;return f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===f.style.backgroundClip,b(function(){var i,n,r,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=s.getElementsByTagName("body")[0];l&&(i=s.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(i).appendChild(f),f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=f.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=u&&0===r[0].offsetHeight,f.innerHTML="",f.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===f.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(f,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(f,null)||{width:"4px"}).width,n=f.appendChild(s.createElement("div")),n.style.cssText=f.style.cssText=o,n.style.marginRight=n.style.width="0",f.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof f.style.zoom!==a&&(f.innerHTML="",f.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===f.offsetWidth,f.style.display="block",f.innerHTML="<div></div>",f.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==f.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(i),i=f=r=n=null)}),i=o=l=c=n=r=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,N=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!q(e)},data:function(e,t,i){return L(e,t,i)},removeData:function(e,t){return H(e,t)},_data:function(e,t,i){return L(e,t,i,!0)},_removeData:function(e,t){return H(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,i){var n,a,s=this[0],r=0,o=null;if(e===t){if(this.length&&(o=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(n=s.attributes;n.length>r;r++)a=n[r].name,a.indexOf("data-")||(a=b.camelCase(a.slice(5)),R(s,a,o[a]));b._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(i){return i===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,i)}),void 0)},null,i,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=b._data(e,t),i&&(!n||b.isArray(i)?n=b._data(e,t,b.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=b.queue(e,t),n=i.length,a=i.shift(),s=b._queueHooks(e,t),r=function(){b.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),s.cur=a,a&&("fx"===t&&i.unshift("inprogress"),delete s.stop,a.call(e,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return b._data(e,i)||b._data(e,i,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,i)})})}}),b.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),n>arguments.length?b.queue(this[0],e):i===t?this:this.each(function(){var t=b.queue(this,e,i);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,a=1,s=b.Deferred(),r=this,o=this.length,l=function(){--a||s.resolveWith(r,[r])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";o--;)n=b._data(r[o],e+"queueHooks"),n&&n.empty&&(a++,n.empty.add(l));return l(),s.promise(i)}});var W,B,Y=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,X=/^(?:a|area)$/i,G=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,K=/^(?:checked|selected)$/i,Z=b.support.getSetAttribute,Q=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,a,s,r=0,o=this.length,l="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];o>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Y," "):" ")){for(s=0;a=t[s++];)0>n.indexOf(" "+a+" ")&&(n+=a+" ");i.className=b.trim(n)}return this},removeClass:function(e){var t,i,n,a,s,r=0,o=this.length,l=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];o>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Y," "):"")){for(s=0;a=t[s++];)for(;n.indexOf(" "+a+" ")>=0;)n=n.replace(" "+a+" "," ");i.className=e?b.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return b.isFunction(e)?this.each(function(i){b(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var s,r=0,o=b(this),l=t,c=e.match(w)||[];s=c[r++];)l=n?l:!o.hasClass(s),o[l?"addClass":"removeClass"](s);else(i===a||"boolean"===i)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Y," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,a,s=this[0];{if(arguments.length)return a=b.isFunction(e),this.each(function(i){var s,r=b(this);1===this.nodeType&&(s=a?e.call(this,i,r.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),n=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(U,""):null==i?"":i)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,r=s?null:[],o=s?a+1:n.length,l=0>a?o:s?a:0;o>l;l++)if(i=n[l],!(!i.selected&&l!==a||(b.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&b.nodeName(i.parentNode,"optgroup"))){if(t=b(i).val(),s)return t;r.push(t)}return r},set:function(e,t){var i=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attr:function(e,i,n){var s,r,o,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return typeof e.getAttribute===a?b.prop(e,i,n):(r=1!==l||!b.isXMLDoc(e),r&&(i=i.toLowerCase(),s=b.attrHooks[i]||(G.test(i)?B:W)),n===t?s&&r&&"get"in s&&null!==(o=s.get(e,i))?o:(typeof e.getAttribute!==a&&(o=e.getAttribute(i)),null==o?t:o):null!==n?s&&r&&"set"in s&&(o=s.set(e,n,i))!==t?o:(e.setAttribute(i,n+""),n):(b.removeAttr(e,i),void 0))},removeAttr:function(e,t){var i,n,a=0,s=t&&t.match(w);if(s&&1===e.nodeType)for(;i=s[a++];)n=b.propFix[i]||i,G.test(i)?!Z&&K.test(i)?e[b.camelCase("default-"+i)]=e[n]=!1:e[n]=!1:b.attr(e,i,""),e.removeAttribute(Z?i:n)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var a,s,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return r=1!==o||!b.isXMLDoc(e),r&&(i=b.propFix[i]||i,s=b.propHooks[i]),n!==t?s&&"set"in s&&(a=s.set(e,n,i))!==t?a:e[i]=n:s&&"get"in s&&null!==(a=s.get(e,i))?a:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):V.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:t}}}}),B={get:function(e,i){var n=b.prop(e,i),a="boolean"==typeof n&&e.getAttribute(i),s="boolean"==typeof n?Q&&Z?null!=a:K.test(i)?e[b.camelCase("default-"+i)]:!!a:e.getAttributeNode(i);return s&&s.value!==!1?i.toLowerCase():t},set:function(e,t,i){return t===!1?b.removeAttr(e,i):Q&&Z||!K.test(i)?e.setAttribute(!Z&&b.propFix[i]||i,i):e[b.camelCase("default-"+i)]=e[i]=!0,i}},Q&&Z||(b.attrHooks.value={get:function(e,i){var n=e.getAttributeNode(i);return b.nodeName(e,"input")?e.defaultValue:n&&n.specified?n.value:t},set:function(e,t,i){return b.nodeName(e,"input")?(e.defaultValue=t,void 0):W&&W.set(e,t,i)}}),Z||(W=b.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&("id"===i||"name"===i||"coords"===i?""!==n.value:n.specified)?n.value:t},set:function(e,i,n){var a=e.getAttributeNode(n);return a||e.setAttributeNode(a=e.ownerDocument.createAttribute(n)),a.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},b.attrHooks.contenteditable={get:W.get,set:function(e,t,i){W.set(e,""===t?!1:t,i)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,i){b.attrHooks[i]=b.extend(b.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null==n?t:n}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){return b.isArray(t)?e.checked=b.inArray(b(e).val(),t)>=0:void 0}})});var J=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,nt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,i,n,s,r){var o,l,c,d,u,p,f,h,m,_,g,v=b._data(e);if(v){for(n.handler&&(d=n,n=d.handler,r=d.selector),n.guid||(n.guid=b.guid++),(l=v.events)||(l=v.events={}),(p=v.handle)||(p=v.handle=function(e){return typeof b===a||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(p.elem,arguments)},p.elem=e),i=(i||"").match(w)||[""],c=i.length;c--;)o=nt.exec(i[c])||[],m=g=o[1],_=(o[2]||"").split(".").sort(),u=b.event.special[m]||{},m=(r?u.delegateType:u.bindType)||m,u=b.event.special[m]||{},f=b.extend({type:m,origType:g,data:s,handler:n,guid:n.guid,selector:r,needsContext:r&&b.expr.match.needsContext.test(r),namespace:_.join(".")},d),(h=l[m])||(h=l[m]=[],h.delegateCount=0,u.setup&&u.setup.call(e,s,_,p)!==!1||(e.addEventListener?e.addEventListener(m,p,!1):e.attachEvent&&e.attachEvent("on"+m,p))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,f):h.push(f),b.event.global[m]=!0;e=null}},remove:function(e,t,i,n,a){var s,r,o,l,c,d,u,p,f,h,m,_=b.hasData(e)&&b._data(e);if(_&&(d=_.events)){for(t=(t||"").match(w)||[""],c=t.length;c--;)if(o=nt.exec(t[c])||[],f=m=o[1],h=(o[2]||"").split(".").sort(),f){for(u=b.event.special[f]||{},f=(n?u.delegateType:u.bindType)||f,p=d[f]||[],o=o[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=p.length;s--;)r=p[s],!a&&m!==r.origType||i&&i.guid!==r.guid||o&&!o.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(p.splice(s,1),r.selector&&p.delegateCount--,u.remove&&u.remove.call(e,r));l&&!p.length&&(u.teardown&&u.teardown.call(e,h,_.handle)!==!1||b.removeEvent(e,f,_.handle),delete d[f])}else for(f in d)b.event.remove(e,f+t[c],i,n,!0);b.isEmptyObject(d)&&(delete _.handle,b._removeData(e,"events"))}},trigger:function(i,n,a,r){var o,l,c,d,u,p,f,h=[a||s],m=g.call(i,"type")?i.type:i,_=g.call(i,"namespace")?i.namespace.split("."):[];if(c=p=a=a||s,3!==a.nodeType&&8!==a.nodeType&&!it.test(m+b.event.triggered)&&(m.indexOf(".")>=0&&(_=m.split("."),m=_.shift(),_.sort()),l=0>m.indexOf(":")&&"on"+m,i=i[b.expando]?i:new b.Event(m,"object"==typeof i&&i),i.isTrigger=!0,i.namespace=_.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=a),n=null==n?[i]:b.makeArray(n,[i]),u=b.event.special[m]||{},r||!u.trigger||u.trigger.apply(a,n)!==!1)){if(!r&&!u.noBubble&&!b.isWindow(a)){for(d=u.delegateType||m,it.test(d+m)||(c=c.parentNode);c;c=c.parentNode)h.push(c),p=c;p===(a.ownerDocument||s)&&h.push(p.defaultView||p.parentWindow||e)}for(f=0;(c=h[f++])&&!i.isPropagationStopped();)i.type=f>1?d:u.bindType||m,o=(b._data(c,"events")||{})[i.type]&&b._data(c,"handle"),o&&o.apply(c,n),o=l&&c[l],o&&b.acceptData(c)&&o.apply&&o.apply(c,n)===!1&&i.preventDefault();if(i.type=m,!(r||i.isDefaultPrevented()||u._default&&u._default.apply(a.ownerDocument,n)!==!1||"click"===m&&b.nodeName(a,"a")||!b.acceptData(a)||!l||!a[m]||b.isWindow(a))){p=a[l],p&&(a[l]=null),b.event.triggered=m;try{a[m]()}catch(v){}b.event.triggered=t,p&&(a[l]=p)}return i.result}},dispatch:function(e){e=b.event.fix(e);var i,n,a,s,r,o=[],l=h.call(arguments),c=(b._data(this,"events")||{})[e.type]||[],d=b.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(o=b.event.handlers.call(this,e,c),i=0;(s=o[i++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,r=0;(a=s.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((b.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,l),n!==t&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,a,s,r,o=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(s=[],r=0;l>r;r++)a=i[r],n=a.selector+" ",s[n]===t&&(s[n]=a.needsContext?b(n,this).index(c)>=0:b.find(n,this,null,[c]).length),s[n]&&s.push(a);s.length&&o.push({elem:c,handlers:s})}return i.length>l&&o.push({elem:this,handlers:i.slice(l)}),o},fix:function(e){if(e[b.expando])return e;var t,i,n,a=e.type,r=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=tt.test(a)?this.mouseHooks:et.test(a)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new b.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=r.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,a,r,o=i.button,l=i.fromElement;return null==e.pageX&&null!=i.clientX&&(a=e.target.ownerDocument||s,r=a.documentElement,n=a.body,e.pageX=i.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?i.toElement:l),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var a=b.extend(new b.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?b.event.trigger(a,null,t):b.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===a&&(e[n]=null),e.detachEvent(n,i))},b.Event=function(e,t){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?at:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,void 0):new b.Event(e,t)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=at,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=at,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=at,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==n&&!b.contains(n,a))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=b.nodeName(i,"input")||b.nodeName(i,"button")?i.form:t;n&&!b._data(n,"submitBubbles")&&(b.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),b._data(n,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),void 0)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return b.event.remove(this,"._change"),!J.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===i++&&s.addEventListener(e,n,!0)},teardown:function(){0===--i&&s.removeEventListener(e,n,!0)}}}),b.fn.extend({on:function(e,i,n,a,s){var r,o;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(r in e)this.on(r,i,n,e[r],s);return this}if(null==n&&null==a?(a=i,n=i=t):null==a&&("string"==typeof i?(a=n,n=t):(a=n,n=i,i=t)),a===!1)a=st;else if(!a)return this;return 1===s&&(o=a,a=function(e){return b().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=b.guid++)),this.each(function(){b.event.add(this,e,a,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var a,s;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,b(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(s in e)this.off(s,i,e[s]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=st),this.each(function(){b.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?b.event.trigger(e,t,i,!0):void 0}}),function(e,t){function nt(e){return X.test(e+"")}function at(){var e,t=[];return e=function(i,n){return t.push(i+=" ")>a.cacheLength&&delete e[t.shift()],e[i]=n}}function st(e){return e[y]=!0,e}function rt(e){var t=u.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}}function ot(e,t,i,n){var a,s,r,o,l,c,p,m,_,v;if((t?t.ownerDocument||t:w)!==u&&d(t),t=t||u,i=i||[],!e||"string"!=typeof e)return i;if(1!==(o=t.nodeType)&&9!==o)return[];if(!f&&!n){if(a=G.exec(e))if(r=a[1]){if(9===o){if(s=t.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(r))&&g(t,s)&&s.id===r)return i.push(s),i}else{if(a[2])return M.apply(i,A.call(t.getElementsByTagName(e),0)),i;if((r=a[3])&&k.getByClassName&&t.getElementsByClassName)return M.apply(i,A.call(t.getElementsByClassName(r),0)),i}if(k.qsa&&!h.test(e)){if(p=!0,m=y,_=t,v=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(c=pt(e),(p=t.getAttribute("id"))?m=p.replace(Q,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+ft(c[l]);_=V.test(e)&&t.parentNode||t,v=c.join(",")}if(v)try{return M.apply(i,A.call(_.querySelectorAll(v),0)),i}catch(b){}finally{p||t.removeAttribute("id")}}}return wt(e.replace(R,"$1"),t,i,n)}function lt(e,t){var i=t&&e,n=i&&(~t.sourceIndex||E)-(~e.sourceIndex||E);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ct(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function dt(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ut(e){return st(function(t){return t=+t,st(function(i,n){for(var a,s=e([],i.length,t),r=s.length;r--;)i[a=s[r]]&&(i[a]=!(n[a]=i[a]))})})}function pt(e,t){var i,n,s,r,o,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);for(o=e,l=[],c=a.preFilter;o;){(!i||(n=q.exec(o)))&&(n&&(o=o.slice(n[0].length)||o),l.push(s=[])),i=!1,(n=W.exec(o))&&(i=n.shift(),s.push({value:i,type:n[0].replace(R," ")}),o=o.slice(i.length));for(r in a.filter)!(n=U[r].exec(o))||c[r]&&!(n=c[r](n))||(i=n.shift(),s.push({value:i,type:r,matches:n}),o=o.slice(i.length));if(!i)break}return t?o.length:o?ot.error(e):C(e,l).slice(0)}function ft(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function ht(e,t,i){var a=t.dir,s=i&&"parentNode"===a,r=x++;return t.first?function(t,i,n){for(;t=t[a];)if(1===t.nodeType||s)return e(t,i,n)}:function(t,i,o){var l,c,d,u=j+" "+r;
if(o){for(;t=t[a];)if((1===t.nodeType||s)&&e(t,i,o))return!0}else for(;t=t[a];)if(1===t.nodeType||s)if(d=t[y]||(t[y]={}),(c=d[a])&&c[0]===u){if((l=c[1])===!0||l===n)return l===!0}else if(c=d[a]=[u],c[1]=e(t,i,o)||n,c[1]===!0)return!0}}function mt(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function _t(e,t,i,n,a){for(var s,r=[],o=0,l=e.length,c=null!=t;l>o;o++)(s=e[o])&&(!i||i(s,n,a))&&(r.push(s),c&&t.push(o));return r}function gt(e,t,i,n,a,s){return n&&!n[y]&&(n=gt(n)),a&&!a[y]&&(a=gt(a,s)),st(function(s,r,o,l){var c,d,u,p=[],f=[],h=r.length,m=s||yt(t||"*",o.nodeType?[o]:o,[]),_=!e||!s&&t?m:_t(m,p,e,o,l),g=i?a||(s?e:h||n)?[]:r:_;if(i&&i(_,g,o,l),n)for(c=_t(g,f),n(c,[],o,l),d=c.length;d--;)(u=c[d])&&(g[f[d]]=!(_[f[d]]=u));if(s){if(a||e){if(a){for(c=[],d=g.length;d--;)(u=g[d])&&c.push(_[d]=u);a(null,g=[],c,l)}for(d=g.length;d--;)(u=g[d])&&(c=a?P.call(s,u):p[d])>-1&&(s[c]=!(r[c]=u))}}else g=_t(g===r?g.splice(h,g.length):g),a?a(null,r,g,l):M.apply(r,g)})}function vt(e){for(var t,i,n,s=e.length,r=a.relative[e[0].type],o=r||a.relative[" "],l=r?1:0,d=ht(function(e){return e===t},o,!0),u=ht(function(e){return P.call(t,e)>-1},o,!0),p=[function(e,i,n){return!r&&(n||i!==c)||((t=i).nodeType?d(e,i,n):u(e,i,n))}];s>l;l++)if(i=a.relative[e[l].type])p=[ht(mt(p),i)];else{if(i=a.filter[e[l].type].apply(null,e[l].matches),i[y]){for(n=++l;s>n&&!a.relative[e[n].type];n++);return gt(l>1&&mt(p),l>1&&ft(e.slice(0,l-1)).replace(R,"$1"),i,n>l&&vt(e.slice(l,n)),s>n&&vt(e=e.slice(n)),s>n&&ft(e))}p.push(i)}return mt(p)}function bt(e,t){var i=0,s=t.length>0,r=e.length>0,o=function(o,l,d,p,f){var h,m,_,g=[],v=0,b="0",y=o&&[],w=null!=f,k=c,x=o||r&&a.find.TAG("*",f&&l.parentNode||l),$=j+=null==k?1:Math.random()||.1;for(w&&(c=l!==u&&l,n=i);null!=(h=x[b]);b++){if(r&&h){for(m=0;_=e[m++];)if(_(h,l,d)){p.push(h);break}w&&(j=$,n=++i)}s&&((h=!_&&h)&&v--,o&&y.push(h))}if(v+=b,s&&b!==v){for(m=0;_=t[m++];)_(y,g,l,d);if(o){if(v>0)for(;b--;)y[b]||g[b]||(g[b]=z.call(p));g=_t(g)}M.apply(p,g),w&&!o&&g.length>0&&v+t.length>1&&ot.uniqueSort(p)}return w&&(j=$,c=k),y};return s?st(o):o}function yt(e,t,i){for(var n=0,a=t.length;a>n;n++)ot(e,t[n],i);return i}function wt(e,t,i,n){var s,r,l,c,d,u=pt(e);if(!n&&1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(l=r[0]).type&&9===t.nodeType&&!f&&a.relative[r[1].type]){if(t=a.find.ID(l.matches[0].replace(et,tt),t)[0],!t)return i;e=e.slice(r.shift().value.length)}for(s=U.needsContext.test(e)?0:r.length;s--&&(l=r[s],!a.relative[c=l.type]);)if((d=a.find[c])&&(n=d(l.matches[0].replace(et,tt),V.test(r[0].type)&&t.parentNode||t))){if(r.splice(s,1),e=n.length&&ft(r),!e)return M.apply(i,A.call(n,0)),i;break}}return o(e,u)(n,t,f,i,V.test(e)),i}function kt(){}var i,n,a,s,r,o,l,c,d,u,p,f,h,m,_,g,v,y="sizzle"+-new Date,w=e.document,k={},j=0,x=0,$=at(),C=at(),S=at(),D=typeof t,E=1<<31,T=[],z=T.pop,M=T.push,A=T.slice,P=T.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=I.replace("w","w#"),N="([*^$|!~]?=)",L="\\["+F+"*("+I+")"+F+"*(?:"+N+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+F+"*\\]",H=":("+I+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+L.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([\\x20\\t\\r\\n\\f>+~])"+F+"*"),B=new RegExp(H),Y=new RegExp("^"+O+"$"),U={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),NAME:new RegExp("^\\[name=['\"]?("+I+")['\"]?\\]"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,X=/^[^{]+\{\s*\[native code/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/'|\\/g,J=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var i="0x"+t-65536;return i!==i?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{A.call(w.documentElement.childNodes,0)[0].nodeType}catch(it){A=function(e){for(var t,i=[];t=this[e++];)i.push(t);return i}}r=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},d=ot.setDocument=function(e){var i=e?e.ownerDocument||e:w;return i!==u&&9===i.nodeType&&i.documentElement?(u=i,p=i.documentElement,f=r(i),k.tagNameNoComments=rt(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),k.attributes=rt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),k.getByClassName=rt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),k.getByName=rt(function(e){e.id=y+0,e.innerHTML="<a name='"+y+"'></a><div name='"+y+"'></div>",p.insertBefore(e,p.firstChild);var t=i.getElementsByName&&i.getElementsByName(y).length===2+i.getElementsByName(y+0).length;return k.getIdNotName=!i.getElementById(y),p.removeChild(e),t}),a.attrHandle=rt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==D&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},k.getIdNotName?(a.find.ID=function(e,t){if(typeof t.getElementById!==D&&!f){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},a.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(a.find.ID=function(e,i){if(typeof i.getElementById!==D&&!f){var n=i.getElementById(e);return n?n.id===e||typeof n.getAttributeNode!==D&&n.getAttributeNode("id").value===e?[n]:t:[]}},a.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var i=typeof e.getAttributeNode!==D&&e.getAttributeNode("id");return i&&i.value===t}}),a.find.TAG=k.tagNameNoComments?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},a.find.NAME=k.getByName&&function(e,t){return typeof t.getElementsByName!==D?t.getElementsByName(name):void 0},a.find.CLASS=k.getByClassName&&function(e,t){return typeof t.getElementsByClassName===D||f?void 0:t.getElementsByClassName(e)},m=[],h=[":focus"],(k.qsa=nt(i.querySelectorAll))&&(rt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+F+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),rt(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+F+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(k.matchesSelector=nt(_=p.matchesSelector||p.mozMatchesSelector||p.webkitMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&rt(function(e){k.disconnectedMatch=_.call(e,"div"),_.call(e,"[s!='']:x"),m.push("!=",H)}),h=new RegExp(h.join("|")),m=new RegExp(m.join("|")),g=nt(p.contains)||p.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},v=p.compareDocumentPosition?function(e,t){var n;return e===t?(l=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===i||g(w,e)?-1:t===i||g(w,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,a=0,s=e.parentNode,r=t.parentNode,o=[e],c=[t];if(e===t)return l=!0,0;if(!s||!r)return e===i?-1:t===i?1:s?-1:r?1:0;if(s===r)return lt(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;o[a]===c[a];)a++;return a?lt(o[a],c[a]):o[a]===w?-1:c[a]===w?1:0},l=!1,[0,0].sort(v),k.detectDuplicates=l,u):u},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==u&&d(e),t=t.replace(J,"='$1']"),!(!k.matchesSelector||f||m&&m.test(t)||h.test(t)))try{var i=_.call(e,t);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(n){}return ot(t,u,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==u&&d(e),g(e,t)},ot.attr=function(e,t){var i;return(e.ownerDocument||e)!==u&&d(e),f||(t=t.toLowerCase()),(i=a.attrHandle[t])?i(e):f||k.attributes?e.getAttribute(t):((i=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:i&&i.specified?i.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,i=[],n=1,a=0;if(l=!k.detectDuplicates,e.sort(v),l){for(;t=e[n];n++)t===e[n-1]&&(a=i.push(n));for(;a--;)e.splice(i[a],1)}return e},s=ot.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n];n++)i+=s(t);return i},a=ot.selectors={cacheLength:50,createPseudo:st,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:i&&B.test(i)&&(t=pt(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&$(e,function(e){return t.test(e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var a=ot.attr(n,e);return null==a?"!="===t:t?(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a+" ").indexOf(i)>-1:"|="===t?a===i||a.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,i,n,a){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,p,f,h,m=s!==r?"nextSibling":"previousSibling",_=t.parentNode,g=o&&t.nodeName.toLowerCase(),v=!l&&!o;if(_){if(s){for(;m;){for(u=t;u=u[m];)if(o?u.nodeName.toLowerCase()===g:1===u.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?_.firstChild:_.lastChild],r&&v){for(d=_[y]||(_[y]={}),c=d[e]||[],f=c[0]===j&&c[1],p=c[0]===j&&c[2],u=f&&_.childNodes[f];u=++f&&u&&u[m]||(p=f=0)||h.pop();)if(1===u.nodeType&&++p&&u===t){d[e]=[j,f,p];break}}else if(v&&(c=(t[y]||(t[y]={}))[e])&&c[0]===j)p=c[1];else for(;(u=++f&&u&&u[m]||(p=f=0)||h.pop())&&((o?u.nodeName.toLowerCase()!==g:1!==u.nodeType)||!++p||(v&&((u[y]||(u[y]={}))[e]=[j,p]),u!==t)););return p-=a,p===n||0===p%n&&p/n>=0}}},PSEUDO:function(e,t){var i,n=a.pseudos[e]||a.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return n[y]?n(t):n.length>1?(i=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,i){for(var a,s=n(e,t),r=s.length;r--;)a=P.call(e,s[r]),e[a]=!(i[a]=s[r])}):function(e){return n(e,0,i)}):n}},pseudos:{not:st(function(e){var t=[],i=[],n=o(e.replace(R,"$1"));return n[y]?st(function(e,t,i,a){for(var s,r=n(e,null,a,[]),o=e.length;o--;)(s=r[o])&&(e[o]=!(t[o]=s))}):function(e,a,s){return t[0]=e,n(t,null,s,i),!i.pop()}}),has:st(function(e){return function(t){return ot(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return Y.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var i;do if(i=f?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===u.activeElement&&(!u.hasFocus||u.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ut(function(){return[0]}),last:ut(function(e,t){return[t-1]}),eq:ut(function(e,t,i){return[0>i?i+t:i]}),even:ut(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:ut(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:ut(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:ut(function(e,t,i){for(var n=0>i?i+t:i;t>++n;)e.push(n);return e})}};for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[i]=ct(i);for(i in{submit:!0,reset:!0})a.pseudos[i]=dt(i);o=ot.compile=function(e,t){var i,n=[],a=[],s=S[e+" "];if(!s){for(t||(t=pt(e)),i=t.length;i--;)s=vt(t[i]),s[y]?n.push(s):a.push(s);s=S(e,bt(a,n))}return s},a.pseudos.nth=a.pseudos.eq,a.filters=kt.prototype=a.pseudos,a.setFilters=new kt,d(),ot.attr=b.attr,b.find=ot,b.expr=ot.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ot.uniqueSort,b.text=ot.getText,b.isXMLDoc=ot.isXML,b.contains=ot.contains}(e);var rt=/Until$/,ot=/^(?:parents|prev(?:Until|All))/,lt=/^.[^:#\[\.,]*$/,ct=b.expr.match.needsContext,dt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,i,n,a=this.length;if("string"!=typeof e)return n=this,this.pushStack(b(e).filter(function(){for(t=0;a>t;t++)if(b.contains(n[t],this))return!0}));for(i=[],t=0;a>t;t++)b.find(e,this[t],i);return i=this.pushStack(a>1?b.unique(i):i),i.selector=(this.selector?this.selector+" ":"")+e,i},has:function(e){var t,i=b(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(b.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(pt(this,e,!1))},filter:function(e){return this.pushStack(pt(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ct.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,a=this.length,s=[],r=ct.test(e)||"string"!=typeof e?b(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(r?r.index(i)>-1:b.find.matchesSelector(i,e)){s.push(i);break}i=i.parentNode}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),n=b.merge(this.get(),i);return this.pushStack(b.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,i){return b.dir(e,"parentNode",i)},next:function(e){return ut(e,"nextSibling")},prev:function(e){return ut(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,i){return b.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return b.dir(e,"previousSibling",i)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(i,n){var a=b.map(this,t,i);return rt.test(e)||(n=i),n&&"string"==typeof n&&(a=b.filter(n,a)),a=this.length>1&&!dt[e]?b.unique(a):a,this.length>1&&ot.test(e)&&(a=a.reverse()),this.pushStack(a)}}),b.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,i,n){for(var a=[],s=e[i];s&&9!==s.nodeType&&(n===t||1!==s.nodeType||!b(s).is(n));)1===s.nodeType&&a.push(s),s=s[i];return a},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:null|\d+)"/g,_t=new RegExp("<(?:"+ht+")[\\s/>]","i"),gt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,yt=/<tbody/i,wt=/<|&#?\w+;/,kt=/<(?:script|style|link)/i,jt=/^(?:checkbox|radio)$/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Dt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Et=ft(s),Tt=Et.appendChild(s.createElement("div"));Dt.optgroup=Dt.option,Dt.tbody=Dt.tfoot=Dt.colgroup=Dt.caption=Dt.thead,Dt.th=Dt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(i){b(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||b.filter(e,[i]).length>0)&&(t||1!==i.nodeType||b.cleanData(Ot(i)),i.parentNode&&(t&&b.contains(i.ownerDocument,i)&&Pt(Ot(i,"script")),i.parentNode.removeChild(i)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&b.cleanData(Ot(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var i=this[0]||{},n=0,a=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(mt,""):t;if(!("string"!=typeof e||kt.test(e)||!b.support.htmlSerialize&&_t.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Dt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;a>n;n++)i=this[n]||{},1===i.nodeType&&(b.cleanData(Ot(i,!1)),i.innerHTML=e);i=0}catch(s){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,i=this.parentNode;i&&(b(this).remove(),i.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=p.apply([],e);var a,s,r,o,l,c,d=0,u=this.length,f=this,h=u-1,m=e[0],_=b.isFunction(m);if(_||!(1>=u||"string"!=typeof m||b.support.checkClone)&&xt.test(m))return this.each(function(a){var s=f.eq(a);_&&(e[0]=m.call(this,a,i?s.html():t)),s.domManip(e,i,n)});if(u&&(c=b.buildFragment(e,this[0].ownerDocument,!1,this),a=c.firstChild,1===c.childNodes.length&&(c=a),a)){for(i=i&&b.nodeName(a,"tr"),o=b.map(Ot(c,"script"),Mt),r=o.length;u>d;d++)s=c,d!==h&&(s=b.clone(s,!0,!0),r&&b.merge(o,Ot(s,"script"))),n.call(i&&b.nodeName(this[d],"table")?zt(this[d],"tbody"):this[d],s,d);if(r)for(l=o[o.length-1].ownerDocument,b.map(o,At),d=0;r>d;d++)s=o[d],$t.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(l,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(St,"")));c=a=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var i,n=0,a=[],s=b(e),r=s.length-1;r>=n;n++)i=n===r?this:this.clone(!0),b(s[n])[t](i),f.apply(a,i.get());return this.pushStack(a)}}),b.extend({clone:function(e,t,i){var n,a,s,r,o,l=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!_t.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Tt.innerHTML=e.outerHTML,Tt.removeChild(s=Tt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(n=Ot(s),o=Ot(e),r=0;null!=(a=o[r]);++r)n[r]&&It(a,n[r]);if(t)if(i)for(o=o||Ot(e),n=n||Ot(s),r=0;null!=(a=o[r]);r++)Ft(a,n[r]);else Ft(e,s);return n=Ot(s,"script"),n.length>0&&Pt(n,!l&&Ot(e,"script")),n=o=a=null,s},buildFragment:function(e,t,i,n){for(var a,s,r,o,l,c,d,u=e.length,p=ft(t),f=[],h=0;u>h;h++)if(s=e[h],s||0===s)if("object"===b.type(s))b.merge(f,s.nodeType?[s]:s);else if(wt.test(s)){for(o=o||p.appendChild(t.createElement("div")),l=(bt.exec(s)||["",""])[1].toLowerCase(),d=Dt[l]||Dt._default,o.innerHTML=d[1]+s.replace(vt,"<$1></$2>")+d[2],a=d[0];a--;)o=o.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&f.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody)for(s="table"!==l||yt.test(s)?"<table>"!==d[1]||yt.test(s)?0:o:o.firstChild,a=s&&s.childNodes.length;a--;)b.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(b.merge(f,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=p.lastChild}else f.push(t.createTextNode(s));for(o&&p.removeChild(o),b.support.appendChecked||b.grep(Ot(f,"input"),Nt),h=0;s=f[h++];)if((!n||-1===b.inArray(s,n))&&(r=b.contains(s.ownerDocument,s),o=Ot(p.appendChild(s),"script"),r&&Pt(o),i))for(a=0;s=o[a++];)$t.test(s.type||"")&&i.push(s);return o=null,p},cleanData:function(e,t){for(var i,n,s,r,o=0,l=b.expando,c=b.cache,u=b.support.deleteExpando,p=b.event.special;null!=(i=e[o]);o++)if((t||b.acceptData(i))&&(s=i[l],r=s&&c[s])){if(r.events)for(n in r.events)p[n]?b.event.remove(i,n):b.removeEvent(i,n,r.handle);c[s]&&(delete c[s],u?delete i[l]:typeof i.removeAttribute!==a?i.removeAttribute(l):i[l]=null,d.push(s))}}});var Lt,Ht,Rt,qt=/alpha\([^)]*\)/i,Wt=/opacity\s*=\s*([^)]*)/,Bt=/^(top|right|bottom|left)$/,Yt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=new RegExp("^("+y+")(.*)$","i"),Xt=new RegExp("^("+y+")(?!px)[a-z%]+$","i"),Gt=new RegExp("^([+-])=("+y+")","i"),Kt={BODY:"block"},Zt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:0,fontWeight:400},Jt=["Top","Right","Bottom","Left"],ei=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,i){return b.access(this,function(e,i,n){var a,s,r={},o=0;if(b.isArray(i)){for(s=Ht(e),a=i.length;a>o;o++)r[i[o]]=b.css(e,i[o],!1,s);return r}return n!==t?b.style(e,i,n):b.css(e,i)},e,i,arguments.length>1)},show:function(){return ni(this,!0)},hide:function(){return ni(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:ii(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Rt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,l=b.camelCase(i),c=e.style;if(i=b.cssProps[l]||(b.cssProps[l]=ti(c,l)),o=b.cssHooks[i]||b.cssHooks[l],n===t)return o&&"get"in o&&(s=o.get(e,!1,a))!==t?s:c[i];if(r=typeof n,"string"===r&&(s=Gt.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(b.css(e,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||b.cssNumber[l]||(n+="px"),b.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),o&&"set"in o&&(n=o.set(e,n,a))===t)))try{c[i]=n}catch(d){}}},css:function(e,i,n,a){var s,r,o,l=b.camelCase(i);return i=b.cssProps[l]||(b.cssProps[l]=ti(e.style,l)),o=b.cssHooks[i]||b.cssHooks[l],o&&"get"in o&&(r=o.get(e,!0,n)),r===t&&(r=Rt(e,i,a)),"normal"===r&&i in Qt&&(r=Qt[i]),""===n||n?(s=parseFloat(r),n===!0||b.isNumeric(s)?s||0:r):r},swap:function(e,t,i,n){var a,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];a=i.apply(e,n||[]);for(s in t)e.style[s]=r[s];return a}}),e.getComputedStyle?(Ht=function(t){return e.getComputedStyle(t,null)},Rt=function(e,i,n){var a,s,r,o=n||Ht(e),l=o?o.getPropertyValue(i)||o[i]:t,c=e.style;return o&&(""!==l||b.contains(e.ownerDocument,e)||(l=b.style(e,i)),Xt.test(l)&&Ut.test(i)&&(a=c.width,s=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=o.width,c.width=a,c.minWidth=s,c.maxWidth=r)),l}):s.documentElement.currentStyle&&(Ht=function(e){return e.currentStyle},Rt=function(e,i,n){var a,s,r,o=n||Ht(e),l=o?o[i]:t,c=e.style;return null==l&&c&&c[i]&&(l=c[i]),Xt.test(l)&&!Bt.test(i)&&(a=c.left,s=e.runtimeStyle,r=s&&s.left,r&&(s.left=e.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=a,r&&(s.left=r)),""===l?"auto":l}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&Yt.test(b.css(e,"display"))?b.swap(e,Zt,function(){return ri(e,t,n)}):ri(e,t,n):void 0},set:function(e,i,n){var a=n&&Ht(e);return ai(e,i,n?si(e,t,n,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,a),a):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return Wt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(qt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=qt.test(s)?s.replace(qt,a):s+" "+a)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){return t?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):void 0}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,i){return i?(i=Rt(e,t),Xt.test(i)?b(e).position()[t]+"px":i):void 0}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];4>n;n++)a[e+Jt[n]+t]=s[n]||s[n-2]||s[0];return a}},Ut.test(e)||(b.cssHooks[e+t].set=ai)});var ci=/%20/g,di=/\[\]$/,ui=/\r?\n/g,pi=/^(?:submit|button|image|reset|file)$/i,fi=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&fi.test(this.nodeName)&&!pi.test(e)&&(this.checked||!jt.test(e))}).map(function(e,t){var i=b(this).val();return null==i?null:b.isArray(i)?b.map(i,function(e){return{name:t.name,value:e.replace(ui,"\r\n")}}):{name:t.name,value:i.replace(ui,"\r\n")}}).get()}}),b.param=function(e,i){var n,a=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(n in e)hi(n,e[n],i,s);return a.join("&").replace(ci,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mi,_i,gi=b.now(),vi=/\?/,bi=/#.*$/,yi=/([?&])_=[^&]*/,wi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ki=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ji=/^(?:GET|HEAD)$/,xi=/^\/\//,$i=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ci=b.fn.load,Si={},Di={},Ei="*/".concat("*");try{_i=r.href}catch(Ti){_i=s.createElement("a"),_i.href="",_i=_i.href}mi=$i.exec(_i.toLowerCase())||[],b.fn.load=function(e,i,n){if("string"!=typeof e&&Ci)return Ci.apply(this,arguments);var a,s,r,o=this,l=e.indexOf(" ");return l>=0&&(a=e.slice(l,e.length),e=e.slice(0,l)),b.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(r="POST"),o.length>0&&b.ajax({url:e,type:r,dataType:"html",data:i}).done(function(e){s=arguments,o.html(a?b("<div>").append(b.parseHTML(e)).find(a):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,i){b[i]=function(e,n,a,s){return b.isFunction(n)&&(s=s||a,a=n,n=t),b.ajax({url:e,type:i,dataType:s,data:n,success:a})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_i,type:"GET",isLocal:ki.test(mi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ei,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ai(Ai(e,b.ajaxSettings),t):Ai(b.ajaxSettings,e)
},ajaxPrefilter:zi(Si),ajaxTransport:zi(Di),ajax:function(e,i){function $(e,i,n,a){var d,g,v,w,k,x=i;2!==y&&(y=2,o&&clearTimeout(o),c=t,r=a||"",j.readyState=e>0?4:0,n&&(w=Pi(u,j,n)),e>=200&&300>e||304===e?(u.ifModified&&(k=j.getResponseHeader("Last-Modified"),k&&(b.lastModified[s]=k),k=j.getResponseHeader("etag"),k&&(b.etag[s]=k)),204===e?(d=!0,x="nocontent"):304===e?(d=!0,x="notmodified"):(d=Fi(u,w),x=d.state,g=d.data,v=d.error,d=!v)):(v=x,(e||!x)&&(x="error",0>e&&(e=0))),j.status=e,j.statusText=(i||x)+"",d?h.resolveWith(p,[g,x,j]):h.rejectWith(p,[j,x,v]),j.statusCode(_),_=t,l&&f.trigger(d?"ajaxSuccess":"ajaxError",[j,u,d?g:v]),m.fireWith(p,[j,x]),l&&(f.trigger("ajaxComplete",[j,u]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var n,a,s,r,o,l,c,d,u=b.ajaxSetup({},i),p=u.context||u,f=u.context&&(p.nodeType||p.jquery)?b(p):b.event,h=b.Deferred(),m=b.Callbacks("once memory"),_=u.statusCode||{},g={},v={},y=0,k="canceled",j={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!d)for(d={};t=wi.exec(r);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=v[i]=v[i]||e,g[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)_[t]=[_[t],e[t]];else j.always(e[j.status]);return this},abort:function(e){var t=e||k;return c&&c.abort(t),$(0,t),this}};if(h.promise(j).complete=m.add,j.success=j.done,j.error=j.fail,u.url=((e||u.url||_i)+"").replace(bi,"").replace(xi,mi[1]+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=b.trim(u.dataType||"*").toLowerCase().match(w)||[""],null==u.crossDomain&&(n=$i.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===mi[1]&&n[2]===mi[2]&&(n[3]||("http:"===n[1]?80:443))==(mi[3]||("http:"===mi[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=b.param(u.data,u.traditional)),Mi(Si,u,i,j),2===y)return j;l=u.global,l&&0===b.active++&&b.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!ji.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(vi.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=yi.test(s)?s.replace(yi,"$1_="+gi++):s+(vi.test(s)?"&":"?")+"_="+gi++)),u.ifModified&&(b.lastModified[s]&&j.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&j.setRequestHeader("If-None-Match",b.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||i.contentType)&&j.setRequestHeader("Content-Type",u.contentType),j.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Ei+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)j.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(p,j,u)===!1||2===y))return j.abort();k="abort";for(a in{success:1,error:1,complete:1})j[a](u[a]);if(c=Mi(Di,u,i,j)){j.readyState=1,l&&f.trigger("ajaxSend",[j,u]),u.async&&u.timeout>0&&(o=setTimeout(function(){j.abort("timeout")},u.timeout));try{y=1,c.send(g,$)}catch(x){if(!(2>y))throw x;$(-1,x)}}else $(-1,"No Transport");return j},getScript:function(e,i){return b.get(e,t,i,"script")},getJSON:function(e,t,i){return b.get(e,t,i,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=s.head||b("head")[0]||s.documentElement;return{send:function(t,a){i=s.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||a(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Ii=[],Oi=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ii.pop()||b.expando+"_"+gi++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(i,n,a){var s,r,o,l=i.jsonp!==!1&&(Oi.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oi.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(s=i.jsonpCallback=b.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Oi,"$1"+s):i.jsonp!==!1&&(i.url+=(vi.test(i.url)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return o||b.error(s+" was not called"),o[0]},i.dataTypes[0]="json",r=e[s],e[s]=function(){o=arguments},a.always(function(){e[s]=r,i[s]&&(i.jsonpCallback=n.jsonpCallback,Ii.push(s)),o&&b.isFunction(r)&&r(o[0]),o=r=t}),"script"):void 0});var Ni,Li,Hi=0,Ri=e.ActiveXObject&&function(){var e;for(e in Ni)Ni[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&qi()||Wi()}:qi,Li=b.ajaxSettings.xhr(),b.support.cors=!!Li&&"withCredentials"in Li,Li=b.support.ajax=!!Li,Li&&b.ajaxTransport(function(i){if(!i.crossDomain||b.support.cors){var n;return{send:function(a,s){var r,o,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(o in i.xhrFields)l[o]=i.xhrFields[o];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");try{for(o in a)l.setRequestHeader(o,a[o])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,a){var o,c,d,u;try{if(n&&(a||4===l.readyState))if(n=t,r&&(l.onreadystatechange=b.noop,Ri&&delete Ni[r]),a)4!==l.readyState&&l.abort();else{u={},o=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{d=l.statusText}catch(p){d=""}o||!i.isLocal||i.crossDomain?1223===o&&(o=204):o=u.text?200:404}}catch(f){a||s(-1,f)}u&&s(o,d,u,c)},i.async?4===l.readyState?setTimeout(n):(r=++Hi,Ri&&(Ni||(Ni={},b(e).unload(Ri)),Ni[r]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var Bi,Yi,Ui=/^(?:toggle|show|hide)$/,Vi=new RegExp("^(?:([+-])=|)("+y+")([a-z%]*)$","i"),Xi=/queueHooks$/,Gi=[tn],Ki={"*":[function(e,t){var i,n,a=this.createTween(e,t),s=Vi.exec(t),r=a.cur(),o=+r||0,l=1,c=20;if(s){if(i=+s[2],n=s[3]||(b.cssNumber[e]?"":"px"),"px"!==n&&o){o=b.css(a.elem,e,!0)||i||1;do l=l||".5",o/=l,b.style(a.elem,e,o+n);while(l!==(l=a.cur()/r)&&1!==l&&--c)}a.unit=n,a.start=o,a.end=s[1]?o+(s[1]+1)*i:i}return a}]};b.Animation=b.extend(Ji,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;a>n;n++)i=e[n],Ki[i]=Ki[i]||[],Ki[i].unshift(t)},prefilter:function(e,t){t?Gi.unshift(e):Gi.push(e)}}),b.Tween=nn,nn.prototype={constructor:nn,init:function(e,t,i,n,a,s){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(b.cssNumber[i]?"":"px")},cur:function(){var e=nn.propHooks[this.prop];return e&&e.get?e.get(this):nn.propHooks._default.get(this)},run:function(e){var t,i=nn.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):nn.propHooks._default.set(this),this}},nn.prototype.init.prototype=nn.prototype,nn.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},nn.propHooks.scrollTop=nn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var i=b.fn[t];b.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(an(t,!0),e,n,a)}}),b.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ii).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=b.isEmptyObject(e),s=b.speed(t,i,n),r=function(){var t=Ji(this,b.extend({},e),s);r.finish=function(){t.stop(!0)},(a||b._data(this,"finish"))&&t.stop(!0)};return r.finish=r,a||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(e,i,n){var a=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=b.timers,r=b._data(this);if(i)r[i]&&r[i].stop&&a(r[i]);else for(i in r)r[i]&&r[i].stop&&Xi.test(i)&&a(r[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=b._data(this),n=i[e+"queue"],a=i[e+"queueHooks"],s=b.timers,r=n?n.length:0;for(i.finish=!0,b.queue(this,e,[]),a&&a.cur&&a.cur.finish&&a.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),b.each({slideDown:an("show"),slideUp:an("hide"),slideToggle:an("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),b.speed=function(e,t,i){var n=e&&"object"==typeof e?b.extend({},e):{complete:i||!i&&t||b.isFunction(e)&&e,duration:e,easing:i&&t||t&&!b.isFunction(t)&&t};return n.duration=b.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in b.fx.speeds?b.fx.speeds[n.duration]:b.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){b.isFunction(n.old)&&n.old.call(this),n.queue&&b.dequeue(this,n.queue)},n},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=nn.prototype.init,b.fx.tick=function(){var e,i=b.timers,n=0;for(Bi=b.now();i.length>n;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||b.fx.stop(),Bi=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Yi||(Yi=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Yi),Yi=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return i=o.documentElement,b.contains(i,r)?(typeof r.getBoundingClientRect!==a&&(s=r.getBoundingClientRect()),n=sn(o),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},b.offset={setOffset:function(e,t,i){var n=b.css(e,"position");"static"===n&&(e.style.position="relative");var u,p,a=b(e),s=a.offset(),r=b.css(e,"top"),o=b.css(e,"left"),l=("absolute"===n||"fixed"===n)&&b.inArray("auto",[r,o])>-1,c={},d={};l?(d=a.position(),u=d.top,p=d.left):(u=parseFloat(r)||0,p=parseFloat(o)||0),b.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(c.top=t.top-s.top+u),null!=t.left&&(c.left=t.left-s.left+p),"using"in t?t.using.call(e,c):a.css(c)}},b.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===b.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(i=e.offset()),i.top+=b.css(e[0],"borderTopWidth",!0),i.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-b.css(n,"marginTop",!0),left:t.left-i.left-b.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s.documentElement;e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position");)e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);b.fn[e]=function(a){return b.access(this,function(e,a,s){var r=sn(e);return s===t?r?i in r?r[i]:r.document.documentElement[a]:e[a]:(r?r.scrollTo(n?b(r).scrollLeft():s,n?s:b(r).scrollTop()):e[a]=s,void 0)},e,a,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,i){b.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,a){b.fn[a]=function(a,s){var r=arguments.length&&(n||"boolean"!=typeof a),o=n||(a===!0||s===!0?"margin":"border");return b.access(this,function(i,n,a){var s;return b.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+e],s["scroll"+e],i.body["offset"+e],s["offset"+e],s["client"+e])):a===t?b.css(i,n,o):b.style(i,n,a,o)},i,r?a:t,r,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(e,t){function a(t,i){var n,a,r,o=t.nodeName.toLowerCase();return"area"===o?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(r=e("img[usemap=#"+a+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var i=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var a,s,n=e(this[0]);n.length&&n[0]!==document;){if(a=n.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return a(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),n=isNaN(i);return(n||i>=0)&&a(t,!n)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(s,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(s,o(this,t,!0,i)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i){var n,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0?!0:(t[n]=1,a=t[n]>0,t[n]=0,a)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,a,s,r){return e.ui.isOverAxis(t,n,s)&&e.ui.isOverAxis(i,a,r)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(s){}a(t)},e.widget=function(t,i,n){var a,s,r,o,l=t.split(".")[0];t=t.split(".")[1],a=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},s=e[l][t],r=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new r(e,t)},e.extend(r,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(n,function(t,a){e.isFunction(a)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var s,t=this._super,i=this._superApply;return this._super=e,this._superApply=n,s=a.apply(this,arguments),this._super=t,this._superApply=i,s}}())}),r.prototype=e.widget.extend(o,{widgetEventPrefix:s?o.widgetEventPrefix:t},n,{constructor:r,namespace:l,widgetName:t,widgetBaseClass:a,widgetFullName:a}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var o,l,a=n.call(arguments,1),s=0,r=a.length;r>s;s++)for(o in a[s])l=a[s][o],a[s].hasOwnProperty(o)&&l!==t&&(i[o]=e.isPlainObject(l)?e.isPlainObject(i[o])?e.widget.extend({},i[o],l):e.widget.extend({},l):l);return i},e.widget.bridge=function(i,a){var s=a.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,l=n.call(arguments,1),c=this;return r=!o&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,o?this.each(function(){var n,a=e.data(this,s);return a?e.isFunction(a[r])&&"_"!==r.charAt(0)?(n=a[r].apply(a,l),n!==a&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(r||{})._init():e.data(this,s,new a(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,r,o,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(r=a[i]=e.widget.extend({},this.options[i]),o=0;s.length-1>o;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(i=s.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var a,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,function(n,r){function o(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?a.delegate(d,c,o):i.bind(c,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,s,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,s){"string"==typeof a&&(a={effect:a});var r,o=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),r&&e.effects&&(e.effects.effect[o]||e.uiBackCompat!==!1&&e.effects[o])?n[t](a):o!==t&&n[o]?n[o](a.duration,a.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,a=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return a&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],a=!1;n&&(n=n.parentNode);)n==document&&(a=!0);if(!a&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;i.offset();var s="hidden"!=e(n).css("overflow");this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName),s=t.pageX,r=t.pageY;if(this.originalPosition){var o;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();o=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else o=this.containment;o[0]>t.pageX-this.offset.click.left&&(s=o[0]+this.offset.click.left),o[1]>t.pageY-this.offset.click.top&&(r=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(s=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(r=o[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;r=o?o[1]>c-this.offset.click.top||c-this.offset.click.top>o[3]?o[1]>c-this.offset.click.top?c+i.grid[1]:c-i.grid[1]:c:c;var d=i.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;s=o?o[0]>d-this.offset.click.left||d-this.offset.click.left>o[2]?o[0]>d-this.offset.click.left?d+i.grid[0]:d-i.grid[0]:d:d}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),a=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(a.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("draggable"),a=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,i){var n=e(this).data("draggable"),a=this;e.each(n.sortables,function(){var r=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var n=e("body"),a=e(this).data("draggable").options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(){var n=e(this).data("draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),a=e(this).data("draggable").options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var n=e(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(t){var n=e(this).data("draggable"),a=n.options,s=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(a.axis&&"x"==a.axis||(a.scrollSensitivity>n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY?n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop+a.scrollSpeed:a.scrollSensitivity>t.pageY-n.overflowOffset.top&&(n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"==a.axis||(a.scrollSensitivity>n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX?n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft+a.scrollSpeed:a.scrollSensitivity>t.pageX-n.overflowOffset.left&&(n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"==a.axis||(a.scrollSensitivity>t.pageY-e(document).scrollTop()?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):a.scrollSensitivity>e(window).height()-(t.pageY-e(document).scrollTop())&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"==a.axis||(a.scrollSensitivity>t.pageX-e(document).scrollLeft()?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):a.scrollSensitivity>e(window).width()-(t.pageX-e(document).scrollLeft())&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var n=e(this).data("draggable"),a=n.options;n.snapElements=[],e(a.snap.constructor!=String?a.snap.items||":data(draggable)":a.snap).each(function(){var t=e(this),i=t.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),a=n.options,s=a.snapTolerance,r=i.offset.left,o=r+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,d=n.snapElements.length-1;d>=0;d--){var u=n.snapElements[d].left,p=u+n.snapElements[d].width,f=n.snapElements[d].top,h=f+n.snapElements[d].height;if(r>u-s&&p+s>r&&l>f-s&&h+s>l||r>u-s&&p+s>r&&c>f-s&&h+s>c||o>u-s&&p+s>o&&l>f-s&&h+s>l||o>u-s&&p+s>o&&c>f-s&&h+s>c){if("inner"!=a.snapMode){var m=s>=Math.abs(f-c),_=s>=Math.abs(h-l),g=s>=Math.abs(u-o),v=s>=Math.abs(p-r);m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),_&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top-n.margins.top),g&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:p}).left-n.margins.left)}var b=m||_||g||v;if("outer"!=a.snapMode){var m=s>=Math.abs(f-l),_=s>=Math.abs(h-c),g=s>=Math.abs(u-r),v=s>=Math.abs(p-o);m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),_&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:p-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[d].snapping&&(m||_||g||v||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=m||_||g||v||b}else n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var n=e(this).data("draggable").options,a=e.makeArray(e(n.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(a.length){var s=parseInt(a[0].style.zIndex)||0;e(a).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+a.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),a=e(this).data("draggable").options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;t.length>i;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var a=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(a=!0,!1):void 0}),a?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left,s=a+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,o=r+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,d=i.offset.top,u=d+i.proportions.height;switch(n){case"fit":return a>=l&&c>=s&&r>=d&&u>=o;case"intersect":return a+t.helperProportions.width/2>l&&c>s-t.helperProportions.width/2&&r+t.helperProportions.height/2>d&&u>o-t.helperProportions.height/2;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,h=e.ui.isOver(f,p,d,l,i.proportions.height,i.proportions.width);return h;case"touch":return(r>=d&&u>=r||o>=d&&u>=o||d>r&&o>u)&&(a>=l&&c>=a||s>=l&&c>=s||l>a&&s>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var r=0;n.length>r;r++)if(!(n[r].options.disabled||t&&!n[r].accept.call(n[r].element[0],t.currentItem||t.element))){for(var o=0;s.length>o;o++)if(s[o]==n[r].element[0]){n[r].proportions.height=0;continue e}n[r].visible="none"!=n[r].element.css("display"),n[r].visible&&("mousedown"==a&&n[r]._activate.call(n[r],i),n[r].offset=n[r].element.offset(),n[r].proportions={width:n[r].element[0].offsetWidth,height:n[r].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),a=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(a){var s;if(this.options.greedy){var r=this.options.scope,o=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===r});o.length&&(s=e.data(o[0],"droppable"),s.greedyChild="isover"==a?1:0)}s&&"isover"==a&&(s.isover=0,s.isout=1,s._out.call(s,i)),this[a]=1,this["isout"==a?"isover":"isout"]=0,this["isover"==a?"_over":"_out"].call(this,i),s&&"isout"==a&&(s.isout=0,s.isover=1,s._over.call(s,i))}}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var a=null;if(e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==n?(a=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")==n&&(a=e(t.target)),!a)return!1;if(this.options.handle&&!i){var r=!1;if(e(this.options.handle,a).find("*").andSelf().each(function(){this==t.target&&(r=!0)}),!r)return!1}return this.currentItem=a,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",a.cursor)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(i.scrollSensitivity>this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:i.scrollSensitivity>t.pageY-this.overflowOffset.top&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),i.scrollSensitivity>this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:i.scrollSensitivity>t.pageX-this.overflowOffset.left&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(i.scrollSensitivity>t.pageY-e(document).scrollTop()?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):i.scrollSensitivity>e(window).height()-(t.pageY-e(document).scrollTop())&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),i.scrollSensitivity>t.pageX-e(document).scrollLeft()?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):i.scrollSensitivity>e(window).width()-(t.pageX-e(document).scrollLeft())&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var a=this.items.length-1;a>=0;a--){var s=this.items[a],r=s.item[0],o=this._intersectsWithPointer(s);if(o&&s.instance===this.currentContainer&&r!=this.currentItem[0]&&this.placeholder[1==o?"next":"prev"]()[0]!=r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1==o?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,a=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,s=e.left,r=s+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,d=this.offset.click.left,u=n+c>o&&l>n+c&&t+d>s&&r>t+d;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:t+this.helperProportions.width/2>s&&r>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>o&&l>a-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=i&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return a?this.floating?r&&"right"==r||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&n||"left"==s&&!n:a&&("down"==a&&i||"up"==a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],a=this._connectWith();if(a&&t)for(var s=a.length-1;s>=0;s--)for(var r=e(a[s]),o=r.length-1;o>=0;o--){var l=e.data(r[o],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=n.length-1;s>=0;s--)n[s][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],a=this._connectWith();if(a&&this.ready)for(var s=a.length-1;s>=0;s--)for(var r=e(a[s]),o=r.length-1;o>=0;o--){var l=e.data(r[o],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var s=n.length-1;s>=0;s--)for(var c=n[s][1],d=n[s][0],o=0,u=d.length;u>o;o++){var p=e(d[o]);p.data(this.widgetName+"-item",c),i.push({item:p,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var a=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=a.outerWidth(),n.height=a.outerHeight());var s=a.offset();n.left=s.left,n.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var s=this.containers[i].element.offset();this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var i=t.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,a){(!n||i.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(i&&e.contains(this.containers[a].element[0],i.element[0]))continue;i=this.containers[a],n=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;
else{for(var s=1e4,r=null,o=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[o]+this.offset.click[o],d=this.items.length-1;d>=0;d--)if(e.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!=this.currentItem[0]){var u=this.items[d].item.offset()[o],p=!1;Math.abs(u-c)>Math.abs(u+this.items[d][l]-c)&&(p=!0,u+=this.items[d][l]),s>Math.abs(u-c)&&(s=Math.abs(u-c),r=this.items[d],this.direction=p?"up":"down")}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),a="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(a?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(a?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=t.pageX,r=t.pageY;if(this.originalPosition&&(this.containment&&(this.containment[0]>t.pageX-this.offset.click.left&&(s=this.containment[0]+this.offset.click.left),this.containment[1]>t.pageY-this.offset.click.top&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid)){var o=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=this.containment?this.containment[1]>o-this.offset.click.top||o-this.offset.click.top>this.containment[3]?this.containment[1]>o-this.offset.click.top?o+i.grid[1]:o-i.grid[1]:o:o;var l=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0];s=this.containment?this.containment[0]>l-this.offset.click.left||l-this.offset.click.left>this.containment[2]?this.containment[0]>l-this.offset.click.left?l+i.grid[0]:l-i.grid[0]:l:l}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a==this.counter&&this.refreshPositions(!n)})},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var a in this._storedCSS)("auto"==this._storedCSS[a]||"static"==this._storedCSS[a])&&(this._storedCSS[a]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var a=this.containers.length-1;a>=0;a--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var a=0;n.length>a;a++)n[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var a=0;n.length>a;a++)n[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var a=this._get(t,"showOn");if(("focus"==a||"both"==a)&&e.focus(this._showDatepicker),"button"==a||"both"==a){var s=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?s:$("<img/>").attr({src:r,alt:s,title:s}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;e.length>n;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,a){var s=this._dialogInst;if(!s){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,!this._pos){var o=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[o/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var a=t.children("."+this._inlineClass);a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var a=t||{};if("string"==typeof t&&(a={},a[t]=i),n){this._curInst==n&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max");extendRemove(n.settings,a),null!==r&&a.dateFormat!==undefined&&a.minDate===undefined&&(n.settings.minDate=this._formatDate(n,r)),null!==o&&a.dateFormat!==undefined&&a.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,o)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,s),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var a=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);a[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,a[0]);var s=$.datepicker._get(t,"onSelect");if(s){var r=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[r,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var a=!1;$(e).parents().each(function(){return a|="fixed"==$(this).css("position"),!a});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,a),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":a?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var r=$.datepicker._get(t,"showAnim"),o=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[r]||$.effects[r])?t.dpDiv.show(r,$.datepicker._get(t,"showOptions"),o,l):t.dpDiv[r||"show"](r?o:null,l),r&&o||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),a=n[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var r=e.yearshtml;setTimeout(function(){r===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-s:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>o&&o>n?Math.abs(t.left+n-o):0),t.top-=Math.min(t.top,t.top+a>l&&l>a?Math.abs(a+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),a=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,a):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,t+("M"==i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),a=this._getInst(n[0]);a["selected"+("M"==i?"Month":"Year")]=a["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,t,i,n){var a=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(a[0])){var s=this._getInst(a[0]);s.selectedDay=s.currentDay=$("a",n).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var a=this._get(n,"onSelect");a?a.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),a=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(a)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,u=-1,p=!1,f=function(t){var i=e.length>v+1&&e.charAt(v+1)==t;return i&&v++,i},h=function(e){var i=f(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,a=new RegExp("^\\d{1,"+n+"}"),s=t.substring(g).match(a);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},m=function(e,i,n){var a=$.map(f(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;if($.each(a,function(e,i){var n=i[1];return t.substr(g,n.length).toLowerCase()==n.toLowerCase()?(s=i[0],g+=n.length,!1):void 0}),-1!=s)return s+1;throw"Unknown name at position "+g},_=function(){if(t.charAt(g)!=e.charAt(v))throw"Unexpected literal at position "+g;g++},g=0,v=0;e.length>v;v++)if(p)"'"!=e.charAt(v)||f("'")?_():p=!1;else switch(e.charAt(v)){case"d":d=h("d");break;case"D":m("D",a,s);break;case"o":u=h("o");break;case"m":c=h("m");break;case"M":c=m("M",r,o);break;case"y":l=h("y");break;case"@":var b=new Date(h("@"));l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"!":var b=new Date((h("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"'":f("'")?_():p=!0;break;default:_()}if(t.length>g){var y=t.substr(g);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),u>-1)for(c=1,d=u;;){var w=this._getDaysInMonth(l,c-1);
if(w>=d)break;c++,d-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,d));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=d)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,o=function(t){var i=e.length>p+1&&e.charAt(p+1)==t;return i&&p++,i},l=function(e,t,i){var n=""+t;if(o(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return o(e)?n[t]:i[t]},d="",u=!1;if(t)for(var p=0;e.length>p;p++)if(u)"'"!=e.charAt(p)||o("'")?d+=e.charAt(p):u=!1;else switch(e.charAt(p)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),s,r);break;case"y":d+=o("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":o("'")?d+="'":u=!0;break;default:d+=e.charAt(p)}return d},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=e.length>a+1&&e.charAt(a+1)==t;return i&&a++,i},a=0;e.length>a;a++)if(i)"'"!=e.charAt(a)||n("'")?t+=e.charAt(a):i=!1;else switch(e.charAt(a)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(a)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var a,s,i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null;a=s=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{a=this.parseDate(i,n,r)||s}catch(o){this.log(o),n=t?"":n}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=n?a.getDate():0,e.currentMonth=n?a.getMonth():0,e.currentYear=n?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),s=n.getMonth(),r=n.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=o.exec(t);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(a,s))}l=o.exec(t)}return new Date(a,s,r)},s=null==t||""===t?i:"string"==typeof t?a(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return s=s&&"Invalid Date"==s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),a==e.selectedMonth&&s==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),a=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),o=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=r[0]||1!=r[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),f=e.drawMonth-o,h=e.drawYear;if(0>f&&(f+=12,h--),p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-r[0]*r[1]+1,p.getDate()));for(m=u&&u>m?u:m;this._daylightSavingAdjust(new Date(h,f,1))>m;)f--,0>f&&(f=11,h--)}e.drawMonth=f,e.drawYear=h;var _=this._get(e,"prevText");_=s?this.formatDate(_,this._daylightSavingAdjust(new Date(h,f-l,1)),this._getFormatConfig(e)):_;var g=this._canAdjustMonth(e,-1,h,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+_+"</span></a>":a?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+_+"</span></a>",v=this._get(e,"nextText");v=s?this.formatDate(v,this._daylightSavingAdjust(new Date(h,f+l,1)),this._getFormatConfig(e)):v;var b=this._canAdjustMonth(e,1,h,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+v+"</span></a>":a?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+v+"</span></a>",y=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?d:t;y=s?this.formatDate(y,w,this._getFormatConfig(e)):y;var k=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",j=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?k:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(i?"":k)+"</div>":"",x=parseInt(this._get(e,"firstDay"),10);x=isNaN(x)?0:x;var C=this._get(e,"showWeek"),S=this._get(e,"dayNames");this._get(e,"dayNamesShort");var E=this._get(e,"dayNamesMin"),T=this._get(e,"monthNames"),z=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),A=this._get(e,"showOtherMonths"),P=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var I=this._getDefaultDate(e),O="",N=0;r[0]>N;N++){var L="";this.maxRows=4;for(var H=0;r[1]>H;H++){var R=this._daylightSavingAdjust(new Date(h,f,e.selectedDay)),q=" ui-corner-all",W="";if(c){if(W+='<div class="ui-datepicker-group',r[1]>1)switch(H){case 0:W+=" ui-datepicker-group-first",q=" ui-corner-"+(i?"right":"left");break;case r[1]-1:W+=" ui-datepicker-group-last",q=" ui-corner-"+(i?"left":"right");break;default:W+=" ui-datepicker-group-middle",q=""}W+='">'}W+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+q+'">'+(/all|left/.test(q)&&0==N?i?b:g:"")+(/all|right/.test(q)&&0==N?i?g:b:"")+this._generateMonthYearHeader(e,f,h,u,p,N>0||H>0,T,z)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var B=C?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",Y=0;7>Y;Y++){var U=(Y+x)%7;B+="<th"+((Y+x+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+S[U]+'">'+E[U]+"</span></th>"}W+=B+"</tr></thead><tbody>";var V=this._getDaysInMonth(h,f);h==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var X=(this._getFirstDayOfMonth(h,f)-x+7)%7,G=Math.ceil((X+V)/7),K=c?this.maxRows>G?this.maxRows:G:G;this.maxRows=K;for(var Z=this._daylightSavingAdjust(new Date(h,f,1-X)),Q=0;K>Q;Q++){W+="<tr>";for(var J=C?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Z)+"</td>":"",Y=0;7>Y;Y++){var et=M?M.apply(e.input?e.input[0]:null,[Z]):[!0,""],tt=Z.getMonth()!=f,it=tt&&!P||!et[0]||u&&u>Z||p&&Z>p;J+='<td class="'+((Y+x+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(Z.getTime()==R.getTime()&&f==e.selectedMonth&&e._keyEvent||I.getTime()==Z.getTime()&&I.getTime()==R.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!A?"":" "+et[1]+(Z.getTime()==d.getTime()?" "+this._currentClass:"")+(Z.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(tt&&!A||!et[2]?"":' title="'+et[2]+'"')+(it?"":' data-handler="selectDay" data-event="click" data-month="'+Z.getMonth()+'" data-year="'+Z.getFullYear()+'"')+">"+(tt&&!A?"&#xa0;":it?'<span class="ui-state-default">'+Z.getDate()+"</span>":'<a class="ui-state-default'+(Z.getTime()==t.getTime()?" ui-state-highlight":"")+(Z.getTime()==d.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+Z.getDate()+"</a>")+"</td>",Z.setDate(Z.getDate()+1),Z=this._daylightSavingAdjust(Z)}W+=J+"</tr>"}f++,f>11&&(f=0,h++),W+="</tbody></table>"+(c?"</div>"+(r[0]>0&&H==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),L+=W}O+=L}return O+=j+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,O},_generateMonthYearHeader:function(e,t,i,n,a,s,r,o){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',p="";if(s||!l)p+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var f=n&&n.getFullYear()==i,h=a&&a.getFullYear()==i;p+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=n.getMonth())&&(!h||a.getMonth()>=m)&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+o[m]+"</option>");p+="</select>"}if(d||(u+=p+(!s&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var _=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),v=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=v(_[0]),y=Math.max(b,v(_[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,y=a?Math.min(y,a.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';y>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),d&&(u+=(!s&&l&&c?"":"&#xa0;")+p),u+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),a=e.drawMonth+("M"==i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return a=n&&a>n?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(0>t?t:a[0]*a[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||n.getTime()>=t.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),jQuery(function(e){e.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},e.datepicker.setDefaults(e.datepicker.regional["zh-CN"])}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var a=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function n(t){return this.each(function(){var n=e(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof t&&a[t].call(n)})}var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.2.0",i.prototype.close=function(t){function s(){a.detach().trigger("closed.bs.alert").remove()}var i=e(this),n=i.attr("data-target");n||(n=i.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var a=e(n);t&&t.preventDefault(),a.length||(a=i.hasClass("alert")?i:i.parent()),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",s).emulateTransitionEnd(150):s())};var a=e.fn.alert;e.fn.alert=n,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=a,this},e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.button"),s="object"==typeof i&&i;a||n.data("bs.button",a=new t(this,s)),"toggle"==i?a.toggle():i&&a.setState(i)})}var t=function(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.isLoading=!1};t.VERSION="3.2.0",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var i="disabled",n=this.$element,a=n.is("input")?"val":"html",s=n.data();t+="Text",null==s.resetText&&n.data("resetText",n[a]()),n[a](null==s[t]?this.options[t]:s[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=i,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),i.call(n,"toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.carousel"),s=e.extend({},t.DEFAULTS,n.data(),"object"==typeof i&&i),r="string"==typeof i?i:s.slide;a||n.data("bs.carousel",a=new t(this,s)),"number"==typeof i?a.to(i):r?a[r]():s.interval&&a.pause().cycle()})}var t=function(t,i){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.2.0",t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.to=function(t){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,i){var n=this.$element.find(".item.active"),a=i||n[t](),s=this.interval,r="next"==t?"left":"right",o="next"==t?"first":"last",l=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[o]()}if(a.hasClass("active"))return this.sliding=!1;var c=a[0],d=e.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(a)]);u&&u.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,n.addClass(r),a.addClass(r),n.one("bsTransitionEnd",function(){a.removeClass([t,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=i,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,a=e(this),s=e(a.attr("data-target")||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=e.extend({},s.data(),a.data()),o=a.attr("data-slide-to");o&&(r.interval=!1),i.call(s,r),o&&s.data("bs.carousel").to(o),t.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.collapse"),s=e.extend({},t.DEFAULTS,n.data(),"object"==typeof i&&i);!a&&s.toggle&&"show"==i&&(i=!i),a||n.data("bs.collapse",a=new t(this,s)),"string"==typeof i&&a[i]()})}var t=function(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.VERSION="3.2.0",t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var a=n.data("bs.collapse");if(a&&a.transitioning)return;i.call(n,"hide"),a||n.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var o=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(350)[s](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(350),void 0):n.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var n,a=e(this),s=a.attr("data-target")||t.preventDefault()||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(s),o=r.data("bs.collapse"),l=o?"toggle":a.data(),c=a.attr("data-parent"),d=c&&e(c);o&&o.transitioning||(d&&d.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(a).addClass("collapsed"),a[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),i.call(r,l)})}(jQuery),+function(e){"use strict";function a(n){n&&3===n.which||(e(t).remove(),e(i).each(function(){var t=s(e(this)),i={relatedTarget:this};t.hasClass("open")&&(t.trigger(n=e.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||t.removeClass("open").trigger("hidden.bs.dropdown",i))}))}function s(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function r(t){return this.each(function(){var i=e(this),a=i.data("bs.dropdown");a||i.data("bs.dropdown",a=new n(this)),"string"==typeof t&&a[t].call(i)})}var t=".dropdown-backdrop",i='[data-toggle="dropdown"]',n=function(t){e(t).on("click.bs.dropdown",this.toggle)};n.VERSION="3.2.0",n.prototype.toggle=function(t){var i=e(this);if(!i.is(".disabled, :disabled")){var n=s(i),r=n.hasClass("open");if(a(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",a);var o={relatedTarget:this};if(n.trigger(t=e.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;i.trigger("focus"),n.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},n.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var a=s(n),r=a.hasClass("open");if(!r||r&&27==t.keyCode)return 27==t.which&&a.find(i).trigger("focus"),n.trigger("click");var o=" li:not(.divider):visible a",l=a.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&l.length-1>c&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i+', [role="menu"], [role="listbox"]',n.prototype.keydown)}(jQuery),+function(e){"use strict";function i(i,n){return this.each(function(){var a=e(this),s=a.data("bs.modal"),r=e.extend({},t.DEFAULTS,a.data(),"object"==typeof i&&i);s||a.data("bs.modal",s=new t(this,r)),"string"==typeof i?s[i](n):r.show&&s.show(n)})}var t=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.2.0",t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(t){var i=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else t&&t()},t.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=i,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),a=n.attr("href"),s=e(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},s.data(),n.data());n.is("a")&&t.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),i.call(s,r,this)})}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.tooltip"),s="object"==typeof i&&i;(a||"destroy"!=i)&&(a||n.data("bs.tooltip",a=new t(this,s)),"string"==typeof i&&a[i]())
})}var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.VERSION="3.2.0",t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,i,n){this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var r=a[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var o="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this,a=this.tip(),s=this.getUID(this.type);this.setContent(),a.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&a.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,l=o.test(r);l&&(r=r.replace(o,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var c=this.getPosition(),d=a[0].offsetWidth,u=a[0].offsetHeight;if(l){var p=r,f=this.$element.parent(),h=this.getPosition(f);r="bottom"==r&&c.top+c.height+u-h.scroll>h.height?"top":"top"==r&&0>c.top-h.scroll-u?"bottom":"right"==r&&c.right+d>h.width?"left":"left"==r&&h.left>c.left-d?"right":r,a.removeClass(p).addClass(r)}var m=this.getCalculatedOffset(r,c,d,u);this.applyPlacement(m,r);var _=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",_).emulateTransitionEnd(150):_()}},t.prototype.applyPlacement=function(t,i){var n=this.tip(),a=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(o)&&(o=0),t.top=t.top+r,t.left=t.left+o,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=s&&(t.top=t.top+s-c);var d=this.getViewportAdjustedDelta(i,t,l,c);d.left?t.left+=d.left:t.top+=d.top;var u=d.left?2*d.left-a+l:2*d.top-s+c,p=d.left?"left":"top",f=d.left?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(u,n[0][f],p)},t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function a(){"in"!=t.hoverState&&i.detach(),t.$element.trigger("hidden.bs."+t.type)}var t=this,i=this.tip(),n=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(150):a(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName;return e.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:n?e(window).width():t.outerWidth(),height:n?e(window).height():t.outerHeight()},n?{top:0,left:0}:t.offset())},t.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-s-r.scroll,l=t.top+s-r.scroll+n;r.top>o?a.top=r.top-o:l>r.top+r.height&&(a.top=r.top+r.height-l)}else{var c=t.left-s,d=t.left+s+i;r.left>c?a.left=r.left-c:d>r.width&&(a.left=r.left+r.width-d)}return a},t.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},t.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=i,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.popover"),s="object"==typeof i&&i;(a||"destroy"!=i)&&(a||n.data("bs.popover",a=new t(this,s)),"string"==typeof i&&a[i]())})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.2.0",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=i,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(i,n){var a=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(i).is("body")?e(window):e(i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),a=n.data("bs.scrollspy"),s="object"==typeof i&&i;a||n.data("bs.scrollspy",a=new t(this,s)),"string"==typeof i&&a[i]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",i=0;e.isWindow(this.$scrollElement[0])||(t="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=e(this),a=n.data("target")||n.attr("href"),s=/^#./.test(a)&&e(a);return s&&s.length&&s.is(":visible")&&[[s[t]().top+i,a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var r,e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),i=this.options.offset+t-this.$scrollElement.height(),n=this.offsets,a=this.targets,s=this.activeTarget;if(this.scrollHeight!=t&&this.refresh(),e>=i)return s!=(r=a[a.length-1])&&this.activate(r);if(s&&n[0]>=e)return s!=(r=a[0])&&this.activate(r);for(r=n.length;r--;)s!=a[r]&&e>=n[r]&&(!n[r+1]||n[r+1]>=e)&&this.activate(a[r])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.tab");a||n.data("bs.tab",a=new t(this)),"string"==typeof i&&a[i]()})}var t=function(t){this.element=e(t)};t.VERSION="3.2.0",t.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=i.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:a});if(t.trigger(s),!s.isDefaultPrevented()){var r=e(n);this.activate(t.closest("li"),i),this.activate(r,r.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},t.prototype.activate=function(t,i,n){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var a=i.find("> .active"),s=n&&e.support.transition&&a.hasClass("fade");s?a.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=i,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),i.call(e(this),"show")})}(jQuery),+function(e){"use strict";function i(i){return this.each(function(){var n=e(this),a=n.data("bs.affix"),s="object"==typeof i&&i;a||n.data("bs.affix",a=new t(this,s)),"string"==typeof i&&a[i]()})}var t=function(i,n){this.options=e.extend({},t.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(i),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.2.0",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=e(document).height(),n=this.$target.scrollTop(),a=this.$element.offset(),s=this.options.offset,r=s.top,o=s.bottom;"object"!=typeof s&&(o=r=s),"function"==typeof r&&(r=s.top(this.$element)),"function"==typeof o&&(o=s.bottom(this.$element));var l=null!=this.unpin&&a.top>=n+this.unpin?!1:null!=o&&a.top+this.$element.height()>=i-o?"bottom":null!=r&&r>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=e.Event(c+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:i-this.$element.height()-o}))}}};var n=e.fn.affix;e.fn.affix=i,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),i.call(t,n)})})}(jQuery),function(e){var t=function(i,n){return this.$element=e(i),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,{},e.fn.notify.defaults,n),this._link=null,this.options.transition?"fade"===this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message&&("string"==typeof this.options.message?this.$note.html(this.options.message):"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text))),this.options.closable&&(this._link=e('<a class="close pull-right">&times;</a>'),e(this._link).on("click",e.proxy(t.onClose,this)),this.$note.prepend(this._link)),this};t.onClose=function(){this.options.onClose(),e(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(t.onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(t.onClose,this)):t.onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),function(){function i(){}function n(e,t){null!=e&&(this.path=e,t!==void 0&&null!==t?(this.at_2x_path=t,this.perform_check=!1):(this.at_2x_path=e.replace(/\.\w+$/,function(e){return"@2x"+e}),this.perform_check=!0))}function a(e){this.el=e,this.path=new n(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var t=this;this.path.check_2x_variant(function(e){e&&t.swap()})}var e="undefined"==typeof exports?window:exports,t={check_mime_type:!0,force_original_dimensions:!0};e.Retina=i,i.configure=function(e){null==e&&(e={});for(var i in e)t[i]=e[i]},i.init=function(t){null==t&&(t=e);var i=t.onload||new Function;t.onload=function(){var n,s,e=document.getElementsByTagName("img"),t=[];for(n=0;e.length>n;n++)s=e[n],t.push(new a(s));i()}},i.isRetina=function(){var t="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";return e.devicePixelRatio>1?!0:e.matchMedia&&e.matchMedia(t).matches?!0:!1},e.RetinaImagePath=n,n.confirmed_paths=[],n.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},n.prototype.check_2x_variant=function(e){var i,a=this;return this.is_external()?e(!1):this.perform_check||void 0===this.at_2x_path||null===this.at_2x_path?this.at_2x_path in n.confirmed_paths?e(!0):(i=new XMLHttpRequest,i.open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4!=i.readyState)return e(!1);if(i.status>=200&&399>=i.status){if(t.check_mime_type){var s=i.getResponseHeader("Content-Type");if(null==s||!s.match(/^image/i))return e(!1)}return n.confirmed_paths.push(a.at_2x_path),e(!0)}return e(!1)},i.send(),void 0):e(!0)},e.RetinaImage=a,a.prototype.swap=function(e){function n(){i.el.complete?(t.force_original_dimensions&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",e)):setTimeout(n,5)}e===void 0&&(e=this.path.at_2x_path);var i=this;n()},i.isRetina()&&i.init(e)}(),function(e){var t={debugOn:!1,markupCreated:!1,markup:"",attachEvents:function(i){e("#gollum-dialog-action-ok").click(function(e){t.eventOK(e,i)}),e("#gollum-dialog-action-cancel").click(t.eventCancel),e('#gollum-dialog-dialog input[type="text"]').keydown(function(e){13==e.keyCode&&t.eventOK(e,i)})},detachEvents:function(){e("#gollum-dialog-action-ok").unbind("click"),e("#gollum-dialog-action-cancel").unbind("click")},createFieldMarkup:function(e){for(var i="<fieldset>",n=0;e.length>n;n++)if("object"==typeof e[n]){switch(i+='<div class="field">',e[n].type){case"text":i+=t.createFieldText(e[n]);break;default:}i+="</div>"}return i+="</fieldset>"},createFieldText:function(e){var t="";return e.name&&(t+="<label",e.id&&(t+=' for="'+e.name+'"'),t+=">"+e.name+"</label>"),t+='<input type="text"',e.id&&(t+=' name="'+e.id+'"',"code"==e.type&&(t+=' class="code"'),t+=' id="gollum-dialog-dialog-generated-field-'+e.id+'">'),t},createMarkup:function(i,n){return t.markupCreated=!0,e.facebox?'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-title"><h4>'+i+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+n+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="gollum-minibutton">Cancel</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="gollum-minibutton">OK</a>'+"</div>"+"</div>":'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-inner"><div id="gollum-dialog-dialog-bg"><div id="gollum-dialog-dialog-title"><h4>'+i+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+n+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="minibutton">Cancel</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="minibutton">OK</a>'+"</div>"+"</div>"+"</div>"+"</div>"},eventCancel:function(e){e.preventDefault(),i("Cancelled dialog."),t.hide()},eventOK:function(i,n){i.preventDefault();var a=[];e("#gollum-dialog-dialog-body input").each(function(){a[e(this).attr("name")]=e(this).val()}),n&&"function"==typeof n&&n(a),t.hide()},hide:function(){e.facebox?(t.markupCreated=!1,e(document).trigger("close.facebox"),t.detachEvents()):e.browser.msie?(e("#gollum-dialog-dialog").hide().removeClass("active"),e("select").css("visibility","visible")):e("#gollum-dialog-dialog").animate({opacity:0},{duration:200,complete:function(){e("#gollum-dialog-dialog").removeClass("active")}})},init:function(n){var a="",s="";return n&&"object"==typeof n?(n.body&&"string"==typeof n.body&&(s="<p>"+n.body+"</p>"),n.fields&&"object"==typeof n.fields&&(s+=t.createFieldMarkup(n.fields)),n.title&&"string"==typeof n.title&&(a=n.title),t.markupCreated&&(e.facebox?e(document).trigger("close.facebox"):e("#gollum-dialog-dialog").remove()),t.markup=t.createMarkup(a,s),e.facebox?e(document).bind("reveal.facebox",function(){n.OK&&"function"==typeof n.OK&&(t.attachEvents(n.OK),e(e('#facebox input[type="text"]').get(0)).focus())}):(e("body").append(t.markup),n.OK&&"function"==typeof n.OK&&t.attachEvents(n.OK)),t.show(),void 0):(i("Editor Dialog: Cannot init; invalid init object"),void 0)},show:function(){t.markupCreated?(i("Showing dialog"),e.facebox?e.facebox(t.markup):e.browser.msie?(e("#gollum-dialog.dialog").addClass("active"),t.position(),e("select").css("visibility","hidden")):(e("#gollum-dialog.dialog").css("display","none"),e("#gollum-dialog-dialog").animate({opacity:0},{duration:0,complete:function(){e("#gollum-dialog-dialog").css("display","block"),t.position(),e("#gollum-dialog-dialog").animate({opacity:1},{duration:500})}}))):i("Dialog: No markup to show. Please use init first.")},position:function(){var t=e("#gollum-dialog-dialog-inner").height();e("#gollum-dialog-dialog-inner").css("height",t+"px").css("margin-top",-1*parseInt(t/2))}};e.facebox&&e(document).bind("reveal.facebox",function(){e("#facebox img.close_image").remove()});var i=function(e){t.debugOn&&"undefined"!=typeof console&&console.log(e)};e.GollumDialog=t}(jQuery),function(e){var n,t={MarkupType:"markdown",EditorMode:"code",NewFile:!1,HasFunctionBar:!0,Debug:!1,NoDefinitionsFor:[],AfterClickFunBar:null},i={};e.fn.GollumEditor=function(o){if(n=this,i=e.extend(t,o),a("GollumEditor loading"),n.data("AfterClickFunBar",i.AfterClickFunBar),r.baseEditorMarkup()&&(r.titleDisplayed()&&n.find(".gollum-editor-title-field").addClass("active"),r.editSummaryMarkup()&&(e.GollumEditor.Placeholder.add(e(".gollum-editor-edit-summary input")),e('.gollum-editor form[name="gollum-editor"]').submit(function(t){t.preventDefault(),e.GollumEditor.Placeholder.clearAll(),a("submitting"),e(this).unbind("submit"),e(this).submit()})),r.collapsibleInputs()&&e(".gollum-editor .collapsed a.button, .gollum-editor .expanded a.button").click(function(t){t.preventDefault(),e(this).parent().toggleClass("expanded"),e(this).parent().toggleClass("collapsed")}),r.previewButton()&&n.find(".gollum-editor .gollum-editor-preview").click(function(){var t=e(".gollum-editor form").attr("action"),i=e(e(".gollum-editor form").get(0));return i.attr("action",this.href||"/preview"),i.attr("target","_blank"),i.submit(),i.attr("action",t),i.removeAttr("target"),!1}),r.functionBar())){var d=n.find(".gollum-editor-body").attr("data-markup-lang");d&&(i.MarkupType=d),s.setActiveLanguage(i.MarkupType),r.formatSelector()&&l.init(e(".gollum-editor-format-selector select")),r.help()&&(e(".gollum-editor-help").hide(),e(".gollum-editor-help").removeClass("jaws"))}},e.GollumEditor=function(){},e.GollumEditor.defineLanguage=function(e,t){"object"==typeof t?s.define(e,t):a("GollumEditor.defineLanguage: definition for "+e+" is not an object")};var a=function(e){i.Debug&&"undefined"!=typeof console&&console.log(e)},s={_ACTIVE_LANG:"",_LOADED_LANGS:[],_LANG:{},define:function(t,i){if(s._ACTIVE_LANG=t,s._LOADED_LANGS.push(t),"object"==typeof e.GollumEditor.WikiLanguage){var n={};e.extend(n,e.GollumEditor.WikiLanguage,i),s._LANG[t]=n}else s._LANG[t]=i},getActiveLanguage:function(){return s._ACTIVE_LANG},setActiveLanguage:function(e){s.isLoadedFor(e)?(s._ACTIVE_LANG=e,o.refresh(n)):(s._ACTIVE_LANG=null,s.loadFor(e,function(t,i){"success"!=i&&(a("Failed to load language definition for "+e),s.define(e,{})),r.functionBar()&&o.refresh(),s.isValid()&&r.formatSelector()&&l.updateSelected()}))},getDefinitionFor:function(e,t){return t||(t=s._ACTIVE_LANG),s.isLoadedFor(t)&&s._LANG[t][e]&&"object"==typeof s._LANG[t][e]?s._LANG[t][e]:null},loadFor:function(t,n){if(i.NoDefinitionsFor.length)for(var a=0;i.NoDefinitionsFor.length>a;a++)if(t==i.NoDefinitionsFor[a]&&"function"==typeof n)return n(null,"error"),void 0;var s="/assets/langs/"+t+".js";e.ajax({url:s,dataType:"script",complete:function(e,t){"function"==typeof n&&n(e,t)}})},isLoadedFor:function(e){if(0===s._LOADED_LANGS.length)return!1;for(var t=0;s._LOADED_LANGS.length>t;t++)if(s._LOADED_LANGS[t]==e)return!0;return!1},isValid:function(){return s._ACTIVE_LANG&&"object"==typeof s._LANG[s._ACTIVE_LANG]}},r={baseEditorMarkup:function(){return n.find(".gollum-editor").length&&n.find(".gollum-editor-body").length},collapsibleInputs:function(){return n.find(".gollum-editor .collapsed, .gollum-editor .expanded").length},formatSelector:function(){return n.find(".gollum-editor-format-selector select").length},functionBar:function(){return i.HasFunctionBar&&n.find(".gollum-editor-function-bar").length},ff4Environment:function(){var e=new RegExp(/Firefox\/4.0b/);return e.test(navigator.userAgent)},editSummaryMarkup:function(){return n.find("input.gollum-editor-message-field").length>0},help:function(){return n.find(".gollum-editor .gollum-editor-help").length&&n.find(".gollum-editor .function-help").length},previewButton:function(){return n.find(".gollum-editor .gollum-editor-preview").length},titleDisplayed:function(){return i.NewFile}},o={isActive:!1,activate:function(){a("Activating function bar"),n.find(".gollum-editor-function-bar a.function-button").each(function(){var t=e(this).attr("class").split(" ")[e(this).attr("class").split(" ").length-1];s.getDefinitionFor(t)?(e(this).click(o.evtFunctionButtonClick),e(this).removeClass("disabled")):"function-help"!=e(this).attr("id")&&e(this).addClass("disabled")}),n.find(".gollum-editor-function-bar").addClass("active"),o.isActive=!0},deactivate:function(){n.find(".gollum-editor-function-bar a.function-button").unbind("click"),n.find(".gollum-editor-function-bar").removeClass("active"),o.isActive=!1},evtFunctionButtonClick:function(t){t.preventDefault();var i=e(this).attr("class").split(" ")[e(this).attr("class").split(" ").length-1],n=s.getDefinitionFor(i);"object"==typeof n&&o.executeAction(n,t)},executeAction:function(t,i){var n=i||window.event,s=e(n.target).parents(".gollum-editor").find(".gollum-editor-body").val();o.getFieldSelectionPosition(e(n.target).parents(".gollum-editor").find(".gollum-editor-body"));var l=o.getFieldSelection(e(n.target).parents(".gollum-editor").find(".gollum-editor-body")),c=l,d=!0,u=null;if(null==t&&(t={}),t.exec&&"function"==typeof t.exec)return t.exec(s,l,e(n.target).parents(".gollum-editor").find(".gollum-editor-body")),void 0;var p=/([^\n]+)/gi;if(t.search&&"object"==typeof t.search&&(a("Replacing search Regex"),p=null,p=new RegExp(t.search),a(p)),a('repText is "'+c+'"'),t.replace&&"string"==typeof t.replace){a("Running replacement - using "+t.replace);var f=t.replace;c=c.replace(p,f),c=c.replace(/\$[\d]/g,""),""===c&&(a("Search string is empty"),u=f.indexOf("$1"),c=f.replace(/\$[\d]/g,""),-1==u&&(u=Math.floor(f.length/2)))}t.append&&"string"==typeof t.append&&(c==l&&(d=!1),c+=t.append),c&&o.replaceFieldSelection(e(n.target).parents(".gollum-editor").find(".gollum-editor-body"),c,d,u);var h=e(n.target).parents(".gollum-editor-wrap").data("AfterClickFunBar");e.isFunction(h)&&h(e(n.target).parents(".gollum-editor").find(".gollum-editor-body").val())},getFieldSelectionPosition:function(e){if(e.length){var t=0,i=0,n=e.get(0);if("number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd)t=n.selectionStart,i=n.selectionEnd;else{var s=document.selection.createRange(),r=s.duplicate();r.moveToElementText(n),r.setEndPoint("EndToEnd",s),t=r.text.length-s.text.length,i=t+s.text.length;var c,o=t,l=0;for(a("IE: start position is currently "+o),c=0;o>c;c++)n.value.charAt(c).match(/\r/)&&++l;l&&(a("IE start: compensating for "+l+" line breaks"),t-=l,l=0);var d=i;for(c=0;d>c;c++)n.value.charAt(c).match(/\r/)&&++l;l&&(a("IE end: compensating for "+l+" line breaks"),i-=l)}return{start:t,end:i}}},getFieldSelection:function(e){var i,t="";return e.length?(i=o.getFieldSelectionPosition(e),t=e.val().substring(i.start,i.end),a("Selected: "+t+" ("+i.start+", "+i.end+")"),t):!1},isShown:function(){return n.find(".gollum-editor-function-bar").is(":visible")},refresh:function(){r.functionBar()&&(a("Refreshing function bar"),s.isValid()?(n.find(".gollum-editor-function-bar a.function-button").unbind("click"),o.activate(),c&&c.setActiveHelp(s.getActiveLanguage())):(a("Language definition is invalid."),o.isShown()&&o.deactivate(),c.isShown()&&c.hide()))},replaceFieldSelection:function(e,t,i,n){var a=o.getFieldSelectionPosition(e),s=e.val(),r=!0;i===!1&&(r=!1);var l=null;if(e[0].scrollTop&&(l=e[0].scrollTop),e.val(s.substring(0,a.start)+t+s.substring(a.end)),e[0].focus(),r)if(e[0].setSelectionRange)n?e[0].setSelectionRange(a.start+n,a.start+n):e[0].setSelectionRange(a.start,a.start+t.length);else if(e[0].createTextRange){var c=e[0].createTextRange();c.collapse(!0),n?(c.moveEnd(a.start+n),c.moveStart(a.start+n)):(c.moveEnd("character",a.start+t.length),c.moveStart("character",a.start)),c.select()}l&&(e[0].scrollTop=l)}},l={$_SELECTOR:null,evtChangeFormat:function(){var i=e(this).val();s.setActiveLanguage(i)},init:function(e){a("Initializing format selector"),l.$_SELECTOR&&"object"==typeof l.$_SELECTOR&&l.$_SELECTOR.unbind("change"),l.$_SELECTOR=e,l.updateSelected(),l.$_SELECTOR.change(l.evtChangeFormat)},updateSelected:function(){var e=s.getActiveLanguage();l.$_SELECTOR.val(e)}},c={_ACTIVE_HELP:"",_LOADED_HELP_LANGS:[],_HELP:{},define:function(t,i){c.isValidHelpFormat(i)?(a("help is a valid format"),c._ACTIVE_HELP_LANG=t,c._LOADED_HELP_LANGS.push(t),c._HELP[t]=i,e(".function-help").length&&(e(".function-help").hasClass("disabled")&&e(".function-help").removeClass("disabled"),e(".function-help").unbind("click"),e(".function-help").click(c.evtHelpButtonClick),c.generateHelpMenuFor(t),e(".gollum-editor-help").length&&e(".gollum-editor-help").attr("data-autodisplay")!==void 0&&"true"===e(".gollum-editor-help").attr("data-autodisplay")&&c.show())):e(".function-help").length&&e(".function-help").addClass("disabled")},generateHelpMenuFor:function(t){if(!c._HELP[t])return a("Help is not defined for "+t.toString()),!1;var i=c._HELP[t];n.find(".gollum-editor-help-parent").html(""),n.find(".gollum-editor-help-list").html(""),n.find(".gollum-editor-help-content").html("");for(var s=0;i.length>s&&"object"==typeof i[s];s++){var r=e('<li><a href="#" rel="'+s+'">'+i[s].menuName+"</a></li>");e(".gollum-editor-help-parent").append(r),0===s&&r.children("a").addClass("selected"),r.children("a").click(c.evtParentMenuClick)}c.generateSubMenu(i[0],0)},generateSubMenu:function(t,i){n.find(".gollum-editor-help-list").html(""),n.find(".gollum-editor-help-content").html("");
for(var a=0;t.content.length>a&&"object"==typeof t.content[a];a++){var s=e('<li><a href="#" rel="'+i+":"+a+'">'+t.content[a].menuName+"</a></li>");n.find(".gollum-editor-help-list").append(s),s.children("a").click(c.evtSubMenuClick)}},hide:function(){kzi.util.isIE()?n.find(".gollum-editor-help").css("display","none"):n.find(".gollum-editor-help").animate({opacity:0},200,function(){n.find(".gollum-editor-help").animate({height:"hide"},200)})},show:function(){kzi.util.isIE()?n.find(".gollum-editor-help").css("display","block"):n.find(".gollum-editor-help").animate({height:"show"},200,function(){n.find(".gollum-editor-help").animate({opacity:1},300)})},showHelpFor:function(e,t){var i=c._HELP[c._ACTIVE_HELP_LANG][e].content[t].data;n.find(".gollum-editor-help-content").html(i)},isLoadedFor:function(e){for(var t=0;c._LOADED_HELP_LANGS.length>t;t++)if(e==c._LOADED_HELP_LANGS[t])return!0;return!1},isShown:function(){return n.find(".gollum-editor-help").is(":visible")},isValidHelpFormat:function(e){return"object"==typeof e&&e.length&&"string"==typeof e[0].menuName&&"object"==typeof e[0].content&&e[0].content.length},setActiveHelp:function(e){c.isLoadedFor(e)?(c._ACTIVE_HELP_LANG=e,n.find(".function-help").length&&(n.find(".function-help").hasClass("disabled")&&n.find(".function-help").removeClass("disabled"),n.find(".function-help").unbind("click"),n.find(".function-help").click(c.evtHelpButtonClick),c.generateHelpMenuFor(e))):(n.find(".function-help").length&&n.find(".function-help").addClass("disabled"),c.isShown()&&c.hide())},evtHelpButtonClick:function(t){t.preventDefault();var i=e(t.target).parents(".gollum-editor");c.isShown()?(i.find(".gollum-editor-help").length&&"undefined"!==i.find(".gollum-editor-help").attr("data-autodisplay")&&"true"===i.find(".gollum-editor-help").attr("data-autodisplay")&&i.find(".gollum-editor-help").attr("data-autodisplay",""),c.hide()):c.show()},evtParentMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var i=e(this).attr("rel"),a=c._HELP[c._ACTIVE_HELP_LANG][i];e(".gollum-editor-help-parent li a").removeClass("selected"),e(this).addClass("selected"),c.generateSubMenu(a,i),e(n.find(".gollum-editor-help-list li a").get(0)).click()}},evtSubMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var i=e(this).attr("rel").split(":");n.find(".gollum-editor-help-list li a").removeClass("selected"),e(this).addClass("selected"),c.showHelpFor(i[0],i[1])}}};e.GollumEditor.defineHelp=c.define,e.GollumEditor.Dialog=e.GollumDialog,e.GollumEditor.replaceSelection=function(t){o.replaceFieldSelection(e(event.target).parents(".gollum-editor").find(".gollum-editor-body"),t)},e.GollumEditor.FunctionBar=o,e.GollumEditor.Placeholder=e.GollumPlaceholder}(jQuery),function(e){var t={_PLACEHOLDERS:[],_p:function(t){this.fieldObject=t,this.placeholderText=t.val();var i=t.val();t.addClass("ph"),t.blur(function(){""==e(this).val()&&(e(this).val(i),e(this).addClass("ph"))}),t.focus(function(){e(this).removeClass("ph"),e(this).val()==i?e(this).val(""):e(this)[0].select()})},add:function(e){t._PLACEHOLDERS.push(new t._p(e))},clearAll:function(){for(var e=0;t._PLACEHOLDERS.length>e;e++)t._PLACEHOLDERS[e].fieldObject.val()==t._PLACEHOLDERS[e].placeholderText&&t._PLACEHOLDERS[e].fieldObject.val("")},exists:function(){return _PLACEHOLDERS.length}};e.GollumPlaceholder=t}(jQuery),function(e){function t(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:n[e.trim(t).toLowerCase()]}function i(i,n){var a;do{if(a=e.curCSS(i,n),""!=a&&"transparent"!=a||e.nodeName(i,"body"))break;n="backgroundColor"}while(i=i.parentNode);return t(a)}e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(n,a){e.fx.step[a]=function(e){0==e.state&&(e.start=i(e.elem,a),e.end=t(e.end)),e.elem.style[a]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2]),255),0)].join(",")+")"}});var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2"},"function-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"\n```\n$1\n```$2"},"function-hr":{append:"\n***\n"},"function-ul":{search:/(.+)([\n]?)/g,replace:"\n* $1$2"},"function-ol":{search:/(.+)([\n]?)/g,replace:"\n1. $1$2"},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"\n> $1$2"},"function-h1":{search:/(.+)([\n]?)/g,replace:"\n# $1$2\n"},"function-h2":{search:/(.+)([\n]?)/g,replace:"\n## $1$2\n"},"function-h3":{search:/(.+)([\n]?)/g,replace:"\n### $1$2\n"},"function-link":{exec:function(){}},"function-image":{exec:function(){}},"function-emoji":{},"function-preview":{}},i=[{menuName:"Block Elements",content:[{menuName:"Paragraphs &amp; Breaks",data:"<p>To create a paragraph, simply create a block of text that is not separated by one or more blank lines. Blocks of text separated by one or more blank lines will be parsed as paragraphs.</p><p>If you want to create a line break, end a line with two or more spaces, then hit Return/Enter.</p>"},{menuName:"Headers",data:"<p>Markdown supports two header formats. The wiki editor uses the &ldquo;atx&rsquo;-style headers. Simply prefix your header text with the number of <code>#</code> characters to specify heading depth. For example: <code># Header 1</code>, <code>## Header 2</code> and <code>### Header 3</code> will be progressively smaller headers. You may end your headers with any number of hashes.</p>"},{menuName:"Blockquotes",data:"<p>Markdown creates blockquotes email-style by prefixing each line with the <code>&gt;</code>. This looks best if you decide to hard-wrap text and prefix each line with a <code>&gt;</code> character, but Markdown supports just putting <code>&gt;</code> before your paragraph.</p>"},{menuName:"Lists",data:"<p>Markdown supports both ordered and unordered lists. To create an ordered list, simply prefix each line with a number (any number will do &mdash; this is why the editor only uses one number.) To create an unordered list, you can prefix each line with <code>*</code>, <code>+</code> or <code>-</code>.</p> List items can contain multiple paragraphs, however each paragraph must be indented by at least 4 spaces or a tab."},{menuName:"Code Blocks",data:"<p>Markdown wraps code blocks in pre-formatted tags to preserve indentation in your code blocks. To create a code block, indent the entire block by at least 4 spaces or one tab. Markdown will strip the extra indentation you&rsquo;ve added to the code block.</p>"},{menuName:"Horizontal Rules",data:"Horizontal rules are created by placing three or more hyphens, asterisks or underscores on a line by themselves. Spaces are allowed between the hyphens, asterisks or underscores."}]},{menuName:"Span Elements",content:[{menuName:"Links",data:"<p>Markdown has two types of links: <strong>inline</strong> and <strong>reference</strong>. For both types of links, the text you want to display to the user is placed in square brackets. For example, if you want your link to display the text &ldquo;GitHub&rdquo;, you write <code>[GitHub]</code>.</p><p>To create an inline link, create a set of parentheses immediately after the brackets and write your URL within the parentheses. (e.g., <code>[GitHub](http://github.com/)</code>). Relative paths are allowed in inline links.</p><p>To create a reference link, use two sets of square brackets. <code>[my internal link][internal-ref]</code> will link to the internal reference <code>internal-ref</code>.</p>"},{menuName:"Emphasis",data:"<p>Asterisks (<code>*</code>) and underscores (<code>_</code>) are treated as emphasis and are wrapped with an <code>&lt;em&gt;</code> tag, which usually displays as italics in most browsers. Double asterisks (<code>**</code>) or double underscores (<code>__</code>) are treated as bold using the <code>&lt;strong&gt;</code> tag. To create italic or bold text, simply wrap your words in single/double asterisks/underscores. For example, <code>**My double emphasis text**</code> becomes <strong>My double emphasis text</strong>, and <code>*My single emphasis text*</code> becomes <em>My single emphasis text</em>.</p>"},{menuName:"Code",data:"<p>To create inline spans of code, simply wrap the code in backticks (<code>`</code>). Markdown will turn <code>`myFunction`</code> into <code>myFunction</code>.</p>"},{menuName:"Images",data:"<p>Markdown image syntax looks a lot like the syntax for links; it is essentially the same syntax preceded by an exclamation point (<code>!</code>). For example, if you want to link to an image at <code>http://github.com/unicorn.png</code> with the alternate text <code>My Unicorn</code>, you would write <code>![My Unicorn](http://github.com/unicorn.png)</code>.</p>"}]},{menuName:"Miscellaneous",content:[{menuName:"Automatic Links",data:'<p>If you want to create a link that displays the actual URL, markdown allows you to quickly wrap the URL in <code>&lt;</code> and <code>&gt;</code> to do so. For example, the link <a href="javascript:void(0);">http://github.com/</a> is easily produced by writing <code>&lt;http://github.com/&gt;</code>.</p>'},{menuName:"Escaping",data:"<p>If you want to use a special Markdown character in your document (such as displaying literal asterisks), you can escape the character with the backslash (<code>\\</code>). Markdown will ignore the character directly after a backslash."}]}];e.GollumEditor.defineLanguage("markdown",t),e.GollumEditor.defineHelp("markdown",i)}(jQuery),function(e,t){function r(t){e.extend(!0,i,t)}function o(i,n,a){function z(e){h?F()&&(W(),H(e)):M()}function M(){m=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),n.theme&&i.addClass("ui-widget"),h=e("<div class='fc-content' style='position:relative'/>").prependTo(i),p=new l(r,n),f=p.render(),f&&i.prepend(f),O(n.defaultView),n.handleWindowResize&&e(window).resize(Y),I()||A()}function A(){setTimeout(function(){!b.start&&I()&&L()},0)}function P(){b&&(gt("viewDestroy",b,b,b.element),b.triggerEventDestroy()),e(window).unbind("resize",Y),p.destroy(),h.remove(),i.removeClass("fc fc-rtl ui-widget")}function F(){return i.is(":visible")}function I(){return e("body").is(":visible")}function O(e){b&&e==b.name||N(e)}function N(t){x++,b&&(gt("viewDestroy",b,b,b.element),at(),b.triggerEventDestroy(),ft(),b.element.remove(),p.deactivateButton(b.name)),p.activateButton(t),b=new s[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(h),r),L(),ht(),x--}function L(e){(!b.start||e||b.start>C||C>=b.end)&&F()&&H(e)}function H(e){x++,b.start&&(gt("viewDestroy",b,b,b.element),at(),K()),ft(),b.render(C,e||0),B(),ht(),(b.afterRender||U)(),tt(),it(),gt("viewRender",b,b,b.element),b.trigger("viewDisplay",d),x--,Z()}function R(){F()&&(at(),K(),W(),B(),G())}function W(){w=n.contentHeight?n.contentHeight:n.height?n.height-(f?f.height():0)-q(h):Math.round(h.width()/Math.max(n.aspectRatio,.5))}function B(){w===t&&W(),x++,b.setHeight(w),b.setWidth(h.width()),x--,y=i.outerWidth()}function Y(){if(!x)if(b.start){var e=++j;setTimeout(function(){e==j&&!x&&F()&&y!=(y=i.outerWidth())&&(x++,R(),b.trigger("windowResize",d),x--)},200)}else A()}function V(){K(),Q()}function X(e){K(),G(e)}function G(e){F()&&(b.setEventData(S),b.renderEvents(S,e),b.trigger("eventAfterAllRender"))}function K(){b.triggerEventDestroy(),b.clearEvents(),b.clearEventData()}function Z(){!n.lazyFetching||o(b.visStart,b.visEnd)?Q():G()}function Q(){c(b.visStart,b.visEnd)}function J(e){S=e,G()}function et(e){X(e)}function tt(){p.updateTitle(b.title)}function it(){var e=new Date;e>=b.start&&b.end>e?p.disableButton("today"):p.enableButton("today")}function nt(e,i,n){b.select(e,i,n===t?!0:n)}function at(){b&&b.unselect()}function st(){L(-1)}function rt(){L(1)}function ot(){_(C,-1),L()}function lt(){_(C,1),L()}function ct(){C=new Date,L()}function dt(e,t,i){e instanceof Date?C=k(e):$(C,e,t,i),L()}function ut(e,i,n){e!==t&&_(C,e),i!==t&&g(C,i),n!==t&&v(C,n),L()}function pt(){return k(C)}function ft(){h.css({width:"100%",height:h.height(),overflow:"hidden"})}function ht(){h.css({width:"",height:"",overflow:""})}function mt(){return b}function _t(e,i){return i===t?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,R()),void 0)}function gt(e,t){return n[e]?n[e].apply(t||d,Array.prototype.slice.call(arguments,2)):void 0}var r=this;r.options=n,r.render=z,r.destroy=P,r.refetchEvents=V,r.reportEvents=J,r.reportEventChange=et,r.rerenderEvents=X,r.changeView=O,r.select=nt,r.unselect=at,r.prev=st,r.next=rt,r.prevYear=ot,r.nextYear=lt,r.today=ct,r.gotoDate=dt,r.incrementDate=ut,r.formatDate=function(e,t){return E(e,t,n)},r.formatDates=function(e,t,i){return T(e,t,i,n)},r.getDate=pt,r.getView=mt,r.option=_t,r.trigger=gt,u.call(r,n,a);var p,f,h,m,b,y,w,D,o=r.isFetchNeeded,c=r.fetchEvents,d=i[0],j=0,x=0,C=new Date,S=[];$(C,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var a=t.target,s=e(a);if(!s.parents(".fc").length){var r=n.dropAccept;(e.isFunction(r)?r.call(a,s):s.is(r))&&(D=a,b.dragStart(D,t,i))}}).bind("dragstop",function(e,t){D&&(b.dragStop(D,e,t),D=null)})}function l(t,i){function o(){r=i.theme?"ui":"fc";var t=i.header;return t?a=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(c("left")).append(c("center")).append(c("right"))):void 0}function l(){a.remove()}function c(n){var a=e("<td class='fc-header-"+n+"'/>"),o=i.header[n];return o&&e.each(o.split(" "),function(n){n>0&&a.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(n,l){if("title"==l)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(r+"-corner-right"),o=null;else{var c;if(t[l]?c=t[l]:s[l]&&(c=function(){p.removeClass(r+"-state-hover"),t.changeView(l)}),c){var d=i.theme?K(i.buttonIcons,l):null,u=K(i.buttonText,l),p=e("<span class='fc-button fc-button-"+l+" "+r+"-state-default'>"+(d?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+d+"'/>"+"</span>":u)+"</span>").click(function(){p.hasClass(r+"-state-disabled")||c()}).mousedown(function(){p.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")}).mouseup(function(){p.removeClass(r+"-state-down")}).hover(function(){p.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")},function(){p.removeClass(r+"-state-hover").removeClass(r+"-state-down")}).appendTo(a);Q(p),o||p.addClass(r+"-corner-left"),o=p}}}),o&&o.addClass(r+"-corner-right")}),a}function d(e){a.find("h2").html(e)}function u(e){a.find("span.fc-button-"+e).addClass(r+"-state-active")}function p(e){a.find("span.fc-button-"+e).removeClass(r+"-state-active")}function f(e){a.find("span.fc-button-"+e).addClass(r+"-state-disabled")}function h(e){a.find("span.fc-button-"+e).removeClass(r+"-state-disabled")}var n=this;n.render=o,n.destroy=l,n.updateTitle=d,n.activateButton=u,n.deactivateButton=p,n.disableButton=f,n.enableButton=h;var r,a=e([])}function u(i,n){function y(e,t){return!f||f>e||t>h}function w(e,t){f=e,h=t,v=[];var i=++m,n=p.length;_=n;for(var a=0;n>a;a++)j(p[a],i)}function j(t,n){x(t,function(a){if(n==m){if(a){i.eventDataTransform&&(a=e.map(a,i.eventDataTransform)),t.eventDataTransform&&(a=e.map(a,t.eventDataTransform));for(var s=0;a.length>s;s++)a[s].source=t,F(a[s]);v=v.concat(a)}_--,_||l(v)}})}function x(t,n){var s,o,r=a.sourceFetchers;for(s=0;r.length>s;s++){if(o=r[s](t,f,h,n),o===!0)return;if("object"==typeof o)return x(o,n),void 0}var l=t.events;if(l)e.isFunction(l)?(A(),l(k(f),k(h),function(e){n(e),P()})):e.isArray(l)?n(l):n();else{var d=t.url;if(d){var _,u=t.success,p=t.error,m=t.complete;_=e.isFunction(t.data)?t.data():t.data;var g=e.extend({},_||{}),v=nt(t.startParam,i.startParam),b=nt(t.endParam,i.endParam);v&&(g[v]=Math.round(+f/1e3)),b&&(g[b]=Math.round(+h/1e3)),A(),e.ajax(e.extend({},c,t,{data:g,success:function(t){t=t||[];var i=it(u,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){it(p,this,arguments),n()},complete:function(){it(m,this,arguments),P()}}))}else n()}}function $(e){e=S(e),e&&(_++,j(e,m))}function S(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(I(t),p.push(t),t):void 0}function D(t){p=e.grep(p,function(e){return!O(e,t)}),v=e.grep(v,function(e){return!O(e.source,t)}),l(v)}function E(e){var t,n,i=v.length,a=o().defaultEventEnd,s=e.start-e._start,r=e.end?e.end-(e._end||a(e)):0;for(t=0;i>t;t++)n=v[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+s),n.end=e.end?n.end?new Date(+n.end+r):new Date(+a(n)+r):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,F(n));F(e),l(v)}function T(e,t){F(e),e.source||(t&&(u.events.push(e),e.source=u),v.push(e)),l(v)}function z(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}v=e.grep(v,t,!0);for(var i=0;p.length>i;i++)e.isArray(p[i].events)&&(p[i].events=e.grep(p[i].events,t,!0))}else{v=[];for(var i=0;p.length>i;i++)e.isArray(p[i].events)&&(p[i].events=[])}l(v)}function M(t){return e.isFunction(t)?e.grep(v,t):t?(t+="",e.grep(v,function(e){return e._id==t})):v}function A(){g++||r("loading",null,!0,o())}function P(){--g||r("loading",null,!1,o())}function F(e){var n=e.source||{},a=nt(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+d++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=k(e.start=C(e.start,a)),e.end=C(e.end,a),e.end&&e.start>=e.end&&(e.end=null),e._end=e.end?k(e.end):null,e.allDay===t&&(e.allDay=nt(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function I(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=a.sourceNormalizers,i=0;t.length>i;i++)t[i](e)}function O(e,t){return e&&t&&N(e)==N(t)}function N(e){return("object"==typeof e?e.events||e.url:"")||e}var s=this;s.isFetchNeeded=y,s.fetchEvents=w,s.addEventSource=$,s.removeEventSource=D,s.updateEvent=E,s.renderEvent=T,s.removeEvents=z,s.clientEvents=M,s.normalizeEvent=F;for(var f,h,r=s.trigger,o=s.getView,l=s.reportEvents,u={events:[]},p=[u],m=0,_=0,g=0,v=[],b=0;n.length>b;b++)S(n[b])}function _(e,t,i){return e.setFullYear(e.getFullYear()+t),i||w(e),e}function g(e,t,i){if(+e){var n=e.getMonth()+t,a=k(e);for(a.setDate(1),a.setMonth(n),e.setMonth(n),i||w(e);e.getMonth()!=a.getMonth();)e.setDate(e.getDate()+(a>e?1:-1))}return e}function v(e,t,i){if(+e){var n=e.getDate()+t,a=k(e);a.setHours(9),a.setDate(n),e.setDate(n),i||w(e),b(e,a)}return e}function b(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*h)}function y(e,t){return e.setMinutes(e.getMinutes()+t),e}function w(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function k(e,t){return t?w(new Date(+e)):new Date(+e)}function j(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function x(e,t){return Math.round((k(e,!0)-k(t,!0))/f)}function $(e,i,n,a){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),a!==t&&e.setDate(a)}function C(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),S(e,i)||(e?new Date(e):null)):null}function S(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var a=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),a.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),a.setDate(i[5])),b(n,a),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),b(n,a)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*s)}return n}function D(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function E(e,t,i){return T(e,null,t,i)}function T(e,t,n,a){a=a||i;var o,c,d,u,s=e,r=t,l=n.length,p="";for(o=0;l>o;o++)if(c=n.charAt(o),"'"==c){for(d=o+1;l>d;d++)if("'"==n.charAt(d)){s&&(p+=d==o+1?"'":n.substring(o+1,d),o=d);break}}else if("("==c){for(d=o+1;l>d;d++)if(")"==n.charAt(d)){var f=E(s,n.substring(o+1,d),a);parseInt(f.replace(/\D/,""),10)&&(p+=f),o=d;break}}else if("["==c){for(d=o+1;l>d;d++)if("]"==n.charAt(d)){var h=n.substring(o+1,d),f=E(s,h,a);f!=E(r,h,a)&&(p+=f),o=d;break}}else if("{"==c)s=t,r=e;else if("}"==c)s=e,r=t;else{for(d=l;d>o;d--)if(u=z[n.substring(o,d)]){s&&(p+=u(s,a)),o=d-1;break}d==o&&s&&(p+=c)}return p}function M(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function A(e){return e.end?P(e.end,e.allDay):v(k(e.start),1)}function P(e,t){return e=k(e),t||e.getHours()||e.getMinutes()?v(e,1):w(e)}function F(i,n,a){i.unbind("mouseover").mouseover(function(i){for(var r,o,l,s=i.target;s!=this;)r=s,s=s.parentNode;(o=r._fci)!==t&&(r._fci=t,l=n[o],a(l.event,l.element,l),e(i.target).trigger(i)),i.stopPropagation()})}function I(t,i,n){for(var s,a=0;t.length>a;a++)s=e(t[a]),s.width(Math.max(0,i-N(s,n)))}function O(t,i,n){for(var s,a=0;t.length>a;a++)s=e(t[a]),s.height(Math.max(0,i-q(s,n)))}function N(e,t){return L(e)+R(e)+(t?H(e):0)}function L(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function q(e,t){return W(e)+Y(e)+(t?B(e):0)}function W(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function B(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function Y(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function U(){}function V(e,t){return e-t}function X(e){return Math.max.apply(Math,e)}function G(e){return(10>e?"0":"")+e}function K(e,i){if(e[i]!==t)return e[i];for(var s,n=i.split(/(?=[A-Z])/),a=n.length-1;a>=0;a--)if(s=e[n[a].toLowerCase()],s!==t)return s;return e[""]}function Z(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Q(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function J(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function tt(e,t){var i=e.source||{},n=e.color,a=i.color,s=t("eventColor"),r=e.backgroundColor||n||i.backgroundColor||a||t("eventBackgroundColor")||s,o=e.borderColor||n||i.borderColor||a||t("eventBorderColor")||s,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return r&&c.push("background-color:"+r),o&&c.push("border-color:"+o),l&&c.push("color:"+l),c.join(";")}function it(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var a,s;for(a=0;t.length>a;a++)s=t[a].apply(i,n)||s;return s}}function nt(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function at(e,t){function l(e,t){t&&(g(e,t),e.setDate(1));var l=n("firstDay"),c=k(e,!0);c.setDate(1);var d=g(k(c),1),u=k(c);v(u,-((u.getDay()-l+7)%7)),s(u);var p=k(d);v(p,(7-p.getDay()+l)%7),s(p,-1,!0);var f=r(),h=Math.round(x(p,u)/7);"fixed"==n("weekMode")&&(v(p,7*(6-h)),h=6),i.title=o(c,n("titleFormat")),i.start=c,i.end=d,i.visStart=u,i.visEnd=p,a(h,f,!0)}var i=this;i.render=l,ot.call(i,e,t,"month");var n=i.opt,a=i.renderBasic,s=i.skipHiddenDays,r=i.getCellsPerWeek,o=t.formatDate}function st(e,t){function l(e,t){t&&v(e,7*t);var l=v(k(e),-((e.getDay()-n("firstDay")+7)%7)),c=v(k(l),7),d=k(l);s(d);var u=k(c);s(u,-1,!0);var p=r();i.start=l,i.end=c,i.visStart=d,i.visEnd=u,i.title=o(d,v(k(u),-1),n("titleFormat")),a(1,p,!1)}var i=this;i.render=l,ot.call(i,e,t,"basicWeek");var n=i.opt,a=i.renderBasic,s=i.skipHiddenDays,r=i.getCellsPerWeek,o=t.formatDates}function rt(e,t){function o(e,t){t&&v(e,t),s(e,0>t?-1:1);var o=k(e,!0),l=v(k(o),1);i.title=r(e,n("titleFormat")),i.start=i.visStart=o,i.end=i.visEnd=l,a(1,1,!1)}var i=this;i.render=o,ot.call(i,e,t,"basicDay");var n=i.opt,a=i.renderBasic,s=i.skipHiddenDays,r=t.formatDate}function ot(t,i,n){function V(e,t,i){A=e,P=t,F=i,X(),b||G(),K()}function X(){R=s("theme")?"ui":"fc",W=s("columnFormat"),B=s("weekNumbers"),Y=s("weekNumberTitle"),U="iso"!=s("weekNumberCalculation")?"w":"W"}function G(){D=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function K(){var i=et();m&&m.remove(),m=e(i).appendTo(t),_=m.find("thead"),g=_.find(".fc-day-header"),b=m.find("tbody"),y=b.find("tr"),j=b.find(".fc-day"),x=y.find("td:first-child"),$=y.eq(0).find(".fc-day > div"),C=y.eq(0).find(".fc-day-content > div"),J(_.add(_.find("tr"))),J(y),y.eq(0).addClass("fc-first"),y.filter(":last").addClass("fc-last"),j.each(function(t,i){var n=d(Math.floor(t/P),t%P);r("dayRender",a,n,e(i))}),rt(j)}function et(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+tt()+it()+"</table>";return e}function tt(){var i,n,e=R+"-widget-header",t="";for(t+="<thead><tr>",B&&(t+="<th class='fc-week-number "+e+"'>"+Z(Y)+"</th>"),i=0;P>i;i++)n=d(0,i),t+="<th class='fc-day-header fc-"+p[n.getDay()]+" "+e+"'>"+Z(h(n,W))+"</th>";return t+="</tr></thead>"}function it(){var i,n,a,e=R+"-widget-content",t="";for(t+="<tbody>",i=0;A>i;i++){for(t+="<tr class='fc-week'>",B&&(a=d(i,0),t+="<td class='fc-week-number "+e+"'>"+"<div>"+Z(h(a,U))+"</div>"+"</td>"),n=0;P>n;n++)a=d(i,n),t+=nt(a);t+="</tr>"}return t+="</tbody>"}function nt(e){var t=R+"-widget-content",i=a.start.getMonth(),n=w(new Date),s="",r=["fc-day","fc-"+p[e.getDay()],t];return e.getMonth()!=i&&r.push("fc-other-month"),+e==+n?r.push("fc-today",R+"-state-highlight"):n>e?r.push("fc-past"):r.push("fc-future"),s+="<td class='"+r.join(" ")+"'"+" data-date='"+h(e,"yyyy-MM-dd")+"'"+">"+"<div>",F&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function at(t){T=t;var n,a,r,i=T-_.height();"variable"==s("weekMode")?n=a=Math.floor(i/(1==A?2:6)):(n=Math.floor(i/A),a=i-n*(A-1)),x.each(function(t,i){A>t&&(r=e(i),r.find("> div").css("min-height",(t==A-1?a:n)-q(r)))})}function st(e){E=e,L.clear(),H.clear(),M=0,B&&(M=_.find("th.fc-week-number").outerWidth()),z=Math.floor((E-M)/P),I(g.slice(0,-1),z)}function rt(e){e.click(ot).mousedown(c)}function ot(t){if(!s("selectable")){var i=S(e(this).data("date"));r("dayClick",this,i,!0,t)}}function ct(e,t,i){i&&O.build();for(var n=f(e,t),a=0;n.length>a;a++){var s=n[a];rt(dt(s.row,s.leftCol,s.row,s.rightCol))}}function dt(e,i,n,a){var s=O.rect(e,i,n,a,t);return o(s,t)}function ut(e){return k(e)}function pt(e,t){ct(e,v(k(t),1),!0)}function ft(){l()}function ht(e,t,i){var n=u(e),a=j[n.row*P+n.col];r("dayClick",a,e,t,i)}function mt(e,t){N.start(function(e){l(),e&&dt(e.row,e.col,e.row,e.col)},t)}function _t(e,t,i){var n=N.stop();if(l(),n){var a=d(n);r("drop",e,a,!0,t,i)}}function gt(e){return k(e.start)}function vt(e){return L.left(e)}function bt(e){return L.right(e)}function yt(e){return H.left(e)}function wt(e){return H.right(e)}function kt(e){return y.eq(e)}var a=this;a.renderBasic=V,a.setHeight=at,a.setWidth=st,a.renderDayOverlay=ct,a.defaultSelectionEnd=ut,a.renderSelection=pt,a.clearSelection=ft,a.reportDayClick=ht,a.dragStart=mt,a.dragStop=_t,a.defaultEventEnd=gt,a.getHoverListener=function(){return N},a.colLeft=vt,a.colRight=bt,a.colContentLeft=yt,a.colContentRight=wt,a.getIsCellAllDay=function(){return!0},a.allDayRow=kt,a.getRowCnt=function(){return A},a.getColCnt=function(){return P},a.getColWidth=function(){return z},a.getDaySegmentContainer=function(){return D},jt.call(a,t,i,n),Et.call(a),Dt.call(a),lt.call(a);var m,_,g,b,y,j,x,$,C,D,E,T,z,M,A,P,F,O,N,L,H,R,W,B,Y,U,s=a.opt,r=a.trigger,o=a.renderOverlay,l=a.clearOverlays,c=a.daySelectionMousedown,d=a.cellToDate,u=a.dateToCell,f=a.rangeToSegments,h=i.formatDate;Q(t.addClass("fc-grid")),O=new Tt(function(t,i){var n,a,s;g.each(function(t,r){n=e(r),a=n.offset().left,t&&(s[1]=a),s=[a],i[t]=s}),s[1]=a+n.outerWidth(),y.each(function(i,r){A>i&&(n=e(r),a=n.offset().top,i&&(s[1]=a),s=[a],t[i]=s)}),s[1]=a+n.outerHeight()}),N=new zt(O),L=new At(function(e){return $.eq(e)}),H=new At(function(e){return C.eq(e)})}function lt(){function t(t,i){e.renderDayEvents(t,i)}function i(){e.getDaySegmentContainer().empty()}var e=this;e.renderEvents=t,e.clearEvents=i,xt.call(e)}function ct(e,t){function l(e,t){t&&v(e,7*t);var l=v(k(e),-((e.getDay()-n("firstDay")+7)%7)),c=v(k(l),7),d=k(l);s(d);var u=k(c);s(u,-1,!0);var p=r();i.title=o(d,v(k(u),-1),n("titleFormat")),i.start=l,i.end=c,i.visStart=d,i.visEnd=u,a(p)}var i=this;i.render=l,ut.call(i,e,t,"agendaWeek");var n=i.opt,a=i.renderAgenda,s=i.skipHiddenDays,r=i.getCellsPerWeek,o=t.formatDates}function dt(e,t){function o(e,t){t&&v(e,t),s(e,0>t?-1:1);var o=k(e,!0),l=v(k(o),1);i.title=r(e,n("titleFormat")),i.start=i.visStart=o,i.end=i.visEnd=l,a(1)}var i=this;i.render=o,ut.call(i,e,t,"agendaDay");var n=i.opt,a=i.renderAgenda,s=i.skipHiddenDays,r=t.formatDate}function ut(i,n,a){function wt(e){st=e,kt(),x?$t():xt()}function kt(){ft=r("theme")?"ui":"fc",ht=r("isRTL"),mt=D(r("minTime")),_t=D(r("maxTime")),gt=r("columnFormat"),vt=r("weekNumbers"),bt=r("weekNumberTitle"),yt="iso"!=r("weekNumberCalculation")?"w":"W",it=r("snapMinutes")||r("slotMinutes")}function xt(){var a,s,o,l,c,t=ft+"-widget-header",n=ft+"-widget-content",d=0==r("slotMinutes")%15;for($t(),P=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),r("allDaySlot")?(F=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(P),a="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+r("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+t+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",N=e(a).appendTo(P),L=N.find("tr"),Nt(L.find("td")),P.append("<div class='fc-agenda-divider "+t+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):F=e([]),H=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(P),R=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(H),W=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(R),a="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",s=j(),l=y(k(s),_t),y(s,mt),rt=0,o=0;l>s;o++)c=s.getMinutes(),a+="<tr class='fc-slot"+o+" "+(c?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+t+"'>"+(d&&c?"&nbsp;":b(s,r("axisFormat")))+"</th>"+"<td class='"+n+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",y(s,r("slotMinutes")),rt++;
a+="</tbody></table>",B=e(a).appendTo(R),Lt(B.find("td"))}function $t(){var t=Ct();x&&x.remove(),x=e(t).appendTo(i),$=x.find("thead"),C=$.find("th").slice(1,-1),S=x.find("tbody"),E=S.find("td").slice(0,-1),T=E.find("> div"),z=E.find(".fc-day-content > div"),M=E.eq(0),A=T.eq(0),J($.add($.find("tr"))),J(S.add(S.find("tr")))}function Ct(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+St()+Mt()+"</table>";return e}function St(){var t,n,a,e=ft+"-widget-header",i="";for(i+="<thead><tr>",vt?(t=m(0,0),n=b(t,yt),ht?n+=bt:n=bt+n,i+="<th class='fc-agenda-axis fc-week-number "+e+"'>"+Z(n)+"</th>"):i+="<th class='fc-agenda-axis "+e+"'>&nbsp;</th>",a=0;st>a;a++)t=m(0,a),i+="<th class='fc-"+p[t.getDay()]+" fc-col"+a+" "+e+"'>"+Z(b(t,gt))+"</th>";return i+="<th class='fc-agenda-gutter "+e+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function Mt(){var i,a,s,r,o,e=ft+"-widget-header",t=ft+"-widget-content",n=w(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>",s="",a=0;st>a;a++)i=m(0,a),o=["fc-col"+a,"fc-"+p[i.getDay()],t],+i==+n?o.push(ft+"-state-highlight","fc-today"):n>i?o.push("fc-past"):o.push("fc-future"),r="<td class='"+o.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",s+=r;return l+=s,l+="<td class='fc-agenda-gutter "+t+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function Pt(e){e===t&&(e=X),X=e,ut={};var i=S.position().top,n=H.position().top,a=Math.min(e-i,B.height()+n+1);A.height(a-q(M)),P.css("top",i),H.height(a-n-1),tt=B.find("tr:first").height()+1,nt=r("slotMinutes")/it,at=tt/nt}function Ft(t){U=t,ct.clear(),dt.clear();var i=$.find("th:first");N&&(i=i.add(N.find("th:first"))),i=i.add(B.find("th:first")),G=0,I(i.width("").each(function(t,i){G=Math.max(G,e(i).outerWidth())}),G);var n=x.find(".fc-agenda-gutter");N&&(n=n.add(N.find("th.fc-agenda-gutter")));var a=H[0].clientWidth;et=H.width()-a,et?(I(n,et),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),K=Math.floor((a-G)/st),I(C.slice(0,-1),K)}function It(){function n(){H.scrollTop(i)}var e=j(),t=k(e);t.setHours(r("firstHour"));var i=Kt(e,t)+1;n(),setTimeout(n,0)}function Ot(){It()}function Nt(e){e.click(Ht).mousedown(f)}function Lt(e){e.click(Ht).mousedown(ni)}function Ht(e){if(!r("selectable")){var t=Math.min(st-1,Math.floor((e.pageX-x.offset().left-G)/K)),i=m(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var a=parseInt(n[1])*r("slotMinutes"),s=Math.floor(a/60);i.setHours(s),i.setMinutes(a%60+mt),o("dayClick",E[t],i,!1,e)}else o("dayClick",E[t],i,!0,e)}}function Rt(e,t,i){i&&ot.build();for(var n=g(e,t),a=0;n.length>a;a++){var s=n[a];Nt(qt(s.row,s.leftCol,s.row,s.rightCol))}}function qt(e,t,i,n){var a=ot.rect(e,t,i,n,P);return l(a,P)}function Wt(e,t){for(var i=0;st>i;i++){var n=m(0,i),a=v(k(n),1),s=new Date(Math.max(n,e)),r=new Date(Math.min(a,t));if(r>s){var o=ot.rect(0,i,0,i,R),c=Kt(n,s),d=Kt(n,r);o.top=c,o.height=d-c,Lt(l(o,R))}}}function Bt(e){return ct.left(e)}function Yt(e){return dt.left(e)}function Ut(e){return ct.right(e)}function Vt(e){return dt.right(e)}function Xt(e){return r("allDaySlot")&&!e.row}function Gt(e){var t=m(0,e.col),i=e.row;return r("allDaySlot")&&i--,i>=0&&y(t,mt+i*it),t}function Kt(e,i){if(e=k(e,!0),y(k(e),mt)>i)return 0;if(i>=y(k(e),_t))return B.height();var n=r("slotMinutes"),a=60*i.getHours()+i.getMinutes()-mt,s=Math.floor(a/n),o=ut[s];return o===t&&(o=ut[s]=B.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+tt*(a%n/n)))}function Zt(){return L}function Qt(e){var t=k(e.start);return e.allDay?t:y(t,r("defaultEventMinutes"))}function Jt(e,t){return t?k(e):y(k(e),r("slotMinutes"))}function ei(e,t,i){i?r("allDaySlot")&&Rt(e,v(k(t),1),!0):ti(e,t)}function ti(t,i){var n=r("selectHelper");if(ot.build(),n){var a=_(t).col;if(a>=0&&st>a){var s=ot.rect(0,a,0,a,R),o=Kt(t,t),l=Kt(t,i);if(l>o){if(s.top=o,s.height=l-o,s.left+=2,s.width-=5,e.isFunction(n)){var c=n(t,i);c&&(s.position="absolute",Y=e(c).css(s).appendTo(R))}else s.isStart=!0,s.isEnd=!0,Y=e(h({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},s)),Y.css("opacity",r("dragOpacity"));Y&&(Lt(Y),R.append(Y),I(Y,s.width,!0),O(Y,s.height,!0))}}}else Wt(t,i)}function ii(){c(),Y&&(Y.remove(),Y=null)}function ni(t){if(1==t.which&&r("selectable")){u(t);var i;lt.start(function(e,t){if(ii(),e&&e.col==t.col&&!Xt(e)){var n=Gt(t),a=Gt(e);i=[n,y(k(n),it),a,y(k(a),it)].sort(V),ti(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){lt.stop(),i&&(+i[0]==+i[1]&&ai(i[0],!1,e),d(i[0],i[3],!1,e))})}}function ai(e,t,i){o("dayClick",E[_(e).col],e,t,i)}function si(e,t){lt.start(function(e){if(c(),e)if(Xt(e))qt(e.row,e.col,e.row,e.col);else{var t=Gt(e),i=y(k(t),r("defaultEventMinutes"));Wt(t,i)}},t)}function ri(e,t,i){var n=lt.stop();c(),n&&o("drop",e,Gt(n),Xt(n),t,i)}var s=this;s.renderAgenda=wt,s.setWidth=Ft,s.setHeight=Pt,s.afterRender=Ot,s.defaultEventEnd=Qt,s.timePosition=Kt,s.getIsCellAllDay=Xt,s.allDayRow=Zt,s.getCoordinateGrid=function(){return ot},s.getHoverListener=function(){return lt},s.colLeft=Bt,s.colRight=Ut,s.colContentLeft=Yt,s.colContentRight=Vt,s.getDaySegmentContainer=function(){return F},s.getSlotSegmentContainer=function(){return W},s.getMinMinute=function(){return mt},s.getMaxMinute=function(){return _t},s.getSlotContainer=function(){return R},s.getRowCnt=function(){return 1},s.getColCnt=function(){return st},s.getColWidth=function(){return K},s.getSnapHeight=function(){return at},s.getSnapMinutes=function(){return it},s.defaultSelectionEnd=Jt,s.renderDayOverlay=Rt,s.renderSelection=ei,s.clearSelection=ii,s.reportDayClick=ai,s.dragStart=si,s.dragStop=ri,jt.call(s,i,n,a),Et.call(s),Dt.call(s),pt.call(s);var x,$,C,S,E,T,z,M,A,P,F,N,L,H,R,W,B,Y,U,X,G,K,et,tt,it,nt,at,st,rt,ot,lt,ct,dt,ft,ht,mt,_t,gt,vt,bt,yt,r=s.opt,o=s.trigger,l=s.renderOverlay,c=s.clearOverlays,d=s.reportSelection,u=s.unselect,f=s.daySelectionMousedown,h=s.slotSegHtml,m=s.cellToDate,_=s.dateToCell,g=s.rangeToSegments,b=n.formatDate,ut={};Q(i.addClass("fc-agenda")),ot=new Tt(function(t,i){function d(e){return Math.max(l,Math.min(c,e))}var n,a,s;C.each(function(t,r){n=e(r),a=n.offset().left,t&&(s[1]=a),s=[a],i[t]=s}),s[1]=a+n.outerWidth(),r("allDaySlot")&&(n=L,a=n.offset().top,t[0]=[a,a+n.outerHeight()]);for(var o=R.offset().top,l=H.offset().top,c=l+H.outerHeight(),u=0;rt*nt>u;u++)t.push([d(o+at*u),d(o+at*(u+1))])}),lt=new zt(ot),ct=new At(function(e){return T.eq(e)}),dt=new At(function(e){return z.eq(e)})}function pt(){function U(e,t){var i,a=e.length,s=[],r=[];for(i=0;a>i;i++)e[i].allDay?s.push(e[i]):r.push(e[i]);n("allDaySlot")&&(R(s,t),c()),Q(X(r),t)}function V(){d().empty(),u().empty()}function X(t){var s,o,l,c,d,i=$(),n=h(),a=f(),r=e.map(t,K),u=[];for(o=0;i>o;o++)for(s=j(0,o),y(s,n),d=G(t,r,s,y(k(s),a-n)),d=ft(d),l=0;d.length>l;l++)c=d[l],c.col=o,u.push(c);return u}function G(e,t,i,n){var s,o,l,c,d,u,p,f,a=[],r=e.length;for(s=0;r>s;s++)o=e[s],l=o.start,c=t[s],c>i&&n>l&&(i>l?(d=k(i),p=!1):(d=l,p=!0),c>n?(u=k(n),f=!1):(u=c,f=!0),a.push({event:o,start:d,end:u,isStart:p,isEnd:f}));return a.sort(kt)}function K(e){return e.end?k(e.end):y(k(e.start),n("defaultEventMinutes"))}function Q(i,s){var r,l,c,d,p,f,h,m,g,v,y,j,x,$,C,S,o=i.length,k="",D=u(),E=n("isRTL");for(r=0;o>r;r++)l=i[r],c=l.event,d=_(l.start,l.start),p=_(l.start,l.end),f=b(l.col),h=w(l.col),m=h-f,h-=.025*m,m=h-f,g=m*(l.forwardCoord-l.backwardCoord),n("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),E?(y=h-l.backwardCoord*m,v=y-g):(v=f+l.backwardCoord*m,y=v+g),v=Math.max(v,f),y=Math.min(y,h),g=y-v,l.top=d,l.left=v,l.outerWidth=g,l.outerHeight=p-d,k+=J(c,l);for(D[0].innerHTML=k,j=D.children(),r=0;o>r;r++)l=i[r],c=l.event,x=e(j[r]),$=a("eventRender",c,c,x),$===!1?x.remove():($&&$!==!0&&(x.remove(),x=e($).css({position:"absolute",top:l.top,left:l.left}).appendTo(D)),l.element=x,c._id===s?et(c,x,l):x[0]._fci=r,T(c,x));for(F(D,i,et),r=0;o>r;r++)l=i[r],(x=l.element)&&(l.vsides=q(x,!0),l.hsides=N(x,!0),C=x.find(".fc-event-title"),C.length&&(l.contentTop=C[0].offsetTop));for(r=0;o>r;r++)l=i[r],(x=l.element)&&(x[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px",S=Math.max(0,l.outerHeight-l.vsides),x[0].style.height=S+"px",c=l.event,l.contentTop!==t&&10>S-l.contentTop&&(x.find("div.fc-event-time").text(B(c.start,n("timeFormat"))+" - "+c.title),x.find("div.fc-event-title").remove()),a("eventAfterRender",c,c,x))}function J(e,t){var i="<",a=e.url,o=tt(e,n),l=["fc-event","fc-event-vert"];return s(e)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(e.className),e.source&&(l=l.concat(e.source.className||[])),i+=a?"a href='"+Z(e.url)+"'":"div",i+=" class='"+l.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+o+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+Z(Y(e.start,e.end,n("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+Z(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&r(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(a?"a":"div")+">"}function et(e,t,i){var n=t.find("div.fc-event-time");s(e)&&nt(e,t,n),i.isEnd&&r(e)&&at(e,t,n),l(e,t)}function it(e,t,i){function b(){l||(t.width(r).height("").draggable("option","grid",null),l=!0)}var r,o,c,s=i.isStart,l=!0,d=p(),u=C(),f=S(),_=D(),g=h();t.draggable({opacity:n("dragOpacity","month"),revertDuration:n("dragRevertDuration"),start:function(i,p){a("eventDragStart",t,e,i,p),M(e,t),r=t.width(),d.start(function(i,a){if(H(),i){o=!1;var r=j(0,a.col),d=j(0,i.col);c=x(d,r),i.row?s?l&&(t.width(u-10),O(t,f*Math.round((e.end?(e.end-e.start)/m:n("defaultEventMinutes"))/_)),t.draggable("option","grid",[u,1]),l=!1):o=!0:(L(v(k(e.start),c),v(A(e),c)),b()),o=o||l&&!c}else b(),o=!0;t.draggable("option","revert",o)},i,"drag")},stop:function(i,n){if(d.stop(),H(),a("eventDragStop",t,e,i,n),o)b(),t.css("filter",""),z(e,t);else{var s=0;l||(s=Math.round((t.offset().top-E().offset().top)/f)*_+g-(60*e.start.getHours()+e.start.getMinutes())),P(this,e,c,s,l,i,n)}}})}function nt(e,t,s){function I(){H(),f&&(m?(s.hide(),t.draggable("option","grid",null),L(v(k(e.start),E),v(A(e),E))):(O(T),s.css("display",""),t.draggable("option","grid",[l,c])))}function O(t){var a,i=y(k(e.start),t);e.end&&(a=y(k(e.end),t)),s.text(Y(i,a,n("timeFormat")))}var u,p,f,h,m,_,b,w,E,T,F,r=i.getCoordinateGrid(),o=$(),l=C(),c=S(),d=D();t.draggable({scroll:!1,grid:[l,c],axis:1==o?"y":!1,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(i,n){a("eventDragStart",t,e,i,n),M(e,t),r.build(),u=t.position(),p=r.cell(i.pageX,i.pageY),f=h=!0,m=_=g(p),b=w=0,E=0,T=F=0},drag:function(e,i){var n=r.cell(e.pageX,e.pageY);if(f=!!n){if(m=g(n),b=Math.round((i.position.left-u.left)/l),b!=w){var a=j(0,p.col),s=p.col+b;s=Math.max(0,s),s=Math.min(o-1,s);var v=j(0,s);E=x(v,a)}m||(T=Math.round((i.position.top-u.top)/c)*d)}(f!=h||m!=_||b!=w||T!=F)&&(I(),h=f,_=m,w=b,F=T),t.draggable("option","revert",!f)},stop:function(i,n){H(),a("eventDragStop",t,e,i,n),f&&(m||E||T)?P(this,e,E,m?0:T,m,i,n):(f=!0,m=!1,b=0,E=0,T=0,I(),t.css("filter",""),t.css(u),z(e,t))}})}function at(e,t,i){var s,r,l=S(),c=D();t.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(i,n){s=r=0,M(e,t),a("eventResizeStart",this,e,i,n)},resize:function(a,d){s=Math.round((Math.max(l,t.height())-d.originalSize.height)/l),s!=r&&(i.text(Y(e.start,s||e.end?y(o(e),c*s):null,n("timeFormat"))),r=s)},stop:function(i,n){a("eventResizeStop",this,e,i,n),s?I(this,e,0,c*s,i,n):z(e,t)}})}var i=this;i.renderEvents=U,i.clearEvents=V,i.slotSegHtml=J,xt.call(i);var n=i.opt,a=i.trigger,s=i.isEventDraggable,r=i.isEventResizable,o=i.eventEnd,l=i.eventElementHandlers,c=i.setHeight,d=i.getDaySegmentContainer,u=i.getSlotSegmentContainer,p=i.getHoverListener,f=i.getMaxMinute,h=i.getMinMinute,_=i.timePosition,g=i.getIsCellAllDay,b=i.colContentLeft,w=i.colContentRight,j=i.cellToDate,$=i.getColCnt,C=i.getColWidth,S=i.getSnapHeight,D=i.getSnapMinutes,E=i.getSlotContainer,T=i.reportEventElement,z=i.showEvents,M=i.hideEvents,P=i.eventDrop,I=i.eventResize,L=i.renderDayOverlay,H=i.clearOverlays,R=i.renderDayEvents,W=i.calendar,B=W.formatDate,Y=W.formatDates;i.draggableDayEvent=it}function ft(e){var n,t=ht(e),i=t[0];if(mt(t),i){for(n=0;i.length>n;n++)_t(i[n]);for(n=0;i.length>n;n++)gt(i[n],0,0)}return vt(t)}function ht(e){var i,n,a,t=[];for(i=0;e.length>i;i++){for(n=e[i],a=0;t.length>a&&bt(n,t[a]).length;a++);(t[a]||(t[a]=[])).push(n)}return t}function mt(e){var t,i,n,a,s;for(t=0;e.length>t;t++)for(i=e[t],n=0;i.length>n;n++)for(a=i[n],a.forwardSegs=[],s=t+1;e.length>s;s++)bt(a,e[s],a.forwardSegs)}function _t(e){var a,s,i=e.forwardSegs,n=0;if(e.forwardPressure===t){for(a=0;i.length>a;a++)s=i[a],_t(s),n=Math.max(n,1+s.forwardPressure);e.forwardPressure=n}}function gt(e,i,n){var s,a=e.forwardSegs;if(e.forwardCoord===t)for(a.length?(a.sort(wt),gt(a[0],i+1,n),e.forwardCoord=a[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(i+1),s=0;a.length>s;s++)gt(a[s],0,e.forwardCoord)}function vt(e){var i,n,a,t=[];for(i=0;e.length>i;i++)for(n=e[i],a=0;n.length>a;a++)t.push(n[a]);return t}function bt(e,t,i){i=i||[];for(var n=0;t.length>n;n++)yt(e,t[n])&&i.push(t[n]);return i}function yt(e,t){return e.end>t.start&&t.end>e.start}function wt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||kt(e,t)}function kt(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function jt(i,n,a){function f(t,i){var n=p[t];return e.isPlainObject(n)?K(n,i||a):n}function h(e,t){return n.trigger.apply(n,[e,t||s].concat(Array.prototype.slice.call(arguments,2),[s]))}function m(e){var t=e.source||{};return nt(e.startEditable,t.startEditable,f("eventStartEditable"),e.editable,t.editable,f("editable"))&&!f("disableDragging")}function _(e){var t=e.source||{};return nt(e.durationEditable,t.durationEditable,f("eventDurationEditable"),e.editable,t.editable,f("editable"))&&!f("disableResizing")}function g(e){c={};var t,n,i=e.length;for(t=0;i>t;t++)n=e[t],c[n._id]?c[n._id].push(n):c[n._id]=[n]}function b(){c={},d={},u=[]}function w(e){return e.end?k(e.end):r(e)}function j(e,t){u.push({event:e,element:t}),d[e._id]?d[e._id].push(t):d[e._id]=[t]}function $(){e.each(u,function(e,t){s.trigger("eventDestroy",t.event,t.event,t.element)})}function C(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:h("eventClick",this,e,i)}).hover(function(t){h("eventMouseover",this,e,t)},function(t){h("eventMouseout",this,e,t)})}function S(e,t){E(e,t,"show")}function D(e,t){E(e,t,"hide")}function E(e,t,i){var a,n=d[e._id],s=n.length;for(a=0;s>a;a++)t&&n[a][0]==t[0]||n[a][i]()}function T(e,t,i,n,a,s,r){var o=t.allDay,d=t._id;M(c[d],i,n,a),h("eventDrop",e,t,i,n,a,function(){M(c[d],-i,-n,o),l(d)},s,r),l(d)}function z(e,t,i,n,a,s){var r=t._id;A(c[r],i,n),h("eventResize",e,t,i,n,function(){A(c[r],-i,-n),l(r)},a,s),l(r)}function M(e,i,n,a){n=n||0;for(var s,r=e.length,l=0;r>l;l++)s=e[l],a!==t&&(s.allDay=a),y(v(s.start,i,!0),n),s.end&&(s.end=y(v(s.end,i,!0),n)),o(s,p)}function A(e,t,i){i=i||0;for(var n,a=e.length,s=0;a>s;s++)n=e[s],n.end=y(v(w(n),t,!0),i),o(n,p)}function H(e){return"object"==typeof e&&(e=e.getDay()),F[e]}function R(){return I}function q(e,t,i){for(t=t||1;F[(e.getDay()+(i?t:0)+7)%7];)v(e,t)}function W(){var e=B.apply(null,arguments),t=Y(e),i=U(t);return i}function B(e,t){var i=s.getColCnt(),n=L?-1:1,a=L?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var r=e*i+(t*n+a);return r}function Y(e){var t=s.visStart.getDay();return e+=O[t],7*Math.floor(e/I)+N[(e%I+I)%I]-t}function U(e){var t=k(s.visStart);return v(t,e),t}function V(e){var t=X(e),i=G(t),n=Z(i);return n}function X(e){return x(e,s.visStart)}function G(e){var t=s.visStart.getDay();return e+=t,Math.floor(e/7)*I+O[(e%7+7)%7]-O[t]}function Z(e){var t=s.getColCnt(),i=L?-1:1,n=L?t-1:0,a=Math.floor(e/t),r=(e%t+t)%t*i+n;return{row:a,col:r}}function Q(e,t){for(var i=s.getRowCnt(),n=s.getColCnt(),a=[],r=X(e),o=X(t),l=G(r),c=G(o)-1,d=0;i>d;d++){var u=d*n,p=u+n-1,f=Math.max(l,u),h=Math.min(c,p);if(h>=f){var m=Z(f),_=Z(h),g=[m.col,_.col].sort(),v=Y(f)==r,b=Y(h)+1==o;a.push({row:d,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:b})}}return a}var s=this;s.element=i,s.calendar=n,s.name=a,s.opt=f,s.trigger=h,s.isEventDraggable=m,s.isEventResizable=_,s.setEventData=g,s.clearEventData=b,s.eventEnd=w,s.reportEventElement=j,s.triggerEventDestroy=$,s.eventElementHandlers=C,s.showEvents=S,s.hideEvents=D,s.eventDrop=T,s.eventResize=z;var r=s.defaultEventEnd,o=n.normalizeEvent,l=n.reportEventChange,c={},d={},u=[],p=n.options;s.isHiddenDay=H,s.skipHiddenDays=q,s.getCellsPerWeek=R,s.dateToCell=V,s.dateToDayOffset=X,s.dayOffsetToCellOffset=G,s.cellOffsetToCell=Z,s.cellToDate=W,s.cellToCellOffset=B,s.cellOffsetToDayOffset=Y,s.dayOffsetToDate=U,s.rangeToSegments=Q;var I,P=f("hiddenDays")||[],F=[],O=[],N=[],L=f("isRTL");(function(){f("weekends")===!1&&P.push(0,6);for(var t=0,i=0;7>t;t++)O[t]=i,F[t]=-1!=e.inArray(t,P),F[t]||(N[i]=t,i++);if(I=i,!I)throw"invalid hiddenDays"})()}function xt(){function H(e,t){var i=q(e,!1,!0);Ct(i,function(e,t){o(e.event,t)}),st(i,t),Ct(i,function(e,t){n("eventAfterRender",e.event,e.event,t)})}function R(e,t,i){var n=q([e],!0,!1),a=[];return Ct(n,function(e,n){e.row===t&&n.css("top",i),a.push(n[0])}),a}function q(t,i,n){var o,l,a=$(),s=i?e("<div/>"):a,r=W(t);return Y(r),o=U(r),s[0].innerHTML=o,l=s.children(),i&&a.append(l),G(r,l),Ct(r,function(e,t){e.hsides=N(t,!0)}),Ct(r,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),Ct(r,function(e,t){e.outerHeight=t.outerHeight(!0)}),K(r,n),r}function W(e){for(var t=[],i=0;e.length>i;i++){var n=B(e[i]);t.push.apply(t,n)}return t}function B(e){for(var t=e.start,i=A(e),n=z(t,i),a=0;n.length>a;a++)n[a].event=e;return n}function Y(e){for(var t=i("isRTL"),n=0;e.length>n;n++){var a=e[n],s=(t?a.isEnd:a.isStart)?y:g,r=(t?a.isStart:a.isEnd)?w:b,o=s(a.leftCol),l=r(a.rightCol);a.left=o,a.outerWidth=l-o}}function U(e){for(var t="",i=0;e.length>i;i++)t+=V(e[i]);return t}function V(e){var t="",n=i("isRTL"),r=e.event,o=r.url,l=["fc-event","fc-event-hori"];a(r)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(r.className),r.source&&(l=l.concat(r.source.className||[]));var c=tt(r,i);return t+=o?"<a href='"+Z(o)+"'":"<div",t+=" class='"+l.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+c+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+Z(C(r.start,r.end,i("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+Z(r.title||"")+"</span>"+"</div>",e.isEnd&&s(r)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(o?"a":"div")+">"}function G(t,i){for(var a=0;t.length>a;a++){var s=t[a],r=s.event,o=i.eq(a),l=n("eventRender",r,r,o);l===!1?o.remove():(l&&l!==!0&&(l=e(l).css({position:"absolute",left:s.left}),o.replaceWith(l),o=l),s.element=o)}}function K(e,t){var i=J(e),n=at(),a=[];if(t)for(var s=0;n.length>s;s++)n[s].height(i[s]);for(var s=0;n.length>s;s++)a.push(n[s].position().top);Ct(e,function(e,t){t.css("top",a[e.row]+e.top)})}function J(e){for(var t=f(),i=h(),n=[],a=et(e),s=0;t>s;s++){for(var r=a[s],o=[],l=0;i>l;l++)o.push(0);for(var c=0;r.length>c;c++){var d=r[c];d.top=X(o.slice(d.leftCol,d.rightCol+1));for(var l=d.leftCol;d.rightCol>=l;l++)o[l]=d.top+d.outerHeight}n.push(X(o))}return n}function et(e){var n,a,s,t=f(),i=[];for(n=0;e.length>n;n++)a=e[n],s=a.row,a.element&&(i[s]?i[s].push(a):i[s]=[a]);for(s=0;t>s;s++)i[s]=it(i[s]||[]);return i}function it(e){for(var t=[],i=nt(e),n=0;i.length>n;n++)t.push.apply(t,i[n]);return t}function nt(e){e.sort(St);for(var t=[],i=0;e.length>i;i++){for(var n=e[i],a=0;t.length>a&&$t(n,t[a]);a++);t[a]?t[a].push(n):t[a]=[n]}return t}function at(){var e,t=f(),i=[];for(e=0;t>e;e++)i[e]=_(e).find("div.fc-day-content > div");return i}function st(e,t){var i=$();Ct(e,function(e,i,n){var a=e.event;a._id===t?rt(a,i,e):i[0]._fci=n}),F(i,e,rt)}function rt(e,i,n){a(e)&&t.draggableDayEvent(e,i,n),n.isEnd&&s(e)&&t.resizableDayEvent(e,i,n),l(e,i)}function ot(e,t){var s,a=T();t.draggable({delay:50,opacity:i("dragOpacity"),revertDuration:i("dragRevertDuration"),start:function(i,r){n("eventDragStart",t,e,i,r),d(e,t),a.start(function(i,n,a,r){if(t.draggable("option","revert",!i||!a&&!r),D(),i){var o=M(n),l=M(i);s=x(l,o),S(v(k(e.start),s),v(A(e),s))}else s=0},i,"drag")},stop:function(i,r){a.stop(),D(),n("eventDragStop",t,e,i,r),s?u(this,e,s,0,e.allDay,i,r):(t.css("filter",""),c(e,t))}})}function lt(t,a,s){var o=i("isRTL"),l=o?"w":"e",u=a.find(".ui-resizable-"+l),m=!1;Q(a),a.mousedown(function(e){e.preventDefault()}).click(function(e){m&&(e.preventDefault(),e.stopImmediatePropagation())}),u.mousedown(function(i){function j(i){n("eventResizeStop",this,t,i),e("body").css("cursor",""),o.stop(),D(),b&&p(this,t,b,0,i),setTimeout(function(){m=!1},0)}if(1==i.which){m=!0;var o=T();f(),h();var b,y,g=a.css("top"),w=e.extend({},t),k=L(O(t.start));E(),e("body").css("cursor",l+"-resize").one("mouseup",j),n("eventResizeStart",this,t,i),o.start(function(i,n){if(i){var a=P(n),o=P(i);if(o=Math.max(o,k),b=I(o)-I(a)){w.end=v(r(t),b,!0);var u=y;y=R(w,s.row,g),y=e(y),y.find("*").css("cursor",l+"-resize"),u&&u.remove(),d(t)}else y&&(c(t),y.remove(),y=null);D(),S(t.start,v(A(t),b))}},i)}})}var t=this;t.renderDayEvents=H,t.draggableDayEvent=ot,t.resizableDayEvent=lt;var i=t.opt,n=t.trigger,a=t.isEventDraggable,s=t.isEventResizable,r=t.eventEnd,o=t.reportEventElement,l=t.eventElementHandlers,c=t.showEvents,d=t.hideEvents,u=t.eventDrop,p=t.eventResize,f=t.getRowCnt,h=t.getColCnt;t.getColWidth;var _=t.allDayRow,g=t.colLeft,b=t.colRight,y=t.colContentLeft,w=t.colContentRight;t.dateToCell;var $=t.getDaySegmentContainer,C=t.calendar.formatDates,S=t.renderDayOverlay,D=t.clearOverlays,E=t.clearSelection,T=t.getHoverListener,z=t.rangeToSegments,M=t.cellToDate,P=t.cellToCellOffset,I=t.cellOffsetToDayOffset,O=t.dateToDayOffset,L=t.dayOffsetToCellOffset}function $t(e,t){for(var i=0;t.length>i;i++){var n=t[i];if(e.rightCol>=n.leftCol&&n.rightCol>=e.leftCol)return!0}return!1}function Ct(e,t){for(var i=0;e.length>i;i++){var n=e[i],a=n.element;a&&t(n,a,i)}}function St(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function Dt(){function l(e,t,i){c(),t||(t=a(e,i)),s(e,t,i),d(e,t,i)}function c(e){o&&(o=!1,r(),n("unselect",null,e))}function d(e,t,i,a){o=!0,n("select",null,e,t,i,a)}function u(n){var a=t.cellToDate,o=t.getIsCellAllDay,l=t.getHoverListener(),u=t.reportDayClick;if(1==n.which&&i("selectable")){c(n);var f;l.start(function(e,t){r(),e&&o(e)?(f=[a(t),a(e)].sort(V),s(f[0],f[1],!0)):f=null},n),e(document).one("mouseup",function(e){l.stop(),f&&(+f[0]==+f[1]&&u(f[0],!0,e),d(f[0],f[1],!0,e))})}}var t=this;t.select=l,t.unselect=c,t.reportSelection=d,t.daySelectionMousedown=u;var i=t.opt,n=t.trigger,a=t.defaultSelectionEnd,s=t.renderSelection,r=t.clearSelection,o=!1;i("selectable")&&i("unselectAuto")&&e(document).mousedown(function(t){var n=i("unselectCancel");n&&e(t.target).parents(n).length||c(t)})}function Et(){function a(t,a){var s=n.shift();return s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=a[0]&&s.appendTo(a),i.push(s.css(t).show()),s}function s(){for(var e;e=i.shift();)n.push(e.hide().unbind())}var t=this;t.renderOverlay=a,t.clearOverlays=s;var i=[],n=[]}function Tt(e){var i,n,t=this;t.build=function(){i=[],n=[],e(i,n)},t.cell=function(e,t){var r,a=i.length,s=n.length,o=-1,l=-1;for(r=0;a>r;r++)if(t>=i[r][0]&&i[r][1]>t){o=r;break}for(r=0;s>r;r++)if(e>=n[r][0]&&n[r][1]>e){l=r;break}return o>=0&&l>=0?{row:o,col:l}:null},t.rect=function(e,t,a,s,r){var o=r.offset();return{top:i[e][0]-o.top,left:n[t][0]-o.left,width:n[s][1]-n[t][0],height:i[a][1]-i[e][0]}}}function zt(t){function o(e){Mt(e);var i=t.cell(e.pageX,e.pageY);(!i!=!r||i&&(i.row!=r.row||i.col!=r.col))&&(i?(s||(s=i),a(i,s,i.row-s.row,i.col-s.col)):a(i,s),r=i)}var n,a,s,r,i=this;i.start=function(i,l,c){a=i,s=r=null,t.build(),o(l),n=c||"mousemove",e(document).bind(n,o)},i.stop=function(){return e(document).unbind(n,o),r}}function Mt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function At(e){function r(t){return n[t]=n[t]||e(t)}var i=this,n={},a={},s={};i.left=function(e){return a[e]=a[e]===t?r(e).position().left:a[e]},i.right=function(e){return s[e]=s[e]===t?i.left(e)+r(e).width():s[e]},i.clear=function(){n={},a={},s={}}}var i={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},n={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=e.fullCalendar={version:"1.6.4"},s=a.views={};e.fn.fullCalendar=function(a){if("string"==typeof a){var r,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e.data(this,"fullCalendar");if(i&&e.isFunction(i[a])){var n=i[a].apply(i,s);r===t&&(r=n),"destroy"==a&&e.removeData(this,"fullCalendar")}}),r!==t?r:this}a=a||{};var l=a.eventSources||[];return delete a.eventSources,a.events&&(l.push(a.events),delete a.events),a=e.extend(!0,{},i,a.isRTL||a.isRTL===t&&i.isRTL?n:{},a),this.each(function(t,i){var n=e(i),s=new o(n,a,l);n.data("fullCalendar",s),s.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var c={dataType:"json",cache:!1},d=1;a.addDays=v,a.cloneDate=k,a.parseDate=C,a.parseISO8601=S,a.parseTime=D,a.formatDate=E,a.formatDates=T;var p=["sun","mon","tue","wed","thu","fri","sat"],f=864e5,h=36e5,m=6e4,z={s:function(e){return e.getSeconds()},ss:function(e){return G(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return G(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return G(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return G(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return G(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return G(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return E(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return M(e)}};a.dateFormatters=z,a.applyAll=it,s.month=at,s.basicWeek=st,s.basicDay=rt,r({weekMode:"fixed"}),s.agendaWeek=ct,s.agendaDay=dt,r({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e,t,i){"use strict";function n(e){return function(){var r,o,t=arguments[0],i="["+(e?e+":":"")+t+"] ",n=arguments[1],a=arguments,s=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):e===void 0?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(r=i+n.replace(/\{\d+\}/g,function(e){var i,t=+e.slice(1,-1);return a.length>t+2?(i=a[t+2],"function"==typeof i?i.toString().replace(/ ?\{[\s\S]*$/,""):i===void 0?"undefined":"string"!=typeof i?dt(i):i):e}),r=r+"\nhttp://errors.angularjs.org/1.2.18/"+(e?e+"/":"")+t,o=2;arguments.length>o;o++)r=r+(2==o?"?":"&")+"p"+(o-2)+"="+encodeURIComponent(s(arguments[o]));return new Error(r)}}function y(e){if(null==e||q(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:I(e)||L(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function w(e,t,i){var n;if(e)if(H(e))for(n in e)"prototype"==n||"length"==n||"name"==n||e.hasOwnProperty&&!e.hasOwnProperty(n)||t.call(i,e[n],n);else if(e.forEach&&e.forEach!==w)e.forEach(t,i);else if(y(e))for(n=0;e.length>n;n++)t.call(i,e[n],n);else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n);return e}function k(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t.sort()}function j(e,t,i){for(var n=k(e),a=0;n.length>a;a++)t.call(i,e[n[a]],n[a]);return n}function x(e){return function(t,i){e(i,t)}}function $(){for(var t,e=b.length;e;){if(e--,t=b[e].charCodeAt(0),57==t)return b[e]="A",b.join("");if(90!=t)return b[e]=String.fromCharCode(t+1),b.join("");b[e]="0"}return b.unshift("0"),b.join("")}function C(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function S(e){var t=e.$$hashKey;return w(arguments,function(t){t!==e&&w(t,function(t,i){e[i]=t})}),C(e,t),e}function D(e){return parseInt(e,10)}function E(e,t){return S(new(S(function(){},{prototype:e})),t)}function T(){}function z(e){return e}function M(e){return function(){return e}}function A(e){return e===void 0}function P(e){return e!==void 0}function F(e){return null!=e&&"object"==typeof e}function I(e){return"string"==typeof e}function O(e){return"number"==typeof e}function N(e){return"[object Date]"===h.call(e)}function H(e){return"function"==typeof e}function R(e){return"[object RegExp]"===h.call(e)}function q(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function W(e){return e&&e.$evalAsync&&e.$watch}function B(e){return"[object File]"===h.call(e)}function Y(e){return"[object Blob]"===h.call(e)}function X(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function K(e,t,i){var n=[];return w(e,function(e,a,s){n.push(t.call(i,e,a,s))}),n}function Q(e,t){return-1!=J(e,t)}function J(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;e.length>i;i++)if(t===e[i])return i;return-1}function et(e,t){var i=J(e,t);return i>=0&&e.splice(i,1),t}function it(e,t,i,n){if(q(e)||W(e))throw m("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw m("cpi","Can't copy! Source and destination are identical.");if(i=i||[],n=n||[],F(e)){var a=J(i,e);if(-1!==a)return n[a];i.push(e),n.push(t)}var s;if(L(e)){t.length=0;for(var r=0;e.length>r;r++)s=it(e[r],null,i,n),F(e[r])&&(i.push(e[r]),n.push(s)),t.push(s)}else{var o=t.$$hashKey;w(t,function(e,i){delete t[i]});for(var l in e)s=it(e[l],null,i,n),F(e[l])&&(i.push(e[l]),n.push(s)),t[l]=s;
C(t,o)}}else t=e,e&&(L(e)?t=it(e,[],i,n):N(e)?t=new Date(e.getTime()):R(e)?t=new RegExp(e.source):F(e)&&(t=it(e,{},i,n)));return t}function nt(e,t){if(L(e)){t=t||[];for(var i=0;e.length>i;i++)t[i]=e[i]}else if(F(e)){t=t||{};for(var n in e)!s.call(e,n)||"$"===n.charAt(0)&&"$"===n.charAt(1)||(t[n]=e[n])}return t||e}function at(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var s,r,o,n=typeof e,a=typeof t;if(n==a&&"object"==n){if(!L(e)){if(N(e))return N(t)&&e.getTime()==t.getTime();if(R(e)&&R(t))return e.toString()==t.toString();if(W(e)||W(t)||q(e)||q(t)||L(t))return!1;o={};for(r in e)if("$"!==r.charAt(0)&&!H(e[r])){if(!at(e[r],t[r]))return!1;o[r]=!0}for(r in t)if(!o.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t[r]!==i&&!H(t[r]))return!1;return!0}if(!L(t))return!1;if((s=e.length)==t.length){for(r=0;s>r;r++)if(!at(e[r],t[r]))return!1;return!0}}return!1}function st(){return t.securityPolicy&&t.securityPolicy.isActive||t.querySelector&&!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"))}function rt(e,t,i){return e.concat(p.call(t,i))}function ot(e,t){return p.call(e,t||0)}function lt(e,t){var i=arguments.length>2?ot(arguments,2):[];return!H(t)||t instanceof RegExp?t:i.length?function(){return arguments.length?t.apply(e,i.concat(p.call(arguments,0))):t.apply(e,i)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ct(e,n){var a=n;return"string"==typeof e&&"$"===e.charAt(0)?a=i:q(n)?a="$WINDOW":n&&t===n?a="$DOCUMENT":W(n)&&(a="$SCOPE"),a}function dt(e,t){return e===void 0?i:JSON.stringify(e,ct,t?"  ":null)}function ut(e){return I(e)?JSON.parse(e):e}function pt(e){if("function"==typeof e)e=!0;else if(e&&0!==e.length){var t=a(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function ft(e){e=d(e).clone();try{e.empty()}catch(t){}var i=3,n=d("<div>").append(e).html();try{return e[0].nodeType===i?a(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+a(t)})}catch(t){return a(n)}}function ht(e){try{return decodeURIComponent(e)}catch(t){}}function mt(e){var i,n,t={};return w((e||"").split("&"),function(e){if(e&&(i=e.split("="),n=ht(i[0]),P(n))){var a=P(i[1])?ht(i[1]):!0;t[n]?L(t[n])?t[n].push(a):t[n]=[t[n],a]:t[n]=a}}),t}function _t(e){var t=[];return w(e,function(e,i){L(e)?w(e,function(e){t.push(vt(i,!0)+(e===!0?"":"="+vt(e,!0)))}):t.push(vt(i,!0)+(e===!0?"":"="+vt(e,!0)))}),t.length?t.join("&"):""}function gt(e){return vt(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function vt(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function bt(e,i){function l(e){e&&n.push(e)}var a,s,n=[e],r=["ng:app","ng-app","x-ng-app","data-ng-app"],o=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;w(r,function(i){r[i]=!0,l(t.getElementById(i)),i=i.replace(":","\\:"),e.querySelectorAll&&(w(e.querySelectorAll("."+i),l),w(e.querySelectorAll("."+i+"\\:"),l),w(e.querySelectorAll("["+i+"]"),l))}),w(n,function(e){if(!a){var t=" "+e.className+" ",i=o.exec(t);i?(a=e,s=(i[2]||"").replace(/\s+/g,",")):w(e.attributes,function(t){!a&&r[t.name]&&(a=e,s=t.value)})}}),a&&i(a,s?[s]:[])}function yt(i,n){var a=function(){if(i=d(i),i.injector()){var e=i[0]===t?"document":ft(i);throw m("btstrpd","App Already Bootstrapped with this Element '{0}'",e)}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",i)}]),n.unshift("ng");var a=Ci(n);return a.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,i,n){e.$apply(function(){t.data("$injector",n),i(t)(e)})}]),a},s=/^NG_DEFER_BOOTSTRAP!/;return e&&!s.test(e.name)?a():(e.name=e.name.replace(s,""),_.resumeBootstrap=function(e){w(e,function(e){n.push(e)}),a()},void 0)}function kt(e,t){return t=t||"_",e.replace(wt,function(e,i){return(i?t:"")+e.toLowerCase()})}function jt(){u=e.jQuery,u&&u.fn.on?(d=u,S(u.fn,{scope:pi.scope,isolateScope:pi.isolateScope,controller:pi.controller,injector:pi.injector,inheritedData:pi.inheritedData}),Wt("remove",!0,!0,!1),Wt("empty",!1,!1,!1),Wt("html",!1,!1,!0)):d=Qt,_.element=d}function xt(e,t,i){if(!e)throw m("areq","Argument '{0}' is {1}",t||"?",i||"required");return e}function $t(e,t,i){return i&&L(e)&&(e=e[e.length-1]),xt(H(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Ct(e,t){if("hasOwnProperty"===e)throw m("badname","hasOwnProperty is not a valid {0} name",t)}function St(e,t,i){if(!t)return e;for(var a,n=t.split("."),s=e,r=n.length,o=0;r>o;o++)a=n[o],e&&(e=(s=e)[a]);return!i&&H(e)?lt(s,e):e}function Dt(e){var t=e[0],i=e[e.length-1];if(t===i)return d(t);var n=t,a=[n];do{if(n=n.nextSibling,!n)break;a.push(n)}while(n!==i);return d(a)}function Et(e){function a(e,t,i){return e[t]||(e[t]=i())}var t=n("$injector"),i=n("ng"),s=a(e,"angular",Object);return s.$$minErr=s.$$minErr||n,a(s,"module",function(){var e={};return function(n,s,r){var o=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return o(n,"module"),s&&e.hasOwnProperty(n)&&(e[n]=null),a(e,n,function(){function l(t,i,n){return function(){return e[n||"push"]([t,i,arguments]),o}}if(!s)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",n);var e=[],i=[],a=l("$injector","invoke"),o={_invokeQueue:e,_runBlocks:i,requires:s,name:n,provider:l("$provide","provider"),factory:l("$provide","factory"),service:l("$provide","service"),value:l("$provide","value"),constant:l("$provide","constant","unshift"),animation:l("$animateProvider","register"),filter:l("$filterProvider","register"),controller:l("$controllerProvider","register"),directive:l("$compileProvider","directive"),config:a,run:function(e){return i.push(e),this}};return r&&a(r),o})}})}function zt(t){S(t,{bootstrap:yt,copy:it,extend:S,equals:at,element:d,forEach:w,injector:Ci,noop:T,bind:lt,toJson:dt,fromJson:ut,identity:z,isUndefined:A,isDefined:P,isString:I,isFunction:H,isObject:F,isNumber:O,isElement:X,isArray:L,version:Tt,isDate:N,lowercase:a,uppercase:r,callbacks:{counter:0},$$minErr:n,$$csp:st}),g=Et(e);try{g("ngLocale")}catch(i){g("ngLocale",[]).provider("$locale",nn)}g("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Rn}),e.provider("$compile",Ii).directive({a:ja,input:qa,textarea:qa,form:Da,script:xs,select:Ss,style:Es,option:Ds,ngBind:es,ngBindHtml:is,ngBindTemplate:ts,ngClass:as,ngClassEven:rs,ngClassOdd:ss,ngCloak:os,ngController:ls,ngForm:Ea,ngHide:vs,ngIf:ds,ngInclude:us,ngInit:fs,ngNonBindable:hs,ngPluralize:ms,ngRepeat:_s,ngShow:gs,ngStyle:bs,ngSwitch:ys,ngSwitchWhen:ws,ngSwitchDefault:ks,ngOptions:Cs,ngTransclude:js,ngModel:Xa,ngList:Za,ngChange:Ga,required:Ka,ngRequired:Ka,ngValue:Ja}).directive({ngInclude:ps}).directive(xa).directive(cs),e.provider({$anchorScroll:Si,$animate:Ei,$browser:Mi,$cacheFactory:Ai,$controller:qi,$document:Wi,$exceptionHandler:Bi,$filter:ia,$interpolate:en,$interval:tn,$http:Gi,$httpBackend:Zi,$location:bn,$log:yn,$parse:In,$rootScope:Hn,$q:On,$sce:Xn,$sceDelegate:Vn,$sniffer:Gn,$templateCache:Pi,$timeout:Kn,$window:ta,$$rAF:Ln,$$asyncCallback:Ti})}])}function Nt(){return++Pt}function qt(e){return e.replace(Lt,function(e,t,i,n){return n?i.toUpperCase():i}).replace(Ht,"Moz$1")}function Wt(e,t,i,n){function s(e){var o,l,c,p,f,h,m,s=i&&e?[this.filter(e)]:[this],r=t;if(!n||null!=e)for(;s.length;)for(o=s.shift(),l=0,c=o.length;c>l;l++)for(p=d(o[l]),r?p.triggerHandler("$destroy"):r=!r,f=0,h=(m=p.children()).length;h>f;f++)s.push(u(m[f]));return a.apply(this,arguments)}var a=u.fn[e];a=a.$original||a,s.$original=a,u.fn[e]=s}function Gt(e){return!Yt.test(e)}function Kt(e,t){var n,a,s,l,c,d,r=t.createDocumentFragment(),o=[];if(Gt(e))o.push(t.createTextNode(e));else{for(n=r.appendChild(t.createElement("div")),a=(Ut.exec(e)||["",""])[1].toLowerCase(),s=Xt[a]||Xt._default,n.innerHTML="<div>&#160;</div>"+s[1]+e.replace(Vt,"<$1></$2>")+s[2],n.removeChild(n.firstChild),l=s[0];l--;)n=n.lastChild;for(c=0,d=n.childNodes.length;d>c;++c)o.push(n.childNodes[c]);n=r.firstChild,n.textContent=""}return r.textContent="",r.innerHTML="",o}function Zt(e,i){i=i||t;var n;return(n=Bt.exec(e))?[i.createElement(n[1])]:Kt(e,i)}function Qt(e){if(e instanceof Qt)return e;if(I(e)&&(e=V(e)),!(this instanceof Qt)){if(I(e)&&"<"!=e.charAt(0))throw Rt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Qt(e)}if(I(e)){li(this,Zt(e));var i=d(t.createDocumentFragment());i.append(this)}else li(this,e)}function Jt(e){return e.cloneNode(!0)}function ei(e){ii(e);for(var t=0,i=e.childNodes||[];i.length>t;t++)ei(i[t])}function ti(e,t,i,n){if(P(n))throw Rt("offargs","jqLite#off() does not support the `selector` argument");var a=ni(e,"events"),s=ni(e,"handle");s&&(A(t)?w(a,function(t,i){It(e,i,t),delete a[i]}):w(t.split(" "),function(t){A(i)?(It(e,t,a[t]),delete a[t]):et(a[t]||[],i)}))}function ii(e,t){var n=e[At],a=Mt[n];if(a){if(t)return delete Mt[n].data[t],void 0;a.handle&&(a.events.$destroy&&a.handle({},"$destroy"),ti(e)),delete Mt[n],e[At]=i}}function ni(e,t,i){var n=e[At],a=Mt[n||-1];return P(i)?(a||(e[At]=n=Nt(),a=Mt[n]={}),a[t]=i,void 0):a&&a[t]}function ai(e,t,i){var n=ni(e,"data"),a=P(i),s=!a&&P(t),r=s&&!F(t);if(n||r||ni(e,"data",n={}),a)n[t]=i;else{if(!s)return n;if(r)return n&&n[t];S(n,t)}}function si(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function ri(e,t){t&&e.setAttribute&&w(t.split(" "),function(t){e.setAttribute("class",V((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+V(t)+" "," ")))})}function oi(e,t){if(t&&e.setAttribute){var i=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");w(t.split(" "),function(e){e=V(e),-1===i.indexOf(" "+e+" ")&&(i+=e+" ")}),e.setAttribute("class",V(i))}}function li(e,t){if(t){t=t.nodeName||!P(t.length)||q(t)?[t]:t;for(var i=0;t.length>i;i++)e.push(t[i])}}function ci(e,t){return di(e,"$"+(t||"ngController")+"Controller")}function di(e,t,n){e=d(e),9==e[0].nodeType&&(e=e.find("html"));for(var a=L(t)?t:[t];e.length;){for(var s=e[0],r=0,o=a.length;o>r;r++)if((n=e.data(a[r]))!==i)return n;e=d(s.parentNode||11===s.nodeType&&s.host)}}function ui(e){for(var t=0,i=e.childNodes;i.length>t;t++)ei(i[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}function mi(e,t){var i=fi[t.toLowerCase()];return i&&hi[e.nodeName]&&i}function _i(e,i){var n=function(n,a){if(n.preventDefault||(n.preventDefault=function(){n.returnValue=!1}),n.stopPropagation||(n.stopPropagation=function(){n.cancelBubble=!0}),n.target||(n.target=n.srcElement||t),A(n.defaultPrevented)){var s=n.preventDefault;n.preventDefault=function(){n.defaultPrevented=!0,s.call(n)},n.defaultPrevented=!1}n.isDefaultPrevented=function(){return n.defaultPrevented||n.returnValue===!1};var r=nt(i[a||n.type]||[]);w(r,function(t){t.call(e,n)}),8>=c?(n.preventDefault=null,n.stopPropagation=null,n.isDefaultPrevented=null):(delete n.preventDefault,delete n.stopPropagation,delete n.isDefaultPrevented)};return n.elem=e,n}function vi(e){var n,t=typeof e;return"object"==t&&null!==e?"function"==typeof(n=e.$$hashKey)?n=e.$$hashKey():n===i&&(n=e.$$hashKey=$()):n=e,t+":"+n}function bi(e){w(e,this.put,this)}function $i(e){var t,i,n,a;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&(i=e.toString().replace(ji,""),n=i.match(yi),w(n[1].split(wi),function(e){e.replace(ki,function(e,i,n){t.push(n)})})),e.$inject=t):L(e)?(a=e.length-1,$t(e[a],"fn"),t=e.slice(0,a)):$t(e,"fn",!0),t}function Ci(e){function c(e){return function(t,i){return F(t)?(w(t,x(e)),void 0):e(t,i)}}function d(e,t){if(Ct(e,"service"),(H(t)||L(t))&&(t=r.instantiate(t)),!t.$get)throw xi("pget","Provider '{0}' must define $get factory method.",e);return s[e+i]=t}function u(e,t){return d(e,{$get:t})}function p(e,t){return u(e,["$injector",function(e){return e.instantiate(t)}])}function f(e,t){return u(e,M(t))}function h(e,t){Ct(e,"constant"),s[e]=t,o[e]=t}function m(e,t){var n=r.get(e+i),a=n.$get;n.$get=function(){var e=l.invoke(a,n);return l.invoke(t,null,{$delegate:e})}}function _(e){var i,n,s,o,t=[];return w(e,function(e){if(!a.get(e)){a.put(e,!0);try{if(I(e))for(i=g(e),t=t.concat(_(i.requires)).concat(i._runBlocks),n=i._invokeQueue,s=0,o=n.length;o>s;s++){var l=n[s],c=r.get(l[0]);c[l[1]].apply(c,l[2])}else H(e)?t.push(r.invoke(e)):L(e)?t.push(r.invoke(e)):$t(e,"module")}catch(d){throw L(e)&&(e=e[e.length-1]),d.message&&d.stack&&-1==d.stack.indexOf(d.message)&&(d=d.message+"\n"+d.stack),xi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,d.stack||d.message||d)}}}),t}function v(e,a){function r(i){if(e.hasOwnProperty(i)){if(e[i]===t)throw xi("cdep","Circular dependency found: {0}",i+" <- "+n.join(" <- "));return e[i]}try{return n.unshift(i),e[i]=t,e[i]=a(i)}catch(s){throw e[i]===t&&delete e[i],s}finally{n.shift()}}function o(e,t,i){var s,o,l,n=[],a=$i(e);for(o=0,s=a.length;s>o;o++){if(l=a[o],"string"!=typeof l)throw xi("itkn","Incorrect injection token! Expected service name as string, got {0}",l);n.push(i&&i.hasOwnProperty(l)?i[l]:r(l))}return e.$inject||(e=e[s]),e.apply(t,n)}function l(e,t){var n,a,i=function(){};return i.prototype=(L(e)?e[e.length-1]:e).prototype,n=new i,a=o(e,n,t),F(a)||H(a)?a:n}return{invoke:o,instantiate:l,get:r,annotate:$i,has:function(t){return s.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}var t={},i="Provider",n=[],a=new bi,s={$provide:{provider:c(d),factory:c(u),service:c(p),value:c(f),constant:c(h),decorator:m}},r=s.$injector=v(s,function(){throw xi("unpr","Unknown provider: {0}",n.join(" <- "))}),o={},l=o.$injector=v(o,function(e){var t=r.get(e+i);return l.invoke(t.$get,t)});return w(_(e),function(e){l.invoke(e||T)}),l}function Si(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,i,n){function r(e){var t=null;return w(e,function(e){t||"a"!==a(e.nodeName)||(t=e)}),t}function o(){var n,e=i.hash();e?(n=s.getElementById(e))?n.scrollIntoView():(n=r(s.getElementsByName(e)))?n.scrollIntoView():"top"===e&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&n.$watch(function(){return i.hash()},function(){n.$evalAsync(o)}),o}]}function Ti(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function zi(e,t,n,a){function m(e){try{e.apply(null,ot(arguments,1))}finally{if(f--,0===f)for(;h.length;)try{h.pop()()}catch(t){n.error(t)}}}function v(e,t){(function i(){w(_,function(e){e()}),g=t(i,e)})()}function $(){k=null,b!=s.url()&&(b=s.url(),w(j,function(e){e(s.url())}))}var s=this,r=t[0],o=e.location,l=e.history,c=e.setTimeout,u=e.clearTimeout,p={};s.isMock=!1;var f=0,h=[];s.$$completeOutstandingRequest=m,s.$$incOutstandingRequestCount=function(){f++},s.notifyWhenNoOutstandingRequests=function(e){w(_,function(e){e()}),0===f?e():h.push(e)};var g,_=[];s.addPollFn=function(e){return A(g)&&v(100,c),_.push(e),e};var b=o.href,y=t.find("base"),k=null;s.url=function(t,i){if(o!==e.location&&(o=e.location),l!==e.history&&(l=e.history),t){if(b==t)return;return b=t,a.history?i?l.replaceState(null,"",t):(l.pushState(null,"",t),y.attr("href",y.attr("href"))):(k=t,i?o.replace(t):o.href=t),s}return k||o.href.replace(/%27/g,"'")};var j=[],x=!1;s.onUrlChange=function(t){return x||(a.history&&d(e).on("popstate",$),a.hashchange?d(e).on("hashchange",$):s.addPollFn($),x=!0),j.push(t),t},s.baseHref=function(){var e=y.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var C={},S="",D=s.baseHref();s.cookies=function(e,t){var a,s,o,l,c;if(!e){if(r.cookie!==S)for(S=r.cookie,s=S.split("; "),C={},l=0;s.length>l;l++)o=s[l],c=o.indexOf("="),c>0&&(e=unescape(o.substring(0,c)),C[e]===i&&(C[e]=unescape(o.substring(c+1))));return C}t===i?r.cookie=escape(e)+"=;path="+D+";expires=Thu, 01 Jan 1970 00:00:00 GMT":I(t)&&(a=(r.cookie=escape(e)+"="+escape(t)+";path="+D).length+1,a>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+a+" > 4096 bytes)!"))},s.defer=function(e,t){var i;return f++,i=c(function(){delete p[i],m(e)},t||0),p[i]=!0,i},s.defer.cancel=function(e){return p[e]?(delete p[e],u(e),m(T),!0):!1}}function Mi(){this.$get=["$window","$log","$sniffer","$document",function(e,t,i,n){return new zi(e,n,t,i)}]}function Ai(){this.$get=function(){function t(t,i){function u(e){e!=c&&(d?d==e&&(d=e.n):d=e,p(e.n,e.p),p(e,c),c=e,c.n=null)}function p(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw n("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=S({},i,{id:t}),r={},o=i&&i.capacity||Number.MAX_VALUE,l={},c=null,d=null;return e[t]={put:function(e,t){if(Number.MAX_VALUE>o){var i=l[e]||(l[e]={key:e});u(i)}if(!A(t))return e in r||a++,r[e]=t,a>o&&this.remove(d.key),t},get:function(e){if(Number.MAX_VALUE>o){var t=l[e];if(!t)return;u(t)}return r[e]},remove:function(e){if(Number.MAX_VALUE>o){var t=l[e];if(!t)return;t==c&&(c=t.p),t==d&&(d=t.n),p(t.n,t.p),delete l[e]}delete r[e],a--},removeAll:function(){r={},a=0,l={},c=d=null},destroy:function(){r=null,s=null,l=null,delete e[t]},info:function(){return S({},s,{size:a})}}}var e={};return t.info=function(){var t={};return w(e,function(e,i){t[i]=e.info()}),t},t.get=function(t){return e[t]},t}}function Pi(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Ii(e,n){var a={},s="Directive",r=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,o=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,l=/^(on[a-z]+|formaction)$/;this.directive=function u(t,i){return Ct(t,"directive"),I(t)?(xt(i,"directiveFactory"),a.hasOwnProperty(t)||(a[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,i){var n=[];return w(a[t],function(a,s){try{var r=e.invoke(a);H(r)?r={compile:M(r)}:!r.compile&&r.link&&(r.compile=M(r.link)),r.priority=r.priority||0,r.index=s,r.name=r.name||t,r.require=r.require||r.controller&&r.name,r.restrict=r.restrict||"A",n.push(r)}catch(o){i(o)}}),n}])),a[t].push(i)):w(t,x(u)),this},this.aHrefSanitizationWhitelist=function(e){return P(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return P(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,n,u,p,f,h,m,_,g,b,y,k){function T(e,t,i,n,a){e instanceof d||(e=d(e)),w(e,function(t,i){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[i]=t=d(t).wrap("<span></span>").parent()[0])});var s=A(e,t,e,i,n,a);return M(e,"ng-scope"),function(t,i,n,a){xt(t,"scope");var r=i?pi.clone.call(e):e;w(n,function(e,t){r.data("$"+t+"Controller",e)});for(var o=0,l=r.length;l>o;o++){var c=r[o],d=c.nodeType;(1===d||9===d)&&r.eq(o).data("$scope",t)}return i&&i(r,t),s&&s(t,r,r,a),r}}function M(e,t){try{e.addClass(t)}catch(i){}}function A(e,t,n,a,s,r){function _(e,n,a,s){var r,l,c,u,p,f,h,m,_,g=n.length,v=new Array(g);for(f=0;g>f;f++)v[f]=n[f];for(f=0,m=0,h=o.length;h>f;m++)c=v[m],r=o[f++],l=o[f++],u=d(c),r?(r.scope?(p=e.$new(),u.data("$scope",p)):p=e,_=r.transcludeOnThisElement?P(e,r.transclude,s):!r.templateOnThisElement&&s?s:!s&&t?P(e,t):null,r(l,p,c,a,_)):l&&l(e,c.childNodes,i,s)}for(var l,c,u,p,f,h,o=[],m=0;e.length>m;m++)l=new j,c=O(e[m],[],l,0===m?a:i,s),u=c.length?q(c,e[m],l,t,n,null,[],[],r):null,u&&u.scope&&M(d(e[m]),"ng-scope"),f=u&&u.terminal||!(p=e[m].childNodes)||!p.length?null:A(p,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),o.push(u,f),h=h||u||f,r=null;return h?_:null}function P(e,t,i){var n=function(n,a,s){var r=!1;n||(n=e.$new(),n.$$transcluded=!0,r=!0);var o=t(n,a,s,i);return r&&o.on("$destroy",function(){n.$destroy()}),o};return n}function O(e,t,i,n,a){var d,u,s=e.nodeType,l=i.$attr;switch(s){case 1:B(t,Ni(v(e).toLowerCase()),"E",n,a);for(var p,f,h,m,_,g=e.attributes,b=0,y=g&&g.length;y>b;b++){var w=!1,k=!1;if(p=g[b],!c||c>=8||p.specified){f=p.name,m=Ni(f),D.test(m)&&(f=kt(m.substr(6),"-"));var j=m.replace(/(Start|End)$/,"");m===j+"Start"&&(w=f,k=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),h=Ni(f.toLowerCase()),l[h]=f,i[h]=_=V(p.value),mi(e,h)&&(i[h]=!0),Q(e,t,_,h),B(t,h,"A",n,a,w,k)}}if(u=e.className,I(u)&&""!==u)for(;d=o.exec(u);)h=Ni(d[2]),B(t,h,"C",n,a)&&(i[h]=V(d[3])),u=u.substr(d.index+d[0].length);break;case 3:K(t,e.nodeValue);break;case 8:try{d=r.exec(e.nodeValue),d&&(h=Ni(d[1]),B(t,h,"M",n,a)&&(i[h]=V(d[2])))}catch(x){}}return t.sort(X),t}function N(e,t,i){var n=[],a=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Fi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,i);1==e.nodeType&&(e.hasAttribute(t)&&a++,e.hasAttribute(i)&&a--),n.push(e),e=e.nextSibling}while(a>0)}else n.push(e);return d(n)}function R(e,t,i){return function(n,a,s,r,o){return a=N(a[0],t,i),e(n,a,s,r,o)}}function q(e,a,s,r,o,l,c,p,f){function ct(e,t,i,n){e&&(i&&(e=R(e,i,n)),e.require=E.require,e.directiveName=z,(b===E||E.$$isolateScope)&&(e=et(e,{isolateScope:!0})),c.push(e)),t&&(i&&(t=R(t,i,n)),t.require=E.require,t.directiveName=z,(b===E||E.$$isolateScope)&&(t=et(t,{isolateScope:!0})),p.push(t))}function dt(e,t,i,n){var a,s="data",r=!1;if(I(t)){for(;"^"==(a=t.charAt(0))||"?"==a;)t=t.substr(1),"^"==a&&(s="inheritedData"),r=r||"?"==a;if(a=null,n&&"data"===s&&(a=n[t]),a=a||i[s]("$"+t+"Controller"),!a&&!r)throw Fi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return a}return L(t)&&(a=[],w(t,function(t){a.push(dt(e,t,i,n))})),a}function ut(e,t,r,o,l){function F(e,t){var n;return 2>arguments.length&&(t=e,e=i),S&&(n=D),l(e,t,n)}var f,_,g,k,x,$,C,E,D={};if(f=a===r?s:nt(s,new j(d(r),s.$attr)),_=f.$$element,b){var T=/^\s*([@=&])(\??)\s*(\w*)\s*$/,z=d(r);C=t.$new(!0),!y||y!==b&&y!==b.$$originalDirective?z.data("$isolateScopeNoTemplate",C):z.data("$isolateScope",C),M(z,"ng-isolate-scope"),w(b.scope,function(e,i){var l,c,d,u,a=e.match(T)||[],s=a[3]||i,r="?"==a[2],o=a[1];switch(C.$$isolateBindings[i]=o+s,o){case"@":f.$observe(s,function(e){C[i]=e}),f.$$observers[s].$$scope=t,f[s]&&(C[i]=n(f[s])(t));break;case"=":if(r&&!f[s])return;c=h(f[s]),u=c.literal?at:function(e,t){return e===t},d=c.assign||function(){throw l=C[i]=c(t),Fi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[s],b.name)},l=C[i]=c(t),C.$watch(function(){var e=c(t);return u(e,C[i])||(u(e,l)?d(t,e=C[i]):C[i]=e),l=e},null,c.literal);break;case"&":c=h(f[s]),C[i]=function(e){return c(t,e)};break;default:throw Fi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,i,e)}})}for(E=l&&F,v&&w(v,function(e){var n,i={$scope:e===b||e.$$isolateScope?C:t,$element:_,$attrs:f,$transclude:E};$=e.controller,"@"==$&&($=f[e.name]),n=m($,i),D[e.name]=n,S||_.data("$"+e.name+"Controller",n),e.controllerAs&&(i.$scope[e.controllerAs]=n)}),g=0,k=c.length;k>g;g++)try{x=c[g],x(x.isolateScope?C:t,_,f,x.require&&dt(x.directiveName,x.require,_,D),E)}catch(A){u(A,ft(_))}var P=t;for(b&&(b.template||null===b.templateUrl)&&(P=C),e&&e(P,r.childNodes,i,l),g=p.length-1;g>=0;g--)try{x=p[g],x(x.isolateScope?C:t,_,f,x.require&&dt(x.directiveName,x.require,_,D),E)}catch(A){u(A,ft(_))}}f=f||{};for(var g,E,z,A,B,X,_=-Number.MAX_VALUE,v=f.controllerDirectives,b=f.newIsolateScopeDirective,y=f.templateDirective,k=f.nonTlbTranscludeDirective,x=!1,$=!1,S=f.hasElementTranscludeDirective,D=s.$$element=d(a),P=l,q=r,K=0,Z=e.length;Z>K;K++){E=e[K];var Q=E.$$start,tt=E.$$end;if(Q&&(D=N(a,Q,tt)),A=i,_>E.priority)break;if((X=E.scope)&&(g=g||E,E.templateUrl||(G("new/isolated scope",b,E,D),F(X)&&(b=E))),z=E.name,!E.templateUrl&&E.controller&&(X=E.controller,v=v||{},G("'"+z+"' controller",v[z],E,D),v[z]=E),(X=E.transclude)&&(x=!0,E.$$tlb||(G("transclusion",k,E,D),k=E),"element"==X?(S=!0,_=E.priority,A=N(a,Q,tt),D=s.$$element=d(t.createComment(" "+z+": "+s[z]+" ")),a=D[0],J(o,d(ot(A)),a),q=T(A,r,_,P&&P.name,{nonTlbTranscludeDirective:k})):(A=d(Jt(a)).contents(),D.empty(),q=T(A,r))),E.template)if($=!0,G("template",y,E,D),y=E,X=H(E.template)?E.template(D,s):E.template,X=C(X),E.replace){if(P=E,A=Gt(X)?[]:d(V(X)),a=A[0],1!=A.length||1!==a.nodeType)throw Fi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",z,"");J(o,D,a);var it={$attr:{}},st=O(a,[],it),rt=e.splice(K+1,e.length-(K+1));b&&W(st),e=e.concat(st).concat(rt),Y(s,it),Z=e.length}else D.html(X);if(E.templateUrl)$=!0,G("template",y,E,D),y=E,E.replace&&(P=E),ut=U(e.splice(K,e.length-K),D,s,o,x&&q,c,p,{controllerDirectives:v,newIsolateScopeDirective:b,templateDirective:y,nonTlbTranscludeDirective:k}),Z=e.length;else if(E.compile)try{B=E.compile(D,s,q),H(B)?ct(null,B,Q,tt):B&&ct(B.pre,B.post,Q,tt)}catch(lt){u(lt,ft(D))}E.terminal&&(ut.terminal=!0,_=Math.max(_,E.priority))}return ut.scope=g&&g.scope===!0,ut.transcludeOnThisElement=x,ut.templateOnThisElement=$,ut.transclude=q,f.hasElementTranscludeDirective=S,ut}function W(e){for(var t=0,i=e.length;i>t;t++)e[t]=E(e[t],{$$isolateScope:!0})}function B(t,n,r,o,l,c,d){if(n===l)return null;var p=null;if(a.hasOwnProperty(n))for(var f,h=e.get(n+s),m=0,_=h.length;_>m;m++)try{f=h[m],(o===i||o>f.priority)&&-1!=f.restrict.indexOf(r)&&(c&&(f=E(f,{$$start:c,$$end:d})),t.push(f),p=f)}catch(g){u(g)}return p}function Y(e,t){var i=t.$attr,n=e.$attr,a=e.$$element;w(e,function(n,a){"$"!=a.charAt(0)&&(t[a]&&t[a]!==n&&(n+=("style"===a?";":" ")+t[a]),e.$set(a,n,!0,i[a]))}),w(t,function(t,s){"class"==s?(M(a,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==s?(a.attr("style",a.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==s.charAt(0)||e.hasOwnProperty(s)||(e[s]=t,n[s]=i[s])})}function U(e,t,i,n,a,s,r,o){var c,u,l=[],h=t[0],m=e.shift(),_=S({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=H(m.templateUrl)?m.templateUrl(t,i):m.templateUrl;return t.empty(),p.get(b.getTrustedResourceUrl(g),{cache:f}).success(function(p){var f,v,b,y;if(p=C(p),m.replace){if(b=Gt(p)?[]:d(V(p)),f=b[0],1!=b.length||1!==f.nodeType)throw Fi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);v={$attr:{}},J(n,t,f);var k=O(f,[],v);F(m.scope)&&W(k),e=k.concat(e),Y(i,v)}else f=h,t.html(p);for(e.unshift(_),c=q(e,f,i,a,t,m,s,r,o),w(n,function(e,i){e==f&&(n[i]=t[0])}),u=A(t[0].childNodes,a);l.length;){var j=l.shift(),x=l.shift(),$=l.shift(),S=l.shift(),D=t[0];if(x!==h){var E=x.className;o.hasElementTranscludeDirective&&m.replace||(D=Jt(f)),J($,d(x),D),M(d(D),E)}y=c.transcludeOnThisElement?P(j,c.transclude,S):S,c(u,j,D,n,y)}l=null}).error(function(e,t,i,n){throw Fi("tpload","Failed to load template: {0}",n.url)}),function(e,t,i,n,a){var s=a;l?(l.push(t),l.push(i),l.push(n),l.push(s)):(c.transcludeOnThisElement&&(s=P(t,c.transclude,a)),c(u,t,i,n,s))}}function X(e,t){var i=t.priority-e.priority;return 0!==i?i:e.name!==t.name?t.name>e.name?-1:1:e.index-t.index}function G(e,t,i,n){if(t)throw Fi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,i.name,e,ft(n))}function K(e,t){var i=n(t,!0);i&&e.push({priority:0,compile:function(e){var t=e.parent(),n=t.length;return n&&M(e.parent(),"ng-binding"),function(e,t){var a=t.parent(),s=a.data("$binding")||[];s.push(i),a.data("$binding",s),n||M(a,"ng-binding"),e.$watch(i,function(e){t[0].nodeValue=e})}}})}function Z(e,t){if("srcdoc"==t)return b.HTML;var i=v(e);return"xlinkHref"==t||"FORM"==i&&"action"==t||"IMG"!=i&&("src"==t||"ngSrc"==t)?b.RESOURCE_URL:void 0}function Q(e,t,i,a){var s=n(i,!0);if(s){if("multiple"===a&&"SELECT"===v(e))throw Fi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ft(e));t.push({priority:100,compile:function(){return{pre:function(t,i,r){var o=r.$$observers||(r.$$observers={});if(l.test(a))throw Fi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");s=n(r[a],!0,Z(e,a)),s&&(r[a]=s(t),(o[a]||(o[a]=[])).$$inter=!0,(r.$$observers&&r.$$observers[a].$$scope||t).$watch(s,function(e,t){"class"===a&&e!=t?r.$updateClass(e,t):r.$set(a,e)}))}}}})}}function J(e,i,n){var o,l,a=i[0],s=i.length,r=a.parentNode;if(e)for(o=0,l=e.length;l>o;o++)if(e[o]==a){e[o++]=n;for(var c=o,u=c+s-1,p=e.length;p>c;c++,u++)p>u?e[c]=e[u]:delete e[c];e.length-=s-1;break}r&&r.replaceChild(n,a);var f=t.createDocumentFragment();f.appendChild(a),n[d.expando]=a[d.expando];for(var h=1,m=i.length;m>h;h++){var _=i[h];d(_).remove(),f.appendChild(_),delete i[h]}i[0]=n,i.length=1}function et(e,t){return S(function(){return e.apply(null,arguments)},e,t)}var j=function(e,t){this.$$element=e,this.$attr=t||{}};j.prototype={$normalize:Ni,$addClass:function(e){e&&e.length>0&&y.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&y.removeClass(this.$$element,e)},$updateClass:function(e,t){var i=Ri(e,t),n=Ri(t,e);0===i.length?y.removeClass(this.$$element,n):0===n.length?y.addClass(this.$$element,i):y.setClass(this.$$element,i,n)},$set:function(e,t,n,a){var o,s=mi(this.$$element[0],e);s&&(this.$$element.prop(e,t),a=s),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=kt(e,"-"))),o=v(this.$$element),("A"===o&&"href"===e||"IMG"===o&&"src"===e)&&(this[e]=t=k(t,"src"===e)),n!==!1&&(null===t||t===i?this.$$element.removeAttr(a):this.$$element.attr(a,t));var l=this.$$observers;l&&w(l[e],function(e){try{e(t)}catch(i){u(i)}})},$observe:function(e,t){var i=this,n=i.$$observers||(i.$$observers={}),a=n[e]||(n[e]=[]);return a.push(t),_.$evalAsync(function(){a.$$inter||t(i[e])}),t}};var x=n.startSymbol(),$=n.endSymbol(),C="{{"==x||"}}"==$?z:function C(e){return e.replace(/\{\{/g,x).replace(/}}/g,$)},D=/^ngAttr[A-Z]/;return T}]}function Ni(e){return qt(e.replace(Oi,""))}function Ri(e,t){var i="",n=e.split(/\s+/),a=t.split(/\s+/);e:for(var s=0;n.length>s;s++){for(var r=n[s],o=0;a.length>o;o++)if(r==a[o])continue e;i+=(i.length>0?" ":"")+r}return i}function qi(){var e={},t=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,i){Ct(t,"controller"),F(t)?S(e,t):e[t]=i},this.$get=["$injector","$window",function(i,a){return function(s,r){var o,l,c,d;if(I(s)&&(l=s.match(t),c=l[1],d=l[3],s=e.hasOwnProperty(c)?e[c]:St(r.$scope,c,!0)||St(a,c,!0),$t(s,c,!0)),o=i.instantiate(s,r),d){if(!r||"object"!=typeof r.$scope)throw n("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",c||s.name,d);r.$scope[d]=o}return o}}]}function Wi(){this.$get=["$window",function(e){return d(e.document)}]}function Bi(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function Yi(e){var i,n,s,t={};return e?(w(e.split("\n"),function(e){s=e.indexOf(":"),i=a(V(e.substr(0,s))),n=V(e.substr(s+1)),i&&(t[i]?t[i]+=", "+n:t[i]=n)}),t):t}function Ui(e){var t=F(e)?e:i;return function(i){return t||(t=Yi(e)),i?t[a(i)]||null:t}}function Vi(e,t,i){return H(i)?i(e,t):(w(i,function(i){e=i(e,t)}),e)}function Xi(e){return e>=200&&300>e}function Gi(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,n=/^\)\]\}',?\n/,s={"Content-Type":"application/json;charset=utf-8"},o=this.defaults={transformResponse:[function(i){return I(i)&&(i=i.replace(n,""),e.test(i)&&t.test(i)&&(i=ut(i))),i}],transformRequest:[function(e){return!F(e)||B(e)||Y(e)?e:dt(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:nt(s),put:nt(s),patch:nt(s)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},l=this.interceptors=[],c=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,n,s,d,u){function h(e){function h(e){var i=S({},e,{data:Vi(e.data,e.headers,t.transformResponse)});return Xi(e.status)?i:d.reject(i)}function m(e){function l(e){var t;w(e,function(i,n){H(i)&&(t=i(),null!=t?e[n]=t:delete e[n])})}var n,s,r,t=o.headers,i=S({},e.headers);
t=S({},t.common,t[a(e.method)]),l(t),l(i);e:for(n in t){s=a(n);for(r in i)if(a(r)===s)continue e;i[n]=t[n]}return i}var t={method:"get",transformRequest:o.transformRequest,transformResponse:o.transformResponse},n=m(e);S(t,e),t.headers=n,t.method=r(t.method);var s=function(e){n=e.headers;var t=Vi(e.data,Ui(n),e.transformRequest);return A(e.data)&&w(n,function(e,t){"content-type"===a(t)&&delete n[t]}),A(e.withCredentials)&&!A(o.withCredentials)&&(e.withCredentials=o.withCredentials),g(e,t,n).then(h,h)},l=[s,i],c=d.when(t);for(w(f,function(e){(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&l.push(e.response,e.responseError)});l.length;){var u=l.shift(),p=l.shift();c=c.then(u,p)}return c.success=function(e){return c.then(function(i){e(i.data,i.status,i.headers,t)}),c},c.error=function(e){return c.then(null,function(i){e(i.data,i.status,i.headers,t)}),c},c}function m(){w(arguments,function(e){h[e]=function(t,i){return h(S(i||{},{method:e,url:t}))}})}function _(){w(arguments,function(e){h[e]=function(t,i,n){return h(S(n||{},{method:e,url:t,data:i}))}})}function g(n,a,r){function g(e,t,i,n){u&&(Xi(e)?u.put(m,[e,t,Yi(i),n]):u.remove(m)),b(t,e,i,n),s.$$phase||s.$apply()}function b(e,t,i,a){t=Math.max(t,0),(Xi(t)?l.resolve:l.reject)({data:e,status:t,headers:Ui(i),config:n,statusText:a})}function y(){var e=J(h.pendingRequests,n);-1!==e&&h.pendingRequests.splice(e,1)}var u,f,l=d.defer(),c=l.promise,m=v(n.url,n.params);if(h.pendingRequests.push(n),c.then(y,y),(n.cache||o.cache)&&n.cache!==!1&&"GET"==n.method&&(u=F(n.cache)?n.cache:F(o.cache)?o.cache:p),u)if(f=u.get(m),P(f)){if(f.then)return f.then(y,y),f;L(f)?b(f[1],f[0],nt(f[2]),f[3]):b(f,200,{},"OK")}else u.put(m,c);if(A(f)){var _=ea(n.url)?t.cookies()[n.xsrfCookieName||o.xsrfCookieName]:i;_&&(r[n.xsrfHeaderName||o.xsrfHeaderName]=_),e(n.method,m,a,g,r,n.timeout,n.withCredentials,n.responseType)}return c}function v(e,t){if(!t)return e;var i=[];return j(t,function(e,t){null===e||A(e)||(L(e)||(e=[e]),w(e,function(e){F(e)&&(e=dt(e)),i.push(vt(t)+"="+vt(e))}))}),i.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+i.join("&")),e}var p=n("$http"),f=[];return w(l,function(e){f.unshift(I(e)?u.get(e):u.invoke(e))}),w(c,function(e,t){var i=I(e)?u.get(e):u.invoke(e);f.splice(t,0,{response:function(e){return i(d.when(e))},responseError:function(e){return i(d.reject(e))}})}),h.pendingRequests=[],m("get","delete","head","jsonp"),_("post","put"),h.defaults=o,h}]}function Ki(t){if(8>=c&&(!t.match(/^(get|post|head|put|delete|options)$/i)||!e.XMLHttpRequest))return new e.ActiveXObject("Microsoft.XMLHTTP");if(e.XMLHttpRequest)return new e.XMLHttpRequest;throw n("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function Zi(){this.$get=["$browser","$window","$document",function(e,t,i){return Qi(e,Ki,e.defer,t.angular.callbacks,i[0])}]}function Qi(e,t,i,n,s){function o(e,t,i){var a=s.createElement("script"),r=null;return a.type="text/javascript",a.src=e,a.async=!0,r=function(e){It(a,"load",r),It(a,"error",r),s.body.removeChild(a),a=null;var o=-1,l="unknown";e&&("load"!==e.type||n[t].called||(e={type:"error"}),l=e.type,o="error"===e.type?404:200),i&&i(o,l)},Ft(a,"load",r),Ft(a,"error",r),8>=c&&(a.onreadystatechange=function(){I(a.readyState)&&/loaded|complete/.test(a.readyState)&&(a.onreadystatechange=null,r({type:"load"}))}),s.body.appendChild(a),r}var r=-1;return function(s,l,c,d,u,p,f,h){function k(){m=r,g&&g(),v&&v.abort()}function j(t,n,a,s,r){y&&i.cancel(y),g=v=null,0===n&&(n=a?200:"file"==Jn(l).protocol?404:0),n=1223===n?204:n,r=r||"",t(n,a,s,r),e.$$completeOutstandingRequest(T)}var m;if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==a(s)){var _="_"+(n.counter++).toString(36);n[_]=function(e){n[_].data=e,n[_].called=!0};var g=o(l.replace("JSON_CALLBACK","angular.callbacks."+_),_,function(e,t){j(d,e,n[_].data,"",t),n[_]=T})}else{var v=t(s);if(v.open(s,l,!0),w(u,function(e,t){P(e)&&v.setRequestHeader(t,e)}),v.onreadystatechange=function(){if(v&&4==v.readyState){var e=null,t=null;m!==r&&(e=v.getAllResponseHeaders(),t="response"in v?v.response:v.responseText),j(d,m||v.status,t,e,v.statusText||"")}},f&&(v.withCredentials=!0),h)try{v.responseType=h}catch(b){if("json"!==h)throw b}v.send(c||null)}if(p>0)var y=i(k,p);else p&&p.then&&p.then(k)}}function en(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(i,n,a){function o(o,l,c){for(var d,u,_,g,p=0,f=[],h=o.length,m=!1,v=[];h>p;)-1!=(d=o.indexOf(e,p))&&-1!=(u=o.indexOf(t,d+s))?(p!=d&&f.push(o.substring(p,d)),f.push(_=i(g=o.substring(d+s,u))),_.exp=g,p=u+r,m=!0):(p!=h&&f.push(o.substring(p)),p=h);if((h=f.length)||(f.push(""),h=1),c&&f.length>1)throw Ji("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);return!l||m?(v.length=h,_=function(e){try{for(var s,t=0,i=h;i>t;t++){if("function"==typeof(s=f[t]))if(s=s(e),s=c?a.getTrusted(c,s):a.valueOf(s),null==s)s="";else switch(typeof s){case"string":break;case"number":s=""+s;break;default:s=dt(s)}v[t]=s}return v.join("")}catch(r){var l=Ji("interr","Can't interpolate: {0}\n{1}",o,r.toString());n(l)}},_.exp=o,_.parts=f,_):void 0}var s=e.length,r=t.length;return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function tn(){this.$get=["$rootScope","$window","$q",function(e,t,i){function a(a,s,r,o){var l=t.setInterval,c=t.clearInterval,d=i.defer(),u=d.promise,p=0,f=P(o)&&!o;return r=P(r)?r:0,u.then(null,null,a),u.$$intervalId=l(function(){d.notify(p++),r>0&&p>=r&&(d.resolve(p),c(u.$$intervalId),delete n[u.$$intervalId]),f||e.$apply()},s),n[u.$$intervalId]=d,u}var n={};return a.cancel=function(e){return e&&e.$$intervalId in n?(n[e.$$intervalId].reject("canceled"),clearInterval(e.$$intervalId),delete n[e.$$intervalId],!0):!1},a}]}function nn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function on(e){for(var t=e.split("/"),i=t.length;i--;)t[i]=gt(t[i]);return t.join("/")}function ln(e,t,i){var n=Jn(e,i);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=D(n.port)||sn[n.protocol]||null}function cn(e,t,i){var n="/"!==e.charAt(0);n&&(e="/"+e);var a=Jn(e,i);t.$$path=decodeURIComponent(n&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname),t.$$search=mt(a.search),t.$$hash=decodeURIComponent(a.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function dn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function un(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function pn(e){return e.substr(0,un(e).lastIndexOf("/")+1)}function fn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function hn(e,t){this.$$html5=!0,t=t||"";var n=pn(e);ln(e,this,e),this.$$parse=function(t){var i=dn(n,t);if(!I(i))throw rn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,n);cn(i,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=_t(this.$$search),t=this.$$hash?"#"+gt(this.$$hash):"";this.$$url=on(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=n+this.$$url.substr(1)},this.$$rewrite=function(a){var s,r;return(s=dn(e,a))!==i?(r=s,(s=dn(t,s))!==i?n+(dn("/",s)||s):e+r):(s=dn(n,a))!==i?n+s:n==a+"/"?n:void 0}}function mn(e,t){var i=pn(e);ln(e,this,e),this.$$parse=function(n){function r(e,t,i){var a,n=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(i)&&(t=t.replace(i,"")),n.exec(t)?e:(a=n.exec(e),a?a[1]:e)}var a=dn(e,n)||dn(i,n),s="#"==a.charAt(0)?dn(t,a):this.$$html5?a:"";if(!I(s))throw rn("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',n,t);cn(s,this,e),this.$$path=r(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var i=_t(this.$$search),n=this.$$hash?"#"+gt(this.$$hash):"";this.$$url=on(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$rewrite=function(t){return un(e)==un(t)?t:void 0}}function _n(e,t){this.$$html5=!0,mn.apply(this,arguments);var i=pn(e);this.$$rewrite=function(n){var a;return e==un(n)?n:(a=dn(i,n))?e+t+a:i===n+"/"?i:void 0},this.$$compose=function(){var i=_t(this.$$search),n=this.$$hash?"#"+gt(this.$$hash):"";this.$$url=on(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=e+t+this.$$url}}function gn(e){return function(){return this[e]}}function vn(e,t){return function(i){return A(i)?this[e]:(this[e]=t(i),this.$$compose(),this)}}function bn(){var t="",i=!1;this.hashPrefix=function(e){return P(e)?(t=e,this):t},this.html5Mode=function(e){return P(e)?(i=e,this):i},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(n,s,r,o){function _(e){n.$broadcast("$locationChangeSuccess",l.absUrl(),e)}var l,c,f,u=s.baseHref(),p=s.url();i?(f=fn(p)+(u||"/"),c=r.history?hn:_n):(f=un(p),c=mn),l=new c(f,"#"+t),l.$$parse(l.$$rewrite(p)),o.on("click",function(i){if(!i.ctrlKey&&!i.metaKey&&2!=i.which){for(var r=d(i.target);"a"!==a(r[0].nodeName);)if(r[0]===o[0]||!(r=r.parent())[0])return;var u=r.prop("href");if(F(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=Jn(u.animVal).href),c===_n){var p=r.attr("href")||r.attr("xlink:href");if(0>p.indexOf("://")){var h="#"+t;if("/"==p[0])u=f+h+p;else if("#"==p[0])u=f+h+(l.path()||"/")+p;else{for(var m=l.path().split("/"),_=p.split("/"),g=0;_.length>g;g++)"."!=_[g]&&(".."==_[g]?m.pop():_[g].length&&m.push(_[g]));u=f+h+m.join("/")}}}var v=l.$$rewrite(u);u&&!r.attr("target")&&v&&!i.isDefaultPrevented()&&(i.preventDefault(),v!=s.url()&&(l.$$parse(v),n.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}),l.absUrl()!=p&&s.url(l.absUrl(),!0),s.onUrlChange(function(e){l.absUrl()!=e&&(n.$evalAsync(function(){var t=l.absUrl();l.$$parse(e),n.$broadcast("$locationChangeStart",e,t).defaultPrevented?(l.$$parse(t),s.url(t)):_(t)}),n.$$phase||n.$digest())});var h=0;return n.$watch(function(){var e=s.url(),t=l.$$replace;return h&&e==l.absUrl()||(h++,n.$evalAsync(function(){n.$broadcast("$locationChangeStart",l.absUrl(),e).defaultPrevented?l.$$parse(e):(s.url(l.absUrl(),t),_(e))})),l.$$replace=!1,h}),l}]}function yn(){var e=!0,t=this;this.debugEnabled=function(t){return P(t)?(e=t,this):e},this.$get=["$window",function(i){function n(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function a(e){var t=i.console||{},a=t[e]||t.log||T,s=!1;try{s=!!a.apply}catch(r){}return s?function(){var e=[];return w(arguments,function(t){e.push(n(t))}),a.apply(t,e)}:function(e,t){a(e,null==t?"":t)}}return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:function(){var i=a("debug");return function(){e&&i.apply(t,arguments)}}()}}]}function xn(e,t){if("constructor"===e)throw wn("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',t);return e}function $n(e,t){if(e){if(e.constructor===e)throw wn("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw wn("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw wn("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t)}return e}function Tn(e,t,n,a,s){s=s||{};for(var o,r=t.split("."),l=0;r.length>1;l++){o=xn(r.shift(),a);var c=e[o];c||(c={},e[o]=c),e=c,e.then&&s.unwrapPromises&&(jn(a),"$$v"in e||function(e){e.then(function(t){e.$$v=t})}(e),e.$$v===i&&(e.$$v={}),e=e.$$v)}return o=xn(r.shift(),a),e[o]=n,n}function Mn(e,t,n,a,s,r,o){return xn(e,r),xn(t,r),xn(n,r),xn(a,r),xn(s,r),o.unwrapPromises?function(o,l){var d,c=l&&l.hasOwnProperty(e)?l:o;return null==c?c:(c=c[e],c&&c.then&&(jn(r),"$$v"in c||(d=c,d.$$v=i,d.then(function(e){d.$$v=e})),c=c.$$v),t?null==c?i:(c=c[t],c&&c.then&&(jn(r),"$$v"in c||(d=c,d.$$v=i,d.then(function(e){d.$$v=e})),c=c.$$v),n?null==c?i:(c=c[n],c&&c.then&&(jn(r),"$$v"in c||(d=c,d.$$v=i,d.then(function(e){d.$$v=e})),c=c.$$v),a?null==c?i:(c=c[a],c&&c.then&&(jn(r),"$$v"in c||(d=c,d.$$v=i,d.then(function(e){d.$$v=e})),c=c.$$v),s?null==c?i:(c=c[s],c&&c.then&&(jn(r),"$$v"in c||(d=c,d.$$v=i,d.then(function(e){d.$$v=e})),c=c.$$v),c):c):c):c):c)}:function(r,o){var l=o&&o.hasOwnProperty(e)?o:r;return null==l?l:(l=l[e],t?null==l?i:(l=l[t],n?null==l?i:(l=l[n],a?null==l?i:(l=l[a],s?null==l?i:l=l[s]:l):l):l):l)}}function An(e,t){return xn(e,t),function(t,n){return null==t?i:(n&&n.hasOwnProperty(e)?n:t)[e]}}function Pn(e,t,n){return xn(e,n),xn(t,n),function(n,a){return null==n?i:(n=(a&&a.hasOwnProperty(e)?a:n)[e],null==n?i:n[t])}}function Fn(e,t,n){if(zn.hasOwnProperty(e))return zn[e];var r,a=e.split("."),s=a.length;if(t.unwrapPromises||1!==s)if(t.unwrapPromises||2!==s)if(t.csp)r=6>s?Mn(a[0],a[1],a[2],a[3],a[4],n,t):function(e,r){var l,o=0;do l=Mn(a[o++],a[o++],a[o++],a[o++],a[o++],n,t)(e,r),r=i,e=l;while(s>o);return l};else{var o="var p;\n";w(a,function(e,i){xn(e,n),o+="if(s == null) return undefined;\ns="+(i?"s":'((k&&k.hasOwnProperty("'+e+'"))?k:s)')+'["'+e+'"]'+";\n"+(t.unwrapPromises?'if (s && s.then) {\n pw("'+n.replace(/(["\r\n])/g,"\\$1")+'");\n'+' if (!("$$v" in s)) {\n'+" p=s;\n"+" p.$$v = undefined;\n"+" p.then(function(v) {p.$$v=v;});\n"+"}\n"+" s=s.$$v\n"+"}\n":"")}),o+="return s;";var l=new Function("s","k","pw",o);l.toString=M(o),r=t.unwrapPromises?function(e,t){return l(e,t,jn)}:l}else r=Pn(a[0],a[1],n);else r=An(a[0],n);return"hasOwnProperty"!==e&&(zn[e]=r),r}function In(){var e={},t={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(e){return P(e)?(t.unwrapPromises=!!e,this):t.unwrapPromises},this.logPromiseWarnings=function(e){return P(e)?(t.logPromiseWarnings=e,this):t.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(i,n,a){return t.csp=n.csp,jn=function(e){t.logPromiseWarnings&&!kn.hasOwnProperty(e)&&(kn[e]=!0,a.warn("[$parse] Promise found in the expression `"+e+"`. "+"Automatic unwrapping of promises in Angular expressions is deprecated."))},function(n){var a;switch(typeof n){case"string":if(e.hasOwnProperty(n))return e[n];var s=new Dn(t),r=new En(s,i,t);return a=r.parse(n),"hasOwnProperty"!==n&&(e[n]=a),a;case"function":return n;default:return T}}}]}function On(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Nn(function(t){e.$evalAsync(t)},t)}]}function Nn(e,t){function l(e){return e}function c(e){return s(e)}function d(e){var t=n(),i=0,s=L(e)?[]:{};return w(e,function(e,n){i++,a(e).then(function(e){s.hasOwnProperty(n)||(s[n]=e,--i||t.resolve(s))},function(e){s.hasOwnProperty(n)||t.reject(e)})}),0===i&&t.resolve(s),t.promise}var n=function(){var o,d,s=[];return d={resolve:function(t){if(s){var n=s;s=i,o=a(t),n.length&&e(function(){for(var e,t=0,i=n.length;i>t;t++)e=n[t],o.then(e[0],e[1],e[2])})}},reject:function(e){d.resolve(r(e))},notify:function(t){if(s){var i=s;s.length&&e(function(){for(var e,n=0,a=i.length;a>n;n++)e=i[n],e[2](t)})}},promise:{then:function(e,i,a){var r=n(),d=function(i){try{r.resolve((H(e)?e:l)(i))}catch(n){r.reject(n),t(n)}},u=function(e){try{r.resolve((H(i)?i:c)(e))}catch(n){r.reject(n),t(n)}},p=function(e){try{r.notify((H(a)?a:l)(e))}catch(i){t(i)}};return s?s.push([d,u,p]):o.then(d,u,p),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){function t(e,t){var i=n();return t?i.resolve(e):i.reject(e),i.promise}function i(i,n){var a=null;try{a=(e||l)()}catch(s){return t(s,!1)}return a&&H(a.then)?a.then(function(){return t(i,n)},function(e){return t(e,!1)}):t(i,n)}return this.then(function(e){return i(e,!0)},function(e){return i(e,!1)})}}}},a=function(t){return t&&H(t.then)?t:{then:function(i){var a=n();return e(function(){a.resolve(i(t))}),a.promise}}},s=function(e){var t=n();return t.reject(e),t.promise},r=function(i){return{then:function(a,s){var r=n();return e(function(){try{r.resolve((H(s)?s:c)(i))}catch(e){r.reject(e),t(e)}}),r.promise}}},o=function(i,r,o,d){var p,u=n(),f=function(e){try{return(H(r)?r:l)(e)}catch(i){return t(i),s(i)}},h=function(e){try{return(H(o)?o:c)(e)}catch(i){return t(i),s(i)}},m=function(e){try{return(H(d)?d:l)(e)}catch(i){t(i)}};return e(function(){a(i).then(function(e){p||(p=!0,u.resolve(a(e).then(f,h,m)))},function(e){p||(p=!0,u.resolve(h(e)))},function(e){p||u.notify(m(e))})}),u.promise};return{defer:n,reject:s,when:o,all:d}}function Ln(){this.$get=["$window","$timeout",function(e,t){var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,a=!!i,s=a?function(e){var t=i(e);return function(){n(t)}}:function(e){var i=t(e,16.66,!1);return function(){t.cancel(i)}};return s.supported=a,s}]}function Hn(){var e=10,t=n("$rootScope"),i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(n,a,r,o){function l(){this.$id=$(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function d(e){if(c.$$phase)throw t("inprog","{0} already in progress",c.$$phase);c.$$phase=e}function u(){c.$$phase=null}function p(e,t){var i=r(e);return $t(i,t),i}function f(e,t,i){do e.$$listenerCount[i]-=t,0===e.$$listenerCount[i]&&delete e.$$listenerCount[i];while(e=e.$parent)}function h(){}l.prototype={constructor:l,$new:function(e){var i;return e?(i=new l,i.$root=this.$root,i.$$asyncQueue=this.$$asyncQueue,i.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=$(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),i=new this.$$childScopeClass),i["this"]=i,i.$parent=this,i.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=i,this.$$childTail=i):this.$$childHead=this.$$childTail=i,i},$watch:function(e,t,n){var a=this,s=p(e,"watch"),r=a.$$watchers,o={fn:t,last:h,get:s,exp:e,eq:!!n};if(i=null,!H(t)){var l=p(t||T,"listener");o.fn=function(e,t,i){l(i)}}if("string"==typeof e&&s.constant){var c=o.fn;o.fn=function(e,t,i){c.call(this,e,t,i),et(r,o)}}return r||(r=a.$$watchers=[]),r.unshift(o),function(){et(r,o),i=null}},$watchCollection:function(e,t){function m(){n=d(i);var e,t;if(F(n))if(y(n)){a!==u&&(a=u,h=a.length=0,c++),e=n.length,h!==e&&(c++,a.length=h=e);for(var s=0;e>s;s++){var r=a[s]!==a[s]&&n[s]!==n[s];r||a[s]===n[s]||(c++,a[s]=n[s])}}else{a!==p&&(a=p={},h=0,c++),e=0;for(t in n)n.hasOwnProperty(t)&&(e++,a.hasOwnProperty(t)?a[t]!==n[t]&&(c++,a[t]=n[t]):(h++,a[t]=n[t],c++));if(h>e){c++;for(t in a)a.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(h--,delete a[t])}}else a!==n&&(a=n,c++);return c}function _(){if(f?(f=!1,t(n,n,i)):t(n,o,i),l)if(F(n))if(y(n)){o=new Array(n.length);for(var e=0;n.length>e;e++)o[e]=n[e]}else{o={};for(var a in n)s.call(n,a)&&(o[a]=n[a])}else o=n}var n,a,o,i=this,l=t.length>1,c=0,d=r(e),u=[],p={},f=!0,h=0;return this.$watch(m,_)},$digest:function(){var n,s,r,o,p,f,_,g,y,w,k,l=this.$$asyncQueue,c=this.$$postDigestQueue,m=e,v=this,b=[];d("$digest"),i=null;do{for(f=!1,g=v;l.length;){try{k=l.shift(),k.scope.$eval(k.expression)}catch(j){u(),a(j)}i=null}e:do{if(o=g.$$watchers)for(p=o.length;p--;)try{if(n=o[p])if((s=n.get(g))===(r=n.last)||(n.eq?at(s,r):"number"==typeof s&&"number"==typeof r&&isNaN(s)&&isNaN(r))){if(n===i){f=!1;break e}}else f=!0,i=n,n.last=n.eq?it(s,null):s,n.fn(s,r===h?s:r,g),5>m&&(y=4-m,b[y]||(b[y]=[]),w=H(n.exp)?"fn: "+(n.exp.name||n.exp.toString()):n.exp,w+="; newVal: "+dt(s)+"; oldVal: "+dt(r),b[y].push(w))}catch(j){u(),a(j)}if(!(_=g.$$childHead||g!==v&&g.$$nextSibling))for(;g!==v&&!(_=g.$$nextSibling);)g=g.$parent}while(g=_);if((f||l.length)&&!m--)throw u(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,dt(b))}while(f||l.length);for(u();c.length;)try{c.shift()()}catch(j){a(j)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==c&&(w(this.$$listenerCount,lt(null,f,this)),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=T,this.$on=this.$watch=function(){return T})}},$eval:function(e,t){return r(e)(this,t)},$evalAsync:function(e){c.$$phase||c.$$asyncQueue.length||o.defer(function(){c.$$asyncQueue.length&&c.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return d("$apply"),this.$eval(e)}catch(t){a(t)}finally{u();try{c.$digest()}catch(t){throw a(t),t}}},$on:function(e,t){var i=this.$$listeners[e];i||(this.$$listeners[e]=i=[]),i.push(t);var n=this;do n.$$listenerCount[e]||(n.$$listenerCount[e]=0),n.$$listenerCount[e]++;while(n=n.$parent);var a=this;return function(){i[J(i,t)]=null,f(a,1,e)}},$emit:function(e){var n,c,d,i=[],s=this,r=!1,o={name:e,targetScope:s,stopPropagation:function(){r=!0},preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1},l=rt([o],arguments,1);do{for(n=s.$$listeners[e]||i,o.currentScope=s,c=0,d=n.length;d>c;c++)if(n[c])try{n[c].apply(null,l)}catch(u){a(u)}else n.splice(c,1),c--,d--;if(r)return o;s=s.$parent}while(s);return o},$broadcast:function(e){for(var l,c,d,i=this,n=i,s=i,r={name:e,targetScope:i,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1},o=rt([r],arguments,1);n=s;){for(r.currentScope=n,l=n.$$listeners[e]||[],c=0,d=l.length;d>c;c++)if(l[c])try{l[c].apply(null,o)}catch(u){a(u)}else l.splice(c,1),c--,d--;if(!(s=n.$$listenerCount[e]&&n.$$childHead||n!==i&&n.$$nextSibling))for(;n!==i&&!(s=n.$$nextSibling);)n=n.$parent}return r}};var c=new l;return c}]}function Rn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(t){return P(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return P(e)?(t=e,this):t},this.$get=function(){return function(i,n){var s,a=n?t:e;return c&&!(c>=8)||(s=Jn(i).href,""===s||s.match(a))?i:"unsafe:"+s}}}function Bn(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Yn(e){if("self"===e)return e;if(I(e)){if(e.indexOf("***")>-1)throw qn("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Bn(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(R(e))return new RegExp("^"+e.source+"$");throw qn("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Un(e){var t=[];return P(e)&&w(e,function(e){t.push(Yn(e))}),t}function Vn(){this.SCE_CONTEXTS=Wn;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Un(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Un(e)),t},this.$get=["$injector",function(n){function s(e,t){return"self"===e?ea(t):!!e.exec(t.href)}function r(i){var a,r,n=Jn(i.toString()),o=!1;for(a=0,r=e.length;r>a;a++)if(s(e[a],n)){o=!0;break}if(o)for(a=0,r=t.length;r>a;a++)if(s(t[a],n)){o=!1;break}return o}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function d(e,t){var n=c.hasOwnProperty(e)?c[e]:null;if(!n)throw qn("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===i||""===t)return t;if("string"!=typeof t)throw qn("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function u(e){return e instanceof l?e.$$unwrapTrustedValue():e}function p(e,t){if(null===t||t===i||""===t)return t;var n=c.hasOwnProperty(e)?c[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Wn.RESOURCE_URL){if(r(t))return t;throw qn("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Wn.HTML)return a(t);throw qn("unsafe","Attempting to use an unsafe value in a safe context.")}var a=function a(){throw qn("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(a=n.get("$sanitize"));var l=o(),c={};return c[Wn.HTML]=o(l),c[Wn.CSS]=o(l),c[Wn.URL]=o(l),c[Wn.JS]=o(l),c[Wn.RESOURCE_URL]=o(c[Wn.URL]),{trustAs:d,getTrusted:p,valueOf:u}}]}function Xn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,i,n){if(e&&i.msie&&8>i.msieDocumentMode)throw qn("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var s=nt(Wn);s.isEnabled=function(){return e},s.trustAs=n.trustAs,s.getTrusted=n.getTrusted,s.valueOf=n.valueOf,e||(s.trustAs=s.getTrusted=function(e,t){return t},s.valueOf=z),s.parseAs=function(e,i){var n=t(i);return n.literal&&n.constant?n:function(t,i){return s.getTrusted(e,n(t,i))}};var o=s.parseAs,l=s.getTrusted,c=s.trustAs;return w(Wn,function(e,t){var i=a(t);s[qt("parse_as_"+i)]=function(t){return o(e,t)},s[qt("get_trusted_"+i)]=function(t){return l(e,t)},s[qt("trust_as_"+i)]=function(t){return c(e,t)}}),s}]}function Gn(){this.$get=["$window","$document",function(e,t){var l,h,i={},n=D((/android (\d+)/.exec(a((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),r=t[0]||{},o=r.documentMode,d=/^(Moz|webkit|O|ms)(?=[A-Z])/,u=r.body&&r.body.style,p=!1,f=!1;if(u){for(var m in u)if(h=d.exec(m)){l=h[0],l=l.substr(0,1).toUpperCase()+l.substr(1);break}l||(l="WebkitOpacity"in u&&"webkit"),p=!!("transition"in u||l+"Transition"in u),f=!!("animation"in u||l+"Animation"in u),!n||p&&f||(p=I(r.body.style.webkitTransition),f=I(r.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>n||s),hashchange:"onhashchange"in e&&(!o||o>7),hasEvent:function(e){if("input"==e&&9==c)return!1;if(A(i[e])){var t=r.createElement("div");i[e]="on"+e in t}return i[e]},csp:st(),vendorPrefix:l,transitions:p,animations:f,android:n,msie:c,msieDocumentMode:o}}]}function Kn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,i,n){function s(s,r,o){var u,l=i.defer(),c=l.promise,d=P(o)&&!o;return u=t.defer(function(){try{l.resolve(s())}catch(t){l.reject(t),n(t)}finally{delete a[c.$$timeoutId]}d||e.$apply()},r),c.$$timeoutId=u,a[u]=l,c}var a={};return s.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},s}]}function Jn(e){var i=e;return c&&(Zn.setAttribute("href",i),i=Zn.href),Zn.setAttribute("href",i),{href:Zn.href,protocol:Zn.protocol?Zn.protocol.replace(/:$/,""):"",host:Zn.host,search:Zn.search?Zn.search.replace(/^\?/,""):"",hash:Zn.hash?Zn.hash.replace(/^#/,""):"",hostname:Zn.hostname,port:Zn.port,pathname:"/"===Zn.pathname.charAt(0)?Zn.pathname:"/"+Zn.pathname}}function ea(e){var t=I(e)?Jn(e):e;return t.protocol===Qn.protocol&&t.host===Qn.host}function ta(){this.$get=M(e)}function ia(e){function i(n,a){if(F(n)){var s={};return w(n,function(e,t){s[t]=i(t,e)}),s}return e.factory(n+t,a)}var t="Filter";this.register=i,this.$get=["$injector",function(e){return function(i){return e.get(i+t)}}],i("currency",aa),i("date",_a),i("filter",na),i("json",ga),i("limitTo",ya),i("lowercase",va),i("number",sa),i("orderBy",wa),i("uppercase",ba)}function na(){return function(e,t,i){if(!L(e))return e;var n=typeof i,a=[];a.check=function(e){for(var t=0;a.length>t;t++)if(!a[t](e))return!1;return!0},"function"!==n&&(i="boolean"===n&&i?function(e,t){return _.equals(e,t)}:function(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){for(var n in e)if("$"!==n.charAt(0)&&s.call(e,n)&&i(e[n],t[n]))return!0;return!1}return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var r=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!r(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return i(e,t);case"object":switch(typeof t){case"object":return i(e,t);default:for(var n in e)if("$"!==n.charAt(0)&&r(e[n],t))return!0}return!1;case"array":for(var a=0;e.length>a;a++)if(r(e[a],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var o in t)(function(e){void 0!==t[e]&&a.push(function(i){return r("$"==e?i:i&&i[e],t[e])})})(o);break;case"function":a.push(t);break;default:return e}for(var l=[],c=0;e.length>c;c++){var d=e[c];a.check(d)&&l.push(d)}return l}}function aa(e){var t=e.NUMBER_FORMATS;return function(e,i){return A(i)&&(i=t.CURRENCY_SYM),oa(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,i)}}function sa(e){var t=e.NUMBER_FORMATS;return function(e,i){return oa(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,i)}}function oa(e,t,i,n,a){if(null==e||!isFinite(e)||F(e))return"";var s=0>e;e=Math.abs(e);var r=e+"",o="",l=[],c=!1;if(-1!==r.indexOf("e")){var d=r.match(/([\d\.]+)e(-?)(\d+)/);d&&"-"==d[2]&&d[3]>a+1?r="0":(o=r,c=!0)}if(c)a>0&&e>-1&&1>e&&(o=e.toFixed(a));else{var u=(r.split(ra)[1]||"").length;A(a)&&(a=Math.min(Math.max(t.minFrac,u),t.maxFrac));var p=Math.pow(10,a+1);e=Math.floor(e*p+5)/p;var f=(""+e).split(ra),h=f[0];f=f[1]||"";var m,_=0,g=t.lgSize,v=t.gSize;if(h.length>=g+v)for(_=h.length-g,m=0;_>m;m++)0===(_-m)%v&&0!==m&&(o+=i),o+=h.charAt(m);for(m=_;h.length>m;m++)0===(h.length-m)%g&&0!==m&&(o+=i),o+=h.charAt(m);for(;a>f.length;)f+="0";a&&"0"!==a&&(o+=n+f.substr(0,a))}return l.push(s?t.negPre:t.posPre),l.push(o),l.push(s?t.negSuf:t.posSuf),l.join("")}function la(e,t,i){var n="";for(0>e&&(n="-",e=-e),e=""+e;t>e.length;)e="0"+e;return i&&(e=e.substr(e.length-t)),n+e}function ca(e,t,i,n){return i=i||0,function(a){var s=a["get"+e]();return(i>0||s>-i)&&(s+=i),0===s&&-12==i&&(s=12),la(s,t,n)}}function da(e,t){return function(i,n){var a=i["get"+e](),s=r(t?"SHORT"+e:e);return n[s][a]}}function ua(e){var t=-1*e.getTimezoneOffset(),i=t>=0?"+":"";return i+=la(Math[t>0?"floor":"ceil"](t/60),2)+la(Math.abs(t%60),2)}function pa(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]}function _a(e){function i(e){var i;if(i=e.match(t)){var n=new Date(0),a=0,s=0,r=i[8]?n.setUTCFullYear:n.setFullYear,o=i[8]?n.setUTCHours:n.setHours;i[9]&&(a=D(i[9]+i[10]),s=D(i[9]+i[11])),r.call(n,D(i[1]),D(i[2])-1,D(i[3]));
var l=D(i[4]||0)-a,c=D(i[5]||0)-s,d=D(i[6]||0),u=Math.round(1e3*parseFloat("0."+(i[7]||0)));return o.call(n,l,c,d,u),n}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,n){var r,o,a="",s=[];if(n=n||"mediumDate",n=e.DATETIME_FORMATS[n]||n,I(t)&&(t=ma.test(t)?D(t):i(t)),O(t)&&(t=new Date(t)),!N(t))return t;for(;n;)o=ha.exec(n),o?(s=rt(s,o,1),n=s.pop()):(s.push(n),n=null);return w(s,function(i){r=fa[i],a+=r?r(t,e.DATETIME_FORMATS):i.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function ga(){return function(e){return dt(e,!0)}}function ya(){return function(e,t){if(!L(e)&&!I(e))return e;if(t=1/0===Math.abs(Number(t))?Number(t):D(t),I(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var n,a,i=[];for(t>e.length?t=e.length:-e.length>t&&(t=-e.length),t>0?(n=0,a=t):(n=e.length+t,a=e.length);a>n;n++)i.push(e[n]);return i}}function wa(e){return function(t,i,n){function r(e,t){for(var n=0;i.length>n;n++){var a=i[n](e,t);if(0!==a)return a}return 0}function o(e,t){return pt(t)?function(t,i){return e(i,t)}:e}function l(e,t){var i=typeof e,n=typeof t;return i==n?("string"==i&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):n>i?-1:1}if(!L(t))return t;if(!i)return t;i=L(i)?i:[i],i=K(i,function(t){var i=!1,n=t||z;if(I(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(i="-"==t.charAt(0),t=t.substring(1)),n=e(t),n.constant)){var a=n();return o(function(e,t){return l(e[a],t[a])},i)}return o(function(e,t){return l(n(e),n(t))},i)});for(var a=[],s=0;t.length>s;s++)a.push(t[s]);return a.sort(o(r,n))}}function ka(e){return H(e)&&(e={link:e}),e.restrict=e.restrict||"AC",M(e)}function Ca(e,t,i,n){function c(t,i){i=i?"-"+kt(i,"-"):"",n.removeClass(e,(t?Ba:Wa)+i),n.addClass(e,(t?Wa:Ba)+i)}var a=this,s=e.parent().controller("form")||$a,r=0,o=a.$error={},l=[];a.$name=t.name||t.ngForm,a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,s.$addControl(a),e.addClass(Ya),c(!0),a.$addControl=function(e){Ct(e.$name,"input"),l.push(e),e.$name&&(a[e.$name]=e)},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],w(o,function(t,i){a.$setValidity(i,!0,e)}),et(l,e)},a.$setValidity=function(e,t,i){var n=o[e];if(t)n&&(et(n,i),n.length||(r--,r||(c(t),a.$valid=!0,a.$invalid=!1),o[e]=!1,c(!0,e),s.$setValidity(e,!0,a)));else{if(r||c(t),n){if(Q(n,i))return}else o[e]=n=[],r++,c(!1,e),s.$setValidity(e,!1,a);n.push(i),a.$valid=!1,a.$invalid=!0}},a.$setDirty=function(){n.removeClass(e,Ya),n.addClass(e,Ua),a.$dirty=!0,a.$pristine=!1,s.$setDirty()},a.$setPristine=function(){n.removeClass(e,Ua),n.addClass(e,Ya),a.$dirty=!1,a.$pristine=!0,w(l,function(e){e.$setPristine()})}}function Pa(e,t,n,a){return e.$setValidity(t,n),n?a:i}function Fa(e,t,i){var n=i.prop("validity");if(F(n)){var a=function(i){return e.$error[t]||!(n.badInput||n.customError||n.typeMismatch)||n.valueMissing?i:(e.$setValidity(t,!1),void 0)};e.$parsers.push(a)}}function Ia(e,t,i,a,s,r){var o=t.prop("validity"),l=t[0].placeholder,d={};if(!s.android){var u=!1;t.on("compositionstart",function(){u=!0}),t.on("compositionend",function(){u=!1,p()})}var p=function(n){if(!u){var s=t.val();if(c&&"input"===(n||d).type&&t[0].placeholder!==l)return l=t[0].placeholder,void 0;pt(i.ngTrim||"T")&&(s=V(s)),(a.$viewValue!==s||o&&""===s&&!o.valueMissing)&&(e.$$phase?a.$setViewValue(s):e.$apply(function(){a.$setViewValue(s)}))}};if(s.hasEvent("input"))t.on("input",p);else{var f,h=function(){f||(f=r.defer(function(){p(),f=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||h()}),s.hasEvent("paste")&&t.on("paste cut",h)}t.on("change",p),a.$render=function(){t.val(a.$isEmpty(a.$viewValue)?"":a.$viewValue)};var _,g,m=i.ngPattern;if(m){var v=function(e,t){return Pa(a,"pattern",a.$isEmpty(t)||e.test(t),t)};g=m.match(/^\/(.*)\/([gim]*)$/),g?(m=new RegExp(g[1],g[2]),_=function(e){return v(m,e)}):_=function(i){var a=e.$eval(m);if(!a||!a.test)throw n("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",m,a,ft(t));return v(a,i)},a.$formatters.push(_),a.$parsers.push(_)}if(i.ngMinlength){var b=D(i.ngMinlength),y=function(e){return Pa(a,"minlength",a.$isEmpty(e)||e.length>=b,e)};a.$parsers.push(y),a.$formatters.push(y)}if(i.ngMaxlength){var w=D(i.ngMaxlength),k=function(e){return Pa(a,"maxlength",a.$isEmpty(e)||w>=e.length,e)};a.$parsers.push(k),a.$formatters.push(k)}}function Oa(e,t,n,a,s,r){if(Ia(e,t,n,a,s,r),a.$parsers.push(function(e){var t=a.$isEmpty(e);return t||Ma.test(e)?(a.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(a.$setValidity("number",!1),i)}),Fa(a,"number",t),a.$formatters.push(function(e){return a.$isEmpty(e)?"":""+e}),n.min){var o=function(e){var t=parseFloat(n.min);return Pa(a,"min",a.$isEmpty(e)||e>=t,e)};a.$parsers.push(o),a.$formatters.push(o)}if(n.max){var l=function(e){var t=parseFloat(n.max);return Pa(a,"max",a.$isEmpty(e)||t>=e,e)};a.$parsers.push(l),a.$formatters.push(l)}a.$formatters.push(function(e){return Pa(a,"number",a.$isEmpty(e)||O(e),e)})}function Na(e,t,i,n,a,s){Ia(e,t,i,n,a,s);var r=function(e){return Pa(n,"url",n.$isEmpty(e)||Ta.test(e),e)};n.$formatters.push(r),n.$parsers.push(r)}function La(e,t,i,n,a,s){Ia(e,t,i,n,a,s);var r=function(e){return Pa(n,"email",n.$isEmpty(e)||za.test(e),e)};n.$formatters.push(r),n.$parsers.push(r)}function Ha(e,t,i,n){A(i.name)&&t.attr("name",$()),t.on("click",function(){t[0].checked&&e.$apply(function(){n.$setViewValue(i.value)})}),n.$render=function(){var e=i.value;t[0].checked=e==n.$viewValue},i.$observe("value",n.$render)}function Ra(e,t,i,n){var a=i.ngTrueValue,s=i.ngFalseValue;I(a)||(a=!0),I(s)||(s=!1),t.on("click",function(){e.$apply(function(){n.$setViewValue(t[0].checked)})}),n.$render=function(){t[0].checked=n.$viewValue},n.$isEmpty=function(e){return e!==a},n.$formatters.push(function(e){return e===a}),n.$parsers.push(function(e){return e?a:s})}function ns(e,t){return e="ngClass"+e,["$animate",function(i){function n(e,t){var i=[];e:for(var n=0;e.length>n;n++){for(var a=e[n],s=0;t.length>s;s++)if(a==t[s])continue e;i.push(a)}return i}function a(e){if(L(e))return e;if(I(e))return e.split(" ");if(F(e)){var t=[];return w(e,function(e,i){e&&(t=t.concat(i.split(" ")))}),t}return e}return{restrict:"AC",link:function(s,r,o){function c(e){var t=u(e,1);o.$addClass(t)}function d(e){var t=u(e,-1);o.$removeClass(t)}function u(e,t){var i=r.data("$classCounts")||{},n=[];return w(e,function(e){(t>0||i[e])&&(i[e]=(i[e]||0)+t,i[e]===+(t>0)&&n.push(e))}),r.data("$classCounts",i),n.join(" ")}function p(e,t){var a=n(t,e),s=n(e,t);s=u(s,-1),a=u(a,1),0===a.length?i.removeClass(r,s):0===s.length?i.addClass(r,a):i.setClass(r,a,s)}function f(e){if(t===!0||s.$index%2===t){var i=a(e||[]);if(l){if(!at(e,l)){var n=a(l);p(n,i)}}else c(i)}l=nt(e)}var l;s.$watch(o[e],f,!0),o.$observe("class",function(){f(s.$eval(o[e]))}),"ngClass"!==e&&s.$watch("$index",function(i,n){var r=1&i;if(r!==(1&n)){var l=a(s.$eval(o[e]));r===t?c(l):d(l)}})}}}]}var a=function(e){return I(e)?e.toLowerCase():e},s=Object.prototype.hasOwnProperty,r=function(e){return I(e)?e.toUpperCase():e},o=function(e){return I(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},l=function(e){return I(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(a=o,r=l);var c,d,u,g,v,p=[].slice,f=[].push,h=Object.prototype.toString,m=n("ng"),_=e.angular||(e.angular={}),b=["0","0","0"];c=D((/msie (\d+)/.exec(a(navigator.userAgent))||[])[1]),isNaN(c)&&(c=D((/trident\/.*; rv:(\d+)/.exec(a(navigator.userAgent))||[])[1])),T.$inject=[],z.$inject=[];var L=function(){return H(Array.isArray)?Array.isArray:function(e){return"[object Array]"===h.call(e)}}(),V=function(){return String.prototype.trim?function(e){return I(e)?e.trim():e}:function(e){return I(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();v=9>c?function(e){return e=e.nodeName?e:e[0],e.scopeName&&"HTML"!=e.scopeName?r(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var wt=/[A-Z]/g,Tt={full:"1.2.18",major:1,minor:2,dot:18,codeName:"ear-extendability"},Mt=Qt.cache={},At=Qt.expando="ng"+(new Date).getTime(),Pt=1,Ft=e.document.addEventListener?function(e,t,i){e.addEventListener(t,i,!1)}:function(e,t,i){e.attachEvent("on"+t,i)},It=e.document.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent("on"+t,i)};Qt._data=function(e){return this.cache[e[this.expando]]||{}};var Lt=/([\:\-\_]+(.))/g,Ht=/^moz([A-Z])/,Rt=n("jqLite"),Bt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Yt=/<|&#?\w+;/,Ut=/<([\w:]+)/,Vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Xt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var pi=Qt.prototype={ready:function(i){function a(){n||(n=!0,i())}var n=!1;"complete"===t.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),Qt(e).on("load",a))},toString:function(){var e=[];return w(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?d(this[e]):d(this[this.length+e])},length:0,push:f,sort:[].sort,splice:[].splice},fi={};w("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){fi[a(e)]=e});var hi={};w("input,select,option,textarea,button,form,details".split(","),function(e){hi[r(e)]=!0}),w({data:ai,inheritedData:di,scope:function(e){return d(e).data("$scope")||di(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return d(e).data("$isolateScope")||d(e).data("$isolateScopeNoTemplate")},controller:ci,injector:function(e){return di(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:si,css:function(e,t,n){if(t=qt(t),!P(n)){var a;return 8>=c&&(a=e.currentStyle&&e.currentStyle[t],""===a&&(a="auto")),a=a||e.style[t],8>=c&&(a=""===a?i:a),a}e.style[t]=n},attr:function(e,t,n){var s=a(t);if(fi[s]){if(!P(n))return e[t]||(e.attributes.getNamedItem(t)||T).specified?s:i;n?(e[t]=!0,e.setAttribute(t,s)):(e[t]=!1,e.removeAttribute(s))}else if(P(n))e.setAttribute(t,n);else if(e.getAttribute){var r=e.getAttribute(t,2);return null===r?i:r}},prop:function(e,t,i){return P(i)?(e[t]=i,void 0):e[t]},text:function(){function t(t,i){var n=e[t.nodeType];return A(i)?n?t[n]:"":(t[n]=i,void 0)}var e=[];return 9>c?(e[1]="innerText",e[3]="nodeValue"):e[1]=e[3]="textContent",t.$dv="",t}(),val:function(e,t){if(A(t)){if("SELECT"===v(e)&&e.multiple){var i=[];return w(e.options,function(e){e.selected&&i.push(e.value||e.text)}),0===i.length?null:i}return e.value}e.value=t},html:function(e,t){if(A(t))return e.innerHTML;for(var i=0,n=e.childNodes;n.length>i;i++)ei(n[i]);e.innerHTML=t},empty:ui},function(e,t){Qt.prototype[t]=function(t,n){var a,s,r=this.length;if(e!==ui&&(2==e.length&&e!==si&&e!==ci?t:n)===i){if(F(t)){for(a=0;r>a;a++)if(e===ai)e(this[a],t);else for(s in t)e(this[a],s,t[s]);return this}for(var o=e.$dv,l=o===i?Math.min(r,1):r,c=0;l>c;c++){var d=e(this[c],t,n);o=o?o+d:d}return o}for(a=0;r>a;a++)e(this[a],t,n);return this}}),w({removeData:ii,dealoc:ei,on:function gi(e,i,n,a){if(P(a))throw Rt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var s=ni(e,"events"),r=ni(e,"handle");s||ni(e,"events",s={}),r||ni(e,"handle",r=_i(e,s)),w(i.split(" "),function(i){var a=s[i];if(!a){if("mouseenter"==i||"mouseleave"==i){var o=t.body.contains||t.body.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};s[i]=[];var l={mouseleave:"mouseout",mouseenter:"mouseover"};gi(e,l[i],function(e){var t=this,n=e.relatedTarget;(!n||n!==t&&!o(t,n))&&r(e,i)})}else Ft(e,i,r),s[i]=[];a=s[i]}a.push(n)})},off:ti,one:function(e,t,i){e=d(e),e.on(t,function n(){e.off(t,i),e.off(t,n)}),e.on(t,i)},replaceWith:function(e,t){var i,n=e.parentNode;ei(e),w(new Qt(t),function(t){i?n.insertBefore(t,i.nextSibling):n.replaceChild(t,e),i=t})},children:function(e){var t=[];return w(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){w(new Qt(t),function(t){(1===e.nodeType||11===e.nodeType)&&e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var i=e.firstChild;w(new Qt(t),function(t){e.insertBefore(t,i)})}},wrap:function(e,t){t=d(t)[0];var i=e.parentNode;i&&i.replaceChild(t,e),t.appendChild(e)},remove:function(e){ei(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var i=e,n=e.parentNode;w(new Qt(t),function(e){n.insertBefore(e,i.nextSibling),i=e})},addClass:oi,removeClass:ri,toggleClass:function(e,t,i){t&&w(t.split(" "),function(t){var n=i;A(n)&&(n=!si(e,t)),(n?oi:ri)(e,t)})},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Jt,triggerHandler:function(e,t,i){var n=(ni(e,"events")||{})[t];i=i||[];var a=[{preventDefault:T,stopPropagation:T}];w(n,function(t){t.apply(e,a.concat(i))})}},function(e,t){Qt.prototype[t]=function(t,i,n){for(var a,s=0;this.length>s;s++)A(a)?(a=e(this[s],t,i,n),P(a)&&(a=d(a))):li(a,e(this[s],t,i,n));return P(a)?a:this},Qt.prototype.bind=Qt.prototype.on,Qt.prototype.unbind=Qt.prototype.off}),bi.prototype={put:function(e,t){this[vi(e)]=t},get:function(e){return this[vi(e)]},remove:function(e){var t=this[e=vi(e)];return delete this[e],t}};var yi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,wi=/,/,ki=/^\s*(_?)(\S+?)\1\s*$/,ji=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,xi=n("$injector"),Di=n("$animate"),Ei=["$provide",function(e){this.$$selectors={},this.register=function(t,i){var n=t+"-animation";if(t&&"."!=t.charAt(0))throw Di("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=n,e.factory(n,i)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(e,t){function i(e){e&&t(e)}return{enter:function(e,t,n,a){n?n.after(e):(t&&t[0]||(t=n.parent()),t.append(e)),i(a)},leave:function(e,t){e.remove(),i(t)},move:function(e,t,i,n){this.enter(e,t,i,n)},addClass:function(e,t,n){t=I(t)?t:L(t)?t.join(" "):"",w(e,function(e){oi(e,t)}),i(n)},removeClass:function(e,t,n){t=I(t)?t:L(t)?t.join(" "):"",w(e,function(e){ri(e,t)}),i(n)},setClass:function(e,t,n,a){w(e,function(e){oi(e,t),ri(e,n)}),i(a)},enabled:T}}]}],Fi=n("$compile");Ii.$inject=["$provide","$$sanitizeUriProvider"];var Oi=/^(x[\:\-_]|data[\:\-_])/i,Ji=n("$interpolate"),an=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,sn={http:80,https:443,ftp:21},rn=n("$location");_n.prototype=mn.prototype=hn.prototype={$$html5:!1,$$replace:!1,absUrl:gn("$$absUrl"),url:function(e,t){if(A(e))return this.$$url;var i=an.exec(e);return i[1]&&this.path(decodeURIComponent(i[1])),(i[2]||i[1])&&this.search(i[3]||""),this.hash(i[5]||"",t),this},protocol:gn("$$protocol"),host:gn("$$host"),port:gn("$$port"),path:vn("$$path",function(e){return"/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(I(e))this.$$search=mt(e);else{if(!F(e))throw rn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=e}break;default:A(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:vn("$$hash",z),replace:function(){return this.$$replace=!0,this}};var jn,wn=n("$parse"),kn={},Cn={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:T,"+":function(e,t,n,a){return n=n(e,t),a=a(e,t),P(n)?P(a)?n+a:n:P(a)?a:i},"-":function(e,t,i,n){return i=i(e,t),n=n(e,t),(P(i)?i:0)-(P(n)?n:0)},"*":function(e,t,i,n){return i(e,t)*n(e,t)},"/":function(e,t,i,n){return i(e,t)/n(e,t)},"%":function(e,t,i,n){return i(e,t)%n(e,t)},"^":function(e,t,i,n){return i(e,t)^n(e,t)},"=":T,"===":function(e,t,i,n){return i(e,t)===n(e,t)},"!==":function(e,t,i,n){return i(e,t)!==n(e,t)},"==":function(e,t,i,n){return i(e,t)==n(e,t)},"!=":function(e,t,i,n){return i(e,t)!=n(e,t)},"<":function(e,t,i,n){return n(e,t)>i(e,t)},">":function(e,t,i,n){return i(e,t)>n(e,t)},"<=":function(e,t,i,n){return n(e,t)>=i(e,t)},">=":function(e,t,i,n){return i(e,t)>=n(e,t)},"&&":function(e,t,i,n){return i(e,t)&&n(e,t)},"||":function(e,t,i,n){return i(e,t)||n(e,t)},"&":function(e,t,i,n){return i(e,t)&n(e,t)},"|":function(e,t,i,n){return n(e,t)(e,t,i(e,t))},"!":function(e,t,i){return!i(e,t)}},Sn={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Dn=function(e){this.options=e};Dn.prototype={constructor:Dn,lex:function(e){for(this.text=e,this.index=0,this.ch=i,this.lastCh=":",this.tokens=[];this.text.length>this.index;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var t=this.ch+this.peek(),n=t+this.peek(2),a=Cn[this.ch],s=Cn[t],r=Cn[n];r?(this.tokens.push({index:this.index,text:n,fn:r}),this.index+=3):s?(this.tokens.push({index:this.index,text:t,fn:s}),this.index+=2):a?(this.tokens.push({index:this.index,text:this.ch,fn:a}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.text.length>this.index+t?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,i){i=i||this.index;var n=P(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,i)+"]":" "+i;throw wn("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,n,this.text)},readNumber:function(){for(var e="",t=this.index;this.text.length>this.index;){var i=a(this.text.charAt(this.index));if("."==i||this.isNumber(i))e+=i;else{var n=this.peek();if("e"==i&&this.isExpOperator(n))e+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"==e.charAt(e.length-1))e+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,literal:!0,constant:!0,fn:function(){return e}})},readIdent:function(){for(var n,a,s,r,e=this,t="",i=this.index;this.text.length>this.index&&(r=this.text.charAt(this.index),"."===r||this.isIdent(r)||this.isNumber(r));)"."===r&&(n=this.index),t+=r,this.index++;if(n)for(a=this.index;this.text.length>a;){if(r=this.text.charAt(a),"("===r){s=t.substr(n-i+1),t=t.substr(0,n-i),this.index=a;break}if(!this.isWhitespace(r))break;a++}var o={index:i,text:t};if(Cn.hasOwnProperty(t))o.fn=Cn[t],o.literal=!0,o.constant=!0;else{var l=Fn(t,this.options,this.text);o.fn=S(function(e,t){return l(e,t)},{assign:function(i,n){return Tn(i,t,n,e.text,e.options)}})}this.tokens.push(o),s&&(this.tokens.push({index:n,text:"."}),this.tokens.push({index:n+1,text:s}))},readString:function(e){var t=this.index;this.index++;for(var i="",n=e,a=!1;this.text.length>this.index;){var s=this.text.charAt(this.index);if(n+=s,a){if("u"===s){var r=this.text.substring(this.index+1,this.index+5);r.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,i+=String.fromCharCode(parseInt(r,16))}else{var o=Sn[s];i+=o?o:s}a=!1}else if("\\"===s)a=!0;else{if(s===e)return this.index++,this.tokens.push({index:t,text:n,string:i,literal:!0,constant:!0,fn:function(){return i}}),void 0;i+=s}this.index++}this.throwError("Unterminated quote",t)}};var En=function(e,t,i){this.lexer=e,this.$filter=t,this.options=i};En.ZERO=S(function(){return 0},{constant:!0}),En.prototype={constructor:En,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),e.literal=!!t.literal,e.constant=!!t.constant}for(var i,n;i=this.expect("(","[",".");)"("===i.text?(e=this.functionCall(e,n),n=null):"["===i.text?(n=e,e=this.objectIndex(e)):"."===i.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw wn("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw wn("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,i,n){if(this.tokens.length>0){var a=this.tokens[0],s=a.text;if(s===e||s===t||s===i||s===n||!e&&!t&&!i&&!n)return a}return!1},expect:function(e,t,i,n){var a=this.peek(e,t,i,n);return a?(this.tokens.shift(),a):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return S(function(i,n){return e(i,n,t)},{constant:t.constant})},ternaryFn:function(e,t,i){return S(function(n,a){return e(n,a)?t(n,a):i(n,a)},{constant:e.constant&&t.constant&&i.constant})},binaryFn:function(e,t,i){return S(function(n,a){return t(n,a,e,i)},{constant:e.constant&&i.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,i){for(var n,a=0;e.length>a;a++){var s=e[a];s&&(n=s(t,i))}return n}},filterChain:function(){for(var t,e=this.expression();;){if(!(t=this.expect("|")))return e;e=this.binaryFn(e,t.fn,this.filter())}},filter:function(){for(var e=this.expect(),t=this.$filter(e.text),i=[];;){if(!(e=this.expect(":"))){var n=function(e,n,a){for(var s=[a],r=0;i.length>r;r++)s.push(i[r](e,n));return t.apply(e,s)};return function(){return n}}i.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var t,i,e=this.ternary();return(i=this.expect("="))?(e.assign||this.throwError("implies assignment but ["+this.text.substring(0,i.index)+"] can not be assigned to",i),t=this.ternary(),function(i,n){return e.assign(i,t(i,n),n)}):e},ternary:function(){var t,i,e=this.logicalOR();return(i=this.expect("?"))?(t=this.ternary(),(i=this.expect(":"))?this.ternaryFn(e,t,this.ternary()):(this.throwError("expected :",i),void 0)):e},logicalOR:function(){for(var t,e=this.logicalAND();;){if(!(t=this.expect("||")))return e;e=this.binaryFn(e,t.fn,this.logicalAND())}},logicalAND:function(){var t,e=this.equality();return(t=this.expect("&&"))&&(e=this.binaryFn(e,t.fn,this.logicalAND())),e},equality:function(){var t,e=this.relational();return(t=this.expect("==","!=","===","!=="))&&(e=this.binaryFn(e,t.fn,this.equality())),e},relational:function(){var t,e=this.additive();return(t=this.expect("<",">","<=",">="))&&(e=this.binaryFn(e,t.fn,this.relational())),e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.fn,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.fn,this.unary());return e},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(En.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,i=this.expect().text,n=Fn(i,this.options,this.text);return S(function(t,i,a){return n(a||e(t,i))},{assign:function(n,a,s){return Tn(e(n,s),i,a,t.text,t.options)}})},objectIndex:function(e){var t=this,n=this.expression();return this.consume("]"),S(function(a,s){var l,c,r=e(a,s),o=n(a,s);return r?(l=$n(r[o],t.text),l&&l.then&&t.options.unwrapPromises&&(c=l,"$$v"in l||(c.$$v=i,c.then(function(e){c.$$v=e})),l=l.$$v),l):i},{assign:function(i,a,s){var r=n(i,s),o=$n(e(i,s),t.text);return o[r]=a}})},functionCall:function(e,t){var i=[];if(")"!==this.peekToken().text)do i.push(this.expression());while(this.expect(","));this.consume(")");var n=this;return function(a,s){for(var r=[],o=t?t(a,s):a,l=0;i.length>l;l++)r.push(i[l](a,s));var c=e(a,s,o)||T;$n(o,n.text),$n(c,n.text);var d=c.apply?c.apply(o,r):c(r[0],r[1],r[2],r[3],r[4]);return $n(d,n.text)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var i=this.expression();e.push(i),i.constant||(t=!1)}while(this.expect(","));return this.consume("]"),S(function(t,i){for(var n=[],a=0;e.length>a;a++)n.push(e[a](t,i));return n},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var i=this.expect(),n=i.string||i.text;this.consume(":");var a=this.expression();e.push({key:n,value:a}),a.constant||(t=!1)}while(this.expect(","));return this.consume("}"),S(function(t,i){for(var n={},a=0;e.length>a;a++){var s=e[a];n[s.key]=s.value(t,i)}return n},{literal:!0,constant:t})}};var zn={},qn=n("$sce"),Wn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Zn=t.createElement("a"),Qn=Jn(e.location.href,!0);ia.$inject=["$provide"],aa.$inject=["$locale"],sa.$inject=["$locale"];var ra=".",fa={yyyy:ca("FullYear",4),yy:ca("FullYear",2,0,!0),y:ca("FullYear",1),MMMM:da("Month"),MMM:da("Month",!0),MM:ca("Month",2,1),M:ca("Month",1,1),dd:ca("Date",2),d:ca("Date",1),HH:ca("Hours",2),H:ca("Hours",1),hh:ca("Hours",2,-12),h:ca("Hours",1,-12),mm:ca("Minutes",2),m:ca("Minutes",1),ss:ca("Seconds",2),s:ca("Seconds",1),sss:ca("Milliseconds",3),EEEE:da("Day"),EEE:da("Day",!0),a:pa,Z:ua},ha=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,ma=/^\-?\d+$/;_a.$inject=["$locale"];var va=M(a),ba=M(r);wa.$inject=["$parse"];var ja=M({restrict:"E",compile:function(e,i){return 8>=c&&(i.href||i.name||i.$set("href",""),e.append(t.createComment("IE fix"))),i.href||i.xlinkHref||i.name?void 0:function(e,t){var i="[object SVGAnimatedString]"===h.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(i)||e.preventDefault()})}}}),xa={};w(fi,function(e,t){if("multiple"!=e){var i=Ni("ng-"+t);xa[i]=function(){return{priority:100,link:function(e,n,a){e.$watch(a[i],function(e){a.$set(t,!!e)})}}}}}),w(["src","srcset","href"],function(e){var t=Ni("ng-"+e);xa[t]=function(){return{priority:99,link:function(i,n,a){var s=e,r=e;"href"===e&&"[object SVGAnimatedString]"===h.call(n.prop("href"))&&(r="xlinkHref",a.$attr[r]="xlink:href",s=null),a.$observe(t,function(e){e&&(a.$set(r,e),c&&s&&n.prop(s,a[r]))})}}}});var $a={$addControl:T,$removeControl:T,$setValidity:T,$setDirty:T,$setPristine:T};Ca.$inject=["$element","$attrs","$scope","$animate"];var Sa=function(e){return["$timeout",function(t){var n={name:"form",restrict:e?"EAC":"E",controller:Ca,compile:function(){return{pre:function(e,n,a,s){if(!a.action){var r=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};Ft(n[0],"submit",r),n.on("$destroy",function(){t(function(){It(n[0],"submit",r)},0,!1)})}var o=n.parent().controller("form"),l=a.name||a.ngForm;l&&Tn(e,l,s,l),o&&n.on("$destroy",function(){o.$removeControl(s),l&&Tn(e,l,i,l),S(s,$a)})}}}};return n}]},Da=Sa(),Ea=Sa(!0),Ta=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,za=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,Ma=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Aa={text:Ia,number:Oa,url:Na,email:La,radio:Ha,checkbox:Ra,hidden:T,button:T,submit:T,reset:T,file:T},qa=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(i,n,s,r){r&&(Aa[a(s.type)]||Aa.text)(i,n,s,r,t,e)}}}],Wa="ng-valid",Ba="ng-invalid",Ya="ng-pristine",Ua="ng-dirty",Va=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(e,t,i,a,s,r){function p(e,t){t=t?"-"+kt(t,"-"):"",r.removeClass(a,(e?Ba:Wa)+t),r.addClass(a,(e?Wa:Ba)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=i.name;var o=s(i.ngModel),l=o.assign;if(!l)throw n("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,ft(a));this.$render=T,this.$isEmpty=function(e){return A(e)||""===e||null===e||e!==e};var c=a.inheritedData("$formController")||$a,d=0,u=this.$error={};a.addClass(Ya),p(!0),this.$setValidity=function(e,t){u[e]!==!t&&(t?(u[e]&&d--,d||(p(!0),this.$valid=!0,this.$invalid=!1)):(p(!1),this.$invalid=!0,this.$valid=!1,d++),u[e]=!t,p(t,e),c.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,r.removeClass(a,Ua),r.addClass(a,Ya)},this.$setViewValue=function(i){this.$viewValue=i,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,r.removeClass(a,Ya),r.addClass(a,Ua),c.$setDirty()),w(this.$parsers,function(e){i=e(i)}),this.$modelValue!==i&&(this.$modelValue=i,l(e,i),w(this.$viewChangeListeners,function(e){try{e()}catch(i){t(i)}}))};var f=this;e.$watch(function(){var t=o(e);if(f.$modelValue!==t){var i=f.$formatters,n=i.length;for(f.$modelValue=t;n--;)t=i[n](t);f.$viewValue!==t&&(f.$viewValue=t,f.$render())}return t})}],Xa=function(){return{require:["ngModel","^?form"],controller:Va,link:function(e,t,i,n){var a=n[0],s=n[1]||$a;s.$addControl(a),e.$on("$destroy",function(){s.$removeControl(a)})}}},Ga=M({require:"ngModel",link:function(e,t,i,n){n.$viewChangeListeners.push(function(){e.$eval(i.ngChange)})}}),Ka=function(){return{require:"?ngModel",link:function(e,t,i,n){if(n){i.required=!0;var a=function(e){return i.required&&n.$isEmpty(e)?(n.$setValidity("required",!1),void 0):(n.$setValidity("required",!0),e)};n.$formatters.push(a),n.$parsers.unshift(a),i.$observe("required",function(){a(n.$viewValue)})}}}},Za=function(){return{require:"ngModel",link:function(e,t,n,a){var s=/\/(.*)\//.exec(n.ngList),r=s&&new RegExp(s[1])||n.ngList||",",o=function(e){if(!A(e)){var t=[];return e&&w(e.split(r),function(e){e&&t.push(V(e))}),t}};a.$parsers.push(o),a.$formatters.push(function(e){return L(e)?e.join(", "):i}),a.$isEmpty=function(e){return!e||!e.length}}}},Qa=/^(true|false|\d+)$/,Ja=function(){return{priority:100,compile:function(e,t){return Qa.test(t.ngValue)?function(e,t,i){i.$set("value",e.$eval(i.ngValue))}:function(e,t,i){e.$watch(i.ngValue,function(e){i.$set("value",e)})}}}},es=ka({compile:function(e){return e.addClass("ng-binding"),function(e,t,n){t.data("$binding",n.ngBind),e.$watch(n.ngBind,function(e){t.text(e==i?"":e)})}}}),ts=["$interpolate",function(e){return function(t,i,n){var a=e(i.attr(n.$attr.ngBindTemplate));i.addClass("ng-binding").data("$binding",a),n.$observe("ngBindTemplate",function(e){i.text(e)})}}],is=["$sce","$parse",function(e,t){return function(i,n,a){function r(){return(s(i)||"").toString()}n.addClass("ng-binding").data("$binding",a.ngBindHtml);var s=t(a.ngBindHtml);i.$watch(r,function(){n.html(e.getTrustedHtml(s(i))||"")})}}],as=ns("",!0),ss=ns("Odd",0),rs=ns("Even",1),os=ka({compile:function(e,t){t.$set("ngCloak",i),e.removeClass("ng-cloak")
}}),ls=[function(){return{scope:!0,controller:"@",priority:500}}],cs={};w("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Ni("ng-"+e);cs[t]=["$parse",function(i){return{compile:function(n,s){var r=i(s[t]);return function(t,i){i.on(a(e),function(e){t.$apply(function(){r(t,{$event:e})})})}}}}]});var ds=["$animate",function(e){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,n,a,s,r){var o,l,c;i.$watch(a.ngIf,function(s){pt(s)?l||(l=i.$new(),r(l,function(i){i[i.length++]=t.createComment(" end ngIf: "+a.ngIf+" "),o={clone:i},e.enter(i,n.parent(),n)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),o&&(c=Dt(o.clone),e.leave(c,function(){c=null}),o=null))})}}}],us=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,i,n,a){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_.noop,compile:function(s,r){var o=r.ngInclude||r.src,l=r.onload||"",c=r.autoscroll;return function(s,r,d,u,p){var h,m,_,f=0,g=function(){m&&(m.remove(),m=null),h&&(h.$destroy(),h=null),_&&(n.leave(_,function(){m=null}),m=_,_=null)};s.$watch(a.parseAsResourceUrl(o),function(a){var o=function(){!P(c)||c&&!s.$eval(c)||i()},d=++f;a?(e.get(a,{cache:t}).success(function(e){if(d===f){var t=s.$new();u.template=e;var i=p(t,function(e){g(),n.enter(e,null,r,o)});h=t,_=i,h.$emit("$includeContentLoaded"),s.$eval(l)}}).error(function(){d===f&&g()}),s.$emit("$includeContentRequested")):(g(),u.template=null)})}}}}],ps=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,i,n,a){i.html(a.template),e(i.contents())(t)}}}],fs=ka({priority:450,compile:function(){return{pre:function(e,t,i){e.$eval(i.ngInit)}}}}),hs=ka({terminal:!0,priority:1e3}),ms=["$locale","$interpolate",function(e,t){var i=/{}/g;return{restrict:"EA",link:function(n,s,r){var o=r.count,l=r.$attr.when&&s.attr(r.$attr.when),c=r.offset||0,d=n.$eval(l)||{},u={},p=t.startSymbol(),f=t.endSymbol(),h=/^when(Minus)?(.+)$/;w(r,function(e,t){h.test(t)&&(d[a(t.replace("when","").replace("Minus","-"))]=s.attr(r.$attr[t]))}),w(d,function(e,n){u[n]=t(e.replace(i,p+o+"-"+c+f))}),n.$watch(function(){var t=parseFloat(n.$eval(o));return isNaN(t)?"":(t in d||(t=e.pluralCat(t-c)),u[t](n,s,!0))},function(e){s.text(e)})}}}],_s=["$parse","$animate",function(e,i){function r(e){return e.clone[0]}function o(e){return e.clone[e.clone.length-1]}var a="$$NG_REMOVED",s=n("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(n,l,c,u,p){var m,_,g,v,b,k,j,x,$,f=c.ngRepeat,h=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),C={$id:vi};if(!h)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);if(k=h[1],j=h[2],m=h[3],m?(_=e(m),g=function(e,t,i){return $&&(C[$]=e),C[x]=t,C.$index=i,_(n,C)}):(v=function(e,t){return vi(t)},b=function(e){return e}),h=k.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!h)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",k);x=h[3]||h[1],$=h[2];var S={};n.$watchCollection(j,function(e){var c,u,m,k,j,C,D,E,T,z,M,P,h=l[0],_={},A=[];if(y(e))z=e,T=g||v;else{T=g||b,z=[];for(C in e)e.hasOwnProperty(C)&&"$"!=C.charAt(0)&&z.push(C);z.sort()}for(k=z.length,u=A.length=z.length,c=0;u>c;c++)if(C=e===z?c:z[c],D=e[C],E=T(C,D,c),Ct(E,"`track by` id"),S.hasOwnProperty(E))M=S[E],delete S[E],_[E]=M,A[c]=M;else{if(_.hasOwnProperty(E))throw w(A,function(e){e&&e.scope&&(S[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",f,E);A[c]={id:E},_[E]=!1}for(C in S)S.hasOwnProperty(C)&&(M=S[C],P=Dt(M.clone),i.leave(P),w(P,function(e){e[a]=!0}),M.scope.$destroy());for(c=0,u=z.length;u>c;c++){if(C=e===z?c:z[c],D=e[C],M=A[c],A[c-1]&&(h=o(A[c-1])),M.scope){j=M.scope,m=h;do m=m.nextSibling;while(m&&m[a]);r(M)!=m&&i.move(Dt(M.clone),null,d(h)),h=o(M)}else j=n.$new();j[x]=D,$&&(j[$]=C),j.$index=c,j.$first=0===c,j.$last=c===k-1,j.$middle=!(j.$first||j.$last),j.$odd=!(j.$even=0===(1&c)),M.scope||p(j,function(e){e[e.length++]=t.createComment(" end ngRepeat: "+f+" "),i.enter(e,null,d(h)),h=e,M.scope=j,M.clone=e,_[M.id]=M})}S=_})}}}],gs=["$animate",function(e){return function(t,i,n){t.$watch(n.ngShow,function(t){e[pt(t)?"removeClass":"addClass"](i,"ng-hide")})}}],vs=["$animate",function(e){return function(t,i,n){t.$watch(n.ngHide,function(t){e[pt(t)?"addClass":"removeClass"](i,"ng-hide")})}}],bs=ka(function(e,t,i){e.$watch(i.ngStyle,function(e,i){i&&e!==i&&w(i,function(e,i){t.css(i,"")}),e&&t.css(e)},!0)}),ys=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,i,n,a){var s=n.ngSwitch||n.on,r=[],o=[],l=[],c=[];t.$watch(s,function(i){var s,d;for(s=0,d=l.length;d>s;++s)l[s].remove();for(l.length=0,s=0,d=c.length;d>s;++s){var u=o[s];c[s].$destroy(),l[s]=u,e.leave(u,function(){l.splice(s,1)})}o.length=0,c.length=0,(r=a.cases["!"+i]||a.cases["?"])&&(t.$eval(n.change),w(r,function(i){var n=t.$new();c.push(n),i.transclude(n,function(t){var n=i.element;o.push(t),e.enter(t,n.parent(),n)})}))})}}}],ws=ka({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,i,n,a){n.cases["!"+i.ngSwitchWhen]=n.cases["!"+i.ngSwitchWhen]||[],n.cases["!"+i.ngSwitchWhen].push({transclude:a,element:t})}}),ks=ka({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,i,n,a){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:a,element:t})}}),js=ka({link:function(e,t,i,a,s){if(!s)throw n("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ft(t));s(function(e){t.empty(),t.append(e)})}}),xs=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,i){if("text/ng-template"==i.type){var n=i.id,a=t[0].text;e.put(n,a)}}}}],$s=n("ngOptions"),Cs=M({terminal:!0}),Ss=["$compile","$parse",function(e,n){var a=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:T};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,i){var o,l,n=this,a={},r=s;n.databound=i.ngModel,n.init=function(e,t,i){r=e,o=t,l=i},n.addOption=function(t){Ct(t,'"option value"'),a[t]=!0,r.$viewValue==t&&(e.val(t),l.parent()&&l.remove())},n.removeOption=function(e){this.hasOption(e)&&(delete a[e],r.$viewValue==e&&this.renderUnknownOption(e))},n.renderUnknownOption=function(t){var i="? "+vi(t)+" ?";l.val(i),e.prepend(l),e.val(i),l.prop("selected",!0)},n.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){n.renderUnknownOption=T})}],link:function(s,r,o,l){function x(e,t,i,n){i.$render=function(){var e=i.$viewValue;n.hasOption(e)?(v.parent()&&v.remove(),t.val(e),""===e&&m.prop("selected",!0)):A(e)&&m?t.val(""):n.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){v.parent()&&v.remove(),i.$setViewValue(t.val())})})}function $(e,t,i){var n;i.$render=function(){var e=new bi(i.$viewValue);w(t.find("option"),function(t){t.selected=P(e.get(t.value))})},e.$watch(function(){at(n,i.$viewValue)||(n=nt(i.$viewValue),i.$render())}),t.on("change",function(){e.$apply(function(){var e=[];w(t.find("option"),function(t){t.selected&&e.push(t.value)}),i.$setViewValue(e)})})}function C(t,s,r){function j(){var n,a,o,f,b,j,S,D,E,T,z,A,I,O,N,e={"":[]},i=[""],x=r.$modelValue,$=v(t)||[],C=d?k($):$,M={},F=!1;if(p)if(y&&L(x)){F=new bi([]);for(var H=0;x.length>H;H++)M[c]=x[H],F.put(y(t,M),x[H])}else F=new bi(x);for(z=0;E=C.length,E>z;z++){if(S=z,d){if(S=C[z],"$"===S.charAt(0))continue;M[d]=S}if(M[c]=$[S],n=u(t,M)||"",(a=e[n])||(a=e[n]=[],i.push(n)),p)A=P(F.remove(y?y(t,M):m(t,M)));else{if(y){var R={};R[c]=x,A=y(t,R)===y(t,M)}else A=x===m(t,M);F=F||A}N=l(t,M),N=P(N)?N:"",a.push({id:y?y(t,M):d?C[z]:z,label:N,selected:A})}for(p||(h||null===x?e[""].unshift({id:"",label:"",selected:!F}):F||e[""].unshift({id:"?",label:"",selected:!0})),T=0,D=i.length;D>T;T++){for(n=i[T],a=e[n],T>=w.length?(f={element:g.clone().attr("label",n),label:a.label},b=[f],w.push(b),s.append(f.element)):(b=w[T],f=b[0],f.label!=n&&f.element.attr("label",f.label=n)),I=null,z=0,E=a.length;E>z;z++)o=a[z],(j=b[z+1])?(I=j.element,j.label!==o.label&&I.text(j.label=o.label),j.id!==o.id&&I.val(j.id=o.id),j.selected!==o.selected&&I.prop("selected",j.selected=o.selected)):(""===o.id&&h?O=h:(O=_.clone()).val(o.id).attr("selected",o.selected).text(o.label),b.push(j={element:O,label:o.label,id:o.id,selected:o.selected}),I?I.after(O):f.element.append(O),I=O);for(z++;b.length>z;)b.pop().element.remove()}for(;w.length>T;)w.pop()[0].element.remove()}var o;if(!(o=f.match(a)))throw $s("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",f,ft(s));var l=n(o[2]||o[1]),c=o[4]||o[6],d=o[5],u=n(o[3]||""),m=n(o[2]?o[1]:c),v=n(o[7]),b=o[8],y=b?n(o[8]):null,w=[[{element:s,label:""}]];h&&(e(h)(t),h.removeClass("ng-scope"),h.remove()),s.empty(),s.on("change",function(){t.$apply(function(){var e,o,l,u,f,h,_,g,b,n=v(t)||[],a={};if(p){for(l=[],h=0,g=w.length;g>h;h++)for(e=w[h],f=1,_=e.length;_>f;f++)if((u=e[f].element)[0].selected){if(o=u.val(),d&&(a[d]=o),y)for(b=0;n.length>b&&(a[c]=n[b],y(t,a)!=o);b++);else a[c]=n[o];l.push(m(t,a))}}else{if(o=s.val(),"?"==o)l=i;else if(""===o)l=null;else if(y){for(b=0;n.length>b;b++)if(a[c]=n[b],y(t,a)==o){l=m(t,a);break}}else a[c]=n[o],d&&(a[d]=o),l=m(t,a);w[0].length>1&&w[0][1].id!==o&&(w[0][1].selected=!1)}r.$setViewValue(l)})}),r.$render=j,t.$watch(j)}if(l[1]){for(var m,c=l[0],u=l[1],p=o.multiple,f=o.ngOptions,h=!1,_=d(t.createElement("option")),g=d(t.createElement("optgroup")),v=_.clone(),b=0,y=r.children(),j=y.length;j>b;b++)if(""===y[b].value){m=h=y.eq(b);break}c.init(u,h,v),p&&(u.$isEmpty=function(e){return!e||0===e.length}),f?C(s,r,u):p?$(s,r,u):x(s,r,u,c)}}}}],Ds=["$interpolate",function(e){var t={addOption:T,removeOption:T};return{restrict:"E",priority:100,compile:function(i,n){if(A(n.value)){var a=e(i.text(),!0);a||n.$set("value",i.text())}return function(e,i,n){var s="$selectController",r=i.parent(),o=r.data(s)||r.parent().data(s);o&&o.databound?i.prop("selected",!1):o=t,a?e.$watch(a,function(e,t){n.$set("value",e),e!==t&&o.removeOption(t),o.addOption(e)}):o.addOption(n.value),i.on("$destroy",function(){o.removeOption(n.value)})}}}}],Es=M({restrict:"E",terminal:!0});return e.angular.bootstrap?(console.log("WARNING: Tried to load angular more than once."),void 0):(jt(),zt(_),d(t).ready(function(){bt(t,yt)}),void 0)}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(e,t){"use strict";function a(){function e(e,i){return t.extend(new(t.extend(function(){},{prototype:e})),i)}function n(e,t){var i=t.caseInsensitiveMatch,n={originalPath:e,regexp:e},a=n.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,i,n){var s="?"===n?n:null,r="*"===n?n:null;return a.push({name:i,optional:!!s}),t=t||"",""+(s?"":t)+"(?:"+(s?t:"")+(r&&"(.+?)"||"([^/]+)")+(s||"")+")"+(s||"")}).replace(/([\/$\*])/g,"\\$1"),n.regexp=new RegExp("^"+e+"$",i?"i":""),n}var i={};this.when=function(e,a){if(i[e]=t.extend({reloadOnSearch:!0},a,e&&n(e,a)),e){var s="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";i[s]=t.extend({redirectTo:e},n(s,a))}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(n,a,s,r,o,l,c,d){function f(e,t){var i=t.keys,n={};if(!t.regexp)return null;var a=t.regexp.exec(e);if(!a)return null;for(var s=1,r=a.length;r>s;++s){var o=i[s-1],l="string"==typeof a[s]?decodeURIComponent(a[s]):a[s];o&&l&&(n[o.name]=l)}return n}function h(){var e=m(),i=p.current;e&&i&&e.$$route===i.$$route&&t.equals(e.pathParams,i.pathParams)&&!e.reloadOnSearch&&!u?(i.params=e.params,t.copy(i.params,s),n.$broadcast("$routeUpdate",i)):(e||i)&&(u=!1,n.$broadcast("$routeChangeStart",e,i),p.current=e,e&&e.redirectTo&&(t.isString(e.redirectTo)?a.path(_(e.redirectTo,e.params)).search(e.params).replace():a.url(e.redirectTo(e.pathParams,a.path(),a.search())).replace()),r.when(e).then(function(){if(e){var n,a,i=t.extend({},e.resolve);return t.forEach(i,function(e,n){i[n]=t.isString(e)?o.get(e):o.invoke(e)}),t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(a=e.templateUrl)&&(t.isFunction(a)&&(a=a(e.params)),a=d.getTrustedResourceUrl(a),t.isDefined(a)&&(e.loadedTemplateUrl=a,n=l.get(a,{cache:c}).then(function(e){return e.data}))),t.isDefined(n)&&(i.$template=n),r.all(i)}}).then(function(a){e==p.current&&(e&&(e.locals=a,t.copy(e.params,s)),n.$broadcast("$routeChangeSuccess",e,i))},function(t){e==p.current&&n.$broadcast("$routeChangeError",e,i,t)}))}function m(){var n,s;return t.forEach(i,function(i){!s&&(n=f(a.path(),i))&&(s=e(i,{params:t.extend({},a.search(),n),pathParams:n}),s.$$route=i)}),s||i[null]&&e(i[null],{params:{},pathParams:{}})}function _(e,i){var n=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)n.push(e);else{var a=e.match(/(\w+)(.*)/),s=a[1];n.push(i[s]),n.push(a[2]||""),delete i[s]}}),n.join("")}var u=!1,p={routes:i,reload:function(){u=!0,n.$evalAsync(h)}};return n.$on("$locationChangeSuccess",h),p}]}function s(){this.$get=function(){return{}}}function r(e,i,n){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,s,r,o,l){function h(){u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),d&&(n.leave(d,function(){u=null}),u=d,d=null)}function m(){var r=e.current&&e.current.locals,o=r&&r.$template;if(t.isDefined(o)){var u=a.$new(),m=e.current,_=l(u,function(e){n.enter(e,null,d||s,function(){!t.isDefined(p)||p&&!a.$eval(p)||i()}),h()});d=_,c=m.scope=u,c.$emit("$viewContentLoaded"),c.$eval(f)}else h()}var c,d,u,p=r.autoscroll,f=r.onload||"";a.$on("$routeChangeSuccess",m),m()}}}function o(e,t,i){return{restrict:"ECA",priority:-400,link:function(n,a){var s=i.current,r=s.locals;a.html(r.$template);var o=e(a.contents());if(s.controller){r.$scope=n;var l=t(s.controller,r);s.controllerAs&&(n[s.controllerAs]=l),a.data("$ngControllerController",l),a.children().data("$ngControllerController",l)}o(n)}}}var n=t.module("ngRoute",["ng"]).provider("$route",a);n.provider("$routeParams",s),n.directive("ngView",r),n.directive("ngView",o),r.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t){"use strict";function a(){this.$get=["$$sanitizeUri",function(e){return function(t){var i=[];return S(t,M(i,function(t,i){return!/^unsafe/.test(e(t,i))})),i.join("")}}]}function s(e){var i=[],n=M(i,t.noop);return n.chars(e),i.join("")}function C(e){var n,t={},i=e.split(",");for(n=0;i.length>n;n++)t[i[n]]=!0;return t}function S(e,i){function j(e,n,a,s){if(n=t.lowercase(n),y[n])for(;m.last()&&w[m.last()];)x("",m.last());b[n]&&m.last()==n&&x("",n),s=_[n]||!!s,s||m.push(n);var r={};a.replace(l,function(e,t,i,n,a){var s=i||n||a||"";r[t]=T(s)}),i.start&&i.start(n,r,s)}function x(e,n){var s,a=0;if(n=t.lowercase(n))for(a=m.length-1;a>=0&&m[a]!=n;a--);if(a>=0){for(s=m.length-1;s>=a;s--)i.end&&i.end(m[s]);m.length=a}}var a,s,h,m=[],g=e;for(m.last=function(){return m[m.length-1]};e;){if(s=!0,m.last()&&k[m.last()])e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+m.last()+"[^>]*>","i"),function(e,t){return t=t.replace(u,"$1").replace(f,"$1"),i.chars&&i.chars(T(t)),""}),x("",m.last());else if(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(i.comment&&i.comment(e.substring(4,a)),e=e.substring(a+3),s=!1)):p.test(e)?(h=e.match(p),h&&(e=e.replace(h[0],""),s=!1)):d.test(e)?(h=e.match(o),h&&(e=e.substring(h[0].length),h[0].replace(o,x),s=!1)):c.test(e)&&(h=e.match(r),h&&(e=e.substring(h[0].length),h[0].replace(r,j),s=!1)),s){a=e.indexOf("<");var v=0>a?e:e.substring(0,a);e=0>a?"":e.substring(a),i.chars&&i.chars(T(v))}if(e==g)throw n("badparse","The sanitizer was unable to parse the following block of html: {0}",e);g=e}x()}function T(e){if(!e)return"";var t=E.exec(e),i=t[1],n=t[3],a=t[2];return a&&(D.innerHTML=a.replace(/</g,"&lt;"),a="textContent"in D?D.textContent:D.innerText),i+a+n}function z(e){return e.replace(/&/g,"&amp;").replace(h,function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(i-56320)+65536)+";"}).replace(m,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function M(e,i){var n=!1,a=t.bind(e,e.push);return{start:function(e,s,r){e=t.lowercase(e),!n&&k[e]&&(n=e),n||j[e]!==!0||(a("<"),a(e),t.forEach(s,function(n,s){var r=t.lowercase(s),o="img"===e&&"src"===r||"background"===r;$[r]!==!0||x[r]===!0&&!i(n,o)||(a(" "),a(s),a('="'),a(z(n)),a('"'))}),a(r?"/>":">"))},end:function(e){e=t.lowercase(e),n||j[e]!==!0||(a("</"),a(e),a(">")),e==n&&(n=!1)},chars:function(e){n||a(z(e))}}}var n=t.$$minErr("$sanitize"),r=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,o=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,c=/^</,d=/^<\s*\//,u=/<!--(.*?)-->/g,p=/<!DOCTYPE([^>]*?)>/i,f=/<!\[CDATA\[(.*?)]]>/g,h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=/([^\#-~| |!])/g,_=C("area,br,col,hr,img,wbr"),g=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=C("rp,rt"),b=t.extend({},v,g),y=t.extend({},g,C("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=t.extend({},v,C("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=C("script,style"),j=t.extend({},_,y,w,b),x=C("background,cite,href,longdesc,src,usemap"),$=t.extend({},x,C("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),D=document.createElement("pre"),E=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",a),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var i=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,n=/^mailto:/;return function(a,r){function p(e){e&&c.push(s(e))}function f(e,i){c.push("<a "),t.isDefined(r)&&(c.push('target="'),c.push(r),c.push('" ')),c.push('href="'),c.push(e),c.push('">'),p(i),c.push("</a>")}if(!a)return a;for(var o,d,u,l=a,c=[];o=l.match(i);)d=o[0],o[2]==o[3]&&(d="mailto:"+d),u=o.index,p(l.substr(0,u)),f(d,o[0].replace(n,"")),l=l.substring(u+o[0].length);return p(l),e(c.join(""))}}])}(window,window.angular),function(e,t,i){"use strict";t.module("ngAnimate",["ng"]).factory("$$animateReflow",["$$rAF","$document",function(e,t){var i=t[0].body;return function(t){return e(function(){i.offsetWidth+1,t()})}}]).config(["$provide","$animateProvider",function(n,a){function p(e){for(var t=0;e.length>t;t++){var i=e[t];if(i.nodeType==l)return i}}function f(e){return e&&t.element(e)}function h(e){return t.element(p(e))}function m(e,t){return p(e)==p(t)}var s=t.noop,r=t.forEach,o=a.$$selectors,l=1,c="$$ngAnimateState",d="ng-animate",u={running:!0};n.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(e,i,n,l,_,g){function k(e){if(e){var t=[],a={},s=e.substr(1).split(".");(n.transitions||n.animations)&&t.push(i.get(o[""]));for(var r=0;s.length>r;r++){var l=s[r],c=o[l];c&&!a[l]&&(t.push(i.get(c)),a[l]=!0)}return t}}function j(e,i,n){function y(e,t){var i=e[t],n=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return i||n?("leave"==t&&(n=i,i=null),v.push({event:t,fn:i}),m.push({event:t,fn:n}),!0):void 0}function j(t,i,a){function u(e){if(i){if((i[e]||s)(),o.length>++l)return;i=null}a()}var o=[];r(t,function(e){e.fn&&o.push(e)});var l=0;r(o,function(t,a){var s=function(){u(a)};switch(t.event){case"setClass":i.push(t.fn(e,c,d,s));break;case"addClass":i.push(t.fn(e,c||n,s));break;case"removeClass":i.push(t.fn(e,d||n,s));break;default:i.push(t.fn(e,s))}}),i&&0===i.length&&a()}var a=e[0];if(a){var c,d,o="setClass"==i,l=o||"addClass"==i||"removeClass"==i;t.isArray(n)&&(c=n[0],d=n[1],n=c+" "+d);var u=e.attr("class"),p=u+" "+n;if(w(p)){var f=s,h=[],m=[],_=s,g=[],v=[],b=(" "+p).replace(/\s+/g,".");return r(k(b),function(e){var t=y(e,i);!t&&o&&(y(e,"addClass"),y(e,"removeClass"))}),{node:a,event:i,className:n,isClassBased:l,isSetClassOperation:o,before:function(e){f=e,j(m,h,function(){f=s,e()})},after:function(e){_=e,j(v,g,function(){_=s,e()})},cancel:function(){h&&(r(h,function(e){(e||s)(!0)}),f(!0)),g&&(r(g,function(e){(e||s)(!0)}),_(!0))}}}}}function x(e,i,n,a,s,o,l){function D(t){var a="$animate:"+t;p&&p[a]&&p[a].length>0&&_(function(){n.triggerHandler(a,{event:e,className:i})})}function E(){D("before")}function T(){D("after")}function z(){D("close"),l&&_(function(){l()})}function M(){M.hasBeenRun||(M.hasBeenRun=!0,o())}function A(){if(!A.hasBeenRun){A.hasBeenRun=!0;var t=n.data(c);t&&(u&&u.isClassBased?C(n,i):(_(function(){var t=n.data(c)||{};$==t.index&&C(n,i,e)}),n.data(c,t))),z()}}var u=j(n,e,i);if(!u)return M(),E(),T(),A(),void 0;i=u.className;var p=t.element._data(u.node);p=p&&p.events,a||(a=s?s.parent():n.parent());var f=n.data(c)||{},h=f.active||{},m=f.totalActive||0,g=f.last,v=u.isClassBased?f.disabled||g&&!g.isClassBased:!1;if(v||S(n,a))return M(),E(),T(),A(),void 0;var y=!1;if(m>0){var w=[];if(u.isClassBased){if("setClass"==g.event)w.push(g),C(n,i);else if(h[i]){var x=h[i];x.event==e?y=!0:(w.push(x),C(n,i))}}else if("leave"==e&&h["ng-leave"])y=!0;else{for(var k in h)w.push(h[k]),C(n,k);h={},m=0}w.length>0&&r(w,function(e){e.cancel()})}if(!u.isClassBased||u.isSetClassOperation||y||(y="addClass"==e==n.hasClass(i)),y)return M(),E(),T(),z(),void 0;"leave"==e&&n.one("$destroy",function(){var i=t.element(this),n=i.data(c);if(n){var a=n.active["ng-leave"];a&&(a.cancel(),C(i,"ng-leave"))}}),n.addClass(d);var $=b++;m++,h[i]=u,n.data(c,{last:u,active:h,index:$,totalActive:m}),E(),u.before(function(t){var a=n.data(c);t=t||!a||!a.active[i]||u.isClassBased&&a.active[i].event!=e,M(),t===!0?A():(T(),u.after(A))})}function $(e){var i=p(e);if(i){var n=t.isFunction(i.getElementsByClassName)?i.getElementsByClassName(d):i.querySelectorAll("."+d);r(n,function(e){e=t.element(e);var i=e.data(c);i&&i.active&&r(i.active,function(e){e.cancel()})})}}function C(e,t){if(m(e,l))u.disabled||(u.running=!1,u.structural=!1);else if(t){var i=e.data(c)||{},n=t===!0;!n&&i.active&&i.active[t]&&(i.totalActive--,delete i.active[t]),(n||!i.totalActive)&&(e.removeClass(d),e.removeData(c))}}function S(e,t){if(u.disabled)return!0;if(m(e,l))return u.disabled||u.running;do{if(0===t.length)break;var i=m(t,l),n=i?u:t.data(c),a=n&&(!!n.disabled||n.running||n.totalActive>0);if(i||a)return a;if(i)return!0}while(t=t.parent());return!0}var b=0;l.data(c,u),g.$$postDigest(function(){g.$$postDigest(function(){u.running=!1})});var y=a.classNameFilter(),w=y?function(e){return y.test(e)}:function(){return!0};return{enter:function(i,n,a,r){i=t.element(i),n=f(n),a=f(a),this.enabled(!1,i),e.enter(i,n,a),g.$$postDigest(function(){i=h(i),x("enter","ng-enter",i,n,a,s,r)})},leave:function(i,n){i=t.element(i),$(i),this.enabled(!1,i),g.$$postDigest(function(){x("leave","ng-leave",h(i),null,null,function(){e.leave(i)},n)})},move:function(i,n,a,r){i=t.element(i),n=f(n),a=f(a),$(i),this.enabled(!1,i),e.move(i,n,a),g.$$postDigest(function(){i=h(i),x("move","ng-move",i,n,a,s,r)})},addClass:function(i,n,a){i=t.element(i),i=h(i),x("addClass",n,i,null,null,function(){e.addClass(i,n)},a)},removeClass:function(i,n,a){i=t.element(i),i=h(i),x("removeClass",n,i,null,null,function(){e.removeClass(i,n)},a)},setClass:function(i,n,a,s){i=t.element(i),i=h(i),x("setClass",[n,a],i,null,null,function(){e.setClass(i,n,a)},s)},enabled:function(e,t){switch(arguments.length){case 2:if(e)C(t);else{var i=t.data(c)||{};i.disabled=!0,t.data(c,i)}break;case 1:u.disabled=!e;break;default:e=!u.disabled}return!!e}}}]),a.register("",["$window","$sniffer","$timeout","$$animateReflow",function(n,a,o,c){function T(e,t){E&&E(),D.push(t),E=c(function(){r(D,function(e){e()}),D=[],E=null,C={}})}function P(e,i){var n=p(e);e=t.element(n),A.push(e);var a=Date.now()+i;M>=a||(o.cancel(z),M=a,z=o(function(){F(A),A=[]},i,!1))}function F(e){r(e,function(e){var t=e.data(w);t&&(t.closeAnimationFn||s)()})}function I(e,t){var i=t?C[t]:null;if(!i){var d,p,f,m,a=0,s=0,o=0,c=0;r(e,function(e){if(e.nodeType==l){var t=n.getComputedStyle(e)||{};f=t[u+_],a=Math.max(O(f),a),m=t[u+g],d=t[u+v],s=Math.max(O(d),s),p=t[h+v],c=Math.max(O(p),c);var i=O(t[h+_]);i>0&&(i*=parseInt(t[h+b],10)||1),o=Math.max(i,o)}}),i={total:0,transitionPropertyStyle:m,transitionDurationStyle:f,transitionDelayStyle:d,transitionDelay:s,transitionDuration:a,animationDelayStyle:p,animationDelay:c,animationDuration:o},t&&(C[t]=i)}return i}function O(e){var i=0,n=t.isString(e)?e.split(/\s*,\s*/):[];return r(n,function(e){i=Math.max(parseFloat(e)||0,i)}),i}function N(e){var t=e.parent(),i=t.data(y);return i||(t.data(y,++S),i=S),i+"-"+p(e).getAttribute("class")}function L(e,t,i,n){var a=N(t),r=a+" "+i,o=C[r]?++C[r].total:0,l={};if(o>0){var c=i+"-stagger",d=a+" "+c,u=!C[d];u&&t.addClass(c),l=I(t,d),u&&t.removeClass(c)}n=n||function(e){return e()},t.addClass(i);var p=t.data(w)||{},f=n(function(){return I(t,r)}),h=f.transitionDuration,m=f.animationDuration;if(0===h&&0===m)return t.removeClass(i),!1;t.data(w,{running:p.running||0,itemIndex:o,stagger:l,timings:f,closeAnimationFn:s});var _=p.running>0||"setClass"==e;return h>0&&R(t,i,_),m>0&&l.animationDelay>0&&0===l.animationDuration&&q(t),!0}function H(e){return"ng-enter"==e||"ng-move"==e||"ng-leave"==e}function R(e,t,i){H(t)||!i?p(e).style[u+g]="none":e.addClass(k)}function q(e){p(e).style[h]="none 0s"}function W(e){var i=u+g,n=p(e);n.style[i]&&n.style[i].length>0&&(n.style[i]=""),e.removeClass(k)}function B(e){var t=h,i=p(e);i.style[t]&&i.style[t].length>0&&(i.style[t]="")}function Y(e,t,i,n){function M(){t.off(b,A),t.removeClass(o),K(t,i);var n=p(t);for(var a in k)n.style.removeProperty(k[a])}function A(e){e.stopPropagation();var t=e.originalEvent||e,i=t.$manualTimeStamp||t.timeStamp||Date.now(),a=parseFloat(t.elapsedTime.toFixed(j));Math.max(i-v,0)>=g&&a>=h&&n()}var a=p(t),s=t.data(w);if(-1==a.getAttribute("class").indexOf(i)||!s)return n(),void 0;var o="";r(i.split(" "),function(e,t){o+=(t>0?" ":"")+e+"-active"});var l=s.stagger,c=s.timings,u=s.itemIndex,h=Math.max(c.transitionDuration,c.animationDuration),_=Math.max(c.transitionDelay,c.animationDelay),g=_*$,v=Date.now(),b=m+" "+f,y="",k=[];if(c.transitionDuration>0){var C=c.transitionPropertyStyle;-1==C.indexOf("all")&&(y+=d+"transition-property: "+C+";",y+=d+"transition-duration: "+c.transitionDurationStyle+";",k.push(d+"transition-property"),k.push(d+"transition-duration"))}if(u>0){if(l.transitionDelay>0&&0===l.transitionDuration){var S=c.transitionDelayStyle;y+=d+"transition-delay: "+U(S,l.transitionDelay,u)+"; ",k.push(d+"transition-delay")}l.animationDelay>0&&0===l.animationDuration&&(y+=d+"animation-delay: "+U(c.animationDelayStyle,l.animationDelay,u)+"; ",k.push(d+"animation-delay"))}if(k.length>0){var D=a.getAttribute("style")||"";a.setAttribute("style",D+"; "+y)}t.on(b,A),t.addClass(o),s.closeAnimationFn=function(){M(),n()};var E=u*(Math.max(l.animationDelay,l.transitionDelay)||0),T=(_+h)*x,z=(E+T)*$;return s.running++,P(t,z),M}function U(e,t,i){var n="";return r(e.split(","),function(e,a){n+=(a>0?",":"")+(i*t+parseInt(e,10))+"s"}),n}function V(e,t,i,n){return L(e,t,i,n)?function(e){e&&K(t,i)}:void 0}function X(e,t,i,n){return t.data(w)?Y(e,t,i,n):(K(t,i),n(),void 0)}function G(e,t,i,n){var a=V(e,t,i);if(!a)return n(),void 0;var r=a;return T(t,function(){W(t,i),B(t),r=X(e,t,i,n)}),function(e){(r||s)(e)}}function K(e,t){e.removeClass(t);var i=e.data(w);i&&(i.running&&i.running--,i.running&&0!==i.running||e.removeData(w))}function Z(e,i){var n="";return e=t.isArray(e)?e:e.split(/\s+/),r(e,function(e,t){e&&e.length>0&&(n+=(t>0?" ":"")+e+i)}),n}var u,f,h,m,d="";e.ontransitionend===i&&e.onwebkittransitionend!==i?(d="-webkit-",u="WebkitTransition",f="webkitTransitionEnd transitionend"):(u="transition",f="transitionend"),e.onanimationend===i&&e.onwebkitanimationend!==i?(d="-webkit-",h="WebkitAnimation",m="webkitAnimationEnd animationend"):(h="animation",m="animationend");var E,_="Duration",g="Property",v="Delay",b="IterationCount",y="$$ngAnimateKey",w="$$ngAnimateCSS3Data",k="ng-animate-block-transitions",j=3,x=1.5,$=1e3,C={},S=0,D=[],z=null,M=0,A=[];return{enter:function(e,t){return G("enter",e,"ng-enter",t)},leave:function(e,t){return G("leave",e,"ng-leave",t)},move:function(e,t){return G("move",e,"ng-move",t)},beforeSetClass:function(e,t,i,n){var a=Z(i,"-remove")+" "+Z(t,"-add"),s=V("setClass",e,a,function(n){var a=e.attr("class");e.removeClass(i),e.addClass(t);var s=n();return e.attr("class",a),s});return s?(T(e,function(){W(e,a),B(e),n()}),s):(n(),void 0)},beforeAddClass:function(e,t,i){var n=V("addClass",e,Z(t,"-add"),function(i){e.addClass(t);var n=i();return e.removeClass(t),n});return n?(T(e,function(){W(e,t),B(e),i()}),n):(i(),void 0)},setClass:function(e,t,i,n){i=Z(i,"-remove"),t=Z(t,"-add");var a=i+" "+t;return X("setClass",e,a,n)},addClass:function(e,t,i){return X("addClass",e,Z(t,"-add"),i)},beforeRemoveClass:function(e,t,i){var n=V("removeClass",e,Z(t,"-remove"),function(i){var n=e.attr("class");e.removeClass(t);var a=i();return e.attr("class",n),a});return n?(T(e,function(){W(e,t),B(e),i()}),n):(i(),void 0)},removeClass:function(e,t,i){return X("removeClass",e,Z(t,"-remove"),i)}}}])}])}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,i){function o(e){for(var t in e)if(void 0!==a.style[t])return e[t]
}var n=function(a,s,r){r=r||{};var o=e.defer(),l=n[r.animation?"animationEndEventName":"transitionEndEventName"],c=function(){i.$apply(function(){a.unbind(l,c),o.resolve(a)})};return l&&a.bind(l,c),t(function(){angular.isString(s)?a.addClass(s):angular.isFunction(s)?s(a):angular.isObject(s)&&a.css(s),l||o.resolve(a)}),o.promise.cancel=function(){l&&a.unbind(l,c),o.reject("Transition cancelled")},o.promise},a=document.createElement("trans"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return n.transitionEndEventName=o(s),n.animationEndEventName=o(r),n}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,i,n){function r(t){function a(){s===n&&(s=void 0)}var n=e(i,t);return s&&s.cancel(),s=n,n.then(a,a),n}function o(){a?(a=!1,l()):(i.removeClass("collapse").addClass("collapsing"),r({height:i[0].scrollHeight+"px"}).then(l))}function l(){i.removeClass("collapsing"),i.addClass("collapse in"),i.css({height:"auto"})}function c(){a?(a=!1,d(),i.css({height:0})):(i.css({height:i[0].scrollHeight+"px"}),i[0].offsetWidth,i.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(d))}function d(){i.removeClass("collapsing"),i.addClass("collapse")}var s,a=!0;t.$watch(n.collapse,function(e){e?c():o()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,i){this.groups=[],this.closeOthers=function(n){var a=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):i.closeOthers;a&&angular.forEach(this.groups,function(e){e!==n&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,i,n){n.addGroup(e),e.$watch("isOpen",function(t){t&&n.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,i,n,a){n.setHeading(a(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,i,n){e.$watch(function(){return n[i.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,i){t.addClass("ng-binding").data("$binding",i.bindHtmlUnsafe),e.$watch(i.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,i,n){var a=n[0],s=n[1];s.$render=function(){t.toggleClass(a.activeClass,angular.equals(s.$modelValue,e.$eval(i.btnRadio)))},t.bind(a.toggleEvent,function(){var n=t.hasClass(a.activeClass);(!n||angular.isDefined(i.uncheckable))&&e.$apply(function(){s.$setViewValue(n?null:e.$eval(i.btnRadio)),s.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,i,n){function r(){return l(i.btnCheckboxTrue,!0)}function o(){return l(i.btnCheckboxFalse,!1)}function l(t,i){var n=e.$eval(t);return angular.isDefined(n)?n:i}var a=n[0],s=n[1];s.$render=function(){t.toggleClass(a.activeClass,angular.equals(s.$modelValue,r()))},t.bind(a.toggleEvent,function(){e.$apply(function(){s.$setViewValue(t.hasClass(a.activeClass)?o():r()),s.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(e,t,i){function c(){d();var i=+e.interval;!isNaN(i)&&i>=0&&(r=t(u,i))}function d(){r&&(t.cancel(r),r=null)}function u(){o?(e.next(),c()):e.pause()}var r,o,n=this,a=n.slides=e.slides=[],s=-1;n.currentSlide=null;var l=!1;n.select=e.select=function(r,o){function u(){l||(n.currentSlide&&angular.isString(o)&&!e.noTransition&&r.$element?(r.$element.addClass(o),r.$element[0].offsetWidth,angular.forEach(a,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(r,{direction:o,active:!0,entering:!0}),angular.extend(n.currentSlide||{},{direction:o,leaving:!0}),e.$currentTransition=i(r.$element,{}),function(t,i){e.$currentTransition.then(function(){p(t,i)},function(){p(t,i)})}(r,n.currentSlide)):p(r,n.currentSlide),n.currentSlide=r,s=d,c())}function p(t,i){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(i||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var d=a.indexOf(r);void 0===o&&(o=d>s?"next":"prev"),r&&r!==n.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(u)):u())},e.$on("$destroy",function(){l=!0}),n.indexOfSlide=function(e){return a.indexOf(e)},e.next=function(){var t=(s+1)%a.length;return e.$currentTransition?void 0:n.select(a[t],"next")},e.prev=function(){var t=0>s-1?a.length-1:s-1;return e.$currentTransition?void 0:n.select(a[t],"prev")},e.isActive=function(e){return n.currentSlide===e},e.$watch("interval",c),e.$on("$destroy",d),e.play=function(){o||(o=!0,c())},e.pause=function(){e.noPause||(o=!1,d())},n.addSlide=function(t,i){t.$element=i,a.push(t),1===a.length||t.active?(n.select(a[a.length-1]),1==a.length&&e.play()):t.active=!1},n.removeSlide=function(e){var t=a.indexOf(e);a.splice(t,1),a.length>0&&e.active?t>=a.length?n.select(a[t-1]):n.select(a[t]):s>t&&s--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,i,n){n.addSlide(e,t),e.$on("$destroy",function(){n.removeSlide(e)}),e.$watch("active",function(t){t&&n.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e,t,i){return 1===t&&i>28?29===i&&(0===e%4&&0!==e%100||0===e%400):3===t||5===t||8===t||10===t?31>i:!0}this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(e){var n=[],a=e.split("");return angular.forEach(i,function(t,i){var s=e.indexOf(i);if(s>-1){e=e.split(""),a[s]="("+t.regex+")",e[s]="$";for(var r=s+1,o=s+i.length;o>r;r++)a[r]="",e[r]="$";e=e.join(""),n.push({index:s,apply:t.apply})}}),{regex:new RegExp("^"+a.join("")+"$"),map:t(n,"index")}},this.parse=function(t,i){if(!angular.isString(t))return t;i=e.DATETIME_FORMATS[i]||i,this.parsers[i]||(this.parsers[i]=this.createParser(i));var a=this.parsers[i],s=a.regex,r=a.map,o=t.match(s);if(o&&o.length){for(var c,l={year:1900,month:0,date:1,hours:0},d=1,u=o.length;u>d;d++){var p=r[d-1];p.apply&&p.apply.call(l,o[d])}return n(l.year,l.month,l.date)&&(c=new Date(l.year,l.month,l.date,l.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function i(e,i){return e.currentStyle?e.currentStyle[i]:t.getComputedStyle?t.getComputedStyle(e)[i]:e.style[i]}function n(e){return"static"===(i(e,"position")||"static")}var a=function(t){for(var i=e[0],a=t.offsetParent||i;a&&a!==i&&n(a);)a=a.offsetParent;return a||i};return{position:function(t){var i=this.offset(t),n={top:0,left:0},s=a(t[0]);s!=e[0]&&(n=this.offset(angular.element(s)),n.top+=s.clientTop-s.scrollTop,n.left+=s.clientLeft-s.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:i.top-n.top,left:i.left-n.left}},offset:function(i){var n=i[0].getBoundingClientRect();return{width:n.width||i.prop("offsetWidth"),height:n.height||i.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,i,n){var o,l,c,d,a=i.split("-"),s=a[0],r=a[1]||"center";o=n?this.offset(e):this.position(e),l=t.prop("offsetWidth"),c=t.prop("offsetHeight");var u={center:function(){return o.left+o.width/2-l/2},left:function(){return o.left},right:function(){return o.left+o.width}},p={center:function(){return o.top+o.height/2-c/2},top:function(){return o.top},bottom:function(){return o.top+o.height}};switch(s){case"right":d={top:p[r](),left:u[s]()};break;case"left":d={top:p[r](),left:o.left-l};break;case"bottom":d={top:p[s](),left:u[r]()};break;default:d={top:o.top-c,left:u[r]()}}return d}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,i,n,a,s,r,o){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(i,a){l[i]=angular.isDefined(t[i])?8>a?n(t[i])(e.$parent):e.$parent.$eval(t[i]):o[i]}),angular.forEach(["minDate","maxDate"],function(n){t[n]?e.$parent.$watch(i(t[n]),function(e){l[n]=e?new Date(e):null,l.refreshView()}):l[n]=o[n]?new Date(o[n]):null}),e.datepickerMode=e.datepickerMode||o.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:s.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var i=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:r(e,t),selected:i&&0===this.compare(e,i),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(i){return this.minDate&&0>this.compare(i,this.minDate)||this.maxDate&&this.compare(i,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:i,mode:e.datepickerMode})},this.split=function(e,t){for(var i=[];e.length>0;)i.push(e.splice(0,t));return i},e.select=function(t){if(e.datepickerMode===l.minMode){var i=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(i),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),i=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,i,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var d=function(){a(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",d),e.keydown=function(t){var i=e.keys[t.which];if(i&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===i||"space"===i){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),d()}else!t.ctrlKey||"up"!==i&&"down"!==i?(l.handleKeyDown(i,t),l.refreshView()):(e.toggleMode("up"===i?1:-1),d())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,i,n){var a=n[0],s=n[1];s&&a.init(s)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,i,n,a){function r(e,t){return 1!==t||0!==e%4||0===e%100&&0!==e%400?s[t]:29}function o(e,t){var i=new Array(t),n=new Date(e),a=0;for(n.setHours(12);t>a;)i[a++]=new Date(n),n.setDate(n.getDate()+1);return i}function l(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1}t.showWeeks=a.showWeeks,a.step={months:1},a.element=i;var s=[31,28,31,30,31,30,31,31,30,31,30,31];a._refreshView=function(){var i=a.activeDate.getFullYear(),n=a.activeDate.getMonth(),s=new Date(i,n,1),r=a.startingDay-s.getDay(),c=r>0?7-r:-r,d=new Date(s);c>0&&d.setDate(-c+1);for(var u=o(d,42),p=0;42>p;p++)u[p]=angular.extend(a.createDateObject(u[p],a.formatDay),{secondary:u[p].getMonth()!==n,uid:t.uniqueId+"-"+p});t.labels=new Array(7);for(var f=0;7>f;f++)t.labels[f]={abbr:e(u[f].date,a.formatDayHeader),full:e(u[f].date,"EEEE")};if(t.title=e(a.activeDate,a.formatDayTitle),t.rows=a.split(u,7),t.showWeeks){t.weekNumbers=[];for(var h=l(t.rows[0][0].date),m=t.rows.length;m>t.weekNumbers.push(h++););}},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},a.handleKeyDown=function(e){var i=a.activeDate.getDate();if("left"===e)i-=1;else if("up"===e)i-=7;else if("right"===e)i+=1;else if("down"===e)i+=7;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getMonth()+("pageup"===e?-1:1);a.activeDate.setMonth(n,1),i=Math.min(r(a.activeDate.getFullYear(),a.activeDate.getMonth()),i)}else"home"===e?i=1:"end"===e&&(i=r(a.activeDate.getFullYear(),a.activeDate.getMonth()));a.activeDate.setDate(i)},a.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,i,n,a){a.step={years:1},a.element=i,a._refreshView=function(){for(var i=new Array(12),n=a.activeDate.getFullYear(),s=0;12>s;s++)i[s]=angular.extend(a.createDateObject(new Date(n,s,1),a.formatMonth),{uid:t.uniqueId+"-"+s});t.title=e(a.activeDate,a.formatMonthTitle),t.rows=a.split(i,3)},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},a.handleKeyDown=function(e){var i=a.activeDate.getMonth();if("left"===e)i-=1;else if("up"===e)i-=3;else if("right"===e)i+=1;else if("down"===e)i+=3;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getFullYear()+("pageup"===e?-1:1);a.activeDate.setFullYear(n)}else"home"===e?i=0:"end"===e&&(i=11);a.activeDate.setMonth(i)},a.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,i,n){function s(e){return parseInt((e-1)/a,10)*a+1}var a=n.yearRange;n.step={years:a},n.element=t,n._refreshView=function(){for(var t=new Array(a),i=0,r=s(n.activeDate.getFullYear());a>i;i++)t[i]=angular.extend(n.createDateObject(new Date(r+i,0,1),n.formatYear),{uid:e.uniqueId+"-"+i});e.title=[t[0].label,t[a-1].label].join(" - "),e.rows=n.split(t,5)},n.compare=function(e,t){return e.getFullYear()-t.getFullYear()},n.handleKeyDown=function(e){var i=n.activeDate.getFullYear();"left"===e?i-=1:"up"===e?i-=5:"right"===e?i+=1:"down"===e?i+=5:"pageup"===e||"pagedown"===e?i+=("pageup"===e?-1:1)*n.step.years:"home"===e?i=s(n.activeDate.getFullYear()):"end"===e&&(i=s(n.activeDate.getFullYear())+a-1),n.activeDate.setFullYear(i)},n.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,i,n,a,s,r){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(o,l,c,d){function m(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function g(e){if(e){if(angular.isDate(e)&&!isNaN(e))return d.$setValidity("date",!0),e;if(angular.isString(e)){var t=s.parse(e,u)||new Date(e);return isNaN(t)?(d.$setValidity("date",!1),void 0):(d.$setValidity("date",!0),t)}return d.$setValidity("date",!1),void 0}return d.$setValidity("date",!0),null}var u,p=angular.isDefined(c.closeOnDateSelection)?o.$parent.$eval(c.closeOnDateSelection):r.closeOnDateSelection,f=angular.isDefined(c.datepickerAppendToBody)?o.$parent.$eval(c.datepickerAppendToBody):r.appendToBody;o.showButtonBar=angular.isDefined(c.showButtonBar)?o.$parent.$eval(c.showButtonBar):r.showButtonBar,o.getText=function(e){return o[e+"Text"]||r[e+"Text"]},c.$observe("datepickerPopup",function(e){u=e||r.datepickerPopup,d.$render()});var h=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");h.attr({"ng-model":"date","ng-change":"dateSelection()"});var _=angular.element(h.children()[0]);c.datepickerOptions&&angular.forEach(o.$parent.$eval(c.datepickerOptions),function(e,t){_.attr(m(t),e)}),angular.forEach(["minDate","maxDate"],function(e){c[e]&&(o.$parent.$watch(t(c[e]),function(t){o[e]=t}),_.attr(m(e),e))}),c.dateDisabled&&_.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.$parsers.unshift(g),o.dateSelection=function(e){angular.isDefined(e)&&(o.date=e),d.$setViewValue(o.date),d.$render(),p&&(o.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){o.$apply(function(){o.date=d.$modelValue})}),d.$render=function(){var e=d.$viewValue?a(d.$viewValue,u):"";l.val(e),o.date=g(d.$modelValue)};var v=function(e){o.isOpen&&e.target!==l[0]&&o.$apply(function(){o.isOpen=!1})},b=function(e){o.keydown(e)};l.bind("keydown",b),o.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),o.close()):40!==e.which||o.isOpen||(o.isOpen=!0)},o.$watch("isOpen",function(e){e?(o.$broadcast("datepicker.focus"),o.position=f?n.offset(l):n.position(l),o.position.top=o.position.top+l.prop("offsetHeight"),i.bind("click",v)):i.unbind("click",v)}),o.select=function(e){if("today"===e){var t=new Date;angular.isDate(d.$modelValue)?(e=new Date(d.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}o.dateSelection(e)},o.close=function(){o.isOpen=!1,l[0].focus()};var y=e(h)(o);f?i.find("body").append(y):l.after(y),o.$on("$destroy",function(){y.remove(),l.unbind("keydown",b),i.unbind("click",v)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(a){t||(e.bind("click",i),e.bind("keydown",n)),t&&t!==a&&(t.isOpen=!1),t=a},this.close=function(a){t===a&&(t=null,e.unbind("click",i),e.unbind("keydown",n))};var i=function(e){e&&e.isDefaultPrevented()||t.$apply(function(){t.isOpen=!1})},n=function(e){27===e.which&&(t.focusToggleElement(),i())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,i,n,a,s){var c,r=this,o=e.$new(),l=n.openClass,d=angular.noop,u=t.onToggle?i(t.onToggle):angular.noop;this.init=function(n){r.$element=n,t.isOpen&&(c=i(t.isOpen),d=c.assign,e.$watch(c,function(e){o.isOpen=!!e}))},this.toggle=function(e){return o.isOpen=arguments.length?!!e:!o.isOpen},this.isOpen=function(){return o.isOpen},o.focusToggleElement=function(){r.toggleElement&&r.toggleElement[0].focus()},o.$watch("isOpen",function(t,i){s[t?"addClass":"removeClass"](r.$element,l),t?(o.focusToggleElement(),a.open(o)):a.close(o),d(e,t),angular.isDefined(t)&&t!==i&&u(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){o.isOpen=!1}),e.$on("$destroy",function(){o.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(e,t,i,n){n.init(t)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(e,t,i,n){if(n){n.toggleElement=t;var a=function(a){a.preventDefault(),t.hasClass("disabled")||i.disabled||e.$apply(function(){n.toggle()})};t.bind("click",a),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(n.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",a)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,i){e.push({key:t,value:i})},get:function(t){for(var i=0;e.length>i;i++)if(t==e[i].key)return e[i]},keys:function(){for(var t=[],i=0;e.length>i;i++)t.push(e[i].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var i=-1,n=0;e.length>n;n++)if(t==e[n].key){i=n;break}return e.splice(i,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t){t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,n,a){n.addClass(a.windowClass||""),i.size=a.size,t(function(){i.animate=!0,n[0].focus()}),i.close=function(t){var i=e.getTop();i&&i.value.backdrop&&"static"!=i.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(i.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,i,n,a,s){function u(){for(var e=-1,t=c.keys(),i=0;t.length>i;i++)c.get(t[i]).value.backdrop&&(e=i);return e}function p(e){var t=i.find("body").eq(0),n=c.get(e).value;c.remove(e),h(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(r,c.length()>0),f()})}function f(){if(o&&-1==u()){var e=l;h(o,l,150,function(){e.$destroy(),e=null}),o=void 0,l=void 0}}function h(i,n,a,s){function l(){l.done||(l.done=!0,i.remove(),s&&s())}n.animate=!1;var r=e.transitionEndEventName;if(r){var o=t(l,a);i.bind(r,function(){t.cancel(o),l(),n.$apply()})}else t(l,0)}var o,l,r="modal-open",c=s.createNew(),d={};return a.$watch(u,function(e){l&&(l.index=e)}),i.bind("keydown",function(e){var t;27===e.which&&(t=c.top(),t&&t.value.keyboard&&(e.preventDefault(),a.$apply(function(){d.dismiss(t.key,"escape key press")})))}),d.open=function(e,t){c.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var s=i.find("body").eq(0),d=u();d>=0&&!o&&(l=a.$new(!0),l.index=d,o=n("<div modal-backdrop></div>")(l),s.append(o));var p=angular.element("<div modal-window></div>");p.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:c.length()-1,animate:"animate"}).html(t.content);var f=n(p)(t.scope);c.top().value.modalDomEl=f,s.append(f),s.addClass(r)},d.close=function(e,t){var i=c.get(e).value;i&&(i.deferred.resolve(t),p(e))},d.dismiss=function(e,t){var i=c.get(e).value;i&&(i.deferred.reject(t),p(e))},d.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},d.getTop=function(){return c.top()},d}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,i,n,a,s,r,o){function c(e){return e.template?n.when(e.template):a.get(e.templateUrl,{cache:s}).then(function(e){return e.data})}function d(e){var i=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&i.push(n.when(t.invoke(e)))}),i}var l={};return l.open=function(t){var a=n.defer(),s=n.defer(),l={result:a.promise,opened:s.promise,close:function(e){o.close(l,e)},dismiss:function(e){o.dismiss(l,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var u=n.all([c(t)].concat(d(t.resolve)));return u.then(function(e){var n=(t.scope||i).$new();n.$close=l.close,n.$dismiss=l.dismiss;var s,c={},d=1;t.controller&&(c.$scope=n,c.$modalInstance=l,angular.forEach(t.resolve,function(t,i){c[i]=e[d++]}),s=r(t.controller,c)),o.open(l,{scope:n,deferred:a,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){a.reject(e)}),u.then(function(){s.resolve(!0)},function(){s.reject(!1)}),l},l}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,i){var n=this,a={$setViewValue:angular.noop},s=t.numPages?i(t.numPages).assign:angular.noop;this.init=function(s,r){a=s,this.config=r,a.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(i(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=r.itemsPerPage},this.calculateTotalPages=function(){var t=1>this.itemsPerPage?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(a.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&e.totalPages>=t&&(a.$setViewValue(t),a.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){s(e.$parent,t),e.page>t?e.selectPage(t):a.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(i,n,a,s){function d(e,t,i){return{number:e,text:t,active:i}}function u(e,t){var i=[],n=1,a=t,s=angular.isDefined(l)&&t>l;s&&(c?(n=Math.max(e-Math.floor(l/2),1),a=n+l-1,a>t&&(a=t,n=a-l+1)):(n=(Math.ceil(e/l)-1)*l+1,a=Math.min(n+l-1,t)));for(var r=n;a>=r;r++){var o=d(r,r,r===e);i.push(o)}if(s&&!c){if(n>1){var u=d(n-1,"...",!1);i.unshift(u)}if(t>a){var p=d(a+1,"...",!1);i.push(p)}}return i}var r=s[0],o=s[1];if(o){var l=angular.isDefined(a.maxSize)?i.$parent.$eval(a.maxSize):t.maxSize,c=angular.isDefined(a.rotate)?i.$parent.$eval(a.rotate):t.rotate;i.boundaryLinks=angular.isDefined(a.boundaryLinks)?i.$parent.$eval(a.boundaryLinks):t.boundaryLinks,i.directionLinks=angular.isDefined(a.directionLinks)?i.$parent.$eval(a.directionLinks):t.directionLinks,r.init(o,t),a.maxSize&&i.$parent.$watch(e(a.maxSize),function(e){l=parseInt(e,10),r.render()});var p=r.render;r.render=function(){p(),i.page>0&&i.totalPages>=i.page&&(i.pages=u(i.page,i.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,i,n,a){var s=a[0],r=a[1];r&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,s.init(r,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(e){var t=/[A-Z]/g,i="-";return e.replace(t,function(e,t){return(t?i:"")+e.toLowerCase()})}var e={placement:"top",animation:!0,popupDelay:0},t={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(t,e)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(n,s,r,o,l,c,d){return function(n,u,p){function h(e){var i=e||f.trigger||p,n=t[i]||i;return{show:i,hide:n}}var f=angular.extend({},e,i),m=a(n),_=d.startSymbol(),g=d.endSymbol(),v="<div "+m+"-popup "+'title="'+_+"tt_title"+g+'" '+'content="'+_+"tt_content"+g+'" '+'placement="'+_+"tt_placement"+g+'" '+'animation="tt_animation" '+'is-open="tt_isOpen"'+">"+"</div>";return{restrict:"EA",scope:!0,compile:function(){var i=s(v);return function(e,t,a){function b(){e.tt_isOpen?w():y()}function y(){(!g||e.$eval(a[u+"Enable"]))&&(e.tt_popupDelay?p||(p=r(k,e.tt_popupDelay,!1),p.then(function(e){e()})):k()())}function w(){e.$apply(function(){j()})}function k(){return p=null,d&&(r.cancel(d),d=null),e.tt_content?(x(),s.css({top:0,left:0,display:"block"}),m?l.find("body").append(s):t.after(s),v(),e.tt_isOpen=!0,e.$digest(),v):angular.noop}function j(){e.tt_isOpen=!1,r.cancel(p),p=null,e.tt_animation?d||(d=r($,500)):$()}function x(){s&&$(),s=i(e,function(){}),e.$digest()}function $(){d=null,s&&(s.remove(),s=null)}var s,d,p,m=angular.isDefined(f.appendToBody)?f.appendToBody:!1,_=h(void 0),g=angular.isDefined(a[u+"Enable"]),v=function(){var i=c.positionElements(t,s,e.tt_placement,m);
i.top+="px",i.left+="px",s.css(i)};e.tt_isOpen=!1,a.$observe(n,function(t){e.tt_content=t,!t&&e.tt_isOpen&&j()}),a.$observe(u+"Title",function(t){e.tt_title=t}),a.$observe(u+"Placement",function(t){e.tt_placement=angular.isDefined(t)?t:f.placement}),a.$observe(u+"PopupDelay",function(t){var i=parseInt(t,10);e.tt_popupDelay=isNaN(i)?f.popupDelay:i});var C=function(){t.unbind(_.show,y),t.unbind(_.hide,w)};a.$observe(u+"Trigger",function(e){C(),_=h(e),_.show===_.hide?t.bind(_.show,b):(t.bind(_.show,y),t.bind(_.hide,w))});var S=e.$eval(a[u+"Animation"]);e.tt_animation=angular.isDefined(S)?!!S:f.animation,a.$observe(u+"AppendToBody",function(t){m=angular.isDefined(t)?o(t)(e):m}),m&&e.$on("$locationChangeSuccess",function(){e.tt_isOpen&&j()}),e.$on("$destroy",function(){r.cancel(d),r.cancel(p),C(),$()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,i){var n=this,a=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):i.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):i.max,this.addBar=function(t,i){a||i.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(i){t.percent=+(100*i/e.max).toFixed(2)}),t.$on("$destroy",function(){i=null,n.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,i,n){n.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,i,n){n.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,i){var n={$setViewValue:angular.noop};this.init=function(a){n=a,n.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):i.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):i.stateOff;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):i.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,i=e.length;i>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&e.range.length>=t&&(n.$setViewValue(t),n.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=n.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=n.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,i,n){var a=n[0],s=n[1];s&&a.init(s)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function TabsetCtrl(e){var t=this,i=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(i,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){i.push(e),1===i.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var n=i.indexOf(e);if(e.active&&i.length>1){var a=n==i.length-1?n-1:n+1;t.select(i[a])}i.splice(n,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,i){e.vertical=angular.isDefined(i.vertical)?e.$parent.$eval(i.vertical):!1,e.justified=angular.isDefined(i.justified)?e.$parent.$eval(i.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,i,n){return function(t,i,a,s){t.$watch("active",function(e){e&&s.select(t)}),t.disabled=!1,a.disabled&&t.$parent.$watch(e(a.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},s.addTab(t),t.$on("$destroy",function(){s.removeTab(t)}),t.$transcludeFn=n}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,i,n){var a=t.$eval(n.tabContentTransclude);a.$transcludeFn(a.$parent,function(t){angular.forEach(t,function(t){e(t)?a.headingElement=t:i.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,i,n,a,s){function u(){var t=parseInt(e.hours,10),i=e.showMeridian?t>0&&13>t:t>=0&&24>t;return i?(e.showMeridian&&(12===t&&(t=0),e.meridian===l[1]&&(t+=12)),t):void 0}function p(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function f(e){return angular.isDefined(e)&&2>e.toString().length?"0"+e:e}function h(e){m(),o.$setViewValue(new Date(r)),_(e)}function m(){o.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function _(t){var i=r.getHours(),n=r.getMinutes();e.showMeridian&&(i=0===i||12===i?12:i%12),e.hours="h"===t?i:f(i),e.minutes="m"===t?n:f(n),e.meridian=12>r.getHours()?l[0]:l[1]}function g(e){var t=new Date(r.getTime()+6e4*e);r.setHours(t.getHours(),t.getMinutes()),h()}var r=new Date,o={$setViewValue:angular.noop},l=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):s.meridians||a.DATETIME_FORMATS.AMPMS;this.init=function(i,n){o=i,o.$render=this.render;var a=n.eq(0),r=n.eq(1),l=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):s.mousewheel;l&&this.setupMousewheelEvents(a,r),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):s.readonlyInput,this.setupInputEvents(a,r)};var c=s.hourStep;t.hourStep&&e.$parent.$watch(i(t.hourStep),function(e){c=parseInt(e,10)});var d=s.minuteStep;t.minuteStep&&e.$parent.$watch(i(t.minuteStep),function(e){d=parseInt(e,10)}),e.showMeridian=s.showMeridian,t.showMeridian&&e.$parent.$watch(i(t.showMeridian),function(t){if(e.showMeridian=!!t,o.$error.time){var i=u(),n=p();angular.isDefined(i)&&angular.isDefined(n)&&(r.setHours(i),h())}else _()}),this.setupMousewheelEvents=function(t,i){var n=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),i.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,i){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void 0;var n=function(t,i){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(i)&&(e.invalidMinutes=i)};e.updateHours=function(){var e=u();angular.isDefined(e)?(r.setHours(e),h("h")):n(!0)},t.bind("blur",function(){!e.invalidHours&&10>e.hours&&e.$apply(function(){e.hours=f(e.hours)})}),e.updateMinutes=function(){var e=p();angular.isDefined(e)?(r.setMinutes(e),h("m")):n(void 0,!0)},i.bind("blur",function(){!e.invalidMinutes&&10>e.minutes&&e.$apply(function(){e.minutes=f(e.minutes)})})},this.render=function(){var e=o.$modelValue?new Date(o.$modelValue):null;isNaN(e)?(o.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(r=e),m(),_())},e.incrementHours=function(){g(60*c)},e.decrementHours=function(){g(60*-c)},e.incrementMinutes=function(){g(d)},e.decrementMinutes=function(){g(-d)},e.toggleMeridian=function(){g(720*(12>r.getHours()?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,i,n){var a=n[0],s=n[1];s&&a.init(s,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(i){var n=i.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+i+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,i,n,a,s,r){var o=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,u){var w,p=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,h=l.$eval(d.typeaheadEditable)!==!1,m=t(d.typeaheadLoading).assign||angular.noop,_=t(d.typeaheadOnSelect),g=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,v=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,b=t(d.ngModel).assign,y=r.parse(d.typeahead),k=l.$new();l.$on("$destroy",function(){k.$destroy()});var j="typeahead-"+k.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":j});var x=angular.element("<div typeahead-popup></div>");x.attr({id:j,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&x.attr("template-url",d.typeaheadTemplateUrl);var $=function(){k.matches=[],k.activeIdx=-1,c.attr("aria-expanded",!1)},C=function(e){return j+"-option-"+e};k.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",C(e))});var S=function(e){var t={$viewValue:e};m(l,!0),i.when(y.source(l,t)).then(function(i){var n=e===u.$viewValue;if(n&&w)if(i.length>0){k.activeIdx=0,k.matches.length=0;for(var a=0;i.length>a;a++)t[y.itemName]=i[a],k.matches.push({id:C(a),label:y.viewMapper(k,t),model:i[a]});k.query=e,k.position=v?s.offset(c):s.position(c),k.position.top=k.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else $();n&&m(l,!1)},function(){$(),m(l,!1)})};$(),k.query=void 0;var D;u.$parsers.unshift(function(e){return w=!0,e&&e.length>=p?f>0?(D&&n.cancel(D),D=n(function(){S(e)},f)):S(e):(m(l,!1),$()),h?e:e?(u.$setValidity("editable",!1),void 0):(u.$setValidity("editable",!0),e)}),u.$formatters.push(function(e){var t,i,n={};return g?(n.$model=e,g(l,n)):(n[y.itemName]=e,t=y.viewMapper(l,n),n[y.itemName]=void 0,i=y.viewMapper(l,n),t!==i?t:e)}),k.select=function(e){var i,a,t={};t[y.itemName]=a=k.matches[e].model,i=y.modelMapper(l,t),b(l,i),u.$setValidity("editable",!0),_(l,{$item:a,$model:i,$label:y.viewMapper(l,t)}),$(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==k.matches.length&&-1!==o.indexOf(e.which)&&(e.preventDefault(),40===e.which?(k.activeIdx=(k.activeIdx+1)%k.matches.length,k.$digest()):38===e.which?(k.activeIdx=(k.activeIdx?k.activeIdx:k.matches.length)-1,k.$digest()):13===e.which||9===e.which?k.$apply(function(){k.select(k.activeIdx)}):27===e.which&&(e.stopPropagation(),$(),k.$digest()))}),c.bind("blur",function(){w=!1});var E=function(e){c[0]!==e.target&&($(),k.$digest())};a.bind("click",E),l.$on("$destroy",function(){a.unbind("click",E)});var T=e(x)(k);v?a.find("body").append(T):c.after(T)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,i){e.templateUrl=i.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,i,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(a,s,r){var o=n(r.templateUrl)(a.$parent)||"template/typeahead/typeahead-match.html";e.get(o,{cache:t}).success(function(e){s.replaceWith(i(e.trim())(a))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,i){return i?(""+t).replace(new RegExp(e(i),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(e,t){t=t||{},angular.forEach(t,function(t,i){angular.isString(t)&&(t={replace:!0,template:t}),e.directive(i,function(){return t})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(t,i,n){var a=t.$eval(n.uiEvent);angular.forEach(a,function(n,a){var s=e(n);i.bind(a,function(e){var i=Array.prototype.slice.call(arguments);i=i.splice(1),s(t,{$event:e,$params:i}),t.$$phase||t.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(e,t){var i=e;if(angular.isString(i)&&void 0!==t)if(angular.isArray(t)||angular.isObject(t)||(t=[t]),angular.isArray(t)){var n=t.length,a=function(e,i){return i=parseInt(i,10),i>=0&&n>i?t[i]:e};i=i.replace(/\$([0-9]+)/g,a)}else angular.forEach(t,function(e,t){i=i.split(":"+t).join(e)});return i}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(e,t,i){return t||angular.isNumber(t)?(e=e.toString(),t=t.toString(),i?e.split(t).join('<span class="ui-match">'+t+"</span>"):e.replace(new RegExp(t,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(e,t,i,n){return{restrict:"ECA",terminal:!0,compile:function(a,s){var r=s.uiInclude||s.src,o=s.fragment||"",l=s.onload||"",c=s.autoscroll;
return function(a,s){function f(){var f=++d,h=a.$eval(r),m=a.$eval(o);h?e.get(h,{cache:t}).success(function(e){if(f===d){u&&u.$destroy(),u=a.$new();var t;t=m?angular.element("<div/>").html(e).find(m):angular.element("<div/>").html(e).contents(),s.html(t),n(t)(u),!angular.isDefined(c)||c&&!a.$eval(c)||i(),u.$emit("$includeContentLoaded"),a.$eval(l)}}).error(function(){f===d&&p()}):p()}var u,d=0,p=function(){u&&(u.$destroy(),u=null),s.html("")};a.$watch(o,f),a.$watch(r,f)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(e,t){return t.type&&"checkbox"===t.type.toLowerCase()?function(e,t,i){e.$watch(i.uiIndeterminate,function(e){t[0].indeterminate=!!e})}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function t(e,t){return e.replace(/[A-Z]/g,function(e){return t+e})}var i={humanize:function(i){return e(t(i," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+t(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(t){return t=t.substr(0,1).toLowerCase()+e(t.split("_").join(" ")).substr(1).split(" ").join("")}};return function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",i[t](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function uiJqInjectingFunction(e,t){return{restrict:"A",compile:function(i,n){if(!angular.isFunction(i[n.uiJq]))throw new Error('ui-jq: The "'+n.uiJq+'" function does not exist');var a=e&&e[n.uiJq];return function(e,i,n){function r(){t(function(){i[n.uiJq].apply(i,s)},0,!1)}var s=[];n.uiOptions?(s=e.$eval("["+n.uiOptions+"]"),angular.isObject(a)&&angular.isObject(s[0])&&(s[0]=angular.extend({},a,s[0]))):a&&(s=[a]),n.ngModel&&i.is("select,input,textarea")&&i.bind("change",function(){i.trigger("input")}),n.uiRefresh&&e.$watch(n.uiRefresh,function(){r()}),r()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function keypress(e){var t={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(n,a,s,r){var o,l=[];o=a.$eval(r["ui"+i(n)]),angular.forEach(o,function(t,i){var n,a;a=e(t),angular.forEach(i.split(" "),function(e){n={expression:a,keys:{}},angular.forEach(e.split("-"),function(e){n.keys[e]=!0}),l.push(n)})}),s.bind(n,function(e){var i=!(!e.metaKey||e.ctrlKey),s=!!e.altKey,r=!!e.ctrlKey,o=!!e.shiftKey,c=e.keyCode;"keypress"===n&&!o&&c>=97&&122>=c&&(c-=32),angular.forEach(l,function(n){var l=n.keys[t[c]]||n.keys[c.toString()],d=!!n.keys.meta,u=!!n.keys.alt,p=!!n.keys.ctrl,f=!!n.keys.shift;l&&d===i&&u===s&&p===r&&f===o&&a.$apply(function(){n.expression(a,{$event:e})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(t,i,n){e("keydown",t,i,n)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(t,i,n){e("keypress",t,i,n)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(t,i,n){e("keyup",t,i,n)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(e){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=e;return function(e,i,n,a){function w(e){return angular.isDefined(e)?(F(e),s?(S(),D(),!0):C()):C()}function k(e){angular.isDefined(e)&&(c=e,s&&L())}function j(e){return s?(p=z(e||""),h=T(p),a.$setValidity("mask",h),h&&p.length?M(p):void 0):e}function x(e){return s?(p=z(e||""),h=T(p),a.$viewValue=p.length?M(p):"",a.$setValidity("mask",h),""===p&&void 0!==a.$error.required&&a.$setValidity("required",!1),h?p:void 0):e}function C(){return s=!1,E(),angular.isDefined(m)?i.attr("placeholder",m):i.removeAttr("placeholder"),angular.isDefined(_)?i.attr("maxlength",_):i.removeAttr("maxlength"),i.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function S(){p=v=z(a.$modelValue||""),f=g=M(p),h=T(p);var e=h&&p.length?f:"";n.maxlength&&i.attr("maxlength",2*o[o.length-1]),i.attr("placeholder",c),i.val(e),a.$viewValue=e}function D(){r||(i.bind("blur",I),i.bind("mousedown mouseup",O),i.bind("input keyup click focus",L),r=!0)}function E(){r&&(i.unbind("blur",I),i.unbind("mousedown",O),i.unbind("mouseup",O),i.unbind("input",L),i.unbind("keyup",L),i.unbind("click",L),i.unbind("focus",L),r=!1)}function T(e){return e.length?e.length>=u:!0}function z(e){var t="",i=l.slice();return e=e.toString(),angular.forEach(d,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){i.length&&i[0].test(e)&&(t+=e,i.shift())}),t}function M(e){var t="",i=o.slice();return angular.forEach(c.split(""),function(n,a){e.length&&a===i[0]?(t+=e.charAt(0)||"_",e=e.substr(1),i.shift()):t+=n}),t}function A(e){var t=n.placeholder;return t!==void 0&&t[e]?t[e]:"_"}function P(){return c.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function F(e){var t=0;if(o=[],l=[],c="","string"==typeof e){u=0;var i=!1,n=e.split("");angular.forEach(n,function(e,n){$.maskDefinitions[e]?(o.push(t),c+=A(n),l.push($.maskDefinitions[e]),t++,i||u++):"?"===e?i=!0:(c+=e,t++)})}o.push(o.slice().pop()+1),d=P(),s=o.length>1?!0:!1}function I(){b=0,y=0,h&&0!==p.length||(f="",i.val(""),e.$apply(function(){a.$setViewValue("")}))}function O(e){"mousedown"===e.type?i.bind("mouseout",N):i.unbind("mouseout",N)}function N(){y=W(this),i.unbind("mouseout",N)}function L(t){t=t||{};var n=t.which,s=t.type;if(16!==n&&91!==n){var c,r=i.val(),l=g,d=z(r),u=v,p=!1,f=R(this)||0,h=b||0,m=f-h,_=o[0],w=o[d.length]||o.slice().shift(),k=y||0,j=W(this)>0,x=k>0,$=r.length>l.length||k&&r.length>l.length-k,C=l.length>r.length||k&&r.length===l.length-k,S=n>=37&&40>=n&&t.shiftKey,D=37===n,E=8===n||"keyup"!==s&&C&&-1===m,T=46===n||"keyup"!==s&&C&&0===m&&!x,A=(D||E||"click"===s)&&f>_;if(y=W(this),!S&&(!j||"click"!==s&&"keyup"!==s)){if("input"===s&&C&&!x&&d===u){for(;E&&f>_&&!H(f);)f--;for(;T&&w>f&&-1===o.indexOf(f);)f++;var P=o.indexOf(f);d=d.substring(0,P)+d.substring(P+1),p=!0}for(c=M(d),g=c,v=d,i.val(c),p&&e.$apply(function(){a.$setViewValue(d)}),$&&_>=f&&(f=_+1),A&&f--,f=f>w?w:_>f?_:f;!H(f)&&f>_&&w>f;)f+=A?-1:1;(A&&w>f||$&&!H(h))&&f++,b=f,q(this,f)}}}function H(e){return o.indexOf(e)>-1}function R(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",-e.value.length),t.text.length}return 0}function q(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}function W(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var o,l,c,d,u,p,f,h,g,v,b,y,s=!1,r=!1,m=n.placeholder,_=n.maxlength,$={};n.uiOptions?($=e.$eval("["+n.uiOptions+"]"),angular.isObject($[0])&&($=function(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]?angular.extend(t[i],e[i]):t[i]=angular.copy(e[i]));return t}(t,$[0]))):$=t,n.$observe("uiMask",w),n.$observe("placeholder",k),a.$formatters.push(j),a.$parsers.push(x),i.bind("mousedown mouseup",O),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var a=n>=0?n:Math.max(i-Math.abs(n),0);i>a;a++)if(a in t&&t[a]===e)return a;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var t=null;return void 0!==e&&(t=e),{require:"ngModel",link:function(e,i,n,a){var s;s=angular.element('<a class="ui-reset" />'),i.wrap('<span class="ui-resetwrap" />').after(s),s.bind("click",function(i){i.preventDefault(),e.$apply(function(){n.uiReset?a.$setViewValue(e.$eval(n.uiReset)):a.$setViewValue(t),a.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,t){return{restrict:"AC",scope:!0,compile:function(i,n){var a;if(n.uiRoute)a="uiRoute";else if(n.ngHref)a="ngHref";else{if(!n.href)throw new Error("uiRoute missing a route or href property on "+i[0]);a="href"}return function(i,n,s){function l(t){var n=t.indexOf("#");n>-1&&(t=t.substr(n+1)),o=function(){r(i,e.path().indexOf(t)>-1)},o()}function c(t){var n=t.indexOf("#");n>-1&&(t=t.substr(n+1)),o=function(){var n=new RegExp("^"+t+"$",["i"]);r(i,n.test(e.path()))},o()}var r=t(s.ngModel||s.routeModel||"$uiRoute").assign,o=angular.noop;switch(a){case"uiRoute":s.uiRoute?c(s.uiRoute):s.$observe("uiRoute",c);break;case"ngHref":s.ngHref?l(s.ngHref):s.$observe("ngHref",l);break;case"href":l(s.href)}i.$on("$routeChangeSuccess",function(){o()}),i.$on("$stateChangeSuccess",function(){o()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(e,t){return{registerFor:function(e){var i,n,a,s,r,o,l;return n=angular.element.prototype.css,e.prototype.css=function(e,t){var i,a;return a=this,i=a[0],i&&3!==i.nodeType&&8!==i.nodeType&&i.style?n.call(a,e,t):void 0},o=function(e){return e&&e.document&&e.location&&e.alert&&e.setInterval},l=function(e,t,i){var n,a,s,r,l;return n=e[0],l={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[t],a=l[0],r=l[1],s=l[2],o(n)?angular.isDefined(i)?n.scrollTo(e[s].call(e),i):r in n?n[r]:n.document.documentElement[a]:angular.isDefined(i)?n[a]=i:n[a]},t.getComputedStyle?(s=function(e){return t.getComputedStyle(e,null)},i=function(e,t){return parseFloat(t)}):(s=function(e){return e.currentStyle},i=function(e,t){var i,n,a,s,r,o,l;return i=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=new RegExp("^("+i+")(?!px)[a-z%]+$","i"),s.test(t)?(l=e.style,n=l.left,r=e.runtimeStyle,o=r&&r.left,r&&(r.left=l.left),l.left=t,a=l.pixelLeft,l.left=n,o&&(r.left=o),a):parseFloat(t)}),a=function(e,t){var n,a,r,l,c,d,u,p,f,h,m,_,g;return o(e)?(n=document.documentElement[{height:"clientHeight",width:"clientWidth"}[t]],{base:n,padding:0,border:0,margin:0}):(g={width:[e.offsetWidth,"Left","Right"],height:[e.offsetHeight,"Top","Bottom"]}[t],n=g[0],u=g[1],p=g[2],d=s(e),m=i(e,d["padding"+u])||0,_=i(e,d["padding"+p])||0,a=i(e,d["border"+u+"Width"])||0,r=i(e,d["border"+p+"Width"])||0,l=d["margin"+u],c=d["margin"+p],f=i(e,l)||0,h=i(e,c)||0,{base:n,padding:m+_,border:a+r,margin:f+h})},r=function(e,t,i){var n,r,o;return r=a(e,t),r.base>0?{base:r.base-r.padding-r.border,outer:r.base,outerfull:r.base+r.margin}[i]:(n=s(e),o=n[t],(0>o||null===o)&&(o=e.style[t]||0),o=parseFloat(o)||0,{base:o-r.padding-r.border,outer:o,outerfull:o+r.padding+r.border+r.margin}[i])},angular.forEach({before:function(e){var t,i,n,a,s,r,o;if(s=this,i=s[0],a=s.parent(),t=a.contents(),t[0]===i)return a.prepend(e);for(n=r=1,o=t.length-1;o>=1?o>=r:r>=o;n=o>=1?++r:--r)if(t[n]===i)return angular.element(t[n-1]).after(e),void 0;throw new Error("invalid DOM structure "+i.outerHTML)},height:function(e){var t;return t=this,angular.isDefined(e)?(angular.isNumber(e)&&(e+="px"),n.call(t,"height",e)):r(this[0],"height","base")},outerHeight:function(e){return r(this[0],"height",e?"outerfull":"outer")},offset:function(e){var t,i,n,a,s,r;return s=this,arguments.length?void 0===e?s:e:(t={top:0,left:0},a=s[0],(i=a&&a.ownerDocument)?(n=i.documentElement,a.getBoundingClientRect&&(t=a.getBoundingClientRect()),r=i.defaultView||i.parentWindow,{top:t.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:t.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):void 0)},scrollTop:function(e){return l(this,"top",e)},scrollLeft:function(e){return l(this,"left",e)}},function(t,i){return e.prototype[i]?void 0:e.prototype[i]=t})}}}]).run(["$log","$window","jqLiteExtras",function(e,t,i){return t.jQuery?void 0:i.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("ngScrollViewport",["$log",function(){return{controller:["$scope","$element",function(e,t){return t}]}}]).directive("ngScroll",["$log","$injector","$rootScope","$timeout",function(e,t,i,n){return{require:["?^ngScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(a,s,r){return function(s,o,l,c){var d,u,p,f,h,m,_,g,v,b,y,w,k,j,x,$,C,S,D,E,T,z,M,A,P,F,I,O,N,L,H,R,q,W,B,Y;if(A=l.ngScroll.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/),!A)throw new Error('Expected ngScroll in form of "item_ in _datasource_" but got "'+l.ngScroll+'"');if(z=A[1],w=A[2],E=function(e){return angular.isObject(e)&&e.get&&angular.isFunction(e.get)},y=s[w],!E(y)&&(y=t.get(w),!E(y)))throw new Error(w+" is not a valid datasource");return g=Math.max(3,+l.bufferSize||10),_=function(){return Y.height()*Math.max(.1,+l.padding||.1)},H=function(e){return e[0].scrollHeight||e[0].document.documentElement.scrollHeight},d=null,r(W=s.$new(),function(e){var t,i,n,s,r,o;if(s=e[0].localName,"dl"===s)throw new Error("ng-scroll directive does not support <"+e[0].localName+"> as a repeating tag: "+e[0].outerHTML);return"li"!==s&&"tr"!==s&&(s="div"),o=c[0]||angular.element(window),o.css({"overflow-y":"auto",display:"block"}),n=function(e){var t,i,n;switch(e){case"tr":return n=angular.element("<table><tr><td><div></div></td></tr></table>"),t=n.find("div"),i=n.find("tr"),i.paddingHeight=function(){return t.height.apply(t,arguments)},i;default:return i=angular.element("<"+e+"></"+e+">"),i.paddingHeight=i.height,i}},i=function(e,t,i){return t[{top:"before",bottom:"after"}[i]](e),{paddingHeight:function(){return e.paddingHeight.apply(e,arguments)},insert:function(t){return e[{top:"after",bottom:"before"}[i]](t)}}},r=i(n(s),a,"top"),t=i(n(s),a,"bottom"),W.$destroy(),d={viewport:o,topPadding:r.paddingHeight,bottomPadding:t.paddingHeight,append:t.insert,prepend:r.insert,bottomDataPos:function(){return H(o)-t.paddingHeight()},topDataPos:function(){return r.paddingHeight()}}}),Y=d.viewport,S=1,P=1,m=[],F=[],j=!1,f=!1,M=y.loading||function(){},T=!1,O=function(e,t){var i,n;for(i=n=e;t>=e?t>n:n>t;i=t>=e?++n:--n)m[i].scope.$destroy(),m[i].element.remove();return m.splice(e,t-e)},I=function(){return S=1,P=1,O(0,m.length),d.topPadding(0),d.bottomPadding(0),F=[],j=!1,f=!1,u(!1)},h=function(){return Y.scrollTop()+Y.height()},B=function(){return Y.scrollTop()},R=function(){return!j&&h()+_()>d.bottomDataPos()},v=function(){var t,i,n,a,s,r;for(t=0,a=0,i=s=r=m.length-1;(0>=r?0>=s:s>=0)&&(n=m[i].element.outerHeight(!0),d.bottomDataPos()-t-n>h()+_());i=0>=r?++s:--s)t+=n,a++,j=!1;return a>0?(d.bottomPadding(d.bottomPadding()+t),O(m.length-a,m.length),P-=a,e.log("clipped off bottom "+a+" bottom padding "+d.bottomPadding())):void 0},q=function(){return!f&&d.topDataPos()>B()-_()},b=function(){var t,i,n,a,s,r;for(a=0,n=0,s=0,r=m.length;r>s&&(t=m[s],i=t.element.outerHeight(!0),B()-_()>d.topDataPos()+a+i);s++)a+=i,n++,f=!1;return n>0?(d.topPadding(d.topPadding()+a),O(0,n),S+=n,e.log("clipped off top "+n+" top padding "+d.topPadding())):void 0},k=function(e,t){return T||(T=!0,M(!0)),1===F.push(e)?$(t):void 0},D=function(e,t){var i,n,a;return i=s.$new(),i[z]=t,n=e>S,i.$index=e,n&&i.$index--,a={scope:i},r(i,function(t){return a.element=t,n?e===P?(d.append(t),m.push(a)):(m[e-S].element.after(t),m.splice(e-S+1,0,a)):(d.prepend(t),m.unshift(a))}),{appended:n,wrapper:a}},p=function(e,t){var i;return e?d.bottomPadding(Math.max(0,d.bottomPadding()-t.element.outerHeight(!0))):(i=d.topPadding()-t.element.outerHeight(!0),i>=0?d.topPadding(i):Y.scrollTop(Y.scrollTop()+t.element.outerHeight(!0)))},u=function(t,i,a){var s;return s=function(){return e.log("top {actual="+d.topDataPos()+" visible from="+B()+" bottom {visible through="+h()+" actual="+d.bottomDataPos()+"}"),R()?k(!0,t):q()&&k(!1,t),a?a():void 0},i?n(function(){var e,t,n;for(t=0,n=i.length;n>t;t++)e=i[t],p(e.appended,e.wrapper);return s()}):s()},C=function(e,t){return u(e,t,function(){return F.shift(),0===F.length?(T=!1,M(!1)):$(e)})},$=function(t){var i;return i=F[0],i?m.length&&!R()?C(t):y.get(P,g,function(i){var n,a,s,r;if(a=[],0===i.length)j=!0,d.bottomPadding(0),e.log("appended: requested "+g+" records starting from "+P+" recieved: eof");else{for(b(),s=0,r=i.length;r>s;s++)n=i[s],a.push(D(++P,n));e.log("appended: requested "+g+" received "+i.length+" buffer size "+m.length+" first "+S+" next "+P)}return C(t,a)}):m.length&&!q()?C(t):y.get(S-g,g,function(i){var n,a,s,r;if(a=[],0===i.length)f=!0,d.topPadding(0),e.log("prepended: requested "+g+" records starting from "+(S-g)+" recieved: bof");else{for(v(),n=s=r=i.length-1;0>=r?0>=s:s>=0;n=0>=r?++s:--s)a.unshift(D(--S,i[n]));e.log("prepended: requested "+g+" received "+i.length+" buffer size "+m.length+" first "+S+" next "+P)}return C(t,a)})},N=function(){return i.$$phase||T?void 0:(u(!1),s.$apply())},Y.bind("resize",N),L=function(){return i.$$phase||T?void 0:(u(!0),s.$apply())},Y.bind("scroll",L),s.$watch(y.revision,function(){return I()}),x=y.scope?y.scope.$new():s.$new(),s.$on("$destroy",function(){return x.$destroy(),Y.unbind("resize",N),Y.unbind("scroll",L)}),x.$on("update.items",function(e,t,i){var n,a,s,r,o;if(angular.isFunction(t))for(a=function(e){return t(e.scope)},s=0,r=m.length;r>s;s++)n=m[s],a(n);else(o=t-S-1)>=0&&m.length>o&&(m[t-S-1].scope[z]=i);return null}),x.$on("delete.items",function(e,t){var i,n,a,s,r,o,l,c,d,p,f,h;if(angular.isFunction(t)){for(a=[],o=0,d=m.length;d>o;o++)n=m[o],a.unshift(n);for(r=function(e){return t(e.scope)?(O(a.length-1-i,a.length-i),P--):void 0},i=l=0,p=a.length;p>l;i=++l)s=a[i],r(s)}else(h=t-S-1)>=0&&m.length>h&&(O(t-S-1,t-S),P--);for(i=c=0,f=m.length;f>c;i=++c)n=m[i],n.scope.$index=S+i;return u(!1)}),x.$on("insert.item",function(e,t,i){var n,a,s,r,o,l,c,d,p,f,h,_;if(a=[],angular.isFunction(t)){for(s=[],l=0,p=m.length;p>l;l++)i=m[l],s.unshift(i);for(o=function(e){var s,r,o,l,c;if(r=t(e.scope)){if(D=function(e,t){return D(e,t),P++},angular.isArray(r)){for(c=[],s=o=0,l=r.length;l>o;s=++o)i=r[s],c.push(a.push(D(n+s,i)));return c}return a.push(D(n,r))}},n=c=0,f=s.length;f>c;n=++c)r=s[n],o(r)}else(_=t-S-1)>=0&&m.length>_&&(a.push(D(t,i)),P++);for(n=d=0,h=m.length;h>d;n=++d)i=m[n],i.scope.$index=S+n;return u(!1,a)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){return{require:"^?uiScrollfixTarget",link:function(t,i,n,a){function o(){var t;if(angular.isDefined(e.pageYOffset))t=e.pageYOffset;else{var a=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;t=a.scrollTop}!i.hasClass("ui-scrollfix")&&t>n.uiScrollfix?i.addClass("ui-scrollfix"):i.hasClass("ui-scrollfix")&&n.uiScrollfix>t&&i.removeClass("ui-scrollfix")}var s=i[0].offsetTop,r=a&&a.$element||angular.element(e);n.uiScrollfix?"string"==typeof n.uiScrollfix&&("-"===n.uiScrollfix.charAt(0)?n.uiScrollfix=s-parseFloat(n.uiScrollfix.substr(1)):"+"===n.uiScrollfix.charAt(0)&&(n.uiScrollfix=s+parseFloat(n.uiScrollfix.substr(1)))):n.uiScrollfix=s,r.on("scroll",o),t.$on("$destroy",function(){r.off("scroll",o)})}}}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function(e){this.$element=e}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,t,i){e.$watch(i.uiShow,function(e){e?t.addClass("ui-show"):t.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,t,i){e.$watch(i.uiHide,function(e){e?t.addClass("ui-hide"):t.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,t,i){e.$watch(i.uiToggle,function(e){e?t.removeClass("ui-hide").addClass("ui-show"):t.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(e){return function(t,i){if(i===!1)return t;if((i||angular.isUndefined(i))&&angular.isArray(t)){var n=[],a=angular.isString(i)?e(i):function(e){return e},s=function(e){return angular.isObject(e)?a(e):e};angular.forEach(t,function(e){for(var t=!1,i=0;n.length>i;i++)if(angular.equals(s(n[i]),s(e))){t=!0;break}t||n.push(e)}),t=n}return t}}]),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){function o(t){return angular.isString(t)?(e.$watch(t,function(){angular.forEach(s,function(e){e(n.$modelValue)})}),void 0):angular.isArray(t)?(angular.forEach(t,function(t){e.$watch(t,function(){angular.forEach(s,function(e){e(n.$modelValue)})})}),void 0):(angular.isObject(t)&&angular.forEach(t,function(t,i){angular.isString(t)&&e.$watch(t,function(){s[i](n.$modelValue)}),angular.isArray(t)&&angular.forEach(t,function(t){e.$watch(t,function(){s[i](n.$modelValue)})})}),void 0)}var a,s={},r=e.$eval(i.uiValidate);r&&(angular.isString(r)&&(r={validator:r}),angular.forEach(r,function(t,i){a=function(a){var s=e.$eval(t,{$value:a});return angular.isObject(s)&&angular.isFunction(s.then)?(s.then(function(){n.$setValidity(i,!0)},function(){n.$setValidity(i,!1)}),a):s?(n.$setValidity(i,!0),a):(n.$setValidity(i,!1),a)},s[i]=a,n.$formatters.push(a),n.$parsers.push(a)}),i.uiValidateWatch&&o(e.$eval(i.uiValidateWatch)))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,t,i){return{require:"?ngModel",link:function(n,a,s,r){function l(e,t){return t&&"function"==typeof t?function(i,n){e(i,n),t(i,n)}:e}function c(e,t){var i=e.sortable("option","helper");return"clone"===i||"function"==typeof i&&t.item.sortable.isCustomHelperUsed()}var o,d={},u={receive:null,remove:null,start:null,stop:null,update:null},p={helper:null};return angular.extend(d,e,n.$eval(s.uiSortable)),angular.element.fn&&angular.element.fn.jquery?(r?(n.$watch(s.ngModel+".length",function(){t(function(){a.data("ui-sortable")&&a.sortable("refresh")})}),u.start=function(e,t){t.item.sortable={index:t.item.index(),cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed}},u.activate=function(){o=a.contents();var e=a.sortable("option","placeholder");if(e&&e.element&&"function"==typeof e.element){var t=e.element();t=angular.element(t);var i=a.find('[class="'+t.attr("class")+'"]');o=o.not(i)}},u.update=function(e,t){t.item.sortable.received||(t.item.sortable.dropindex=t.item.index(),t.item.sortable.droptarget=t.item.parent(),a.sortable("cancel")),c(a,t)&&!t.item.sortable.received&&(o=o.not(o.last())),o.appendTo(a),t.item.sortable.received&&(o=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&n.$apply(function(){r.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},u.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?n.$apply(function(){r.$modelValue.splice(t.item.sortable.dropindex,0,r.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||c(a,t)||o.appendTo(a),o=null},u.receive=function(e,t){t.item.sortable.received=!0},u.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||n.$apply(function(){t.item.sortable.moved=r.$modelValue.splice(t.item.sortable.index,1)[0]})},p.helper=function(e){return e&&"function"==typeof e?function(t,i){var n=e(t,i);return i.sortable._isCustomHelperUsed=i!==n,n}:e},n.$watch(s.uiSortable,function(e){a.data("ui-sortable")&&angular.forEach(e,function(e,t){u[t]?("stop"===t&&(e=l(e,function(){n.$apply()})),e=l(u[t],e)):p[t]&&(e=p[t](e)),a.sortable("option",t,e)})},!0),angular.forEach(u,function(e,t){d[t]=l(e,d[t])})):i.info("ui.sortable: ngModel not provided!",a),a.sortable(d),void 0):(i.error("ui.sortable: jQuery should be included before AngularJS!"),void 0)}}}]),function(){"use strict";angular.module("sf.treeRepeat",[])}(),function(){"use strict";function t(e){var t=e.match(/^\s*([\$\w]+)\s+in\s+([\S\s]*)\s+of\s+([\S\s]*)$/);if(!t)throw new Error("Expected sfTreepeat in form of '_item_ in _collection_ of _root_' but got '"+e+"'.");return{value:t[1],collection:t[2],root:t[3]}}var e=angular.module("sf.treeRepeat");e.directive("sfTreepeat",["$log",function(){return{restrict:"A",scope:!0,controller:["$scope","$attrs",function(e,i){var n=this.ident=t(i.sfTreepeat);e.$watch(this.ident.root,function(t){e[n.value]=t})}],compile:function(e){var t=e.html();return{pre:function(e,i,n,a){a.template=t}}}}}]),e.directive("sfTreecurse",["$compile",function(e){return{require:"^sfTreepeat",link:function(t,i,n,a){var s=["<",i.context.tagName,' ng-repeat="',a.ident.value," in ",a.ident.value,".",a.ident.collection,'">',a.template,"</",i.context.tagName,">"],r=angular.element(s.join(""));i.replaceWith(r),e(r)(t)}}}])}(),function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var i={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate","$injector","$sce",function(i,n,a,s,r,o){var l=r.has("$sanitize"),c=function(t,i,n){var a="show"===i?"":"none",s="hide"===i?"":"none";t.css("display",e(n)?a:s)},d=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var i=[];angular.forEach(t,function(e,t){e&&i.push(t)}),t=i}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},u={watcherRemover:void 0,binders:[],group:a.boName,element:n,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=i.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.runBinders())},!0)},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var i=this.binders.shift();if(!this.group||this.group==i.group){var n=i.scope.$eval(i.interpolate?s(i.value):i.value);switch(i.attr){case"boIf":e(n)&&i.transclude(i.scope.$new(),function(e){var t=i.element.parent(),n=i.element&&i.element[i.element.length-1],a=t&&t[0]||n&&n.parentNode,s=n&&n.nextSibling||null;angular.forEach(e,function(e){a.insertBefore(e,s)})});break;case"boSwitch":var a,r=i.controller[0];(a=r.cases["!"+n]||r.cases["?"])&&(i.scope.$eval(i.attrs.change),angular.forEach(a,function(e){e.transclude(i.scope.$new(),function(t){var i=e.element.parent(),n=e.element&&e.element[e.element.length-1],a=i&&i[0]||n&&n.parentNode,s=n&&n.nextSibling||null;angular.forEach(t,function(e){a.insertBefore(e,s)})})}));break;case"boSwitchWhen":var u=i.controller[0];u.cases["!"+i.attrs.boSwitchWhen]=u.cases["!"+i.attrs.boSwitchWhen]||[],u.cases["!"+i.attrs.boSwitchWhen].push({transclude:i.transclude,element:i.element});break;case"boSwitchDefault":var u=i.controller[0];u.cases["?"]=u.cases["?"]||[],u.cases["?"].push({transclude:i.transclude,element:i.element});break;case"hide":case"show":c(i.element,i.attr,n);break;case"class":d(i.element,n);break;case"text":i.element.text(n);break;case"html":i.element.html(l?o.getTrustedHtml(n):n);break;case"style":i.element.css(n);break;case"src":i.element.attr(i.attr,n),t&&i.element.prop("src",n);break;case"attr":angular.forEach(i.attrs,function(e,t){var n,a;t.match(/^boAttr./)&&i.attrs[t]&&(n=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=i.scope.$eval(i.attrs[t]),i.element.attr(n,a))});break;case"href":case"alt":case"title":case"id":case"value":i.element.attr(i.attr,n)}}}this.ran=!0}};return u}],link:function(e,t,i,n){var a=i.bindonce?e.$eval(i.bindonce):!0;void 0!==a?a.then&&"function"==typeof a.then?a.then(function(){n.runBinders()}):n.runBinders():(n.setupWatcher(i.bindonce),t.bind("$destroy",n.removeWatcher))}};return i}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var i=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||i,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,i,n){return function(e,i,a,s){var r=s[0],o=a.boParent;if(o&&r.group!==o){var l=r.element.parent();r=void 0;for(var c;9!==l[0].nodeType&&l.length;){if((c=l.data("$bindonceController"))&&c.group===o){r=c;break}l=l.parent()}if(!r)throw new Error("No bindonce controller: "+o)}r.addBinder({element:i,attr:t.attribute||t.directiveName,attrs:a,value:a[t.directiveName],interpolate:t.interpolate,group:o,transclude:n,controller:s.slice(1),scope:e})}}};return e})})}(),angular.module("wt.directive.tpls",["/ycjs/tpl/404.html","/ycjs/tpl/account/account_apps.html","/ycjs/tpl/account/account_level.html","/ycjs/tpl/account/account_message.html","/ycjs/tpl/account/account_projects.html","/ycjs/tpl/account/account_security.html","/ycjs/tpl/account/account_settings.html","/ycjs/tpl/account/account_tabs.html","/ycjs/tpl/account/account_teams.html","/ycjs/tpl/account/account_trophies.html","/ycjs/tpl/account/account_twofactor.html","/ycjs/tpl/account/pop_decommissioning_confirm.html","/ycjs/tpl/activity/activity_feed_template.html","/ycjs/tpl/activity/activity_filter.html","/ycjs/tpl/activity/activity_list.html","/ycjs/tpl/activity/pop_filter_activity.html","/ycjs/tpl/activity/project_activities.html","/ycjs/tpl/browse/browse_files.html","/ycjs/tpl/browse/browse_pages.html","/ycjs/tpl/browse/browse_posts.html","/ycjs/tpl/browse/browse_tasks.html","/ycjs/tpl/browse/explore_top_tab.html","/ycjs/tpl/common/comment_list.html","/ycjs/tpl/common/left_menu.html","/ycjs/tpl/common/pay_dialog.html","/ycjs/tpl/common/pop_add_image.html","/ycjs/tpl/common/pop_add_image2.html","/ycjs/tpl/common/pop_add_link.html","/ycjs/tpl/common/pop_add_link_2.html","/ycjs/tpl/common/pop_comment_delete.html","/ycjs/tpl/common/pop_comment_metion.html","/ycjs/tpl/common/pop_datepicker.html","/ycjs/tpl/common/pop_delete_confirm.html","/ycjs/tpl/common/pop_emojis.html","/ycjs/tpl/common/pop_new_feature.html","/ycjs/tpl/common/pop_share_entity.html","/ycjs/tpl/common/shortcutkey_dialog.html","/ycjs/tpl/common/watch_filter.html","/ycjs/tpl/dashboard/broadcast_widget.html","/ycjs/tpl/dashboard/calendar.html","/ycjs/tpl/dashboard/calendar_subscribe.html","/ycjs/tpl/dashboard/dashboard.html","/ycjs/tpl/dashboard/inbox.html","/ycjs/tpl/dashboard/pop_dashboard_mailhelp.html","/ycjs/tpl/dashboard/projects.html","/ycjs/tpl/dashboard/projects_archive.html","/ycjs/tpl/dashboard/projects_fav.html","/ycjs/tpl/dashboard/search_result.html","/ycjs/tpl/directive/activity.html","/ycjs/tpl/directive/add_pop_attachment_from_file.html","/ycjs/tpl/directive/attachment.html","/ycjs/tpl/directive/avatar.html","/ycjs/tpl/directive/avatar_pop.html","/ycjs/tpl/directive/badges.html","/ycjs/tpl/directive/confirm_password.html","/ycjs/tpl/directive/datepicker.html","/ycjs/tpl/directive/editor.html","/ycjs/tpl/directive/entity_item_deny.html","/ycjs/tpl/directive/feed.html","/ycjs/tpl/directive/file_item.html","/ycjs/tpl/directive/item_comment_activity.html","/ycjs/tpl/directive/master_new.html","/ycjs/tpl/directive/new_comment.html","/ycjs/tpl/directive/notice.html","/ycjs/tpl/directive/page_detail.html","/ycjs/tpl/directive/page_item.html","/ycjs/tpl/directive/pop_datepicker.html","/ycjs/tpl/directive/pop_member.html","/ycjs/tpl/directive/post_item.html","/ycjs/tpl/directive/project_grid_item.html","/ycjs/tpl/directive/project_visibility_options.html","/ycjs/tpl/directive/set_project_logo.html","/ycjs/tpl/directive/task.html","/ycjs/tpl/directive/task.html.bak","/ycjs/tpl/directive/task_composer.html","/ycjs/tpl/directive/team_visibility_options.html","/ycjs/tpl/directive/toggle_members.html","/ycjs/tpl/directive/widget-add-team-member-by-link.html","/ycjs/tpl/directive/wt-breadcrumb.html","/ycjs/tpl/directive/wt-folder-tree.html","/ycjs/tpl/directive/wt_new_editor.html","/ycjs/tpl/directive/zippy.html","/ycjs/tpl/entity/event.html","/ycjs/tpl/entity/file.html","/ycjs/tpl/entity/mail.html","/ycjs/tpl/entity/page.html","/ycjs/tpl/entity/post.html","/ycjs/tpl/entity/task.html","/ycjs/tpl/header/header.html","/ycjs/tpl/header/header_menu.html","/ycjs/tpl/header/header_search.html","/ycjs/tpl/header/pop_global_fileupload.html","/ycjs/tpl/header/pop_new_menu.html","/ycjs/tpl/header/pop_search.html","/ycjs/tpl/mail/pop_convert_to_post.html","/ycjs/tpl/project/pop_project_info.html","/ycjs/tpl/project/prj_not_found.html","/ycjs/tpl/project/prj_title_panel.html","/ycjs/tpl/project/chat/project_chats.html","/ycjs/tpl/project/event/pop_add_event.html","/ycjs/tpl/project/event/pop_delete_event.html","/ycjs/tpl/project/event/pop_event_more_menu.html","/ycjs/tpl/project/event/project_events.html","/ycjs/tpl/project/file/pop_add_folder.html","/ycjs/tpl/project/file/pop_attachment_menu.html","/ycjs/tpl/project/file/pop_delete_file.html","/ycjs/tpl/project/file/pop_file_menu.html","/ycjs/tpl/project/file/pop_file_more_menu.html","/ycjs/tpl/project/file/pop_folder_menu.html","/ycjs/tpl/project/file/pop_move_file.html","/ycjs/tpl/project/file/pop_show_versions.html","/ycjs/tpl/project/file/pop_watch_file.html","/ycjs/tpl/project/file/project_files.html","/ycjs/tpl/project/graph/project_graphs.html","/ycjs/tpl/project/member/pop_add_member_select_role.html","/ycjs/tpl/project/member/pop_add_prj_member.html","/ycjs/tpl/project/member/pop_user_menu.html","/ycjs/tpl/project/page/add_or_edit_page.html","/ycjs/tpl/project/page/page.html","/ycjs/tpl/project/page/pop_delete_page.html","/ycjs/tpl/project/page/pop_page_action.html","/ycjs/tpl/project/page/pop_pages_more_menu.html","/ycjs/tpl/project/page/pop_parents_page.html","/ycjs/tpl/project/page/project_pages.html","/ycjs/tpl/project/page/version_diff.html","/ycjs/tpl/project/post/add_or_edit_post.html","/ycjs/tpl/project/post/pop_delete_post.html","/ycjs/tpl/project/post/pop_post_action.html","/ycjs/tpl/project/post/pop_posts_more_menu.html","/ycjs/tpl/project/post/project_posts.html","/ycjs/tpl/project/sidebar/add_member.html","/ycjs/tpl/project/sidebar/create_by_mail.html","/ycjs/tpl/project/sidebar/export_data.html","/ycjs/tpl/project/sidebar/filter_tasks.html","/ycjs/tpl/project/sidebar/project_copy.html","/ycjs/tpl/project/sidebar/project_setting.html","/ycjs/tpl/project/sidebar/project_setting_activate.html","/ycjs/tpl/project/sidebar/project_setting_archive.html","/ycjs/tpl/project/sidebar/project_setting_baseinfo.html","/ycjs/tpl/project/sidebar/project_setting_del.html","/ycjs/tpl/project/sidebar/project_setting_identify.html","/ycjs/tpl/project/sidebar/project_setting_nav.html","/ycjs/tpl/project/sidebar/project_setting_nav_plugin.html","/ycjs/tpl/project/sidebar/project_setting_notify.html","/ycjs/tpl/project/sidebar/project_setting_preference.html","/ycjs/tpl/project/sidebar/project_setting_quit.html","/ycjs/tpl/project/sidebar/project_setting_timingtask_list.html","/ycjs/tpl/project/sidebar/project_setting_transfer.html","/ycjs/tpl/project/sidebar/project_setting_webhook_add_edit.html","/ycjs/tpl/project/sidebar/project_setting_webhook_list.html","/ycjs/tpl/project/sidebar/setting_label.html","/ycjs/tpl/project/sidebar/sidebar.html","/ycjs/tpl/project/task/pop_add_entry.html","/ycjs/tpl/project/task/pop_add_task.html","/ycjs/tpl/project/task/pop_add_task_entry.html","/ycjs/tpl/project/task/pop_archive_entry_menu.html","/ycjs/tpl/project/task/pop_assign_label.html","/ycjs/tpl/project/task/pop_copy_task.html","/ycjs/tpl/project/task/pop_delete_task.html","/ycjs/tpl/project/task/pop_entry_menu.html","/ycjs/tpl/project/task/pop_mod_set_labels.html","/ycjs/tpl/project/task/pop_move_task.html","/ycjs/tpl/project/task/pop_task_menu.html","/ycjs/tpl/project/task/pop_task_timingtask.html","/ycjs/tpl/project/task/pop_unarchive_task.html","/ycjs/tpl/project/task/project_archive_tasks.html","/ycjs/tpl/project/task/project_tasks.html","/ycjs/tpl/project/trash/pop_empty_trash.html","/ycjs/tpl/project/trash/pop_trash_menu.html","/ycjs/tpl/project/trash/project_trash.html","/ycjs/tpl/team/free_apply.html","/ycjs/tpl/team/pop_member_menu.html","/ycjs/tpl/team/pop_team_list.html","/ycjs/tpl/team/pop_transfer_team.html","/ycjs/tpl/team/team.html","/ycjs/tpl/team/team_admin_basic.html","/ycjs/tpl/team/team_admin_billing.html","/ycjs/tpl/team/team_admin_billing_details.html","/ycjs/tpl/team/team_admin_change_quota.html","/ycjs/tpl/team/team_admin_consultant.html","/ycjs/tpl/team/team_admin_degrade.html","/ycjs/tpl/team/team_admin_export.html","/ycjs/tpl/team/team_admin_left_nav.html","/ycjs/tpl/team/team_admin_members.html","/ycjs/tpl/team/team_admin_pay_coupon.html","/ycjs/tpl/team/team_admin_pay_online.html","/ycjs/tpl/team/team_admin_payment.html","/ycjs/tpl/team/team_admin_projects.html","/ycjs/tpl/team/team_admin_security.html","/ycjs/tpl/team/team_admin_sidebar.html","/ycjs/tpl/team/team_admin_summary.html","/ycjs/tpl/team/team_admin_tabs.html","/ycjs/tpl/team/team_admin_task_stats_widget.html","/ycjs/tpl/team/team_admin_top_tab.html","/ycjs/tpl/team/team_admin_upgrade.html","/ycjs/tpl/team/team_mask_panel.html","/ycjs/tpl/team/team_member_invite.html","/ycjs/tpl/team/team_member_list_widget.html","/ycjs/tpl/team/team_not_found.html","/ycjs/tpl/team/team_projects.html","/ycjs/tpl/team/team_setting.html","/ycjs/tpl/team/team_tasks.html","/ycjs/tpl/team/team_title.html","/ycjs/tpl/user/help.html","/ycjs/tpl/user/pop_user_setting.html","/ycjs/tpl/user/share.html","/ycjs/tpl/user/user_profile.html"]),angular.module("/ycjs/tpl/404.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/404.html",'<div id="main" class="row"> <div class="row"> <div class="col-xs-6 mt_180" style="margin-left: 25%"> <div class="alert alert-danger"> <strong>警告!</strong> 没有找到。很抱歉！页面已丢失。 <br/> <p ng-hide="global.is_login">该页可能是私有页。请登录，并再次尝试访问。 <a class="js-real-link" href="/signin">登录</a>. <br/></p> </div> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/account/account_apps.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_apps.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container no_sidebar height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" class="table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>应用名称</th> <th>授权时间</th> <th>过期时间</th> <th>设置</th> </tr> </thead> <tbody> <tr data-ng-repeat="app in account_apps"> <td>{{app.client_id | GetClientName}} <span class="edition ng-binding edition-free" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> 官方 </span> </td> <td> {{app.create_date | timeFullFormatZHCN}} </td> <td> 永不过期 </td> <td> <a href="javascript:;" class="btn" data-placement="bottom" data-ng-click="js_pop_decommissioning($event,app)">解除授权</a> </td> </tr> <tr> <td colspan="4" data-ng-show="account_apps.length == 0"> 没有授权应用 </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_level.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_level.html",'<dl class="frame" data-minheight="160"> <dt> <span class="title">基本设置</span> <ul class="tabs"> <li> <a ng-class="{\'active\':current_tab == \'basic\'}" href="javascript:;" ng-click="change_tab(\'basic\')">修改个人资料</a> </li> <li> <a ng-class="{\'active\':current_tab == \'avatar\'}" href="javascript:;" ng-click="change_tab(\'avatar\')">修改头像</a> </li> <li> <a ng-class="{\'active\':current_tab == \'email\'}" href="javascript:;" ng-click="change_tab(\'email\')">修改邮箱</a> </li> </ul> </dt> <dd> </dd> </dl>')}]),angular.module("/ycjs/tpl/account/account_message.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_message.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" > <div class="sub-section"> <h5>邮件通知</h5> <span>当有新任务分配或者有新的话题要求你关注时，会发送邮件给你</span> <div class="radio"> <label> <input type="radio" name="notice_by_email" ng-change="js_email_notice(1)" ng-model="notice_by_email" value="1"/> 开启邮件通知 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_by_email" ng-change="js_email_notice(0)" ng-model="notice_by_email" value="0"/> 关闭邮件通知 </label> </div> </div> <div class="sub-section"> <h5>免打扰设置</h5> <span>当你Web版是在线状态时，不发送邮件通知，避免重复消息的打扰</span> <div class="radio"> <label> <input type="radio" name="notice_for_smart" ng-change="js_smart_notice(1)" value="1" ng-model="notice_for_smart"/> 免打扰开启 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_smart" ng-change="js_smart_notice(0)" value="0" ng-model="notice_for_smart"/> 免打扰关闭 </label> </div> </div> <div class="sub-section"> <h5>桌面通知</h5> <span>当有重要操作或者有成员AT你时，系统会弹出气泡提示，只对Chrome和Safari有效</span> <div class="radio"> <label> <input type="radio" name="notice_for_desktop" ng-change="js_desk_notice(1)" value="1" ng-model="desk_notice"/> 开启桌面通知 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_desktop" ng-change="js_desk_notice(0)" value="0" ng-model="desk_notice"/> 关闭桌面通知 </label> </div> </div> <div class="sub-section"> <h5>每月速递</h5> <span>是否接收每个月关于Worktile产品最新动态、用户故事、最佳实践的邮件</span> <div class="radio"> <label> <input type="radio" name="notice_for_express" ng-change="js_change_express(1)" value="1" ng-model="notice_for_express"/> 开启 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_express" ng-change="js_change_express(0)" value="0" ng-model="notice_for_express"/> 退订 </label> </div> </div> <div class="sub-section"> <h5>每日邮件提醒</h5> <span>是否接收每日未完成任务，过期任务的邮件</span> <div class="radio"> <label> <input type="radio" name="notice_for_daily_mail" ng-change="js_change_daily_email(1)" value="1" ng-model="notice_for_daily_mail"/> 开启 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_daily_mail" ng-change="js_change_daily_email(0)" value="0" ng-model="notice_for_daily_mail"/> 退订 </label> </div> </div> <div class="sub-section"> <h5>每周邮件提醒</h5> <span>是否接收上周任务完成情况的邮件</span> <div class="radio"> <label> <input type="radio" name="notice_for_weekly_mail" ng-change="js_change_weekly_email(1)" value="1" ng-model="notice_for_weekly_mail"/> 开启 </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_weekly_mail" ng-change="js_change_weekly_email(0)" value="0" ng-model="notice_for_weekly_mail"/> 退订 </label> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_projects.html",' <div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/account/account_sidebar.html\'"></ng-include> </div> <div class="layout_content_main"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> <div class="pull-right"> <a href="javascript:;" class="btn btn-danger" ng-click="js_pop_new_menu($event)" master_new_dialog step="2">新建项目</a> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <div class="panel-section"> <h4>项目管理</h4> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>项目名</th> <th>负责人</th> <th>成员人数</th> <th>权限</th> <th>管理</th> </tr> </thead> <tbody> <tr data-ng-repeat="project in account_projects"> <td><a href="/project/{{project.pid}}">{{project.name}}</a></td> <td> <wt-avatar ng-repeat="admin in project.admins" member="admin" name="true" size="30" class="mr_15"></wt-avatar> </td> <td>{{project.member_count}}</td> <td>{{ project.curr_role | prj_role }}</td> <td> <a href="/project/{{project.pid}}/setting"> 设置 </a> </td> </tr> <tr> <td colspan="5" data-ng-show="account_projects.length == 0"> 还没有参与任何项目 </td> </tr> </tbody> </table> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_security.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_security.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div class="table-list" data-ng-show="part_loading_done"> <table class="table table-hover table-bordered"> <thead> <tr> <th>#</th> <th>登录地址</th> <th>客户端</th> <th>登录时间</th> </tr> </thead> <tbody> <tr data-ng-repeat="history in account_histories"> <td>{{from_index + $index}}</td> <td>{{history.location + \'（\'+ history.ipaddress + \'）\'}}</td> <td> {{history.source | clientName}} </td> <td><span class="mr_15">{{history.create_date | timeFormatZHCN}}</span> {{history.create_date | fromNow}} </td> </tr> <tr> <td colspan="4" data-ng-show="account_histories.length == 0"> 还没有任何登录记录 </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="security_pagination_opts"></div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_settings.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_settings.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> </div> </div> <div class="center-panel-container height-nonav" wt-scroll ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <p> <wt-avatar member="global.me" size="80" wt-disable-drag class="mr_15"></wt-avatar> 你可以选择png/jpg图片（180*180）作为头像 </p> <form name="file_upload" action="{{action_url}}" method="POST" enctype="multipart/form-data" data-ng-app="wt" data-file-upload="avatar_upload_option" class="help-inline p_0 m_0 w_300"> <span class="fileinput-button btn-local-upload mr_15 w_300"> <span class="btn w_120"> <span ng-show="!upload_enabled"><i class="icon-spinner icon-spin icon-large"></i> 上传中</span> <span ng-show="upload_enabled">修改头像<input type="file" name="files[]" title="上传新头像"/></span> </span> </span> </form> <hr/> </div> <div class="panel-section"> <h4>修改个人资料</h4> </div> <div class="panel-section"> <form name="user_update_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label p_0">姓名：</label> <div class="col-xs-10"> <input autofocus="" name="display_name" type="text" class="form-control" ng-model="name" placeholder="姓名" required wt-regex="^([\\u4e00-\\u9fa5]|[0-9a-zA-Z!@#$%^&*()_\\-\\+=\\s]){1,100}$"/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">个性签名：</label> <div class="col-xs-10"> <textarea class="form-control help-block" rows="4" ng-model="desc" placeholder="个性签名（可空）"/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <button wt-form-submit="js_user_update(user_update_form, name,desc)" class="btn btn-success mr_15" loading-status="is_updating" data-loading-text="保存中...">保存 </button> </div> </div> </form> <hr/> </div> <div class="password"> <div class="panel-section"> <h4>修改密码</h4> </div> <div class="panel-section"> <form name="user_pwd_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label p_0">原密码：</label> <div class="col-xs-10"> <input name="pwd_old" autofocus="" type="password" class="form-control" ng-model="pwd_old" placeholder="原密码" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">新密码：</label> <div class="col-xs-10"> <input name="pwd_new" type="password" class="form-control" ng-model="pwd1" placeholder="新密码" ng-minlength="6" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">重复密码：</label> <div class="col-xs-10"> <input name="pwd_again" type="password" class="form-control" ng-model="pwd2" wt-repeat-password="pwd_new" placeholder="再输入一次"/> </div> </div> <div class="form-group" ng-show="user_pwd_form.$errors.length > 0"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <div class="alert alert-danger mb_0"> <i class="icon-remove-sign"></i> {{user_pwd_form.$errors[0]}} </div> </div> </div> <div class="form-group" ng-show="change_pwd_success"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <div class="alert alert-success mb_0"> <i class="icon-ok mr_5"></i> 修改密码成功。 </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <button wt-form-submit="js_user_change_pwd(user_pwd_form, pwd_old,pwd1,pwd2)" class="btn btn-success mr_15" data-loading-text="保存中..." loading-status="is_changing_pwd">确认修改 </button> </div> </div> </form> <hr/> </div> </div> <div> <div class="panel-section"> <h4>修改邮箱地址</h4> </div> <div class="panel-section" ng-if="email_step == 1"> <p> 当前邮箱地址为：{{global.me.email}}</p> <div ng-if="global.me.status === \'3\'" class="alert alert-warning w_660"> <i class="icon icon-info-sign mr_5"></i> <span>邮箱还未验证，请查收邮件。如果没有收到，可以检查垃圾邮件目录， <span ng-show="sending_email">发送中</span> <a id="resend_email" href="javascript:;" ng-click="send_activation_email($event)" ng-show="!sending_email &&! send_success">重发邮件</a> <span ng-show="send_success">发送成功</span> <span ng-show="send_fail">发送失败</span> ，或更换邮箱</span> </div> <button ng-click="js_change_email_step(2)" class="btn mr_15">修改邮件地址 </button> </div> <div class="panel-section" ng-if="email_step == 2"> <wt-confirm-password class="w_360" confirm-cancel="js_change_email_step(1)" confirm-success="js_change_email_step(3)"></wt-confirm-password> </div> <div class="panel-section" ng-if="email_step == 3"> <form name="user_new_email_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form w_660" novalidate> <p>当前邮箱地址为：{{global.me.email}}</p> <input name="new_email" autofocus="" type="email" class="form-control" ng-model="new_email" placeholder="新邮箱地址" required wt-remote-unique-check="{url:\'/api/user/email/check?email={{new_email | encodeURIComponent}}\'}"/></br> <div class="alert alert-danger mt_10" ng-show="user_new_email_form.$errors.length > 0"> <i class="icon-remove-sign"></i> {{user_new_email_form.$errors[0]}} </div> <div class="alert alert-info" data-ng-hide="send_success"> <i class="icon-info-sign mr_5"></i> 系统会发送确认邮件到您的新邮箱中，请查收后点击邮件中的地址完成修改。 </div> <div class="alert alert-success" data-ng-show="send_success"> <i class="icon-ok mr_5"></i> 系统已经成功发送邮件到您的新邮箱中，请查收后点击邮件中的地址完成修改。 </div> <button wt-form-submit="js_user_change_email(user_new_email_form, new_email)" class="btn btn-success mr_15" data-loading-text="发送中..." loading-status="is_sending_email">发送确认邮件 </button> <button type="button" data-ng-click="js_change_email_step(1)" class="btn mr_15">取消 </button> </form> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_tabs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_tabs.html",'<ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_menu == \'settings\']" href="/account/settings"> 基本设置 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'twofactor\']" href="/account/twofactor"> 两步验证 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'security\']" href="/account/security"> 安全日志 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'message\']" href="/account/message"> 消息设置 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'apps\']" href="/account/apps"> 应用管理 </a> </li> </ul>')}]),angular.module("/ycjs/tpl/account/account_teams.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_teams.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>团队管理</h3> </div> <div class="main"> <div class="pull-right"> <a class="btn btn-danger" ng-click="js_pop_new_menu($event)" master_new_dialog step="3">新建团队</a> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">我的团队</span> <ul class="tabs"> </ul> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" class="table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>团队名</th> <th>所有者</th> <th>权限</th> <th>管理</th> </tr> </thead> <tbody> <tr data-ng-repeat="team in account_teams"> <td> <a href="/teams/{{team.team_id}}">{{team.name}}</a> <i ng-class="{1:\'icon-private\', 2:\'icon-public\'}[team.visibility]" title="{{team.visibility | teamVisibility }}"></i> </td> <td> <wt-avatar member="team.owner" name="true" size="30"></wt-avatar> </td> <td> <span ng-show="team.is_owner==1">所有者</span> <span ng-show="team.is_owner==0">{{ team.curr_role | role }}</span> </td> <td> <a href="/teams/{{team.team_id}}/setting" ng-show="team.is_owner!=1" class="btn mr_15"> <i class="icon-signout mr_5"></i>退出 </a> <a href="/teams/{{team.team_id}}/admin" ng-show="team.is_owner==1" class="btn mr_15"> <i class="icon-cog mr_5"></i>设置 </a> </td> </tr> <tr> <td colspan="5" data-ng-show="account_teams.length == 0"> 还没有加入任何团队 </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_trophies.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_trophies.html","")}]),angular.module("/ycjs/tpl/account/account_twofactor.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_twofactor.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-user mr_10"></i>帐户设置</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <div class="navigate-step" data-ng-show="two_step > 1"> <div class="line"> <div data-ng-class="{true:\'active\'}[two_step >= 3]"></div> <div data-ng-class="{true:\'active\'}[two_step >= 4]"></div> </div> <ol> <li data-ng-class="{true:\'active\'}[two_step >= 2]"> <span class="step-title">安装身份验证器</span> <br> <span class="number">1</span></li> <li data-ng-class="{true:\'active\'}[two_step >= 3]"> <span class="step-title">添加帐户</span> <br> <span class="number">2</span> </li> <li data-ng-class="{true:\'active\'}[two_step >= 4]"> <span class="step-title">验证并开启</span> <br> <span class="number">3</span> </li> </ol> </div> </div> <div data-ng-switch="two_step"> <div class="panel-section" data-ng-switch-when="0"> <div class="form-group"> <div class="account_status" ng-class="{1:\'on\',0:\'off\'}[account_basic.twofactor_enabled]"> <i class="icon-3x" ng-class="{1:\'icon-shield\',0:\'icon-ban-circle\'}[account_basic.twofactor_enabled]"></i> <img src="/img/inner/account/google_authenticator.png" alt="Google身份验证器" width="80" height="80"/> <br/> <p class="alert alert-info w_660"> <i class="icon-info-sign mr_5"></i> 当前状态：<b ng-bind="{1:\'开启\',0:\'关闭\'}[account_basic.twofactor_enabled]"></b> <br/><br/> <span ng-hide="account_basic.twofactor_enabled == 1">两步验证使用你的手机生成动态口令，为您的帐户添加一份额外的安全保障，<a href="/guide/advance/two-factor" target="_blank">点击了解更多。</a></span> <span ng-show="account_basic.twofactor_enabled == 1">您已经开启了两步验证，请妥善保存您的安全码，如果移动设备丢失，请使用安全码登录。</span> </p> </div> <dl class="recovery_code" ng-show="account_basic.twofactor_enabled == 1"> <dt> <a href="javascript:;" ng-click="account_show_recovery_code=!account_show_recovery_code"><i class="icon-ticket"></i> 点击查看安全码</a> </dt> <dd ng-show="account_show_recovery_code"> <ul> <li ng-repeat="recovery_code in recovery_codes"> {{recovery_code}} </li> </ul> </dd> </dl> </div> <div class="form-group"> <button class="btn btn-success" data-ng-show="account_basic.twofactor_enabled == 0" ng-click="js_two_step(1)">开启两步验证 </button> <button class="btn btn-danger" data-loading-text="关闭两步验证中..." loading-status="is_disable_twofactoring" ng-show="account_basic.twofactor_enabled == 1" ng-click="js_disable_twofactor()"> 关闭两步验证 </button> </div> </div> <div class="panel-section text-center" data-ng-switch-when="1"> <wt-confirm-password confirm-cancel="js_two_step(0)" confirm-success="js_two_step(2)"></wt-confirm-password> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="2"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/install.png" alt="安装到你的手机"/> </div> <div class="col-xs-7 text-left pull-right"> <h5>在移动设备上安装身份验证器</h5> <p>Google身份验证器是谷歌开发的开源应用，可动态生成验证码，并且不会耗费手机流量。</p> <div class="account-marketplace"> <i class="icon-android icon-3x"></i> <strong>Android 手机</strong> <br/> 在各大应用市场搜索：身份验证器 <br/> 或者直接访问：<a href="http://www.wandoujia.com/apps/com.google.android.apps.authenticator2" target="_blank">豌豆荚</a> </div> <div class="account-marketplace"> <i class="icon-apple icon-3x"></i> <strong>iPhone 手机</strong> <br/> 在 AppStore 搜索： <br/> <a href="https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8" target="_blank">Google Authenticator</a> </div> 其他智能设备的安装<a href="/guide/advance/two-factor" target="_blank">查看这里</a> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn float_left mr_45" ng-click="js_two_step(1)"><i class="icon-caret-left"></i> 上一步 </button> <button class="btn btn-success float_left" ng-click="js_two_step(3)">下一步 <i class="icon-caret-right"></i> </button> </div> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="3"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/account-qrcode.png" alt="安装到你的手机"/> </div> <div class="col-xs-7 text-left pull-right"> <h5>在身份验证器里添加帐户</h5> <p>打开身份验证器应用，扫描条形码添加帐户</p> <div class="part-loading mt_60" wt-loading-done="loading_twofactor_secret_done"></div> <div data-ng-show="loading_twofactor_secret_done"> <p ng-bind-html="twofactor_secret.qrcode"></p> <p class="alert alert-info col-xs-8"> <i class="icon-info-sign mr_5"></i> 身份验证器不能扫描验证码？ 手动添加以下帐户： <br/> <b>帐户 ：</b>{{twofactor_secret.name}}<br/> <b>密钥 ：</b>{{twofactor_secret.secret}} </p> </div> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn float_left mr_45" ng-click="js_two_step(2)"><i class="icon-caret-left"></i> 上一步 </button> <button class="btn btn-success float_left" ng-click="js_two_step(4)">下一步 <i class="icon-caret-right"></i> </button> </div> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="4"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/account-code.png" alt="填写动态验证码"/> </div> <div class="col-xs-7 text-left pull-right"> <h5>开启动态身份验证</h5> <p>输入身份验证器自动生成的动态验证码</p> <div class="input-group w_300"> <input type="text" class="form-control" wt-enter="js_enable_twofactor()" ui-event="{ focus : \'js_twofactor_focus()\' }" ng-model="input.factor"> <span class="input-group-btn"> <button class="btn btn-success" type="button" data-loading-text="正在开启..." loading-status="is_enable_twofactoring" data-ng-click="js_enable_twofactor()">验证并开启 </button> </span> </div> <div class="form-group w_300 mt_12" data-ng-show="input.enable_twofactor_errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{input.enable_twofactor_errors}} </div> </div> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn" ng-click="js_two_step(3)"><i class="icon-caret-left"></i> 上一步 </button> </div> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/pop_decommissioning_confirm.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/pop_decommissioning_confirm.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>解除授权</h3> </div> <div class="popbox-body w_300"> <span> 解除后该应用将不能进入Worktile，必须重新授权才可以进入。 </span> </div> <div class="popbox-footer"> <button ng-click="js_decommissioning()" data-loading-text="解除中..." loading-status="is_decommissioning" class="btn btn-danger mr_15">确定解除</button> <button ng-click="js_close()" class="btn btn-cancel">取消</button> </div> ')}]),angular.module("/ycjs/tpl/activity/activity_feed_template.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_feed_template.html",'<script type="text/ng-template" id="task_create"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">新建了任务</span> </div> <div class="feed-item-body"> <i class="icon-check-empty"></i> <span class="entity"> {{feed.data.entity.name}} </span> <br/> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script> <script type="text/ng-template" id="task_complete"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">完成了任务</span> </div> <div class="feed-item-body"> <i class="icon-check-sign"></i> <span class="entity"> {{feed.data.entity.name}} </span> <br/> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script> <script type="text/ng-template" id="task_comment_add"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">评论了任务</span> </div> <div class="feed-item-body"> <i class="icon-comment-alt"></i> <span class="comment"> {{feed.data.entity.name}} </span> <br/> <span class="entity"> {{feed.data.target.name}} </span> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script>')}]),angular.module("/ycjs/tpl/activity/activity_filter.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_filter.html",'<div class="btn-group" ng-controller="filter_activity_ctrl"> <button class="btn"> {{selected_item.display_name}} </button> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="icon-caret-down"></i></a> <ul class="dropdown-menu pull-right"> <li ng-class="{true:\'divider\',false:\'\'}[item.type==\'divider\']" ng-repeat="item in filter_items"> <a href="" ng-show="type.type!=\'divider\'" ng-click="js_select_filter_item(item)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[item.selected == true]" class="color_gray"></i> {{item.display_name}}</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/activity/activity_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_list.html",'<div class="empty-panel" ng-show="activities != null && activities.length == 0"> <i class="icon-time"></i><br/> <span>还没有任何活动</span> </div> <div class="activity-list m_15" ng-if="activities && activities.length > 0" ng-cloak> <ul class="activities"> <li class="activity-item" bindonce="" ng-repeat="activity in activities" bo-class="{true:\'activity-item-day\'}[activity.is_show_date]"> <div class="activity-day" ng-show="activity.is_show_date"> <span class="year" bo-html="([activity.published,\'YYYY\'] | momentFormat) +\'年<br>\'"></span> <strong bo-text="[activity.published,\'MM/DD\'] | momentFormat"></strong> <span class="weekday" bo-text="[activity.published,\'ddd\'] | momentFormat"></span> </div> <div class="activity-icon"> <i bo-class="activity.verb | activityIcon"></i> </div> <div class="activity-meta"> <span class="date" bo-title="[activity.published,\'HH:mm\'] | momentFormat" bo-text="[activity.published,\'HH:mm\'] | momentFormat"></span> </div> <wt-avatar member="activity.actor" size="30" class="activity-avatar"></wt-avatar> <div class="activity-itemwarp"> <span class="activity"> <wt-include src="tpl_prefix + activity.template"></wt-include> </span> </div> </li> </ul> </div> <div class="loading-more-panel"> <div class="part-loading" ng-show="loading_activity"> </div> <button class="btn" ng-show="has_more && (global.loading_done && loading_activity != true)" ng-click="js_load_more($event);"> 加载更多... </button> </div>')}]),angular.module("/ycjs/tpl/activity/pop_filter_activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/pop_filter_activity.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>筛选选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_select_type(\'all\')"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[selected_type==\'all\']" class="color_gray"></i> 全部</a> </li> <li class="divider"></li> <li ng-repeat="filter_type in filter_types"> <a href="" ng-click="js_select_type(filter_type)"> <span class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[filter_type.name == selected_type]"></span> {{filter_type.display_name}} </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/activity/project_activities.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/project_activities.html",'<div class="prj_panel layout_content"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <div class="btn-group"> <button class="btn" ng-click="js_to_graph(\'overview\')"> 进度 </button> <button class="btn" ng-click="js_to_graph(\'pulse\')"> 周报 </button> <button class="btn" ng-click="js_to_graph(\'daily\')"> 日报 </button> <a class="btn active" href="/project/{{project.info.pid}}/activity">活动</a> </div> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="activity-panel height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs" ng-controller="filter_activity_ctrl"> <li ng-repeat="item in filter_items"> <a href="javascript:;" ng-click="js_select_filter_item(item)" ng-class="{true:\'active\'}[item.selected == true]"> {{item.display_name}}</a> </li> </ul> </dt> <dd> <section ng-include="\'/ycjs/tpl/activity/activity_list.html\'"></section> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div>')}]),angular.module("/ycjs/tpl/browse/browse_files.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_files.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-compass mr_10"></i>发现</h3> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/browse/explore_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <div class="pull-right "> <a href="/guide/dashboard/browse" target="_blank"><i class="icon-info-sign"></i></a> </div> <span class="title">文件</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> 全部 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> 我上传的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> 我关注的 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="files != null && files.length == 0 && part_loading_done"> <i class="icon-file"></i> <br/> <span>还没有任何文件</span> </div> <div class="file-panel"> <div class="file-list" ng-show="files.length > 0"> <wt-file-item ng-repeat="file in files"></wt-file-item> </div> <div class="loading-more-panel"> <button ng-show="has_more && part_loading_done" class="btn" ng-click="load_files_more()" data-loading-text="加载中..." loading-status="!part_loading_done">加载更多... </button> <div class="load-more part-loading" ng-hide="part_loading_done"></div> </div> </div> </dd> </dl> </div> </div> </div> ')
}]),angular.module("/ycjs/tpl/browse/browse_pages.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_pages.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-compass mr_10"></i>发现</h3> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/browse/explore_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <div class="pull-right"> <a href="/guide/dashboard/browse" target="_blank"><i class="icon-info-sign"></i></a> </div> <span class="title">文档</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> 全部 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> 我创建的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> 我关注的 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="pages != null && pages.length == 0 && part_loading_done"> <i class="icon-file-text-alt"></i> <br/> <span>还没有任何文档</span> </div> <div class="page-panel"> <div class="page-list" ng-if="pages.length > 0"> <wt-page-item ng-repeat="page in pages"></wt-page-item> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_pages_more($event);"> 加载更多... </button> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/browse/browse_posts.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_posts.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-compass mr_10"></i>发现</h3> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/browse/explore_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <div class="pull-right "> <a href="/guide/dashboard/browse" target="_blank"><i class="icon-info-sign"></i></a> </div> <span class="title">话题</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> 全部 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> 我发起的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> 我关注的 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="posts != null && posts.length == 0 && part_loading_done"> <i class="icon-list-alt"></i> <br/> <span>还没有任何话题</span> </div> <div class="post-panel"> <div class="post-list" ng-if="posts.length > 0"> <wt-post-item ng-repeat="post in posts" ng-click="locator.to_post(post.pid, post.post_id, true)"></wt-post-item> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_posts_more($event);"> 加载更多... </button> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/browse/browse_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_tasks.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-compass mr_10"></i>发现</h3> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/browse/explore_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <div class="pull-right"> <a href="/guide/dashboard/browse" target="_blank"><i class="icon-info-sign"></i></a> </div> <span class="title">任务</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> 全部 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 3]" href="javascript:;" ng-click="js_change_tab(3)"> 分配给我的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> 我创建的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> 我关注的 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="tasks != null && tasks.length == 0 && part_loading_done"> <i class="icon-check"></i> <br/> <span>还没有任何任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in tasks"> <div class="group-header" ng-if="task.is_show_date"> <span>{{ task.create_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main" ng-class="{1:\'task-completed-style\'}[task.completed]"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="has_more && part_loading_done" class="btn" ng-click="load_tasks_more()" data-loading-text="加载中..." loading-status="!part_loading_done">加载更多... </button> <div class="load-more part-loading" ng-hide="part_loading_done"></div> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/browse/explore_top_tab.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/explore_top_tab.html",'<ul class="tabs"> <li> <a href="/explore" ng-class="{true: \'active\'}[browse_top_tab == \' \']">任务</a> </li> <li> <a href="/explore/files" ng-class="{true: \'active\'}[browse_top_tab == \'files\']">文件</a> </li> <li> <a href="/explore/posts" ng-class="{true: \'active\'}[browse_top_tab == \'posts\']">话题</a> </li> <li> <a href="/explore/pages" ng-class="{true: \'active\'}[browse_top_tab == \'pages\']">文档</a> </li> </ul> ')}]),angular.module("/ycjs/tpl/common/comment_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/comment_list.html",'<div class="comment-list" ng-controller="comment_ctrl"> <div class="part-loading mt_20" wt-loading-done="comments_loading_done"></div> <ul class="comments"> <li class="comment-item" id="comment_item_{{comment.cid}}" bindonce="" ng-repeat="comment in comments" repeat-done="js_repeat_done()"> <wt-avatar member="comment.owner" size="40" class="comment-avatar"></wt-avatar> <div class="comment"> <a href="javascript:;" class="comment-name" bo-text="comment.owner.display_name"> </a> <span class="comment-meta"> <span bo-class="{true:\'date\',false:\'\'}[comment.type==1]" bo-text="comment.create_date | fromNow"></span> <a href="javascript:;" data-ng-click="js_reply_comment(comment)" class="comment-action" bo-if="comment.type==1 && (global.prj_module.comment | permission:project.info.permission)">回复</a> <a href="javascript:;" data-ng-click="js_pop_delete_comment($event,comment)" class="comment-action js-popbox" bo-if="comment.owner.uid == global.me.uid && comment.type == 1 && (global.prj_module.comment | permission:project.info.permission)">删除</a> </span> <div class="current-comment" wt-markdown=\'comment.message\'> </div> <div class="comment-attachments"> <wt-attachment ng-repeat="file in comment.files"></wt-attachment> </div> <div class="edit-controls clearfix" id="div_comment_{{ comment.cid }}" bo-show="comment.is_edit" wt-show-edit="comment.is_edit"> </div> </div> </li> </ul> <div id="new_comment_{{xtype}}" class="new-comment" ng-show="global.prj_module.comment | permission:entity_permission"> <wt-comment save-comment="js_save_comment(comment)" pastefile-comment="js_pastefile_comment(comment)"></wt-comment> </div> </div>')}]),angular.module("/ycjs/tpl/common/left_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/left_menu.html",'<div class="left_menu height-noheader"> <div data-height="{{{true:\'100\',false:\'142\'}[$root.upload_queue.get_queue()==0]}}" wt-scroll> <ul class="left_menu_module"> <li> <a wt-track="LeftMenu|Dashboard" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'dashboard\'}" tooltip-placement="right" tooltip-animation="false" tooltip="{{ {true:\'工作台\'}[$root.global.left_panel_is_fold] }}" ng-href="/dashboard"> <i class="icon-dashboard mr_10"></i> <span class="collapse_hide">工作台</span> </a> </li> <li> <a wt-track="LeftMenu|Calendar" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'calendar\'}" tooltip-placement="right" tooltip-animation="false" tooltip="{{ {true:\'日历\'}[$root.global.left_panel_is_fold] }}" ng-href="/calendar"> <i class="icon-calendar mr_10"></i> <span class="collapse_hide">日历</span> </a> </li> <li> <a wt-track="LeftMenu|Explore" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'explore\'}" tooltip-placement="right" tooltip-animation="false" tooltip="{{ {true:\'发现\'}[$root.global.left_panel_is_fold] }}" ng-href="/explore"> <i class="icon-compass mr_10"></i> <span class="collapse_hide">发现</span> </a> </li> <li> <a wt-track="LeftMenu|Projects" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'projects\'}" tooltip-placement="right" tooltip-animation="false" tooltip="{{ {true:\'项目\'}[$root.global.left_panel_is_fold] }}" href="/projects"> <i class="icon-inbox mr_10"></i> <span class="collapse_hide">项目</span> </a> </li> </ul> <div class="hr_black" ng-hide="(projects | filter:{is_star:1}).length==0"></div> <ul id="prj_list_star" class="left_menu_module" sortable="prj_sort_options"> <li data-ng-repeat="project in projects | filter:{is_star:1}" data-ng-click="js_set_current_prj(project)" pid="{{project.pid}}"> <a data-ng-class="{\'active\':current_pid == project.pid}" class="left_menu_item" tooltip-placement="right" tooltip-animation="false" tooltip="{{ {true:project.name}[$root.global.left_panel_is_fold] }}" href="/project/{{project.pid}}"> <i class="mr_10" ng-class="project.pic" ng-style="{color: project.bg}"></i> <span class="collapse_hide">{{[project.name,20] | cutstr }}</span> </a> </li> </ul> <div class="hr_black" data-ng-show="!$root.global.left_panel_is_fold"></div> <div class="left_menu_scroll"> <ul class="left_menu_section collapse_hide" ng-class="{true:\'left_menu_section_expand\'}[team.expand]" data-ng-repeat="team in teams"> <li> <a class="left_menu_item" href="javascript:;" ng-click="js_section_expand_toggle(team,$event)"> <i class="mr_10" ng-class="{true:\'icon-user\',false:\'icon-sitemap\'}[team.team_id == -1]"></i> <span class="team_name">{{team.name}}</span> <i class="icon-angle" ng-class="{true:\'icon-angle-down\',false:\'icon-angle-right\'}[team.expand == true]"></i> </a> <ul class="left_menu_body" wt-slide-show="team.expand" style="display: none;" sortable="prj_sort_options"> <li pid="{{project.pid}}" data-ng-repeat="project in team.projects" data-ng-click="js_set_current_prj(project)"> <a data-ng-class="{\'active\':current_pid == project.pid}" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color: project.bg}"></i> {{[project.name,20] | cutstr}} </a> </li> <li> <a class="empty" ng-show="team.projects.length==0" href="javascript:;"> <i class="icon-inbox"></i>没有项目 </a> </li> </ul> </li> </ul> </div> </div> <form id="global_file_upload" data-ng-controller="global_file_ctrl" action="{{global.config.box_url()}}" method="POST" enctype="multipart/form-data" data-file-upload="options" data-ng-class="{\'fileupload-processing\': processing() || loadingFiles}" class="js-popbox" data-placement="right" ng-show="queue.length" ng-class="{true: \'fileupload-processing\'}[!!processing() || loadingFiles]"> <a href="javascript:;" class="icon icon-white icon-upload-alt" ng-click="js_pop_global_fileupload($event)"> <span class="ml_10 collapse_hide">目前有 {{ queue.length }} 个文件在上传</span> <span class="label label-danger collapse_show">{{ queue.length }}</span> </a> <div class="hr_black"></div> </form> <div class="hr_black"></div> <ul class="left_menu_footer"> <li class="collapse_hide"> <a href="/help" target="_blank" tooltip-placement="top" tooltip="帮助中心"> <i class="icon-question-sign"></i> </a> </li> <li class="collapse_hide"> <a href="/account/teams" tooltip-placement="top" tooltip="团队管理"> <i class="icon-sitemap"></i> </a> </li> <li> <a href="javascript:;" data-ng-click="$root.js_left_panel_toggle()" tooltip="{{{true:\'展开\',false:\'折叠\'}[$root.global.left_panel_is_fold]}}"> <i class="{{{true:\'icon-step-forward\',false:\'icon-step-backward\'}[$root.global.left_panel_is_fold]}}"></i> </a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/common/pay_dialog.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pay_dialog.html",'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4> 等待支付完成</h4> </div> <div class="modal-body min-h400"> <button class="btn btn-success" ng-click="js_pay_complete()">支付完成</button> <button class="btn btn-success" data-ng-click="js_pay_exception()">支付出现问题</button> </div> </div> </div>')}]),angular.module("/ycjs/tpl/common/pop_add_image.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_image.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>插入图片</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-click="js_show_images()"><i class="mr_5"></i>选择已有图片</a></li> <li><a ng-click="js_upload_image()"><i class="mr_5"></i>{{{true:"正在上传中...",false:"本地上传"}[uploading_done == false]}}</a> <form name="file_upload" class="hide" action="{{action_url}}" method="POST" enctype="multipart/form-data" data-file-upload="file_upload_option"> <input type="file" id="file_upload" name="files[]" title="添加附件"/> </form> </li> <li ng-show="error_msg.length > 0"> <div class="alert alert-danger">{{error_msg}}</div> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择已有图片</h3> </div> <div class="max-h300" wt-scroll> <div class="popbox-body "> <ul class="popbox-menu"> <div class="part-loading mt_12" wt-loading-done="images_loading_done"></div> <li ng-repeat="image in images" ng-click="js_select_image(image)" class="ng-scope"> <a class="file-item-li-menu file-picfile" href="javascript:;"> <img ng-src="{{image.path | wtBox}}" alt="{{image.name}}"> <span class="file-name ng-binding">{{image.name}}</span> </a> </li> <li class="empty-menu" ng-show="images.length == 0">本地没有任何图片</li> </ul> </div> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/common/pop_add_image2.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_image2.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择已有图片</h3> </div> <div class="max-h300" wt-scroll> <div class="popbox-body "> <ul class="popbox-menu"> <div class="part-loading mt_12" wt-loading-done="images_loading_done"></div> <li ng-repeat="image in images" ng-click="js_select_image(image)" class="ng-scope"> <a class="file-item-li-menu file-picfile" href="javascript:;"> <img ng-src="{{image.path | wtBox}}" alt="{{image.name}}"> <span class="file-name ng-binding">{{image.name}}</span> </a> </li> <li class="empty-menu" ng-show="images.length == 0">本地没有任何图片</li> </ul> </div> </div> </li> <li ng-switch-default class="popbox-step-li"> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-click="js_show_images()"><i class="mr_5"></i>选择已有图片</a></li> <li><a ng-click="js_upload_image()"><i class="mr_5"></i>{{{true:"正在上传中...",false:"本地上传"}[uploading_done == false]}}</a> <form name="file_upload" class="hide" action="{{action_url}}" method="POST" enctype="multipart/form-data" data-file-upload="file_upload_option"> <input type="file" id="file_upload" name="files[]" title="添加附件"/> </form> </li> <li ng-show="error_msg.length > 0"> <div class="alert alert-danger">{{error_msg}}</div> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/common/pop_add_link.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_link.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>插入链接</h3> </div> <div class="popbox-body w_300"> <form class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="insert_link_form" role="form" novalidate> <div class="form-group"> <label class="control-label">文字：</label> <input type="text" wt-focus="" autofocus="" class="form-control" name="link_text" ng-model="link_text" placeholder="链接文字" required=""> </div> <div class="form-group"> <label class="control-label">地址：</label> <input type="text" class="form-control" name="link_address" ng-model="link_address" placeholder="链接地址" required=""> </div> <div class="form-group"> <button wt-form-submit="js_insert_link(insert_link_form)" type="button" class="btn btn-success">插入</button> </div> </form> </div> ')}]),angular.module("/ycjs/tpl/common/pop_add_link_2.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_link_2.html",'<div class="form-group link-input-wrapper"> <div class="input-group"> <input type="text" class="form-control" name="link_address" ng-model="link_address" placeholder="输入链接地址" wt-enter="insert()" wt-focus required> <span class="input-group-btn"> <a class="btn btn-default" ng-click="insert()">插入</a> </span> </div> </div>')}]),angular.module("/ycjs/tpl/common/pop_comment_delete.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_comment_delete.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>确认删除</h3> </div> <div class="popbox-body w_300"> <span> 确认要删除此评论吗？ </span> </div> <div class="popbox-footer"> <button ng-click="js_sure_delete()" data-loading-text="删除中..." loading-status="is_deleting" class="btn btn-danger mr_15">确定删除</button> <button ng-click="js_close()" class="btn btn-cancel">取消</button> </div> ')}]),angular.module("/ycjs/tpl/common/pop_comment_metion.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_comment_metion.html",'<div class="popbox-header" ng-mousedown="js_mousedown($event)"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>发送通知</h3> </div> <div class="popbox-bodywrapper" wt-scroll ng-mousedown="js_mousedown($event)"> <div class="popbox-body"> <input type="text" autofocus="" wt-focus="" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block"/> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in metion_members | filterMembers:search_user_input"> <wt-avatar member="member" size="30" name="true" atname="true" faceclass="plr_5" click="js_metion_member($event,member)"></wt-avatar> </li> </ul> </div> </div> <div class="popbox-footer top-divider"> <a class="action-item" href="javascript:;" ng-click="js_metion_all($event)"> <span class="fs_15">@</span> 全部成员({{metion_members.length}}) </a> </div>')}]),angular.module("/ycjs/tpl/common/pop_datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_datepicker.html",'<div class="popbox-header"> <button class="close" ng-click="js_close()">&times;</button> <h3>设置截止日期</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden"/> <ul class="list-inline m_0"> <li><a href="javascript:;" ng-click="js_today()">今天</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_tomorrow()">明天</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_week()">本周</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_next_week()">下周</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_month()">本月</a></li> </ul> <div wt-datepicker="task.expire_date_temp"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_set_expire(task.expire_date_temp)">确定</a> <a class="btn" ng-click="js_cancel_expire()">取消截止日期</a> </div> ')}]),angular.module("/ycjs/tpl/common/pop_delete_confirm.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_delete_confirm.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{ delete_title || "确认删除"}}</h3> </div> <div class="popbox-body w_300"> <span ng-bind-html="delete_message || \'确认要删除此选项吗？\'"> </span> </div> <div class="popbox-footer"> <button ng-click="js_sure_delete()" ng-bind-html="delete_button || \'确定删除\'" data-loading-text="删除中..." loading-status="is_deleting" class="btn btn-danger mr_15"> </button> <button ng-click="js_close()" class="btn btn-cancel">取消</button> </div> ')}]),angular.module("/ycjs/tpl/common/pop_emojis.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_emojis.html",'<div class="popbox-body emoji-box" ng-mousedown="js_mousedown($event)" style="max-height: 250px;"> <ul class="popbox-item"> <li ng-click="js_insert_emoji(emoji)" ng-repeat="emoji in emojis"> <a href="javascript:"><img class=\'emoji\' ng-src="/img/emoji/{{ emoji }}.png"/></a> </li> </ul> <ul class="pagination pagination-sm"> <li ng-repeat="emoji_group in emoji_groups" ng-class="{true:\'active\'}[current == $index]"> <a href="javascript:;" ng-click="js_to_page($index)">{{$index+1 }}</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/common/pop_new_feature.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_new_feature.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新功能</h3> </div> <div class="popbox-body w_300"> <a href="/blog/features/file-preview-online-and-project-copy" target="_blank">文件在线预览功能和项目拷贝</a><br/><br/> <span class="text-muted"> 文件直接在线预览，不仅支持Office文件（Word、Excel、PowerPoint），还有PDF等一切文本类型的文件；项目拷贝功能可以让你快速的创建一系列具有相似流程的项目；任务和任务列表可以在不同项目之间移动。 </span> </div> ')}]),angular.module("/ycjs/tpl/common/pop_share_entity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_share_entity.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-when="select_share_method" class="popbox-step-li "> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择共享{{entity}}方式</h3> </div> <div class="popbox-body "> <ul class=" popbox-menu "> <li><a href="javascript:;" ng-click="js_step(\'share_by_email\')" class="w_280">发送到邮箱</a> </li> <li><a href="javascript:;" ng-click="js_step(\'share_by_link\')">发送共享链接</a> </li> </ul> </div> </li> <li ng-switch-when="share_by_email" class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <button class="back icon-chevron-left" ng-click="js_step(\'select_share_method\')"></button> <h3>通过邮件共享{{entity}}</h3> </div> <form name="share_entity_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form" data-ng-hide="send_success"> <div class="popbox-body"> <input name="share.email_address" ng-model="share.email_address" placeholder="邮箱地址(多个以分号隔开)" type="text" wt-multiple-email class="form-control w_260" required autofocus/> </div> <div class="popbox-footer"> <button wt-form-submit="js_share_entity(share_entity_form, share.email_address)" data-loading-text="发送中..." class="btn btn-success mr_15" loading-status="is_sharing">发送 </button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </form> <div class="popbox-body" data-ng-show="send_success"> <p class="alert alert-success">共享{{entity}}成功！</p> </div> </li> <li ng-switch-when="share_by_link" class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <button class="back icon-chevron-left" ng-click="js_step(\'select_share_method\')"></button> <h3>通过链接共享{{entity}}</h3> </div> <div class="popbox-body"> <dd ng-if="showing_link === false" class="w_260"> <span>生成共享链接，通过QQ、邮箱等方式发送给相关成员，他们即可直接通过链接访问当前{{entity}}。</span> <br> <br> <a href="javascript:;" ng-click="toggle_share_link()">生成链接</a> </dd> <dd ng-if="showing_link === true" class="w_260"> <input type="text" ng-model="share_link" wt-focus="input_link_focus" class="form-control help-block" readonly="readonly" wt-auto-click-select> <br> <a href="javascript:;" ng-click="toggle_share_link()">关闭链接</a> </dd> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/common/shortcutkey_dialog.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/shortcutkey_dialog.html",'<div class="modal-header"> <h3 class="icon-keyboard"> 键盘快捷键</h3> </div> <div class="modal-body"> <div class="shortcut-column row"> <div class="shortcut-section col-xs-4"> <h4>通用</h4> <ul> <li> <span class="key"><a>?</a></span> <span>打开快捷键帮助窗口</span> </li> <li> <span class="key"><a>~</a></span> <span>展开折叠左侧全局导航</span> </li> <li> <span class="key"><a>Esc</a></span> <span>退出编辑状态或者关闭弹出菜单/窗口</span> </li> <li> <span class="key"><a>E</a></span> <span>进入任务/话题/文件/文档的编辑状态</span> </li> <li> <span class="key"><a>W</a></span> <span>打开添加关注菜单</span> </li> <li> <span class="key"><a>Ctrl Enter</a></span> <span>发表评论</span> </li> <li> <span class="key"><a>@</a></span> <span>在评论中打开项目成员菜单</span> </li> <li> <span class="key"><a>:</a></span> <span>在评论中打开表情菜单</span> </li> </ul> </div> <div class="shortcut-section col-xs-4"> <h4>项目</h4> <ul> <li> <span class="key"><a>Shift T</a></span> <span>切换到任务</span> </li> <li> <span class="key"><a>Shift E</a></span> <span>切换到日历</span> </li> <li> <span class="key"><a>Shift F</a></span> <span>切换到文件</span> </li> <li> <span class="key"><a>Shift C</a></span> <span>切换到话题</span> </li> <li> <span class="key"><a>Shift D</a></span> <span>切换到文档</span> </li> <li> <span class="key"><a>Shift G</a></span> <span>切换到简报</span> </li> <li> <span class="key"><a>Shift A</a></span> <span>切换到活动</span> </li> <li> <span class="key"><a>Shift R</a></span> <span>切换到回收站</span> </li> </ul> </div> <div class="shortcut-section col-xs-4"> <h4>任务</h4> <ul> <li> <span class="key"><a>I</a></span> <span>打开新建任务窗口</span> </li> <li> <span class="key"><a>N</a></span> <span>打开新建列表窗口</span> </li> <li> <span class="key"><a>←</a></span> <span>向左导航选择任务</span> </li> <li> <span class="key"><a>↓/J</a></span> <span>向下导航选择任务</span> </li> <li> <span class="key"><a>↑/K</a></span> <span>向上导航选择任务</span> </li> <li> <span class="key"><a>→</a></span> <span>向右导航选择任务</span> </li> <li> <span class="key"><a>Enter</a></span> <span>打开选中的任务</span> </li> <li> <span class="key"><a>A</a></span> <span>选中任务上传附件</span> </li> <li> <span class="key"><a>C</a></span> <span>设置选中任务为完成</span> </li> <li> <span class="key"><a>D</a></span> <span>设置选中任务的截止日期</span> </li> <li> <span class="key"><a>L</a></span> <span>选中任务设置标签</span> </li> <li> <span class="key"><a>M</a></span> <span>选中任务分配成员</span> </li> <li> <span class="key"><a>Space</a></span> <span>当前选中任务分配给自己</span> </li> <li> <span class="key"><a>Shift &lt;</a></span> <span>移动选中任务到左侧列表中</span> </li> <li> <span class="key"><a>Shift &gt;</a></span> <span>移动选中任务到右侧列表中</span> </li> </ul> </div> <div class="shortcut-section-horizontal"> <h4>文档</h4> <ul> <li> <span class="key"><a>Ctrl L</a></span> <span>在文档文档滑出页面是切换到全屏</span> </li> </ul> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/common/watch_filter.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/watch_filter.html",'<ul class="nav nav-pills" ng-controller="filter_watch_ctrl"> <li ng-class="{true:\'active\'}[item.selected == true]" ng-repeat="item in filter_items"> <a href="javascript:;" ng-click="js_select_filter_item(item)">{{item.display_name}}</a> </li> </ul>')}]),angular.module("/ycjs/tpl/dashboard/broadcast_widget.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/broadcast_widget.html",'<div class="box-panel broadcast" ng-if="is_show"> <div class="box-panel-header"> <h4><i class="icon-signal mr_10"></i> 广播 <a href="javascript:;" class="pull-right" wt-track="dashboard|broadcastClose" ng-click="js_close()" tooltip="不再显示"> &times</a> </h4> </div> <div class="box-panel-body"> <a href="{{broadcast_msg.url}}" wt-track="dashboard|broadcast|broadcast_id|{{broadcast_msg.broadcast_id}}" target="_blank"> <img class="w_100p h_180" ng-src="{{broadcast_msg.cover}}" ng-if="broadcast_msg.cover" title="{{broadcast_msg.title}}" alt="{{broadcast_msg.title}}"> <h5>{{broadcast_msg.title}}</h5> </a> <span class="broadcast_desc">{{broadcast_msg.desc}}</span> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/calendar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/calendar.html",'<div class="layout_content"> <div class="layout_content_main" ng-class="{true:\'nosidebar_out\',false:\'nosidebar_in\'}[global.calendar_fold]"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-calendar mr_10"></i>日历</h3> </div> <div class="main text-center"> <div class="pull-left ml_20"> <button id="calendar_today" class="btn mr_15" ng-click="today()"> 今天 </button> </div> <span id="calendar_title_warp"> <a href="javascript:;" ng-click="prev()"><i class="icon-chevron-left"></i></a> <h4 id="calendar_title" class="help-inline p_0"></h4> <a href="javascript:;" ng-click="next()"><i class="icon-chevron-right"></i></a> </span> <div class="pull-right"> <button ng-disabled="!global.loading_done" class="btn btn-danger js-popbox mr_15" wt-new-event="js_new_event_success(events)" ng-hide="global.calendar_sidebar_view==\'task\'"> 新建日程 </button> <div class="btn-group mr_15"> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'month\']" ng-click="changeView(\'month\')">月 </button> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'basicWeek\']" ng-click="changeView(\'basicWeek\')">周 </button> </div> <button class="btn mr_15" wt-go-to="/calendar/subscribe">订阅 </button> <button class="btn" ng-click="js_toggle_right()"> <i ng-class="{true:\'icon-step-forward\',false:\'icon-step-backward\'}[global.calendar_fold]"></i> </button> </div> </div> </div> <div class="layout_content_main_nonav" wt-scroll> <dl class="frame" data-minheight="160"> <div id="calendar" calendar="myCalendar" ui-calendar="calendarConfig" ng-model="calendarEventSources"></div> </dl> </div> </div> <div class="layout_content_sidebar" ng-class="{true:\'in\',false:\'out\'}[global.calendar_fold]"> <ul class="layout_content_sidebar_header"> <li ng-class="{\'active\':(calendar_sidebar_view==\'event\')}" ng-click="js_change_calendar_siderview(\'event\')"> <a href="javascript:;">日程</a> </li> <li ng-class="{\'active\':(calendar_sidebar_view==\'task\')}" ng-click="js_change_calendar_siderview(\'task\')"> <a href="javascript:;">任务</a> </li> </ul> <div class="hr"></div> <div wt-scroll=\'{"scrollButtons":{"enable":true}}\' data-height="160"> <ul class="nav_list" ng-show="calendar_sidebar_view==\'event\'"> <li class="menu" ng-class="{false: \'unchecked\', true: \'checked\'}[project.is_checked]" ng-repeat="project in calendar_projects"> <a href="javascript:;" ng-click="js_filter_calendar_toggle(project)"> <i class="mr_5 icon-ok" ng-style="{true:{\'background\':project.bg,\'borderColor\':project.bg}}[project.is_checked]"> </i>{{project.name}} </a> </li> </ul> <ul class="nav_list" ng-show="calendar_sidebar_view==\'task\'"> <li class="group-menu" ng-class="{\'active\':show_my_task}"> <a href="javascript:;" ng-click="js_view_my_tasks();"> <i class="mr_5 icon-check"></i> 我的任务 <i ng-if="show_my_task" class="icon-ok"></i> </a> </li> <li class="group-menu" data-ng-repeat="team in calendar_teams"> <a href="javascript:;" data-ng-click="js_team_members_toggle(team)"> <i class="mr_5 icon-sitemap"></i> {{team.name}} <i class="icon-angle" ng-class="{true:\'icon-angle-down\',false:\'icon-angle-right\'}[team.expand == true]"></i> </a> <ul class="sub_nav_list" data-ng-show="team.expand"> <li class="part-loading" data-ng-hide="members_loading_done"> </li> <li class="sub-menu" ng-class="{\'active\':(show_task_uid == member.uid && show_task_team_id == current_team.team_id && !show_my_task)}" data-ng-repeat="member in team.members" data-ng-click="js_view_member_tasks(member,team)"> <wt-avatar member="member" name="true" size="30"></wt-avatar> <i ng-if="show_task_uid == member.uid && show_task_team_id == current_team.team_id && !show_my_task" class="icon-ok"></i> </li> </ul> </li> </ul> </div> <div class="layout_content_sidebar_footer"> <div class="hr"></div> <a href="javascript:;" data-ng-click="js_show_completed_tasks()" ng-if="calendar_sidebar_view==\'task\'" > <i class="mr_10" ng-class="{true:\'icon-eye-open\',false:\'icon-eye-close\'}[show_completed_tasks == 1]"></i> <span ng-bind="{true:\'隐藏已完成任务\',false:\'显示已完成任务\'}[show_completed_tasks == 1]"></span></a> <a href="javascript:;" data-ng-click="js_toggle_showall()" ng-if="calendar_sidebar_view==\'event\'" > <i class="mr_10" ng-class="{true:\'icon-eye-open\',false:\'icon-eye-close\'}[show_all_events==1]"></i> <span ng-bind="{true:\'只显示我的日程\',false:\'显示全部日程\'}[show_all_events==1]"></span></a> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/dashboard/calendar_subscribe.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/calendar_subscribe.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-calendar mr_10"></i>日历</h3> </div> <div class="main text-center"> <div class="pull-right"> <button class="btn mr_15" wt-go-to="/calendar/">返回 </button> <button class="btn mr_15 js-popbox" data-align="right" ng-click="reset_token($event)">重置订阅链接 </button> </div> </div> </div> <div class="layout_content_main_nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">日历订阅</span> </dt> <dd> <blockquote> <i class="icon-info-sign mr_5"></i> 通过订阅功能，在手机、平板电脑或者其他日历软件中查看团队日程 </blockquote> <div class="row"> <div class="col-md-6 p_20"> <div class="text-center"> <h3> 在 iPad 和 iPhone 上订阅 </h3> <div class="row"> <div class="col-md-8 col-md-offset-2"> <br/> <p class="fs_15 text-muted"> 使用 iPad 和 iPhone 扫描下方的二维码即可订阅团队日程 推荐使用 QQ 浏览器扫描 </p> <br/> </div> </div> <div class="well help-inlineblock"> <p ng-bind-html="qrcode"></p> </div> </div> </div> <div class="col-md-6 p_20"> <div class="text-center"> <h3>在其他日程管理软件中订阅</h3> <div class="row"> <div class="col-md-8 col-md-offset-2"> <br/> <p class="fs_15 text-muted">点击这个订阅地址直接订阅，或者复制到日历软件中手动添加</p> <br/> </div> <div class="col-md-8 col-md-offset-2"> <p class="alert alert-info text-break"> <a href="{{suburl}}" target="_blank">{{suburl}}</a> </p> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/dashboard.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/dashboard.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-dashboard mr_10"></i>工作台</h3> </div> <div class="main"> <div class="pull-right"> <ul class="tabs"> <li> <a href="javascript:;" ng-click="change_top_tab(\'my_feed\')" ng-class="{true: \'active\'}[dashbaord_top_tab == \'my_feed\']">最新动态</a> </li> <li> <a href="javascript:;" ng-click="change_top_tab(\'my_task\')" ng-class="{true: \'active\'}[dashbaord_top_tab == \'my_task\']">我的任务</a> </li> <li> <a href="javascript:;" ng-click="change_top_tab(\'my_email\')" ng-class="{true: \'active\'}[dashbaord_top_tab == \'my_email\']">我的邮件</a> </li> </ul> </div> </div> </div> <div class="main-content dashboard-panel height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <div> <div class="box-panel-body" data-ng-show="dashbaord_top_tab == \'my_feed\' "> <dt class="frame-dt"> <a href="javascript:;" class="title" title="刷新动态" ng-click="reload_feed()"> <span class="title">最新动态</span> </a> <span> <a href="javascript:;" class="js-popbox" tooltip="刷新动态" ng-click="js_refresh_feed($event);"> <i class="icon-refresh"></i> </a> </span> </dt> <div class="part-loading mt_20" data-ng-hide="initial_loading_done"></div> <div data-ng-show="initial_loading_done"> <div class="empty-panel noborder" data-ng-show="feeds.length == 0 && part_loading_done"> <i class="icon-time"></i> <br> <span>没有最新动态</span> </div> <div class="feed-list"> <div class="wt-row feed-item" bindonce="" ng-repeat="feed in feeds"> <wt-feed></wt-feed> </div> <div class="loading-more-panel "> <div class="part-loading " data-ng-hide=" part_loading_done"></div> <button class="btn" ng-show="my_feed_page_has_more && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_my_feed_more($event);"> 加载更多... </button> </div> </div> </div> </div> <div class="box-panel-body" data-ng-show="dashbaord_top_tab == \'my_task\' "> <dt class="frame-dt"> <span class="title">我的任务</span> <ul class="tabs"> <li> <a href="javascript:;" ng-click="change_task_tab(\'uncompleted\')" ng-class="{true: \'active\'}[task_tab == \'uncompleted\']">待完成</a> </li> <li> <a href="javascript:;" ng-click="change_task_tab(\'expired\')" ng-class="{true: \'active\'}[task_tab == \'expired\']">已过期</a> </li> <li> <a href="javascript:;" ng-click="change_task_tab(\'completed\')" ng-class="{true: \'active\'}[task_tab == \'completed\']">已完成</a> </li> </ul> </dt> <div class="part-loading mt_20" data-ng-hide="switching_sub_tab_loading_done"></div> <div ng-show="task_tab === \'uncompleted\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="uncompleted_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有未完成的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="uncompleted_tasks.length > 0"> <div class="group-item" ng-repeat="group in grouped_uncompleted_task"> <div class="group-header"> <span>{{group.phase}}</span> <span class="badge ml_20">{{group.tasks.length}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)" ng-repeat="task in group.tasks"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task" show-project="true"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"> </wt-avatar> </div> </div> </div> </div> </div> </div> <div ng-show="task_tab === \'expired\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="expired_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有已过期的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="expired_tasks.length > 0"> <div class="group-item" ng-repeat="task in expired_tasks"> <div class="group-header" ng-show="$index==0"> <span>过期任务</span> <span class="badge ml_20">{{expired_tasks.length}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task" show-project="true"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> </div> </div> <div ng-show="task_tab === \'completed\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="completed_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有已经完成的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="completed_tasks.length > 0"> <div class="group-item" ng-repeat="task in completed_tasks"> <div class="group-header" ng-show="task.is_show_date"> <span>{{ task.completed_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main" ng-class="{1:\'task-completed-style\'}[task.completed]"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task" show-project="true"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"></div> <button class="btn" ng-show="my_completed_task_page_has_more && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_my_completed_page_more($event);"> 加载更多... </button> </div> </div> </div> </div> </div> <div class="box-panel-body mail-list-panel" data-ng-show="dashbaord_top_tab == \'my_email\' "> <dt class="frame-dt"> <span class="title">我的邮件</span> <span> <a href="javascript:;" class="js-popbox" data-placement="bottom" data-align="right" ng-click="js_pop_showhelp($event);"> <i class="icon-info-sign"></i> </a> </span> </dt> <div class="part-loading mt_20" data-ng-hide="initial_loading_done"></div> <div ng-show="initial_loading_done"> <div class="empty-panel noborder" ng-if=" mails.length == 0"> <i class="icon-envelope-alt"></i> <br> <br> <p class="fs_17"> 你可以把重要邮件、微博、微信、网盘、Evernote等应用中的内容，转发到邮箱 <strong class="color_main">{{global.me.name}}@inbox.worktile.com</strong> <br>以便收集到Worktile，或者通过话题与团队成员分享。 </p> </div> <div class="mail-list"> <div class="mail-item wt-row" ng-repeat="mail in mails"> <div class="mail-item-inner slide-trigger"> <div class="column column-read"> <a href="javascript:;" ng-show="!mail.is_read" class="icon-envelope" title="标为已读" ng-click="js_set_mail_read($event,mail)"> </a> <a href="javascript:;" ng-show="mail.is_read" class="icon-envelope-alt" title="消息已读"> </a> </div> <div class="column column-action" data-ng-click="js_open_mail_detail(mail)"> <h4>{{mail.subject}}</h4> <span class="entity"> <span ng-bind="mail.from"></span> </span> </div> <div class="column column-datetime"> <span>&nbsp;{{mail.create_date | fromNow}}</span></div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"></div> <button class="btn" ng-show="my_email_page_has_more && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_my_email_page_more($event);"> 加载更多... </button> </div> </div> </div> </div> </div> </dl> </div> </div> <div class="right-panel"> <div class="box-panel my-tasks-overview"> <div class="box-panel-header hello-body"> <wt-avatar member="global.me" status="true" size="50" wt-disable-drag></wt-avatar> <div class="hello-right"> <h4>{{global.me.display_name}}, {{hi_greetings}}</h4> <br> <span>{{show_date}}</span> </div> </div> <div class="box-panel-body"> <ul> <li class="tasks-uncompleted"> <a href="javascript:;" ng-click="go_to_my_task_uncompleted()"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.uncompleted}}</span> <span class="text">待完成任务</span> </a> </li> <li class="tasks-expired"> <a href="javascript:;" ng-click="go_to_my_task_expired()"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.expired}}</span> <span class="text">过期任务</span> </a> </li> <li class="tasks-completed noborder"> <a href="javascript:;" ng-click="go_to_my_task_completed()"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.completed}}</span> <span class="text">已完成任务</span> </a> </li> </ul> </div> </div> <div class="box-panel today-event"> <div class="box-panel-header"> <h4><i class="icon-calendar-empty mr_10"></i>今天日程</h4> </div> <div class="box-panel-body"> <div class="part-loading" data-ng-hide="today_events.length >= 0"></div> <div class="empty-panel min-height noborder" data-ng-show="today_events.length == 0"> <i class="icon-calendar-empty"></i> <br> <span>今天没有日程安排</span> </div> <ul data-ng-show="today_events.length > 0"> <li data-ng-repeat="event in today_events"> <span>{{event.start.date | timeFormat}}</span> <a href="javascript:;" data-ng-click="locator.to_event(event.pid, event.event_id, true);"> {{event.name}}</a> </li> </ul> </div> </div> <ng-include ng-controller="broadcast_widget_ctrl" src="\'/ycjs/tpl/dashboard/broadcast_widget.html\'"></ng-include> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/dashboard/inbox.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/inbox.html",'<div class="height-noheader"> <div class="mod_navbar clickable" ng-click="$root.global.show_inbox=false"> <div class="title"> <h3><i class="icon-bell-alt mr_10"></i>消息中心</h3> </div> <div class="main"> <div class="pull-right"> <a href="#" class="mr_10" tooltip-placement="bottom" tooltip="收起"> <i class="icon-chevron-up"></i> </a> </div> </div> </div> <div class="rightpanel-wrapper" ng-show="global.loading_done"> <div class="height-nonav notice-list-panel" wt-scroll> <dl class="frame" data-minheight="148"> <dt> <span> <a ng-if="vm.tab == \'unread\'" href="javascript:;" ng-click="js_set_all_notice_read()"> 全部标为已读 </a> <a ng-if="vm.tab == \'pending\'" href="javascript:;" ng-click="js_handle_all_notice()"> 全部标为已处理 </a> </span> <ul class="tabs"> <li> <a ng-class="{\'active\':vm.tab == \'unread\'}" href="javascript:;" ng-click="js_switch_tab(\'unread\')">未读</a> </li> <li> <a ng-class="{\'active\':vm.tab == \'pending\'}" href="javascript:;" ng-click="js_switch_tab(\'pending\')">待处理</a> </li> <li> <a ng-class="{\'active\':vm.tab == \'read\'}" href="javascript:;" ng-click="js_switch_tab(\'read\')">已读</a> </li> </ul> </dt> <dd class="notice-list"> <div ng-show="vm.tab == \'read\'"> <div class="notice-item wt-row " bindonce="" ng-repeat="notice in vm.read_notices"> <wt-notice notice-click="js_show_slide_detail($eType,notice,$entity)"></wt-notice> </div> <div class="notice-empty text-center" ng-show="vm.read_notices.length == 0 && vm.part_loading_done"> <i class="icon-bell-alt"></i><br/><br/> <span>没有已读消息</span> </div> <div class="loading-more-panel" ng-show="!vm.has_no_more && vm.part_loading_done"> <button class="btn" ng-click="js_load_more_notice()">加载更多... </button> </div> <div class="load-more part-loading" ng-hide="vm.part_loading_done"></div> </div> <div ng-show="vm.tab == \'unread\'"> <div class="notice-item wt-row" bindonce="" ng-repeat="notice in vm.unread_notices"> <wt-notice notice-click="js_show_slide_detail($eType,notice,$entity)"></wt-notice> </div> <div class="notice-empty text-center" ng-show="vm.unread_notices.length == 0 && vm.part_loading_done"> <i class="icon-bell-alt"></i><br/><br/> <span>没有未读消息</span> </div> <div class="load-more part-loading" ng-hide="vm.part_loading_done"></div> </div> <div ng-show="vm.tab == \'pending\'"> <div class="notice-item wt-row" bindonce="" ng-repeat="notice in vm.pending_notices"> <wt-notice></wt-notice> </div> <div class="notice-empty text-center" ng-show="vm.pending_notices.length == 0 && vm.part_loading_done"> <i class="icon-bell-alt"></i><br/><br/> <span>没有待处理的消息</span> </div> <div class="load-more part-loading" ng-hide="vm.part_loading_done"></div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/pop_dashboard_mailhelp.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/pop_dashboard_mailhelp.html",'<ul class="popbox-step w_300" wt-stop-propagation> <li class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>提示</h3> </div> <div class="popbox-body"> 你可以把重要邮件、微博、微信、网盘、 Evernote等应用中的内容， 转发到邮箱 <br/> <br/> <blockquote> <strong class="color_main text-break">{{global.me.name}}@inbox.worktile.com</strong> </blockquote> 以便收集到Worktile，或者通过话题与 团队成员分享。 </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/dashboard/projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/projects.html",'<div class="layout_content"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-inbox mr_10"></i>项目</h3> </div> <div class="main"> <div class="pull-right"> <ul class="tabs"> <li> <a href="/projects" ng-class="{true: \'active\'}[top_tab == \' \']">我参与的</a> </li> <li> <a href="/projects/fav" ng-class="{true: \'active\'}[top_tab == \'fav\']">我收藏的</a> </li> <li> <a href="/projects/archive" ng-class="{true: \'active\'}[top_tab == \'archive\']">归档项目</a> </li> </ul> </div> </div> </div> <div class="layout_content_main no_sidebar height-nonav" wt-scroll> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="projects-panel" data-ng-show="part_loading_done"> <div class="project-grid-panel"> <div class="projects-panel-header" ng-hide="(projects | filter:{is_star:1}).length==0"><i class="icon-star"></i> 常用项目 <span class="badge">{{(projects | filter:{is_star:1}).length}}</span> </div> <div class="project-grid ui-sortable" sortable="project_sort_options" ng-hide="(projects | filter:{is_star:1}).length==0"> <wt-project-grid-item ng-repeat="project in projects | filter:{is_star:1}"></wt-project-grid-item> </div> <div data-ng-repeat="team in teams"> <div class="projects-panel-header"> <a ng-if="team.team_id && team.team_id != \'-1\'" href="/teams/{{team.team_id}}"><i class="icon-sitemap"></i> {{team.name}}<span class="badge">{{team.projects.length}}</span></a> <span ng-if="team.team_id && team.team_id == \'-1\'"><i class="icon-user"></i> {{team.name}} </span> <span class="badge" ng-if="team.team_id && team.team_id == \'-1\'">{{team.projects.length}}</span> </div> <div class="project-grid" ng-class="{\'ui-sortable\':team.projects.length!=0}" sortable="{true:project_sort_options}[team.projects.length!=0]"> <wt-project-grid-item ng-repeat="project in team.projects"></wt-project-grid-item> <div class="project-item projects-empty" ng-show="team.projects.length==0"> <a class="center" href="javascript:;" wt-disable-drag> <i class="icon-inbox"></i> <h4>还没有参与任何项目</h4> </a> </div> </div> </div> <div class="empty-panel" ng-show="projects.length == 0 && teams.length == 0 && part_loading_done" ng-cloak> <i class="icon-inbox"></i> <br/> <span>还没有任何参与项目</span> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/dashboard/projects_archive.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/projects_archive.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-inbox mr_10"></i>项目</h3> </div> <div class="main"> <div class="pull-right"> <ul class="tabs"> <li> <a href="/projects" ng-class="{true: \'active\'}[top_tab == \' \']">我参与的</a> </li> <li> <a href="/projects/fav" ng-class="{true: \'active\'}[top_tab == \'fav\']">我收藏的</a> </li> <li> <a href="/projects/archive" ng-class="{true: \'active\'}[top_tab == \'archive\']">归档项目</a> </li> </ul> </div> </div> </div> <div class="layout_content_main no_sidebar height-nonav" wt-scroll> <div class="project-list project-panel"> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <dl class="frame" data-minheight="160" ng-show="part_loading_done"> <dt> <span class="title">归档项目</span> </dt> <dd> <div class="empty-panel" ng-show="archived_projects.length === 0"> <i class="icon-archive"></i> <br/> <span>没有任何归档项目</span> </div> <div class="wt-row" ng-repeat="project in archived_projects" wt-go-to="/project/{{project.pid}}"> <div class="column column-star"> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> <wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member="member" size="30"></wt-avatar> </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </dd> </dl> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/dashboard/projects_fav.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/projects_fav.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-inbox mr_10"></i>项目</h3> </div> <div class="main"> <div class="pull-right"> <ul class="tabs"> <li> <a href="/projects" ng-class="{true: \'active\'}[top_tab == \' \']">我参与的</a> </li> <li> <a href="/projects/fav" ng-class="{true: \'active\'}[top_tab == \'fav\']">我收藏的</a> </li> <li> <a href="/projects/archive" ng-class="{true: \'active\'}[top_tab == \'archive\']">归档项目</a> </li> </ul> </div> </div> </div> <div class="layout_content_main no_sidebar height-nonav" wt-scroll> <div class="project-list project-panel"> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <dl class="frame" data-minheight="160" ng-show="part_loading_done"> <dt> <span class="title">我收藏的项目</span> </dt> <dd> <div class="empty-panel" ng-if="favorite_projects.length === 0"> <i class="icon-inbox"></i> <br/> <span>没有收藏任何项目</span> </div> <div class="wt-row" ng-repeat="project in favorite_projects"> <div class="column column-star"> <a class="star" ng-class="{1: \'star-started\', 0: \'\'}[project.is_favorite]" href="javascript:;" tooltip-placement="bottom" ng-click="js_favorite_toggle($event,project)" tooltip="{{{1:\'取消收藏\',0:\'收藏\'}[project.is_favorite]}}"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_favorite]" class="icon-star"></i> </a> </div> <div class="column column-icon" wt-go-to="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name" wt-go-to="/project/{{project.pid}}"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> <wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member="member" size="30"></wt-avatar> </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </dd> </dl> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/dashboard/search_result.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/search_result.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-search mr_10"></i>搜索结果</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="rightpanel-wrapper" ng-show="global.loading_done"> <div class="height-nonav seach-panel task-list-panel" wt-scroll> <dl class="frame" data-minheight="160"> <div class="search"> <div class="checkbox"> <label> <input ng-model="is_hide_archived" type="checkbox"> 隐藏归档任务 </label> </div> <div class="input-group" wt-enter="js_search()"> <input type="text" ng-model="keywords" class="form-control col-lg-6"/> <span class="input-group-btn"> <button class="btn btn-success" type="button" data-ng-click="js_search()">搜索</button> </span> </div> </div> <dt> <ul class="tabs"> <li class="menu"> <a ng-class="{true: \'active\'}[current_type==\'all\']" href="javascript:;" ng-click="js_filter_result(\'all\')"> 全部 </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'task\']" href="javascript:;" ng-click="js_filter_result(\'task\')"> 任务 </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'event\']" href="javascript:;" ng-click="js_filter_result(\'event\')"> 日程 </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'file\']" href="javascript:;" ng-click="js_filter_result(\'file\')"> 文件 </a> </li> <li class="menu"> <a ng-class="{true: \'active\'}[current_type == \'post\']" href="javascript:;" ng-click="js_filter_result(\'post\')"> 话题 </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'page\']" href="javascript:;" ng-click="js_filter_result(\'page\')"> 文档 </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'mail\']" href="javascript:;" ng-click="js_filter_result(\'mail\')"> 邮件 </a> </li> </ul> </dt> <dd> <div class="empty-panel height-nonav" ng-show="show_empty && !loading_result && global.loading_done" ng-cloak> <i class="icon-search"></i><br/> <span>没有搜索结果</span> </div> <div class="part-loading" data-ng-show="loading_result"></div> <div class="group-list" data-ng-hide="loading_result || show_empty"> <div class="group-item" data-ng-show="tasks.length > 0 && (current_type == \'all\' || current_type == \'task\')"> <div class="group-header"> <span>任务</span> <span class="badge ml_20">{{ {true: (tasks | filter: {archived:0}).length, false: tasks.length}[!!is_hide_archived] }}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_task(task.pid, task.tid, true)" ng-repeat="task in tasks" ng-hide="task.archived == 1 && !!is_hide_archived"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title" ng-bind-html="task.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> <div class="group-item" data-ng-show="events.length > 0 && (current_type == \'all\' || current_type == \'event\')"> <div class="group-header"> <span>日程</span> <span class="badge ml_20">{{events.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_event(event.pid, event.event_id, true)" ng-repeat="event in events"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-calendar"></i> </a> <span class="task-title" > <span ng-bind-html="event.name | highlight:keywords:caseSensitive"></span> </span> </div> </div> </div> </div> <div class="group-item" data-ng-show="files.length > 0 && (current_type == \'all\' || current_type == \'file\')"> <div class="group-header"> <span>文件</span> <span class="badge ml_20">{{files.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="js_show_file(file)" ng-repeat="file in files"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i ng-class="{true:\'icon-file\',false:\'icon-folder-close-alt\'}[(file.type | isFile)]"></i> </a> <span class="task-title" > <span ng-bind-html="file.name | highlight:keywords:caseSensitive"></span> <span ng-if="!(file.type | isFile)">{{file.project_name}}</span> </span> </div> </div> </div> </div> <div class="group-item" data-ng-show="posts.length > 0 && (current_type == \'all\' || current_type == \'post\')"> <div class="group-header"> <span>话题</span> <span class="badge ml_20">{{posts.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_post(post.pid, post.post_id, true)" ng-repeat="post in posts"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-list-alt"></i> </a> <span class="task-title" ng-bind-html-unsafe="post.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> <div class="group-item" data-ng-show="pages.length > 0 && (current_type == \'all\' || current_type == \'page\')"> <div class="group-header"> <span>文档</span> <span class="badge ml_20">{{pages.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_page(page.pid, page.page_id, true)" ng-repeat="page in pages"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-file-text-alt"></i> </a> <span class="task-title" ng-bind-html-unsafe="page.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> <div class="group-item" data-ng-show="mails.length > 0 && (current_type == \'all\' || current_type == \'mail\')"> <div class="group-header"> <span>邮件</span> <span class="badge ml_20">{{mails.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_mail(mail.mail_id)" ng-repeat="mail in mails"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-envelope-alt"></i> </a> <span class="task-title" ng-bind-html-unsafe="mail.subject | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/directive/activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/activity.html",'<div> <div class="activity-day" ng-show="activity.is_show_date"> <span class="year">{{[activity.published,\'YYYY\'] | momentFormat}}年<br/></span> <strong>{{[activity.published,\'MM/DD\'] | momentFormat}}<br/></strong> <span class="weekday">{{[activity.published,\'ddd\'] | momentFormat}}</span> </div> <div class="activity-icon"> <i ng-class="activity.verb | activityIcon"></i> </div> <div class="activity-meta"> <span class="date" wt-title="[activity.published,\'HH:mm\'] | momentFormat">{{[activity.published,\'HH:mm\'] | momentFormat}}</span> </div> <wt-avatar member="activity.actor" size="30" class="activity-avatar"></wt-avatar> <div class="activity-itemwarp"> <span class="activity"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb" ng-bind-html-unsafe="verb"></span> <a class="target" title="{{display_entity.name}}" href="javascript:;" ng-click="js_to_entity(display_entity)"> {{display_entity.name}} </a> </span> </div> </div>')}]),angular.module("/ycjs/tpl/directive/add_pop_attachment_from_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/add_pop_attachment_from_file.html",'<ul class="popbox-step" wt-stop-propagation=""> <li class="popbox-step-li"> <div class="popbox-header"> <button ng-if="folder_ids.length > 0" class="back icon-chevron-left" ng-click="go_back()"> </button> <button ng-if="folder_ids.length == 0 && has_go_further_back" class="back icon-chevron-left" ng-click="go_back_further()"> </button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>从项目文件选择</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body" > <ul class="popbox-menu"> <li ng-repeat="file in files_controls.files" ng-click="js_attach(file)"> <a class="file-item-li-menu ellipsis" ng-class="{0:\'file-picfile\', 1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}" /> <span class="">{{file.name}}</span> </a> </li> <li ng-show="files_controls.files.length == 0 && files_controls.loading_done"> <div class="empty-menu">没有文件</div> </li> </ul> </div> <div class="popbox-footer top-divider" ng-show="files_controls.has_more_files"> <div class="loading-more-panel" > <div class="part-loading" ng-hide="files_controls.loading_done"></div> <a class="action-item" href="javascript:;" ng-click="load_more();" data-loading-text="加载中..." ng-show="files_controls.loading_done" > <span class=" "> 加载更多... </span> </a> </div> </div> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/directive/attachment.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/attachment.html",'<div class="attachment"> <a class="file-picfile {{[file.ext,\'fancybox-file\'] | ifImgExtSetClass}}" ng-href="{{ {2:\'/files/\'+file.fid+\'/preview\'}[(file | isPreviewFile)] }}" target="_blank" data-fancybox-group="filegroup-attachment" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <span ng-if="file.error" > <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> </span> <img ng-if="!file.preview" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <a class="file-name" href="javascript:;" ng-click="js_goto_file(pid, file.fid)" title="{{file.name}}"> {{file.name}} </a> <span class="file-size">{{file.size | fileSize}}</span> <span class="file-action"> <a ng-if="(file | isPreviewFile)==2" class="file-preview" target="_blank" href="/files/{{file.fid}}/preview"> <i class="icon-cancel"></i>预览 </a> <a class="file-cancel" href="javascript:;" ng-click="file.$cancel()" ng-hide="!file.$cancel"> <i class="icon-cancel"></i>取消 </a> <a class="file-down" ng-href="{{file | wtBoxDownload}}" target="_blank" ng-if="!file.$progress()"> 下载 </a> </span> <div ng-if="!file.error" class="pull-left mr_15 progress progress-striped active" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"> </div> </div> </div> ')
}]),angular.module("/ycjs/tpl/directive/avatar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/avatar.html",'<a class="avatar"> <span class="avatar-face"> </span> </a> ')}]),angular.module("/ycjs/tpl/directive/avatar_pop.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/avatar_pop.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button class="btn btn-danger">DD</button> </div> </div>')}]),angular.module("/ycjs/tpl/directive/badges.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/badges.html",'<div class="task-badges"></div>')}]),angular.module("/ycjs/tpl/directive/confirm_password.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/confirm_password.html",'<div class="confirm-password"> <span class="caption">输入帐号密码</span> <form class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="confirm_password_form" role="form" novalidate> <wt-avatar member="global.me" name="true" namebr="true" atname="true" size="80"></wt-avatar> <br/> <span class="text"> 确认是您本人操作，请输入当前帐户密码并继续 </span> <div class="form-group"> <input name="confirm_password" ng-model="confirm_password" class="form-control" type="password" autofocus="autofocus" required="" placeholder="输入当前帐户密码"/> </div> <div class="form-group" ng-show="confirm_password_form.$errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{confirm_password_form.$errors[0]}} </div> </div> <div class="form-group"> <a class="btn btn-success btn-block" wt-form-submit="js_confirm_password(confirm_password_form)" data-loading-text="确认中..." loading-status="confirming">确认并继续</a> </div> <div class="form-group clearfix"> <a data-ng-click="js_forgot_password()" href="javascript:;" class="pull-left">忘记密码?</a> <a data-ng-click="js_cancel_option()" href="javascript:;" class="pull-right">取消</a> </div> </form> </div> ')}]),angular.module("/ycjs/tpl/directive/datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/datepicker.html",'<div> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'today\')">今天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'tomorrow\')">明天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'week\')">本周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'next_week\')">下周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'month\')">本月</a> </li> </ul> <div class="wtdate"></div> </div>')}]),angular.module("/ycjs/tpl/directive/editor.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/editor.html",'<div class="gollum-editor-wrap"> <div class="gollum-editor"> <div class="gollum-editor-function-bar active"> <div class="gollum-editor-function-buttons"> <div class="btn-group mr_10"> <a class="btn btn-min function-button function-bold" title="粗体"><span>粗体</span></a> <a class="btn btn-min function-button function-italic" title="斜体"><span>斜体</span></a> </div> <div class="btn-group mr_10"> <a class="btn btn-min function-button js-popbox function-link" data-placement="bottom" title="链接" ng-click="$popInsertLink($event)"><span>插入链接</span></a> <a class="btn btn-min function-button js-popbox function-image" data-placement="bottom" title="图片" ng-click="$popInsertImage($event)"><span>插入图片</span></a> </div> <div class="btn-group"> <a class="btn btn-min function-button function-ul" title="无序列表"><span>无序列表</span></a> <a class="btn btn-min function-button function-ol" title="有序列表"><span>有序列表</span></a> <a class="btn btn-min function-button function-blockquote" title="引用"><span>引用</span></a> <a class="btn btn-min function-button function-hr" title="水平分割线"><span>水平分割线</span></a> </div> </div> </div> <div class="ng-transclude" ng-transclude></div> </div> </div>')}]),angular.module("/ycjs/tpl/directive/entity_item_deny.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/entity_item_deny.html",'<div class="empty-panel" ng-show="section_loading_done && !(global.prj_module.view | permission:entity_permission)"> <i class="icon-ban-circle"></i> <br> <span ng-hide="entity_not_found_msg.length > 0">你没有权限访问该项目<br>该项目被删除或者你不是该项目的成员。</span> <span ng-show="entity_not_found_msg.length > 0">{{entity_not_found_msg}}</span> </div>')}]),angular.module("/ycjs/tpl/directive/feed.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/feed.html",'<div class="feed-item-inner slide-trigger" ng-click="js_click_feed()"> <div class="column column-actor"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> </div> <div class="column column-action"> <h4 bo-text="action"></h4> <span class="entity"> <i bo-class="type_icon.icon"></i> <span bo-html="display_entity.name"></span> </span> </div> <div class="column column-datetime"> <span bo-text="feed.published | fromNow"></span> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/file_item.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/file_item.html",'<div ng-hide="file.is_hide"> <div class="wt-header file-item-list" ng-if="$index==0 && item_view_type==\'list\'"> <div class="column column-pic"></div> <div class="column column-name">文件名</div> <div class="column column-size">大小</div> <div class="column column-meta">更新时间</div> </div> <div ng-if="item_view_type==\'list\'" file-id="{{file.fid}}" class="wt-row file-item-list file-item-mark right_click_trigger js-popbox" data-placement="bottom" data-align="left" ng-class="{\'active\':file.fid == locator.show_detail_file_id}"> <div class="column column-name slide-trigger" ng-click="js_navigate($event,file)"> <img class="pic" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <a class="name" href="javascript:;">{{file.name }}</a> </div> <div class="column column-size"> &nbsp;{{(file.size | fileSize) || ""}} </div> <div class="column column-meta"> {{file.update_user.display_name}} 更新于 <span class="date">{{file.update_date | fromNow}}</span> </div> </div> <div ng-if="item_view_type==\'icon\'" file-id="{{file.fid}}" file-type="{{file.type}}" droppable="folder_droppable_options" draggable="file_draggable_options" class="file-item file-item-icon file-item-mark right_click_trigger js-popbox" data-placement="bottom" data-align="left" wt-title="{0:file.name + \'\\n大小：\' + (file.size | fileSize) + \'\\n修改时间：\' + (file.update_date | timeFormatZHCN), 1:file.name + \'\\n修改时间：\' + (file.update_date | timeFormatZHCN)}[file.type]"> <a href="javascript:;" class="file-menu js-popbox" ng-if="(((file.type | isFolder) && (global.prj_module.crud | permission:project.info.permission)) || (file.type | isFile) && (global.prj_module.watch | permission:project.info.permission))" data-placement="right" data-align="auto" ng-click="js_show_menu($event, file)"> <i class="icon-play-circle"></i> </a> <a class="file-pic" ng-class="{0:\'file-picfile fancybox-file\',1:\'file-picfolder\',2:\'file-preview\'}[(file | isPreviewFile)]" ng-href="{{ {2:\'/files/\'+file.fid+\'/preview\'}[(file | isPreviewFile)] }}" target="_blank" data-fancybox-group="filegroup-files" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" ng-click="js_navigate($event,file)" title="{{ file.name }}"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> </a> <div class="file-name"> <a class="slide-trigger" ng-click="js_navigate($event,file)"> {{file.name}} </a> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/item_comment_activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/item_comment_activity.html",'<tabset class="tabbable"> <tab heading="评论" active="tab_active.tab_comment_active" select="select_tab_comment()"> <ng-include src="\'/ycjs/tpl/common/comment_list.html\'"></ng-include> </tab> <tab heading="活动" active="tab_active.tab_activity_active" select="select_tab_activity()"> <ng-include ng-controller="item_activity_ctrl" src="\'/ycjs/tpl/activity/activity_list.html\'"></ng-include> </tab> </tabset> ')}]),angular.module("/ycjs/tpl/directive/master_new.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/master_new.html",'<ul class="popbox-step" ng-switch on="currentStep" wt-stop-propagation=""> <li ng-switch-when="1" class="popbox-step-li w_360"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="back()" ng-hide="currentStep==dialogEntryStep"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li id="global_create_project"> <a href="javascript:;" ng-click=\'show_new_project_dialog($event)\'> <i class="icon-inbox"></i> 新建项目 <br> <span class="text-muted"> 项目是一组成员和一组任务、文件、话题、文档、日程的集合。 </span> </a> </li> <li class="divider"></li> <li id="global_create_team"> <a href="javascript:;" ng-click=\'show_new_team_dialog($event)\'> <i class="icon-sitemap"></i> 新建团队 <br> <span class="text-muted"> 团队可以是一个公司或者一个部门，使用团队组织项目和成员。 </span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li w_360"> <div id="project"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="back()" ng-hide="currentStep==dialogEntryStep"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建项目</h3> </div> <div class="popbox-body"> <form name="add_prj_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="form-group"> <label class="control-label"> <strong>项目名称：</strong> </label> <input name="prj_name" ng-model="data.prjName" placeholder="项目名称" class="form-control" type="text" wt-focus="projectNameInputFocus" required/> </div> <div class="form-group"> <label class="control-label pt_0"> <strong>所有者：</strong> </label> <a href="javascript:;" class=" help-block plr_5" ng-model="data.current_team" ng-click="show_select_team_dialog($event)"> <i class="icon-user" ng-show="data.current_team.team_id == -1"></i> <i class="icon-sitemap" ng-show="data.current_team.team_id != -1"></i> {{data.current_team.name}} <i class="pull-right icon-chevron-right"></i> </a> </div> <div class="form-group"> <label class="control-label"> <strong>公开性：</strong> </label> <a href="javascript:;" class="help-block plr_5" ng-click="show_visibility_dialog($event)"> <i class="{{data.visibility.icon}} mr_5"></i> {{data.visibility.desc}} <i class="pull-right icon-chevron-right"></i> </a> </div> <div class="form-group" ng-if="add_prj_form.$errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_prj_form.$errors[0]}} </div> </div> <div> <button wt-form-submit="js_add_prj(add_prj_form, data.current_team.team_id, data.prjName, desc, data.visibility.visibility)" class="btn btn-success mr_15" data-loading-text="保存中..." loading-status="is_saving_project">创建 </button> <button ng-click="js_close()" class="btn float_left">取消</button> </div> </form> </div> </div> </li> <li ng-switch-when="3" class="popbox-step-li w_360"> <div id="team" class=""> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="back()" ng-hide="currentStep==dialogEntryStep"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建团队</h3> </div> <div class="popbox-body"> <form name="add_team_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="form-group"> <label class="control-label">团队名称：</label> <div class=""> <input name="team_name" ng-model="name" placeholder="团队名称" class="form-control" type="text" wt-focus="teamNameInputFocus" required/> </div> </div> <div class="form-group"> <label class="control-label">团队描述：</label> <div class=""> <textarea ng-model="desc" placeholder="为团队添加简短描述（可选）" rows="4" class="form-control" /> </div> </div> <div class="form-group" ng-if="add_team_form.$errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_team_form.$errors[0]}} </div> </div> <div> <button wt-form-submit="js_add_team(add_team_form, name, desc)" class="btn btn-success mr_15" data-loading-text="保存中..." loading-status="is_saving_team">创建 </button> <button ng-click="js_close()" class="btn float_left">取消</button> </div> </form> </div> </div> </li> <li ng-switch-when="4" class="popbox-step-li w_360"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="back()" ng-hide="currentStep==dialogEntryStep"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>项目公开性</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="set_private($event)"> <i class="icon-private mr_5"></i> <strong>{{visibilityArr[0].desc}}</strong> <i class="icon-ok p_5 text-muted pull-right" ng-if="data.visibility.visibility==1"></i> <br> <span class="text-muted"> {{visibilityArr[0].intro}} </span> </a> </li> <li class="divider" ng-hide="data.current_team.team_id == -1"></li> <li ng-hide="data.current_team.team_id == -1"> <a href="javascript:;" ng-click="set_protected($event)"> <i class="icon-protected mr_5"></i> <strong>{{visibilityArr[1].desc}}</strong> <i class="icon-ok p_5 text-muted pull-right" ng-if="data.visibility.visibility==2"></i> <br> <span class="text-muted"> {{visibilityArr[1].intro}} </span> </a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="set_public($event)"><i class="icon-public mr_5"></i> <strong>{{visibilityArr[2].desc}}</strong> <i class="icon-ok p_5 text-muted pull-right" ng-if="data.visibility.visibility==3"></i> <br> <span class="text-muted"> {{visibilityArr[2].intro}} </span></a> </li> </ul> </div> </li> <li ng-switch-when="5" class="popbox-step-li w_360"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="back()" ng-hide="currentStep==dialogEntryStep"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择所有者</h3> </div> <div class="popbox-body"> <ul class="popbox-menu max-h360" wt-scroll> <li ng-repeat="team in owner_teams"> <a ng-click="select_team($event, owner_teams[$index])"> <i class="icon-user" ng-show="team.team_id == -1"></i> <i class="icon-sitemap" ng-show="team.team_id != -1"></i> {{team.name}} <i class="icon-ok p_5 text-muted pull-right" ng-if="data.current_team==owner_teams[$index]"></i> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="show_new_team_dialog($event)"> <i class="icon-plus-sign-alt"></i> 新建团队 </a> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/directive/new_comment.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/new_comment.html",'<wt-avatar member="$root.global.me" size="40" class="new-comment-avatar"></wt-avatar> <div class="new-comment-edit"> <textarea wt-ctrl-enter="$js_save_comment($event,$comment)" atwho-members="atwho_members" wt-atwho="" placeholder="说点什么(按Ctrl + 回车键提交)" wt-pastefile="pastefile_option_comment" ng-model="comment.message"> </textarea> <!-- <div class="comment-edit-wrapper" wt-ctrl-enter="$js_save_comment($event,$comment)" atwho-members="atwho_members" wt-atwho atwho-keydown="$js_metion_member($event, comment)" placeholder="说点什么(按Ctrl + 回车键提交)" wt-pastefile="pastefile_option_comment" ng-model="comment.message"> <wt-new-editor mode="mini" edit-content="comment.message" pid="pid"> </wt-new-editor> </div> --> <div class="comment-upload-queue"> <div class="comment-attachments"> <wt-attachment ng-repeat="file in comment.files | filter:checkFilePid()" del="js_del_attachment_comment($event, file)"></wt-attachment> </div> <div class="comment-upload-item" ng-repeat="file in global_fileupload_queue_comment()"> <div class="file-name" title="{{file.name}}">{{file.name}}</div> <span class="error" ng-if="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> <br/> </span> <div ng-hide="file.error" class="progress progress-striped active" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" ng-style="{width: num + \'%\'}"></div> </div> <span href="javascript:;" class="cancel" ng-click="file.$cancel()" ng-hide="!file.$cancel"> 取消 </span> </div> </div> <div class="add-controls"> <ul class="nav nav-pills"> <li class="btn-group js-popbox dropup mr_5" data-placement="left" data-align="bottom"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="添加附件"> <i class="icon-paper-clip"></i> </a> <ul class="dropdown-menu"> <li><a href="javascript:;" class="fileinput-button"><i class="icon-desktop"></i>本地上传 <input type="file" name="files[]" title="添加附件" multiple wt-uploadfile="file_upload_option_comment"/></a></li> <li> <a href="javascript:;" add-file-from-project="project.info.pid" > <i class="icon-file"></i> 从项目文件选择 </a> </li> </ul> </li> <li class="divider-v"></li> <li class="js-popbox mr_10"> <a ng-click="$js_pop_emojis($event, comment)" data-placement="right" data-align="top" href="javascript:;"> <i class="icon-smile"></i> </a> </li> <li> <a ng-click="$js_metion_member($event, comment)" class="js-popbox mr_10 font_at" data-placement="right" data-align="top" href="javascript:;">@</a> </li> </ul> <button class="btn btn-success pull-right" data-loading-text="保存中..." loading-status="comment.is_saving" ng-disabled="global_fileupload_queue_comment().length!=0" ng-click="$js_save_comment($event)">{{ {true:\'文件上传中...\',false:\'发表评论\'}[global_fileupload_queue_comment()!=0] }} </button> </div> </div>')}]),angular.module("/ycjs/tpl/directive/notice.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/notice.html",'<div class="notice-item-inner slide-trigger" ng-click="js_click_notice()"> <div class="column column-read"> <a href="javascript:;" ng-show="!notice.is_read" class="icon-envelope mr_15" tooltip="标为已读" ng-click="js_set_notice_read($event,notice)"> </a> <a href="javascript:;" ng-show="notice.is_read" class="icon-envelope-alt mr_15" tooltip="消息已读"> </a> <a href="javascript:;" ng-click="js_toggle_notice_pending($event,notice)" ng-if="!notice.is_pending" class="icon-flag-alt" tooltip="标为待处理"> </a> <a href="javascript:;" ng-click="js_toggle_notice_pending($event,notice)" ng-if="notice.is_pending" class="icon-flag" tooltip="标为已处理"> </a> </div> <div class="column column-sender"> <wt-avatar member="notice.sender" name="true" size="30"></wt-avatar> </div> <div class="column column-action"> <h4 bo-text="action"></h4> <span class="entity"> <i bo-class="type_icon.icon"></i> <span bo-html="display_entity.name"></span> </span> </div> <div class="column column-datetime"> <span bo-text="notice.published | fromNow"></span> </div> </div>')}]),angular.module("/ycjs/tpl/directive/page_detail.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/page_detail.html",'<div class="container-fluid page-detail" page-id="{{page.page_id}}"> <div class="row"> <div class="col-md-8"> <div class="frame page-detail-container" data-minheight="160"> <div class="page-detail-header"> <h2>{{page.name}}</h2> </div> <div class="page-detail-content markdown" wt-markdown=\'page.content\'> </div> <div class="page-detail-footer"> <div class="detail-meta"> <span class="name">{{page.last_updator.display_name}}</span> <span>&nbsp;最后保存于{{page.update_date | fromNow}}，</span> <span>&nbsp;当前版本：&nbsp;#{{page.version}}</span> </div> <div class="detail-module"> <h4><i class="icon-user"></i>关注</h4> <ul class="watchers-list"> <li ng-repeat="member in page.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" data-placement="bottom" data-align="left"> </wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="right" data-align="center" data-auto-adapt="true" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="page" all-member-click="js_watch_all($event, members, xEntity)"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> <li ng-show="(project.info.curr_role | is_guest) && (global.prj_module.watch | permission:entity_permission)"> <a class="avatar-add js-popbox" href="javascript:;" title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="js_toggle_watch($event, global.me, page)" data-placement="left" data-align="center"> <span class="o"> <i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i> </span> </a> </li> </ul> </div> <div class="detail-module" id="pages_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> </div> </div> <div class="col-md-4"> <div class="page-detail-sidebar box-panel"> <div class="box-panel-header"> <h4> <i class="icon-file-text-alt ml_5 mr_5"></i> 所有文档 </h4> </div> <div class="box-panel-body"> <ul class="pages"> <li ng-repeat="pageitem in pages"> <a class="slide-trigger" ng-href="/project/{{pageitem.pid}}/page/{{pageitem.page_id}}" title="{{pageitem.name}}" > {{pageitem.name}}</a> <ul class="sub-item-view"> <li ng-repeat="sub_page in pageitem.sub_pages"> <a ng-href="/project/{{sub_page.pid}}/page/{{sub_page.page_id}}">{{sub_page.name}}</a> </li> </ul> </li> </ul> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/page_item.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/page_item.html",'<div class="wt-row page-item page-item-mark js-popbox right_click_trigger slide-trigger" data-placement="bottom" data-align="left" ng-class="{\'active\':page.page_id == locator.show_detail_page_id,\'page-item-tree\':item_view_type==\'tree\'}" ng-click="js_item_click($event,page)" page-id="{{page.page_id}}" ng-hide="page.is_hide"> <div class="column column-main"> <h4> <i class="icon-file-text-alt mr_5"></i> <a class="name" href="javascript:;">{{page.name }}</a> </h4> <ul class="sub-item-view" ng-if="item_view_type==\'tree\'"> <li ng-repeat="sub_page in page.sub_pages"> <a class="slide-trigger" wt-stop-propagation="click" ng-click="js_subitem_click($event,sub_page)" href="javascript:;">{{sub_page.name}}</a> </li> </ul> </div> <div class="column column-meta"> {{page.last_updator.display_name}} 更新于 <span class="date">{{page.update_date | fromNow}}</span> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/pop_datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/pop_datepicker.html",' <div class="popbox-body"> <wt-full-datepicker default-date="default_date" set-date="js_set_date(date)" min-date="min_date"></wt-full-datepicker> </div> <div class="popbox-footer" data-ng-show="need_sure"> <a class="btn btn-success mr_15" ng-click="js_set_date()">确定</a> <a class="btn" ng-click="js_cancel()">取消</a> </div> ')}]),angular.module("/ycjs/tpl/directive/pop_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/pop_member.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_action_member(member)" data-loading-text="{{ongoing}}" loading-status="pop_member_actioning" class="btn btn-danger">{{action_name}}</button> </div> </div>')}]),angular.module("/ycjs/tpl/directive/post_item.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/post_item.html",'<div class="wt-row post-item right_click_trigger slide-trigger js-popbox" data-placement="bottom" data-align="left" ng-class="{\'active\':post.post_id == locator.show_detail_post_id}" post-id="{{post.post_id}}"> <div class="column column-main"> <wt-avatar member="post.owner" size="40" class="post-avatar"></wt-avatar> <h4> <a href="javascript:;"> {{post.name}} <i class="icon-paper-clip" ng-if="post.attachments_count > 0"></i> </a> </h4> <span class="total-comment" title="话题有{{ post.comment_count }}个评论"> {{post.comment_count}} </span> <div class="info"> {{post.owner.display_name}} 发表于 {{post.create_date | fromNow}} <span ng-if="post.last_reply_user" class="pull-right mr_15"> {{post.last_reply_user.display_name}} 最后回复于 {{post.last_reply_date | fromNow}} </span> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/project_grid_item.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/project_grid_item.html",'<div class="project-item" pid="{{ project.pid }}"> <a href="javascript:;" ng-class="{1: \'star star-started\', 0: \'star\'}[project.is_star]" ng-click="js_star_toggle($event,project)" title="{{ {1: \'从常用项目移除\', 0: \'设置为常用项目\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> <a class="center" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> <h4>{{[project.name,38] | cutstr}}</h4> </a> </div>')}]),angular.module("/ycjs/tpl/directive/project_visibility_options.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/project_visibility_options.html",'<ul class="popbox-step" wt-stop-propagation> <li class="popbox-step-li "> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>项目公开性</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <div class="p_5"> <i class="{{visibilityArr[0].icon}} mr_5"></i> {{visibilityArr[0].desc}} <br> <span class="text-muted"> {{visibilityArr[0].intro}} </span> </div> </li> <li class="divider"></li> <li> <div class="p_5"><i class="{{visibilityArr[1].icon}} mr_5"></i> {{visibilityArr[1].desc}} <br> <span class="text-muted"> {{visibilityArr[1].intro}} </span> </div> </li> <li class="divider"></li> <li> <div class="p_5"><i class="{{visibilityArr[2].icon}} mr_5"></i> {{visibilityArr[2].desc}} <br> <span class="text-muted"> {{visibilityArr[2].intro}} </span> </div> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/directive/set_project_logo.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/set_project_logo.html",'<div class="popbox-header"> <h3>设置项目标识</h3> <button class="cancel icon-remove" ng-click="js_close()"></button> </div> <div class="popbox-body"> <div class="setting-panel "> <div class="split-panel-right"> <div class="stand-panel"> <div class="stand-panel-body"> <form name="prj_logo_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="prj-colors"> <ul class="list-inline"> <li ng-repeat="prj_color in prj_colors"> <span ng-click="js_color_select(prj_color)" class="prj_color" ng-style="{backgroundColor:prj_color}"> <i class="icon-white icon-ok" ng-show="prj_color == project.info.new_bg"></i> </span> </li> </ul> </div> <div class="prj-icons"> <ul class="list-inline"> <li ng-repeat="prj_icon in prj_icons" ng-class="{true:\'active\'}[prj_icon == project.info.new_pic]"> <span ng-click="js_icon_select(prj_icon)" class="prj_icon" ng-style="{color:project.info.new_bg}"> <i class="{{prj_icon}}"></i> </span> </li> </ul> </div> <button wt-form-submit="js_prj_set_logo(prj_logo_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_logo_saving">确定 </button> </form> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task.html",'<div id="task_main_{{ task.tid }}" task-id="{{task.tid}}" class="task task_style"> <div class="entry-task-labels" ng-if="task.labels && task.labels.length > 0"> <div ng-repeat="label in task.labels" class="task-label {{label.name}}-label"> </div> </div> <div class="entry-task-main" ng-class="{1:\'task-completed-style\'}[task.completed]"> <a class="entry-task-check" id="task_check_{{ task.tid }}" wt-click="js_complete_task($event, entry, task)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <a class="entry-task-title" href="javascript:;">{{task.name}}</a> <div ng-if="!hide_action"> <a href="javascript:;" id="icon_action_task_{{ task.tid }}" class="js-popbox entry-task-menu" ng-if="global.prj_module.watch | permission:project.info.permission" data-placement="right" data-align="middle" data-auto-adapt="true" wt-click="js_show_task_menu($event, entry, task)"> <i class="icon-play-circle"></i> </a> </div> </div> <wt-badges task="task"></wt-badges> <div class="entry-task-members" ng-show="task.members !=null && task.members.length > 0"> <wt-avatar ng-repeat="member in task.members | arrReverse" class="js-popbox member" pop-member="member" stop-propagation="true" wt-pop-member="pop_member_options" pop-extended-attr="task" member="member" size="30"></wt-avatar> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/task.html.bak",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task.html.bak",'<div id="task_main_{{ task.tid }}" ng-mouseleave="js_mouseleave_task($event,task)" class="task task_style slide-trigger" ng-class="{\'task-selected\':task.selected == true}" droppable="member_drop_options" task-entry-id="{{task.entry_id}}" task-pos="{{task.pos}}" ng-click="locator.to_task(task.pid, task.tid, false)" > <div class="entry-task-labels"> <div class="task-label {{label.name}}-label" title="{{label.desc}}" ng-repeat="label in task.labels"></div> </div> <div class="entry-task-main" ng-class="{1:\'task-main-completed\'}[task.completed]"> <a class="entry-task-check" id="task_check_{{ task.tid }}" wt-click="js_complete_task($event, entry, task)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <a class="entry-task-title" href="javascript:;">{{task.name}}</a> <a href="javascript:;" id="icon_action_task_{{ task.tid }}" class="js-popbox entry-task-menu" wt-permission-hide="permission" data-placement="right" data-align="middle" wt-click="js_show_task_menu($event, entry, task)"> <i class="icon-play-circle"></i> </a> </div> <wt-badges badges="task.badges"></wt-badges> <div class="entry-task-members" ng-show="task.members !=null && task.members.length > 0"> <wt-avatar ng-repeat="member in task.members" class="js-popbox member" member="member" size="30" click="js_show_member($event, task, member)"></wt-avatar> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/task_composer.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task_composer.html",'<div class="entry-task-composer"> <div class="composer-body composer-body-focus" ng-click="focus_textarea($event)"> <div class="entry-task-labels"> <div data-ng-repeat="label in new_task.labels" class="task-label {{label.name}}-label"></div> </div> <textarea class="form-control help-block mb_0" ng-model="new_task.temp_name" wt-enter="js_add_task($event, new_task, entry, 0)"></textarea> <div class="composer-body-footer"> <div class="task-badges" task="task"> <span ng-show="new_task.expire_date !=null && new_task.expire_date!=0" class="task-badge icon icon-time " title="截止日期：{{new_task.expire_date | shortTimeFormat}}">{{new_task.expire_date | shortTimeFormat}}</span> </div> <div class="entry-task-members" ng-show="new_task.members !=null && new_task.members.length > 0"> <wt-avatar ng-repeat="member in new_task.members" class="js-popbox member" member="member" size="30" click="js_show_member($event, new_task, member)"></wt-avatar> </div> </div> </div> <div class="composer-footer"> <button ng-click="js_add_task($event, new_task, entry);" class="btn btn-success confirm mr_10" data-loading-text="保存中..." loading-status="is_task_adding">保存 </button> <button ng-click="js_cancel(entry,new_task)" class="btn">取消</button> <a href="javascript:;" class="js-popbox icon-play-circle action-icon " data-placement="right" data-align="middle" wt-click="js_show_task_menu($event, entry, new_task)"> </a> </div> </div>')
}]),angular.module("/ycjs/tpl/directive/team_visibility_options.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/team_visibility_options.html",'<ul class="popbox-step" wt-stop-propagation=""> <li class="popbox-step-li "> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>团队公开性</h3> </div> <div class="popbox-body"> <ul class="popbox-menu "> <li> <div class="p_5"> <i class="{{visibilityArr[0].icon}} mr_5"></i> {{visibilityArr[0].desc}} <br> <span class="text-muted"> {{visibilityArr[0].intro}} </span> </div> </li> <li class="divider"></li> <li> <div class="p_5"><i class="{{visibilityArr[1].icon}} mr_5"></i> {{visibilityArr[1].desc}} <br> <span class="text-muted"> {{visibilityArr[1].intro}} </span> </div> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/directive/toggle_members.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/toggle_members.html",'<div class="popbox-header"> <button ng-if="show_to_step" class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{title}}</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" wt-focus name="search_user_input" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block"/> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member_inner($event,member)"> <i ng-if="type==\'watch\'" ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[!!member.watched]" class="color_gray"></i> <i ng-if="type==\'member\' || type==\'attendee\'" ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[!!member.assigned]" class="color_gray"></i> <wt-avatar member="member" name="[member.display_name,16] | cutstr" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> </ul> </div> </div> <div class="popbox-footer top-divider" ng-if="type == \'watch\'"> <a href="javascript:;" ng-click="js_watch_all_member_inner($event,members)" class="action-item"><i class="icon-xx"></i> <span ng-bind="{true:\'添加全部成员\',false:\'所有成员已关注\'}[xEntity.watchers.length < members.length]"></span> ({{ xEntity.watchers.length }}/{{ members.length }}) </a> </div> <div class="popbox-footer top-divider" ng-if="type == \'attendee\'"> <a href="javascript:;" ng-click="js_all_member_inner($event,members)" class="action-item"><i class="icon-xx"></i> <span ng-bind="{true:\'添加全部成员\',false:\'所有成员已参与\'}[xEntity.attendees.length < members.length]"></span> ({{ xEntity.attendees.length }}/{{ members.length }})</a> </div>')}]),angular.module("/ycjs/tpl/directive/widget-add-team-member-by-link.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/widget-add-team-member-by-link.html",'<div class="box-panel my-tasks-overview" ng-if="$root.global.team_module.add_member | permission:current_team.permission"> <div class="box-panel-header" > <h4><i class="icon-link mr_10"></i>通过链接邀请</h4> </div> <div class="box-panel-body" > <dd ng-show="!current_team.link_join_code"> <span>把链接通过QQ、微信、邮件组等方式分享给团队成员，他们即可点击链接直接加入当前团队。</span><br/><br/> <a href="javascript:;" ng-click="toggle_join_team_link()">开启链接</a> </dd> <dd ng-show="current_team.link_join_code"> <input type="text" ng-model="join_team_link" class="form-control help-block" wt-click-select readonly="readonly" /> <span class="tips">成员加入团队后，为了防止链接泄漏可以选择</span> <a href="javascript:;" ng-click="toggle_join_team_link()">关闭链接</a> </dd> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/wt-breadcrumb.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/wt-breadcrumb.html",'<span class="title" > <div class="help-inlineblock" ng-repeat="folder in folders"> <a href="javascript:;" ng-click="goto_folder($event)" folder-id="{{folder.fid}}" ng-show="!$last">{{folder.name}}</a> <i class="icon-angle-right ml_10 mr_10" ng-show="!$last"></i> <div lass="help-inlineblock" ng-show="$last">{{folder.name}}</div> </div> </span>')}]),angular.module("/ycjs/tpl/directive/wt-folder-tree.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/wt-folder-tree.html",'<li sf-treepeat="node in children of folder_structure"> <zippy > <ul> <li sf-treecurse>This should be replaced.</li> </ul> </zippy> </li> <li ng-show="folder_structure==0"> <div class="empty-menu">没有其它文件夹</div> </li> ')}]),angular.module("/ycjs/tpl/directive/wt_new_editor.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/wt_new_editor.html",'<div class="wt-new-ediror"> <div ng-show="!isFullscreen && !isMini"> <div class="wne-title" > <input type="text" class="wne-title-input" placeholder="标题" ng-model="title" tabindex="1" wtAutofocus> <div class="title-seperator-line"></div> </div> <div class="toolbar-content-container"> <div class="wne-toolbar js-popbox" role="toolbar" > <a class="icon-bold" ng-click="execEditorCmd($event, \'cmd-bold\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-italic" ng-click="execEditorCmd($event, \'cmd-italic\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-quote-left" ng-click="execEditorCmd($event, \'cmd-blockquote\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-list-ul" ng-click="execEditorCmd($event, \'cmd-unorder-list\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-list-ol" ng-click="execEditorCmd($event, \'cmd-order-list\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-link" ng-click="execEditorCmd($event, \'cmd-insert-link\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-picture" ng-click="execEditorCmd($event, \'cmd-insert-image\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-minus" ng-click="execEditorCmd($event, \'cmd-horizontal-line\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-question-sign" href="https://worktile.com/blog/skills/markdown" target="_blank"></a> <a ng-class="{false:\'icon-eye-open\', true:\'icon-eye-close\'}[inPreview]" ng-click="flipPreview()" href="javascript:;"></a> <a class=""></a> <a class="icon-fullscreen" ng-click="goFullscreen()" href="javascript:;"></a> </div> <div class="fullscreeen-btn-container"> <button class="fullscreen-btn" ng-click="goFullscreen()"> <i class="icon-double-angle-left"></i> </button> </div> <div class="flip-container" > <div class="flipper"> <div class="wnd-content front"> <textarea class="wnd-content-textarea" name="" id="" ng-model="content" tabindex="2"> </textarea> </div> <div class="wnd-content-html markdown back "> <div ng-bind-html-unsafe="html" class="back-background"></div> </div> </div> </div> </div> </div> <div ng-show="isFullscreen"> <div class="fullscreen-editing"> <div class="wne-toolbar"> <ul class="tool-btn-group js-popbox"> <li ng-click="cancelFullscreen()"><a >返</a></li> </ul><ul class="tool-btn-group js-popbox"> <li ng-click="execEditorCmd($event, \'cmd-h1\')"><a href="javascript:;">h1</a></li> <li ng-click="execEditorCmd($event, \'cmd-h2\')"><a href="javascript:;">h2</a></li> <li ng-click="execEditorCmd($event, \'cmd-h3\')"><a href="javascript:;">h3</a></li> </ul><ul class="tool-btn-group js-popbox"> <li ng-click="execEditorCmd($event, \'cmd-bold\')"><a class="icon-bold" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-italic\')"><a class="icon-italic" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-blockquote\')"><a class="icon-quote-left" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-code\')"><a href="javascript:;">{&nbsp }</a></li> </ul><ul class="tool-btn-group js-popbox"> <li ng-click="execEditorCmd($event, \'cmd-unorder-list\')"><a class="icon-list-ul" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-order-list\')"><a class="icon-list-ol" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-horizontal-line\')"><a class="icon-minus" href="javascript:;"></a></li> </ul><ul class="tool-btn-group js-popbox"> <li ng-click="execEditorCmd($event, \'cmd-insert-link\')"><a class="icon-link" href="javascript:;"></a></li> <li ng-click="execEditorCmd($event, \'cmd-insert-image\')"><a class="icon-picture" href="javascript:;"></a></li> </ul> <ul class="tool-btn-group js-popbox"> <li><a class="icon-question-sign" href="https://worktile.com/blog/skills/markdown" target="_blank" ></a></li> </ul> <ul class="tool-btn-group"> <li class="save-command"> <button class="btn btn-success " ng-click="execEditorCmd($event, \'cmd-save\')" data-loading-text="保存中..." loading-status="is_saving">保存</button> </li> </ul> </div> <div class="wne-title" ng-show="!isMini"> <input type="text" class="fullscreen-title-input" placeholder="标题" ng-model="title" tabindex="1" wtAutofocus> <div class="title-seperator-line"></div> </div> <div class="left-right-container"> <div class="left-side" > <textarea name="" id="" ng-model="content" tabindex="2" class="fullscreen-mk-content-textarea" ></textarea> </div> <div class="right-side"> <div class="html-box"> <div class="result markdown" ng-bind-html-unsafe="html"></div> </div> </div> </div> </div> </div> <div ng-show="isMini && !hideMini"> <div class="mini-container"> <div class="mini-toolbar js-popbox" role="toolbar" > <a class="icon-link" ng-click="execEditorCmd($event, \'cmd-insert-link\')" ng-show="!inPreview" href="javascript:;"></a> <a class="icon-question-sign" href="https://worktile.com/blog/skills/markdown" target="_blank"></a> <a class="icon-fullscreen" ng-click="goFullscreen()" href="javascript:;"></a> </div> <div class="mini-content "> <textarea class="mini-content-textarea" ng-model="content" tabindex="3"> </textarea> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/zippy.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/zippy.html",' <li ng-if="node.fid !== folder.fid"> <a href="javascript:;" ng-click="toggleContent()"> <i ng-class="{true:\'icon-folder-open-alt\', false: \' icon-folder-close-alt\'}[isSubFolderVisible]"></i> {{node.name}} <i class="icon-ok p_5 pull-right" ng-if="data.selected_move_to_node==node"></i> </a> <div ng-show="isSubFolderVisible" ng-transclude></div> </li> ')}]),angular.module("/ycjs/tpl/entity/event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/event.html",'<div data-ng-controller="entity_event_ctrl" class="entity-panel event-panel" wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done && (global.prj_module.view | permission:entity_permission)"> <div class="entity-panel-header"> <a href="javascript:;" class="name" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> <ul class="nav nav-pills"> <li ng-show="event.is_deleted" class="entity-warning">日程已经于 {{event.update_date | timeFormatZHCN}} 删除了 </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-class="{true:\'disabled\'}[event.is_edit]" ng-click="js_show_editor(event)" title="编辑"> <i class="icon-pencil"></i>编辑 </a> </li> <li class="divider-v" ng-show="(global.prj_module.crud | permission:entity_permission)"></li> <li class="js-popbox" ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="添加附件"> <i class="icon-paper-clip"></i>附件 </a> <ul class="dropdown-menu dropdown-menu-right"> <li> <a href="javascript:;" class="fileinput-button"> <i class="icon-desktop"></i> 本地上传 <input type="file" name="files[]" title="添加附件" multiple wt-uploadfile="file_upload_option"/> </a> </li> <li> <a href="javascript:;" data-placement="bottom" wt-pop-add-attachment-from-file="event" > <i class="icon-file"> </i>从项目文件选择</a> </li> <li class="divider"></li> <li wt-stop-propagation="click"> <div class="part-loading mt_20" ng-if="js_uploadbylink_uploading"></div> <form class="form-inline text-nowarp" role="form" ng-show="!js_uploadbylink_uploading"> <input type="text" ng-model="uploadlink_url" class="form-control input-sm" placeholder="粘贴下载链接"> <button class="btn btn-default plr_10" type="button" ng-click="js_uploadbylink($event)">添加</button> </form> </li> </ul> </li> <li class="js-popbox" data-placement="bottom" ng-show="!event.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_trash($event, event)"><i class="icon-trash"></i>删除</a> </li> <li><a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'events\',event]"><i class="icon-share"></i>共享</a> </li> <li><a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a> </li> </ul> </li> <li class="divider-v"></li> <li> <a href="javascript:;" ng-click="js_close()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <div class="entity-content-panel"> <div class="content-module editable-module"> <div ng-hide="event.is_edit"> <div class="entity-title"> <h2 ng-click="js_show_editor(event)" class="ng-binding"> {{event.name}} </h2> </div> <table class="table table-bordered table-event"> <tr> <td class="item">开始时间</td> <td class="time">{{event.show_start_date}}</td> </tr> <tr> <td class="item">结束时间</td> <td class="time">{{event.show_end_date}}</td> </tr> <tr ng-if="event.location.length > 0"> <td class="item">位置</td> <td>{{event.location || "无"}}</td> </tr> <tr ng-hide="event.recurrence == 0 "> <td class="item">重复</td> <td> <div class="time">{{new_repeat_interval.desc}}</div> </td> </tr> <tr ng-if="event.summary.length > 0"> <td class="item">描述</td> <td> <div class="event-summary-text markdown" wt-markdown=\'event.summary\'></div> </td> </tr> </table> </div> <div class="edit-section" ng-show="event.is_edit"> <div> <input type="text" ng-model="temp_event.name" wt-enter="js_set_update($event, event)" class="form-control help-block" placeholder="日程名称" required wt-focus="eventTitleInputFocus"> <div class="input-section"> <span class="input-label">开始：</span> <input wt-pop-full-datepicker="start_date_options" type="text" ng-model="temp_event.start_date" class="form-control date js-popbox" data-placement="bottom" readonly required> <select ng-model="temp_event.start_hour" ng-options="time for time in start_hour_sections" class="form-control hour"></select> <span class="separation">:</span> <select ng-model="temp_event.start_minute" ng-options="time for time in start_minute_sections" class="form-control minute"></select> </div> <div class="input-section"> <span class="input-label">结束：</span> <input type="text" ng-model="temp_event.end_date" wt-pop-full-datepicker="end_date_options" class="form-control date js-popbox" data-placement="bottom" readonly required> <select ng-model="temp_event.end_hour" ng-options="time for time in end_hour_sections" class="form-control hour"></select> <span class="separation">:</span> <select ng-model="temp_event.end_minute" ng-options="time for time in end_minute_sections" class="form-control minute"></select> </div> <div class="input-section"> <span class="input-label">位置：</span> <input type="text" ng-model="temp_event.location" class="form-control location" placeholder="位置(可选)"> </div> <div class="input-section"> <span class="input-label">重复：</span> <span>{{new_repeat_interval.desc}}</span> </div> <div class="input-section" ng-if="event.recurrence_id"> <span class="input-label">修改：</span> <select class="form-control location" ng-model="update.option" ng-options="update_option.desc for update_option in update.options_for_recurring_event" ></select> </div> <wt-editor> <textarea ng-model="temp_event.summary" type="text" wt-ctrl-enter="js_set_update($event, event,temp_event)" placeholder="添加日程描述(按Ctrl + 回车键提交)"></textarea> </wt-editor> </div> <div class="form-group"> <button ng-click="js_set_update($event, event,temp_event)" data-loading-text="保存中..." loading-status="event.is_saving" class="btn btn-success mr_15">保存 </button> <button ng-click="js_cancel_editor(event)" class="btn">取消 </button> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="event.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>附件</h4> <div class="entity-attachments"> <wt-attachment ng-repeat="file in event.files" del="js_del_attachment($event, file)" del-permission="global.prj_module.crud | permission:entity_permission"></wt-attachment> <wt-attachment class="attachment-progress" ng-repeat="file in global_fileupload_queue()"></wt-attachment> <div class="dragfile-hover-placeholder"> <span class="name"><i class="icon-upload-alt"></i>松开上传文件</span> </div> </div> </div> <div class="content-module"> <h4><i class="icon-user"></i>参与者</h4> <div class="entity-members"> <ul> <li ng-repeat="attendee in event.attendees"> <wt-avatar member="attendee" class="js-popbox" pop-member="attendee" wt-pop-member="pop_attendee_options" data-placement="left"></wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="right" data-align="center" all-member-click="js_attendee_all($event, members, xEntity)" wt-pop-toggle-members="js_toggle_member($event, member, xEntity)" pid="pid" type="attendee" entity="event"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> </ul> </div> </div> <div class="content-module" id="events_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> </div> </div> <wt-entity-deny></wt-entity-deny> </div> ')}]),angular.module("/ycjs/tpl/entity/file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/file.html",'<div data-ng-controller="entity_file_ctrl" class="entity-panel file-panel" wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done && (global.prj_module.view | permission:entity_permission)"> <div class="entity-panel-header"> <a href="javascript:;" class="name" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> <ul class="nav nav-pills"> <li ng-show="file.is_deleted" class="entity-warning"> 文件已经于 {{file.update_date | timeFormatZHCN}} 删除了 </li> <li> <a ng-href="{{file | wtBoxDownload}}" target="_blank" title="下载"> <i class="icon-download-alt"></i> 下载 </a> </li> <li class="divider-v"></li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" class="fileinput-button" title="更新"> <input wt-uploadfile="file_upload_new_option" multiple type="file" name="files[]" title="更新" /> <i class="icon-upload-alt"></i>更新 </a> </li> <li class="js-popbox" data-placement="bottom" ng-show="!file.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-class="{true:\'disabled\'}[file.is_edit]" ng-click="js_show_editor(file)" title="编辑"> <i class="icon-pencil"></i>编辑 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_move_to_dialog($event, file)"> <i class="icon-share-alt"></i> 移动 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_trash_dialog($event, file)"> <i class="icon-trash"></i>删除 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" class="divider"> </li> <li> <a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'files\',file]"> <i class="icon-share"> </i>共享 </a> </li> <li> <a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a> </li> <li><a href="javascript:;" ng-click="js_show_versions($event, file)"><i class="icon-time"></i>历史版本</a> </li> </ul> </li> <li class="divider-v"></li> <li> <a href="javascript:;" ng-click="js_close()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <div class="entity-content-panel"> <div class="content-module editable-module"> <div ng-hide="file.is_edit"> <div class="entity-title"> <h2 ng-click="js_show_editor(file)"> {{file.name}} </h2> </div> <div class="entity-meta"> <wt-avatar member="file.update_user" name="true" size="40"></wt-avatar> <span>上传于&nbsp;{{file.update_date | fromNow}}</span> <span class="size"> 大小： <em>{{file.size | fileSize}}</em> </span> </div> <div> <div class="markdown" wt-markdown=\'file.desc\'></div> </div> </div> <div class="edit-section" ng-show="file.is_edit"> <div> <input type="text" wt-enter="js_set_update($event, file)" ng-model="file.temp_name" class="form-control help-block" placeholder="文件名称" required wt-focus="fileNameInputFocus"> <wt-editor> <textarea ng-model="file.temp_desc" type="text" wt-ctrl-enter="js_set_update($event, file)" placeholder="添加文件描述"></textarea> </wt-editor> </div> <div class="form-group"> <button ng-click="js_set_update($event, file)" data-loading-text="保存中..." class="btn btn-success mr_15">保存 </button> <button ng-click="js_cancel_editor(file)" class="btn">取消</button> </div> </div> </div> <div class="dragfile-hover-placeholder"> <span class="name"><i class="icon-upload-alt"></i>松开上传文件</span> </div> <div class="content-module file-icon dragfile-hover-hide" ng-hide="file.is_edit"> <div ng-hide="global_fileupload_queue().length>0 || file.path.length==0" ng-class="{true:\'fancybox-file\'}[file.is_img]" data-fancybox-group="file-detail" href="{{file | wtBoxView}}" data-fancybox-type="image"> <a ng-if="(file | isPreviewFile)==2" ng-href="{{\'/files/\'+file.fid+\'/preview\'}}" target="_blank" class="file-preview-link"> <img ng-src="{{file | wtBoxView}}" alt="{{ file.name }}" /> <br> <br>点击在线浏览文件 </a> <img ng-if="(file | isPreviewFile)!=2" ng-src="{{file | wtBoxView}}" alt="{{ file.name }}" /> </div> <div class="file-icon-queue" ng-show="global_fileupload_queue().length>0"> <div ng-repeat="file in global_fileupload_queue()"> <div data-file-upload-preview="file"></div> <span class="error" ng-show="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> <br/> <br/> </span> <a href="javascript:;" class="cancel" ng-click="file.$cancel()" ng-hide="!file.$cancel"> 取消 </a> <div ng-hide="file.error" class="progress progress-striped active" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" ng-style="{width: num + \'%\'}"> </div> </div> </div> </div> </div> <div class="content-module" ng-show="file.link_count > 0"> <h4><i class="icon-link"></i>相关链接</h4> <div class="entity-links"> <ul> <li class="link-item" ng-repeat="task in file.tasks"> <i class="icon-check"></i> <a href="javascript:;" ng-click="locator.to_task(file.pid, task.tid)">{{task.name}}</a> </li> <li class="link-item" ng-repeat="post in file.posts"> <i class="icon-list-alt"></i> <a href="javascript:;" ng-click="locator.to_post(file.pid, post.post_id)">{{post.name}}</a> </li> <li class="link-item" ng-repeat="event in file.events"> <i class="icon-calendar"></i> <a href="javascript:;" ng-click="locator.to_event(file.pid, event.event_id)">{{event.name}}</a> </li> </ul> </div> </div> <div class="content-module"> <h4><i class="icon-user"></i>关注</h4> <div class="entity-members"> <ul> <li ng-repeat="member in file.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" data-placement="left"> </wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="right" data-align="center" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="file" all-member-click="js_watch_all($event, members, xEntity)"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> <li ng-show="(project.info.curr_role | is_guest) && (global.prj_module.watch | permission:entity_permission)"> <a class="avatar-add js-popbox" href="javascript:;" title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="js_toggle_watch($event, global.me, file)" data-placement="left" data-align="center"> <span class="o"> <i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i> </span> </a> </li> </ul> </div> </div> <div class="content-module" id="files_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> </div> </div> <wt-entity-deny></wt-entity-deny> </div> ')}]),angular.module("/ycjs/tpl/entity/mail.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/mail.html",'<div data-ng-controller="entity_mail_ctrl" class="entity-panel mail-panel" wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" data-ng-show="section_loading_done"> <div class="entity-panel-header"> <a class="name" href="/mail"> <i class="icon-envelope mr_10" style="color:#d84c31"></i> 我的邮件 </a> <ul class="nav nav-pills"> <li> <a href="javascript:;" data-ng-click="js_pop_move($event,mail)" title="移动"> <i class="icon-share-alt"></i>分享给成员 </a> </li> <li class="js-popbox" data-placement="bottom"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li><a href="javascript:;" ng-click="js_pop_trash($event, mail)"><i class="icon-trash"></i>删除</a> </li> <li><a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a> </li> </ul> </li> <li class="divider-v"></li> <li> <a href="javascript:;" ng-click="locator.hide_slide()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <div class="entity-content-panel "> <div class="content-module editable-module"> <div> <div class="entity-title"> <h2> {{mail.subject}} </h2> </div> <div class="entity-meta"> <span>&nbsp;{{mail.create_date | fromNow}}</span> | <span>{{mail.from}}</span> </div> <div class="mail-desc"> <div class="markdown" wt-markdown=\'mail.body_html\'></div> </div> </div> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/entity/page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/page.html",'<div data-ng-controller="entity_page_ctrl" class="entity-panel page-panel"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done && (global.prj_module.view | permission:entity_permission)"> <div class="entity-panel-header"> <a href="javascript:;" class="name" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> <ul class="nav nav-pills"> <li ng-show="page.is_deleted" class="entity-warning">文档已经于 {{page.update_date | timeFormatZHCN}} 删除了 </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="/project/{{page.pid}}/page/{{page.page_id}}/edit" title="编辑"> <i class="icon-pencil"></i>编辑 </a> </li> <li ng-show="(global.prj_module.crud | permission:entity_permission) && page.parent_id == \'\'" class="divider-v"></li> <li ng-show="(global.prj_module.crud | permission:entity_permission) && page.parent_id == \'\'"> <a href="/project/{{page.pid}}/page/add/{{page.page_id}}" title="添加子文档"> <i class="icon-plus"></i>添加子文档 </a> </li> <li class="js-popbox" data-placement="bottom" ng-show="!page.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_trash($event)"><i class="icon-trash"></i>删除</a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" class="divider"></li> <li><a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'pages\',page]"><i class="icon-share"></i>共享</a></li> <li><a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a></li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_got_page_ver_diff($event)"><i class="icon-time"></i>历史版本</a> </li> <li> <a href="javascript:;" ng-href="/project/{{page.pid}}/page/{{page.page_id}}"> <i class="icon-fullscreen"></i> 进入全屏模式 </a> </li> </ul> </li> <li class="divider-v"></li> <li><a href="javascript:;" ng-click="js_close()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' id="wt_scroll_element"> <div class="entity-content-panel"> <div class="entity-page-header"> <h2>{{page.name}}</h2> <span ng-hide="page.parent_id == \'\'"><a href="javascript:;" ng-click="js_goto_page(page.pid, page.parent_id)"> <i class="icon-long-arrow-left mr_5"></i> {{page.parent_name}}</a> </span> </div> <div class="entity-page-content"> <div class="page-content markdown" wt-markdown=\'page.content\'> </div> </div> <div class="entity-page-footer"> <div class="entity-meta"> <span class="name">{{page.last_updator.display_name}}</span> <span>&nbsp;最后保存于{{page.update_date | fromNow}}，</span> <span>&nbsp;当前版本：&nbsp;#{{page.version}}</span> </div> <div> <div class="content-module" ng-show="page.parent_id==\'\' && page.sub_pages.length>0"> <h4><i class="icon-file-text-alt"></i>子文档</h4> <div class="sub-pages"> <ul class="pages-list clearfix"> <li ng-repeat="subpage in page.sub_pages"> <a href="javascript:;" ng-click="js_goto_page(page.pid, subpage.page_id)"> {{subpage.name}} </a> </li> </ul> </div> </div> <div class="content-module"> <h4><i class="icon-user"></i>关注</h4> <div class="entity-members"> <ul> <li ng-repeat="member in page.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" data-placement="bottom" data-align="left"> </wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="right" data-align="center" data-auto-adapt="true" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="page" all-member-click="js_watch_all($event, members, xEntity)"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> <li ng-show="(project.info.curr_role | is_guest) && (global.prj_module.watch | permission:entity_permission)"> <a class="avatar-add js-popbox" href="javascript:;" title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="js_toggle_watch($event, global.me, page)" data-placement="left" data-align="center"> <span class="o"> <i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i> </span> </a> </li> </ul> </div> </div> <div class="content-module" id="pages_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> </div> </div> </div> </div> <wt-entity-deny></wt-entity-deny> </div>')
}]),angular.module("/ycjs/tpl/entity/post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/post.html",'<div data-ng-controller="entity_post_ctrl" class="entity-panel post-panel" wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done && (global.prj_module.view | permission:entity_permission)"> <div class="entity-panel-header"> <a class="name" href="javascript:;" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> <ul class="nav nav-pills"> <li ng-show="post.is_deleted" class="entity-warning">话题已经于 {{post.update_date | timeFormatZHCN}} 删除了 </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-class="{true:\'disabled\'}[!!post.is_edit]" ng-click="js_show_editor(post)" title="编辑"> <i class="icon-pencil"></i>编辑 </a> </li> <li class="divider-v" ng-show="global.prj_module.crud | permission:entity_permission"></li> <li class="js-popbox" ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="添加附件"> <i class="icon-paper-clip"></i>附件 </a> <ul class="dropdown-menu dropdown-menu-right"> <li><a href="javascript:;" class="fileinput-button"><i class="icon-desktop"></i>本地上传 <input type="file" name="files[]" title="添加附件" multiple wt-uploadfile="file_upload_option"/></a> </li> <li> <a href="javascript:;" data-placement="bottom" wt-pop-add-attachment-from-file="post"> <i class="icon-file"></i> 从项目文件选择 </a> </li> <li class="divider"></li> <li wt-stop-propagation="click"> <div class="part-loading mt_20" ng-if="js_uploadbylink_uploading"></div> <form class="form-inline text-nowarp" role="form" ng-show="!js_uploadbylink_uploading"> <input type="text" ng-model="uploadlink_url" class="form-control input-sm" placeholder="粘贴下载链接"> <button class="btn btn-default plr_10" type="button" ng-click="js_uploadbylink($event)">添加</button> </form> </li> </ul> </li> <li class="js-popbox" data-placement="bottom" ng-show="!post.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.crud | permission:entity_permission"><a href="javascript:;" ng-click="js_trash($event, post)"><i class="icon-trash"></i>删除</a></li> <li><a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'posts\',post]"><i class="icon-share"></i>共享</a></li> <li><a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a></li> </ul> </li> <li class="divider-v"></li> <li><a href="javascript:;" ng-click="js_close()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' > <div class="entity-content-panel"> <div class="content-module editable-module"> <div ng-hide="post.is_edit"> <div class="entity-title"> <span class="comment_count_style icon-stack pull-right" title="话题有{{ post.comment_count }}个评论"> <i class="icon-comment"></i> <i class="icon-stack-base">{{post.comment_count}}</i> </span> <h2 ng-click="js_show_editor(post)"> {{post.name}} </h2> </div> <div class="entity-meta"> <wt-avatar member="post.owner" name="true" size="40"></wt-avatar> <span>&nbsp;发起于 {{post.create_date | fromNow}}</span> </div> <div class="post-desc"> <div class="markdown" wt-markdown=\'post.content\'></div> </div> </div> <div class="edit-section" ng-show="post.is_edit" wt-ctrl-enter="js_update_post(post)"> <!-- <div> <input type="text" autofocus ng-model="post.temp_name" wt-enter="js_set_content(post)" class="form-control help-block" placeholder="话题名称" required wt-focus="postEditFocus"> <wt-editor> <textarea wt-ctrl-enter="js_update_post(post)" ng-model="post.temp_content" type="text" placeholder="说点什么(按Ctrl + 回车键提交)"></textarea> </wt-editor> </div> --> <div class="entity-mkd-editor-wrapper"> <wt-new-editor edit-title="post.temp_name" edit-content="post.temp_content" pid="post.pid" entity-id="post.post_id" entity-type="post" > </wt-new-editor> </div> <div class="form-group"> <button ng-click="js_update_post(post)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_setting_content">保存 </button> <button ng-click="js_cancel_editor(post)" class="btn">取消</button> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="post.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>附件</h4> <div class="entity-attachments"> <wt-attachment ng-repeat="file in post.files" del="js_del_attachment($event, file)" fancygroup="filegroup-post" del-permission="global.prj_module.crud | permission:entity_permission" ></wt-attachment> <wt-attachment class="attachment-progress" ng-repeat="file in global_fileupload_queue()"></wt-attachment> <div class="dragfile-hover-placeholder"> <span class="name"><i class="icon-upload-alt"></i>松开上传文件</span> </div> </div> </div> <div class="content-module"> <h4><i class="icon-user"></i>关注</h4> <div class="entity-members"> <ul> <li ng-repeat="member in post.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" data-placement="bottom" data-align="left"> </wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="right" data-align="center" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="post" all-member-click="js_watch_all($event, members, xEntity)"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> <li ng-show="(project.info.curr_role | is_guest) && (global.prj_module.watch | permission:entity_permission)"> <a class="avatar-add js-popbox" href="javascript:;" title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="js_toggle_watch($event, global.me, post)" data-placement="left" data-align="center"> <span class="o"> <i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i> </span> </a> </li> </ul> </div> </div> <div class="content-module" id="posts_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> </div> </div> <wt-entity-deny></wt-entity-deny> </div>')}]),angular.module("/ycjs/tpl/entity/task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/task.html",'<div data-ng-controller="entity_task_ctrl" class="entity-panel task-panel" wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done && (global.prj_module.view | permission:entity_permission)"> <div class="entity-panel-header"> <a href="javascript:;" class="name" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> <ul class="nav nav-pills"> <li ng-show="task.is_deleted" class="entity-warning">任务已经于 {{task.update_date | timeFormatZHCN}} 删除了</li> <li ng-show="task.archived" class="entity-info">任务已经于 {{task.update_date | timeFormatZHCN}} 归档了</li> <li ng-show="task.archived" class="divider-v"></li> <li ng-show="task.archived"> <a href="javascript:;" ng-click="js_show_entry_menu($event, task)" title="激活"> <i class="icon-undo"></i>激活 </a> </li> <li data-placement="bottom" class="js-popbox" ng-if="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_datepicker($event, task)" title="截止日期"> <i class="icon-time"></i>日期 </a> </li> <li ng-if="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_todo(task)" title="添加检查项"> <i class="icon-th-list"></i>检查项 </a> </li> <li class="divider-v" ng-if="global.prj_module.crud | permission:entity_permission"></li> <li class="js-popbox" ng-if="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="添加附件"> <i class="icon-paper-clip"></i>附件 </a> <ul class="dropdown-menu dropdown-menu-right"> <li><a href="javascript:;" class="fileinput-button"><i class="icon-desktop"></i>本地上传 <input type="file" name="files[]" title="添加附件" multiple wt-uploadfile="file_upload_option"/></a> </li> <li> <a href="javascript:;" data-placement="bottom" wt-pop-add-attachment-from-file="task"> <i class="icon-file"></i> 从项目文件选择 </a> </li> <li class="divider"></li> <li wt-stop-propagation="click"> <div class="part-loading mt_20" ng-if="js_uploadbylink_uploading"></div> <form class="form-inline text-nowarp" role="form" ng-show="!js_uploadbylink_uploading"> <input type="text" ng-model="$parent.uploadlink_url" class="form-control input-sm fs_14" placeholder="粘贴下载链接"> <button class="btn btn-default plr_10" type="button" ng-click="js_uploadbylink($event)">添加 </button> </form> </li> </ul> </li> <li data-placement="bottom" class="js-popbox" ng-show="!task.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i>更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_timingtask($event, task)" title="归档"> <i class="icon-repeat"></i> 设为循环任务 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" data-placement="bottom" class="js-popbox"> <a href="javascript:;" ng-click="js_archive($event, task)" title="归档"> <i class="icon-archive"></i>归档 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_editor(task)" title="编辑" ng-class="{true:\'disabled\'}[task.is_edit]"> <i class="icon-pencil"></i>编辑 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" class="divider"></li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="show_task_move_dialog($event, task)"> <i class="icon-share-alt"></i>移动 </a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_copy($event, task)"> <i class="icon-copy"></i>拷贝</a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_trash($event, task)"> <i class="icon-trash"></i>删除</a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" class="divider"></li> <li><a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'tasks\',task]"><i class="icon-share"></i>共享</a></li> <li><a href="javascript:;" wt-entity-print=""><i class="icon-print"></i>打印</a></li> </ul> </li> <li class="divider-v"></li> <li> <a href="javascript:;" ng-click="js_close()" title="关闭"> <i class="icon-remove"></i> </a> </li> </ul> </div> <div class="entity-panel-body height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <div class="content-panel"> <div class="content-module editable-module"> <div ng-hide="task.is_edit"> <div class="entity-title"> <a class="task_check" ng-click="js_complete_task(task)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <h2 ng-click="js_show_editor(task)" class="ng-binding"> <span ng-class="{\'task-completed-style\':task.completed}">{{task.name}}</span> <em>{{task.entry_name}}</em> </h2> </div> <wt-badges task="task"></wt-badges> <div class="task-desc-add" ng-show="(global.prj_module.crud | permission:entity_permission) && !task.is_edit && task.desc.length == 0"> <a href="javascript:;" ng-click="js_show_editor(task)">添加任务描述</a> </div> <div class="task-desc"> <div class="task-desc-text markdown" wt-markdown=\'task.desc\'></div> </div> </div> <div class="edit-section" ng-show="task.is_edit"> <div> <input type="text" ng-model="task.temp_name" wt-enter="js_set_update($event, task)" class="form-control help-block" placeholder="任务名称" required> <wt-editor> <textarea ng-model="task.temp_desc" type="text" wt-ctrl-enter="js_set_update($event, task)" placeholder="添加任务描述(按Ctrl + 回车键提交)" wt-focus="task.shouldBeOpen"></textarea> </wt-editor> </div> <div class="form-group"> <button ng-click="js_set_update($event, task)" data-loading-text="保存中..." loading-status="task.is_saving" class="btn btn-success mr_15">保存 </button> <button ng-click="js_cancel_editor(task)" class="btn">取消</button> </div> </div> </div> <div class="content-module" ng-show="task.is_todo_edit || task.todos.length > 0"> <h4><i class="icon-th-list"></i>检查项</h4> <div class="progress-warp"> <span ng-bind="task.percentage+\'%\'"></span> <progressbar value="task.percentage" type="success"></progressbar> </div> <div class="task-todos"> <ul class="sortable" sortable="todo_sort_options"> <li class="todo-item" ng-repeat="todo in task.todos" pos="{{ todo.pos }}" ng-class="{\'todo-item-done\':todo.checked!=0}" todo-id="{{ todo.todo_id }}"> <a class="todo-item-check" ng-click="js_complete_todo(task, todo)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[todo.checked]"></i> </a> <div class="todo-item-edit editable"> <p ng-hide="todo.is_todo_edit" ng-click="js_show_todo_editor(todo)"> {{todo.name}}</p> <div class="edit" ng-show="todo.is_todo_edit" wt-show-edit="todo.is_todo_edit"> <div class="todo-edit-control"> <textarea ng-model="todo.name" type="text" class="form-control" atwho-members="todo_atwho_members" wt-atwho="{emojis:false}" atwho-keydown="js_keydown_edit_todo($event,task,todo)"/> </div> <div class="mb_10"> <button ng-click="js_save_todo($event,todo)" data-loading-text="保存" loading-status="todo.is_saving" class="btn btn-success mr_15">保存 </button> <button class="btn" ng-click="js_del_todo(task, todo)"> 删除 </button> </div> </div> </div> </li> </ul> </div> <div class="new-todo" ng-if="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_add_todo_editor(task)" ng-hide="task.is_add_todo_edit"> 添加检查项 </a> <div class="new-todo-control" ng-show="task.is_add_todo_edit" wt-show-edit="task.is_add_todo_edit"> <div style="width:100%; display:block;"> <textarea type="text" atwho-members="todo_atwho_members" wt-atwho="{emojis:false}" class="new-todo-text form-control" ng-model="todo.temp_name" atwho-keydown="js_keydown_add_todo($event,task,todo)" placeholder="输入检查项内容"/> </div> <div> <button class="btn btn-success mr_15" data-loading-text="添加中..." loading-status="todo.is_saving" ng-click="js_add_todo(task, todo)">添加 </button> <button class="btn" ng-click="js_cancel_add_todo_editor(task)"> 取消 </button> </div> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="task.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>附件</h4> <div class="entity-attachments"> <wt-attachment ng-repeat="file in task.files" del="js_del_attachment($event, file)" fancygroup="filegroup-task" del-permission="global.prj_module.crud | permission:entity_permission"></wt-attachment> <wt-attachment class="attachment-progress" ng-repeat="file in global_fileupload_queue()"></wt-attachment> <div class="dragfile-hover-placeholder"> <span class="name"><i class="icon-upload-alt"></i>松开上传文件</span> </div> </div> </div> <div class="content-module" id="tasks_tab_module" ng-cloak class="ng-cloak"> <wt-item-comment-activity></wt-item-comment-activity> </div> </div> <div class="sidebar-panel" data-minheight="120"> <div class="sidebar-module" ng-show="task.labels.length > 0 || (global.prj_module.crud | permission:entity_permission)"> <h4>标签</h4> <div class="task-labels"> <ul> <li class="task-label {{label.name}}-label" title="{{label.desc}}" ng-repeat="label in task.labels"> {{[label.desc,12]|cutstr}} <a class="icon-action icon-remove" ng-show="(global.prj_module.crud | permission:entity_permission)" href="javascript:;" data-ng-click="js_remove_label(label)" title="移除该标签"></a> </li> </ul> <button class="btn btn-block js-popbox" ng-if="global.prj_module.crud | permission:entity_permission" ng-click="js_assign_label($event, task)" data-placement="left"><i class="icon-tag"></i>设置标签 </button> </div> </div> <div class="sidebar-module" ng-show="task.members.length > 0 || (global.prj_module.crud | permission:entity_permission)"> <h4>分配</h4> <div class="entity-members"> <ul> <li ng-repeat="member in task.members"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_member_options" data-placement="left"></wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" data-placement="left" data-align="center" wt-pop-toggle-members="js_toggle_member($event, member, xEntity)" pid="pid" type="member" entity="task"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module"> <h4>关注</h4> <div class="entity-members"> <ul> <li ng-repeat="member in task.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" data-placement="left"></wt-avatar> </li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a class="avatar-add js-popbox" href="javascript:;" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="task" all-member-click="js_watch_all($event, members, xEntity)" data-placement="left" data-align="center"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> <li ng-show="(project.info.curr_role | is_guest) && (global.prj_module.watch | permission:entity_permission)"> <a class="avatar-add js-popbox" href="javascript:;" title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="js_toggle_watch($event, global.me, task)" data-placement="left" data-align="center"> <span class="o"> <i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i> </span> </a> </li> </ul> </div> </div> </div> </div> </div> <wt-entity-deny></wt-entity-deny> </div> ')}]),angular.module("/ycjs/tpl/header/header.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header.html",'<nav id="header_inner" class="navbar navbar-inverse navbar-default " role="navigation" ng-show="show_header"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-header-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a id="header_logo" href="/dashboard"> Worktile </a> </div> <div class="collapse navbar-collapse navbar-header-collapse"> <div id="header_search" class="navbar-left js-popbox" data-placement="bottom" data-offset="-13" data-align="left" ng-include="\'/ycjs/tpl/header/header_search.html\'"> </div> <ul class="nav navbar-nav navbar-right" ng-controller="user_ctrl" id="header_me"> <li class="divider-vertical hidden-xs"></li> <li> <wt-avatar member="global.me" size="30" class="js-popbox pr_0" name="[global.me.display_name,12] | cutstr" append=\'<span class="avatar-caret icon-caret-down ml_5"></span>\' click="js_pop_user_setting($event)" data-placement="bottom" data-align="right"> </wt-avatar> </li> </ul> <div id="header_menu" ng-include="\'/ycjs/tpl/header/header_menu.html\'"></div> <div id="wohoo-warp" class="navbar-right" data-ng-controller="new_feature_ctrl" ng-if="global.wohoo_show"> <div class="wohoo-inner js-popbox" data-placement="bottom" ng-click="js_show_new_feature($event)"> <div class="wohoo"> <div class="wohoo-neck"></div> <div class="wohoo-pop"></div> <div class="wohoo-head"></div> </div> </div> </div> </div> </nav> ')}]),angular.module("/ycjs/tpl/header/header_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header_menu.html",'<ul class="nav navbar-nav navbar-right"> <li class="divider-vertical hidden-xs"> </li> <li> <a id="tour_01" href="javascript:;" class="js-popbox" data-placement="bottom" ng-click="js_pop_new_menu($event)" master-new-dialog step="1"> <i class="icon-plus mr_5"></i> 新建 </a> </li> <li class="divider-vertical hidden-xs"></li> <li> <a href="javascript:;" class="notice-menu" wt-inbox-trigger> <i class="icon-bell-alt mr_5"></i> <span class="label label-default" ng-class="{\'label-danger\':notice_count>0}"> {{notice_count}} </span> </a> </li> </ul> ')}]),angular.module("/ycjs/tpl/header/header_search.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header_search.html",'<form class="navbar-form" role="search" ng-controller="search_ctrl"> <i class="icon-search"></i> <input type="text" value="" class="js-popbox typeahead" wt-up-down-enter="js_up_down_enter($event,keyCode)" autocomplete="off" placeholder="搜索..." ng-model="keywords"/> <button class="icon-search hide" ng-click="js_show_pop_search_result($event)"></button> </form>')}]),angular.module("/ycjs/tpl/header/pop_global_fileupload.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_global_fileupload.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>上传列表</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body pop_global_file_upload"> <table class="table files mb_0 ng-cloak" data-toggle="modal-gallery" data-target="#modal-gallery"> <tr ng-repeat="file in pop_data.scope.queue" ng-class="{\'first\':$first}"> <td> <p class="name"> <span>{{file.name}}</span> <span class="size">{{file.size | formatFileSize}}</span> </p> <div ng-show="file.error"><span class="label label-danger">{{file.error | fileuploadErrorInfo}}</span> </div> <div ng-hide="file.error" class="progress progress-striped active fade" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div> </div> </td> <td class="action"> <br> <a href="javascript:;" ng-click="file.$cancel()" ng-hide="!file.$cancel"> 取消 </a> </td> </tr> </table> </div> </div> ')}]),angular.module("/ycjs/tpl/header/pop_new_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_new_menu.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3> 新建</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="/project/add"> <i class="icon-inbox"></i> 新建项目<br> <span class="text-muted"> 项目是任务、文件、话题、文档、日程以及人员的集合，每位成员都只能看到自己参与的项目。 </span> </a> </li> <li class="divider"></li> <li> <a href="/teams/add"> <i class="icon-sitemap"></i> 新建团队 <br> <span class="text-muted"> 团队是Worktile中最顶级的组织单元，使用团队组织项目和成员，每个成员可以加入多个团队。 </span> </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/header/pop_search.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_search.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>搜索结果</h3> </div> <div class="popbox-bodywrapper" wt-scroll ng-if="filter_projects.length>0"> <div class="popbox-body fixed-width"> <ul class="popbox-menu"> <li ng-repeat="project in filter_projects"> <a data-ng-class="{true:\'active\'}[$index == current_index]" ng-href="/project/{{project.pid}}/task"> <span ng-bind-html="project.name | highlight:keywords:caseSensitive"></span> </a> </li> </ul> </div> </div> <div class="popbox-footer"> <ul class="popbox-menu mt_0"> <li class="divider" ng-if="filter_projects.length>0"></li> <li> <a href="javascript:;" data-ng-click="js_to_search_result()"><i class="icon-xxx"></i>显示全部搜索结果</a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/mail/pop_convert_to_post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/mail/pop_convert_to_post.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>分享给成员</h3> </div> <div class="popbox-body" ng-if="selected_projects.length == 0"> <div class="alert alert-warning"> 你还没有参与任何项目。 </div> </div> <div class="popbox-body" ng-if="convert_success"> <div class="alert alert-success"> 该邮件已经成功分享到项目话题中，<a href="/project/{{new_post.pid}}/post">现在去看看</a> </div> </div> <form ng-if="!convert_success && selected_projects.length > 0" name="convert_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body pop-add-event"> <div class="section-group"> <lable>项目：</lable> <select ng-change="js_change_project()" ng-model="new_post.pid" class="form-control project-select" ng-options="project.pid as project.name group by project.team_id for project in selected_projects" wt-team-name> </select> </div> <div class="section-group"> <lable>关注：</lable> <ul class="entity-members"> <li class="" data-ng-repeat="member in new_post.watchers"> <a href="javascript:;"> <wt-avatar member="member" faceclass="plr_5" size="40"></wt-avatar> </a> </li> <li> <a class="avatar-add js-popbox" href="javascript:;" ng-click="js_to_watchers()" data-placement="left"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> </ul> </div> <div class="section-group"> <button wt-form-submit="js_convert_to_post(convert_form,new_post)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="new_post.is_saving">确定 </button> <button ng-click="js_close()" class="btn">取消</button> </div> </div> </form> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>关注</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block"/> <br> <div class="part-loading" ng-show="loading_members"></div> <ul class="popbox-menu" data-ng-hide="loading_members"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member.watched]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> </ul> </div> </div> <div class="hr" ng-show="!loading_members"></div> <div class="popbox-footer popbox-footer-splite" ng-show="!loading_members"> <a class="action-item popbox-footer-splite-left" href="javascript:;" ng-click="js_add_all(0)"> <span>全部添加</span> </a> <a class="action-item popbox-footer-splite-right" href="javascript:;" ng-click="js_step(0)"> <span>确定</span> ({{ new_post.watchers.length }}/{{ members.length }}) </a> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/pop_project_info.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/pop_project_info.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>项目信息</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width"> <ul class="popbox-menu"> <li ng-class="{\'disabled\': project.info.curr_role == 4}"> <a href="javascript:;" ng-click="js_goto_prj_setting($event)"> <i class="icon-cog"></i> 项目设置 </a> </li> <li class="divider"></li> <li ng-if="project.info.team_id && project.info.team_id != \'-1\'"> <a href="/teams/{{project.info.team_id}}"> <i class="icon-sitemap"></i> 所属团队 <br/> <span class="color_gray pl_20">{{project.info.team.name}}</span> </a> </li> <li ng-if="project.info.team_id && project.info.team_id != \'-1\'" class="divider"></li> <li> <a href="javascript:;"> <i class="icon-user"></i> 项目角色 <br/> <span class="color_gray pl_20"> {{ {1:\'负责人\', 2:\'成员\', 3:\'访客\',4:\'访客\' }[project.info.curr_role] }} </span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;"> <i class="icon-info-sign"></i> 项目描述 <br/> <span class="color_gray pl_20">{{ {true:\'项目没有描述\', false: project.info.desc }[project.info.desc==\'\'] }}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/prj_not_found.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/prj_not_found.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <dl class="frame" data-minheight="90"> <dt> <span class="title">出错啦</span> </dt> <dd> <div class="error-panel"> <i class="icon-inbox"></i><br/> <span>项目不存在或者你没有权限访问当前项目</span><br/> <a class="btn btn-danger" href="/projects">回到项目列表</a> </div> </dd> </dl> </div> </div>')}]),angular.module("/ycjs/tpl/project/prj_title_panel.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/prj_title_panel.html",'<div class="title" ng-controller="prj_info_ctrl"> <h3> <a href="javascript:;" class="js-popbox ml_sub10 mr_5" data-placement="bottom" data-align="left" tooltip-placement="bottom" ng-show="(global.prj_module.setting | permission:project.info.permission)" tooltip="设置标识" ng-click="js_show_project_setting_identify()"> <i class="{{project.info.pic}}" ng-style="{color:project.info.bg}"></i> </a> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}" ng-show="!(global.prj_module.setting | permission:project.info.permission)"></i> <a href="javascript:;" class="js-popbox ml_sub10" data-placement="bottom" data-align="left" ng-click="js_view_prj_info($event)" tooltip-placement="bottom" tooltip="项目设置">{{[project.info.name,30] | cutstr}}</a> </h3> <a id="tour_02_02" href="javascript:;" ng-if="project.info.is_star != -1" tooltip-placement="bottom" ng-click="js_star_toggle($event,project.info)" tooltip="{{{1:\'取消常用项目\',0:\'设置为常用项目\'}[project.info.is_star]}}"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.info.is_star]"></i> </a> <a href="javascript:;" ng-if="project.info.curr_role == 4" tooltip-placement="bottom" ng-click="js_favorite_toggle($event,project.info)" tooltip="{{{1:\'取消收藏\',0:\'收藏\'}[project.info.is_favorite]}}"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.info.is_favorite]"></i> </a> <a href="javascript:;" tooltip-placement="bottom" tooltip="{{project.info.visibility | projectVisibility}}" show-project-visibility-options ng-click="show($event)"> <i ng-class="{1:\'icon-private\',2:\'icon-protected\',3:\'icon-public\'}[project.info.visibility]"></i> </a> </div>')}]),angular.module("/ycjs/tpl/project/chat/project_chats.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/chat/project_chats.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> </div> </div> </div> <div class="height-nonav" wt-scroll ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <span class="title">聊天记录</span> </dt> <dd> <div class="empty-panel" ng-show="chat != null && chat.messages.length == 0"> <i class="icon-comment"></i><br/> <span>还没有任何聊天记录</span> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div> <div class="post-panel"> <div class="chat-list" ng-if="global.loading_done"> <div class="part-loading" data-ng-show="!loading_chat_done"></div> <table class="table table-bordered" data-ng-show="loading_chat_done"> <thead> </thead> <tbody> <tr ng-class="{true:\'me\'}[message.from.uid == global.me.uid]" data-ng-repeat="message in chat.messages"> <td class="date" ng-class="{false:\'hide-both\', true:\'hide-bottom\'}[message.is_show_date]"> <span data-ng-show="message.is_show_date">{{message.create_date | dateFormatZHCN}}</span> </td> <td class="member"> <wt-avatar name="true" member="message.from" size="30" wt-disable-drag></wt-avatar> </td> <td class="content"> <div class="markdown-chat" ng-if="message.body.type == 1" wt-markdown="message.body.content"></div> <div class="chat-message-upload" ng-if="message.body.type == 3"> <div class="preview-icon" ng-class="{true:\'fancybox-file\'}[message.body.content.isImg]" data-fancybox-group="chat-history" data-fancybox-href="{{message.body.content | wtBoxView}}" data-fancybox-type="image"> <img ng-src="{{message.body.content.icon | wtBox}}" alt="{{ message.body.content.name }}"/> </div> <div class="file-name" title="{{message.body.content.name}}"> <a href="javascript:;" ng-click="locator.to_file(message.body.content.pid, message.body.content.fid, false);">{{message.body.content.name}}</a> </div> <div class="file-size">{{message.body.content.size | fileSize}}</div> </div> </td> <td class="time"> {{message.create_date | timeFormat}} </td> </tr> </tbody> </table> <br> <div class="pull-right" data-ng-show="loading_chat_done" wt-pagination="chats_pagination_opts"></div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')
}]),angular.module("/ycjs/tpl/project/event/pop_add_event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_add_event.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建日程</h3> </div> <div class="popbox-body" ng-if="selected_projects.length == 0 && show_project_select"> <div class="alert alert-warning">你还没有可以新建日程的项目。</div> </div> <div class="max-h500" wt-scroll> <form ng-if="selected_projects.length > 0 || !show_project_select" name="new_event_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body pop-add-event"> <textarea wt-enter="js_save_event(new_event_form)" name="event_name" ng-model="new_event.name" placeholder="新的日程安排" class="form-control" required wt-focus/> <div class="section-group" ng-if="show_project_select"> <lable>项目：</lable> <select ng-change="js_change_project()" ng-model="new_event.pid" class="form-control project-select" ng-options="project.pid as project.name group by project.team_id for project in selected_projects" wt-team-name></select> </div> <div class="section-group"> <lable>开始：</lable> <input name="start_date" ng-model="new_event.start_date" placeholder="" type="text" class="form-control control-first" data-ng-click="js_to_set_date(\'start_date\')" readonly required/> <select ng-model="new_event.start_hour" ng-options="time for time in start_hour_sections" class="form-control hour-select"></select> <span class="separation">:</span> <select ng-model="new_event.start_minute" ng-options="time for time in start_minute_sections" class="form-control minute-select"></select> </div> <div class="section-group"> <lable class="">结束：</lable> <input name="end_date" ng-model="new_event.end_date" placeholder="" type="text" class="form-control control-first" data-ng-click="js_to_set_date(\'end_date\')" readonly required/> <select ng-model="new_event.end_hour" ng-options="time for time in end_hour_sections" class="form-control hour-select" ng-change="js_change_end_hour()"></select> <span class="separation">:</span> <select ng-model="new_event.end_minute" ng-options="time for time in end_minute_sections" class="form-control minute-select"></select> </div> <div class="section-group"> <lable>位置：</lable> <input name="event_location" ng-model="new_event.location" placeholder="位置(可选)" type="text" class="form-control location-input" /> </div> <div class="section-group"> <lable>重复：</lable> <select ng-model="new_event.repeat_interval" ng-options="interval.desc for interval in repeat_intervals" class="form-control location-input"></select> </div> <div class="section-group"> <lable>参与人：</lable> <ul class="entity-members"> <li data-ng-repeat="member in new_event.attendees"> <a href="javascript:;"> <wt-avatar member="member" faceclass="plr_5" size="40"></wt-avatar> </a> </li> <li> <a class="avatar-add js-popbox" href="javascript:;" ng-click="js_to_attendee($event)" data-placement="left"> <span class="o"> <i class="icon-plus"></i> </span> </a> </li> </ul> </div> <div class="section-group"> <button wt-form-submit="js_save_event(new_event_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="new_event.is_saving">确定</button> <button ng-click="js_close()" class="btn">取消</button> </div> </div> </form> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{set_date_title}}</h3> </div> <div class="popbox-body"> <wt-full-datepicker default-date="current_date" set-date="js_set_date(date)" min-date="min_date"></wt-full-datepicker> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>参与人</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block" /> <br> <div class="part-loading" ng-show="loading_members"></div> <ul class="popbox-menu" data-ng-hide="loading_members"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)" class="text-nowarp"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> </ul> </div> </div> <div class="hr" ng-show="!loading_members"></div> <div class="popbox-footer popbox-footer-splite" ng-show="!loading_members"> <a class="action-item popbox-footer-splite-left" href="javascript:;" ng-click="js_add_all(0)"> <span>全部添加</span> </a> <a class="action-item popbox-footer-splite-right" href="javascript:;" ng-click="js_step(0)"> <span>确定</span>({{ new_event.attendees.length }}/{{ members.length }})</a> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/event/pop_delete_event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_delete_event.html",' <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除日程</h3> </div> <div class="popbox-body" ng-if="!is_repeat_event"> <span>日程删除后无法恢复，确认要删除该日程吗？</span> </div> <div class="popbox-body" ng-if="is_repeat_event"> <span>您正在删除重复日程</span> <div class="radio"> <label> <input type="radio" name="optionsRadios" id="optionsRadios1" value="1" checked ng-model="del.del_option">只删除当前的日程 </label> </div> <div class="radio "> <label> <input type="radio" name="optionsRadios" id="optionsRadios3" value="2" ng-model="del.del_option">删除当前事件和之后的此重复日程 </label> </div> <div class="radio"> <label> <input type="radio" name="optionsRadios" id="optionsRadios2" value="3" ng-model="del.del_option">删除所有此重复日程 </label> </div> </div> <div class="popbox-footer"> <button ng-click="js_delete_event()" data-loading-text="删除中..." loading-status="is_deleting" class="btn btn-danger float_left">确定删除</button> </div> ')}]),angular.module("/ycjs/tpl/project/event/pop_event_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_event_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多选项</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_step(2)"> <i class="icon-filter"></i> 按成员筛选任务 </a> </li> <li> <a href="javascript:;" ng-click="js_step(1)"> <i class="icon-xx"></i> 显示已完成任务 <span class="text-muted small-tip"> {{{1: \'开启\', 0: \'关闭\'}[project.info.show_completed]}} </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>显示已完成任务</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a ng-click="js_prefs_show_completed()"> <i class="color_gray" ng-class="{1:\'icon-ok\',0:\'icon-xx\'}[project.info.show_completed]"></i> <strong>开启</strong> <br/> <span class="text-muted pl_20">任务完成后，在日历中显示</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_prefs_show_completed()"> <i class="color_gray" ng-class="{0:\'icon-ok\',1:\'icon-xx\'}[project.info.show_completed]"></i> <strong>关闭</strong> <br/> <span class="text-muted pl_20">任务完成后，在日历中隐藏</span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>按成员筛选任务</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_change_member(\'all\')"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == \'all\']" class="color_gray"></i> 全部成员</a> </li> <li class="divider"></li> <li class="member-item"> <a href="javascript:;" tabindex="-1" ng-click="js_change_member(self.uid)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == self.uid]" class="color_gray"></i> <wt-avatar member="self" name="true" faceclass="plr_5" atname="true" size="30"> </wt-avatar> </a> </li> <li class="member-item" ng-repeat="member in members"> <a href="javascript:;" tabindex="-1" ng-click="js_change_member(member.uid)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == member.uid]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"> </wt-avatar> </a> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/event/project_events.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/project_events.html",'<div class="prj_panel layout_content"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main text-center"> <span id="calendar_title_warp"> <a href="javascript:;" ng-click="prev()"> <i class="icon-chevron-left"></i> </a> <h4 id="calendar_title" class="help-inline p_0"></h4> <a href="javascript:;" ng-click="next()"> <i class="icon-chevron-right"></i> </a> </span> <div class="toolbar_panel pull-right"> <div class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" ng-if="global.prj_module.crud | permission:project.info.permission"> <button class="btn btn-danger" id="btn_new_event" wt-new-event="js_new_event_success(event)">新建日程 </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" wt-new-event="js_new_event_success(event)"> <i class="icon-xx"></i> 新建日程</a> </li> <li> <a href="javascript:;" id="btn_new_task" wt-click="js_show_task_pop($event)"> <i class="icon-xx"></i> 新建任务</a> </li> </ul> </div> <div class="btn-group mr_15"> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'month\']" ng-click="changeView(\'month\')">月 </button> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'basicWeek\']" ng-click="changeView(\'basicWeek\')">周 </button> </div> <button class="btn" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="event-panel layout_content_main_nonav" wt-scroll> <dl class="frame" data-minheight="160"> <div id="calendar" calendar="myCalendar" ui-calendar="calendarConfig" ng-model="calendarEventSources"> </div> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div> ')}]),angular.module("/ycjs/tpl/project/file/pop_add_folder.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_add_folder.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建文件夹</h3> </div> <form name="add_folder_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <div> <input name="file_name" ng-model="name" placeholder="文件夹名" class="form-control help-block" type="text" wt-focus required /> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_add_folder(add_folder_form, name)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_save_ing">确定 </button> <button ng-click="js_close(result)" class="btn float_left">取消</button> </div> </form> ')}]),angular.module("/ycjs/tpl/project/file/pop_attachment_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_attachment_menu.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>附件选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-href="{{file.path | wtBox}}" target="_blank"><i class="icon-xx"></i> 下载</a></li> <li><a href="/project/{{file.pid}}/file/{{file.fid}}"><i class="icon-xx"></i> 查看</a></li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_del_file()"><i class="icon-xx"></i> 移除附件</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_delete_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_delete_file.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除文件</h3> </div> <div class="popbox-body"> <span>文件删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_file()" class="btn btn-danger" data-loading-text="删除中..." loading-status="is_deleting">确定删除</button> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_file_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_file_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>文件选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu" ng-if="(global.prj_module.crud | permission:project.info.permission)"> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-eye-open"></i> 添加关注</a></li> <li class="divider"></li> <li><a ng-href="{{file | wtBoxDownload}}"><i class="icon-download-alt"></i> 下载</a></li> <li class="divider"></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class="icon-share-alt"></i> 移动到...</a></li> <li><a ng-click="js_step(3)" href="javascript:;"><i class="icon-trash"></i> 删除</a></li> </ul> <ul class="popbox-menu" ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <li> <a ng-click="js_toggle_watch($event,global.me,file)" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="global.me.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="file" all-member-click="js_watch_all($event, members, xEntity)"/> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动文件到</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu" > <wt-folder-tree > </wt-folder-tree> </ul> </div> </div> <div class="popbox-footer top-divider"> <a class="action-item" href="javascript:;" ng-click="move()" > <span class="ml_20 pl_10"> 移动到文件夹 </span> </a> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除文件</h3> </div> <div class="popbox-body"> <span>文件删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_file()" class="btn btn-danger">确定删除</button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_file_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_file_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多选项</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> 数据导出</a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>数据导出</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/files/exports?format=json" target="_blank"> <i class="icon-code"></i> JSON数据 </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_folder_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_folder_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>文件夹选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-xx"></i> 重命名</a></li> <li><a href="javascript:;" ng-click="js_step(3)"><i class="icon-xx"></i> 设置图标</a></li> <li class="divider"></li> <li><a ng-href="/folder/{{folder.fid}}/zip/download?pid={{folder.pid}}&token={{$root.global.me.sid}}" target="_blank"><i class="icon-folder-close-alt"></i> 打包下载</a></li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(4)"><i class="icon-share-alt"></i>移动到...</a></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class="icon-trash"></i> 删除</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>重命名文件夹</h3> </div> <form name="edit_folder_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <input name="folder_name" type="text" class="form-control help-block" ng-model="folder_name" placeholder="文件夹名" wt-focus required/> </div> <div class="popbox-footer"> <button wt-form-submit="js_change_name(edit_folder_form, folder_name)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_save_ing">确定 </button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </form> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除文件夹</h3> </div> <div class="popbox-body"> <span>文件夹及其文件删除后会放在回收站，可以在回收站<br/>选择恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_folder()" class="btn btn-danger">确定删除</button> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置图标</h3> </div> <div class="popbox-bodywrapper"> <div class="popbox-body"> <div class="part-loading" ng-show="prj_files_loading"></div> <ul class="popbox-menu"> <li ng-repeat="folder_icon in folder_icons" ng-click="js_set_folder_icon(folder_icon)"> <a class="folder-item-li-menu" href="javascript:;"> <img ng-src="{{folder_icon.path | wtBox}}"/> <span class="text-muted small-tip" ng-if="folder_icon.ext == folder.ext"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动文件到</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu" > <wt-folder-tree></wt-folder-tree> </ul> </div> </div> <div class="popbox-footer top-divider"> <a class="action-item" href="javascript:;" ng-click="move()" > <span class="ml_20 pl_10"> 移动到文件夹 </span> </a> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_move_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_move_file.html",'<ul class="popbox-step"> <li class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动文件到</h3> </div> <div class="part-loading" ng-show="folder_structure_loading"></div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu" > <wt-folder-tree > </wt-folder-tree> </ul> </div> </div> <div class="popbox-footer top-divider"> <a class="action-item" href="javascript:;" ng-click="move()" > <span class="ml_20 pl_10"> 移动到文件夹 </span> </a> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_show_versions.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_show_versions.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>历史版本</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-hide="file_version_loaded"></div> <ul class="popbox-menu"> <li ng-repeat="version in versions" class="file-version-item"> <span class="file-item-version">#{{version.version}}</span> <span class="file-item-owner">{{version.owner.display_name}}</span> <span class="file-item-date">上传于{{version.create_date | fromNow}}</span> <a class="file-item-li-menu file-picfile" ng-href="{{version | wtBoxDownload}}" target="_blank"> <img ng-src="{{version.icon | wtBox}}" alt="{{ version.name }}"/> <span class="file-name">{{version.name}}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_watch_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_watch_file.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>添加关注</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_watch(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class="color_gray"></i> <wt-avatar member="member" faceclass="plr_5" name="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all()"> <i class="icon-xx"></i> <span ng-bind="{true:\'添加全部成员\',false:\'所有成员已关注\'}[file.watchers.length < members.length]"></span> ({{ file.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/project_files.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/project_files.html",'<div class="prj_panel layout_content"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div class="btn-group js-popbox" ng-if="global.prj_module.crud | permission:project.info.permission"> <span class="btn fileinput-button btn-danger"> <span ng-show="upload_enabled">添加文件 <input wt-uploadfile="file_upload_option" multiple type="file" name="files[]" title="添加文件" /> </span> </span> <button type="button" class="btn btn-danger dropdown-toggle mr_15" data-toggle="dropdown"> <i class="icon-caret-down"></i> </button> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_trigger_upload($event)"> <i class="icon-xx"></i> 本地上传文件</a> </li> <li> <a href="javascript:;" ng-click="js_add_folder_pop($event)"> <i class="icon-xx"></i> 新建文件夹 </a> </li> </ul> </div> <div class="btn-group"> <button class="btn"> <i class="{{ {true:\'icon-th-large\',false:\'icon-list\'}[view_type==\'icon\']}}"></i> </button> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="icon-caret-down"></i></a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="set_view_type(\'icon\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[view_type==\'icon\']}}"></i>图标视图</a> </li> <li> <a href="javascript:;" ng-click="set_view_type(\'list\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[view_type==\'list\']}}"></i>列表视图</a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_select_filter(\'default\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[current_filter == \'default\']}}"></i>按默认方式</a> </li> <li> <a href="javascript:;" ng-click="js_select_filter(\'name\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[current_filter == \'name\']}}"></i>按文件名称</a> </li> <li> <a href="javascript:;" ng-click="js_select_filter(\'create_date\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[current_filter == \'create_date\']}}"></i>按创建时间</a> </li> <li> <a href="javascript:;" ng-click="js_select_filter(\'update_date\')"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[current_filter == \'update_date\']}}"></i>按修改时间</a> </li> </ul> </div> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll wt-dragfile="dragfile_option" wt-dragfile-enable="(global.prj_module.crud | permission:project.info.permission)"> <dl class="frame dragfile-hover-placeholder"> <i class="icon-upload-alt mr_10"></i> <span>松开上传文件</span> </dl> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <div wt-breadcrumb="files_controls.folders" ></div wt-breadcrumb> <ul class="tabs"> <li> <a data-ng-class="{\'active\':current_tab == 0}" href="javascript:;" ng-click="js_change_tab(0)">全部</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">我上传的</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">我关注的</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="(files_controls.files | filter:{is_hide:\'!true\'}).length == 0 && global_fileupload_queue().length == 0 && files_controls.loading_done"> <i class="icon-file"></i> <br/> <span>还没有任何文件</span> </div> <div class="file-panel"> <div class="file-list" ng-if="files_controls.files.length > 0"> <wt-file-item ng-repeat="file in files_controls.files track by file.fid" item-click="js_goto_folder(file)" view-type="view_type"> </wt-file-item> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="files_controls.loading_done"> </div> <button class="btn" ng-show="files_controls.has_more_files && files_controls.loading_done" data-loading-text="加载中..." ng-click="load_one_more_page_files2($event);"> 加载更多... </button> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div> ')}]),angular.module("/ycjs/tpl/project/graph/project_graphs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/graph/project_graphs.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main text-center"> <div class="toolbar_panel pull-right"> <div class="btn-group"> <button class="btn" ng-class="{true:\'active\'}[graph_type==\'overview\']" ng-click="js_to_overview()"> 进度 </button> <button class="btn" ng-class="{true:\'active\'}[graph_type==\'pulse\']" ng-click="js_to_pulse()"> 周报 </button> <button class="btn" ng-click="js_to_daily()" ng-class="{true:\'active\'}[graph_type==\'daily\']"> 日报 </button> <a class="btn" href="/project/{{project.info.pid}}/activity">活动</a> </div> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="graph-panel height-nonav" wt-scroll> <div> <dl class="frame" data-minheight="160" ng-show="graph_type == \'overview\'"> <dt> <span class="title">项目进度</span> <ul class="tabs"> <li> <a ng-class="{\'active\':tab_index == \'1\'}" href="javascript:;" ng-click="js_change_tab(\'1\')">项目成员</a> </li> <li> <a ng-class="{\'active\':tab_index == \'2\'}" href="javascript:;" ng-click="js_change_tab(\'2\')">任务列表</a> </li> <li> <a ng-class="{\'active\':tab_index == \'3\'}" href="javascript:;" ng-click="js_change_tab(\'3\')">任务标签</a> </li> </ul> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div ng-show="tab_index == \'1\'"> <div id=\'members_task_graph\' style="height:{{height}}"></div> </div> <div class="graph-container" id=\'entry_task_graph\' ng-show="tab_index == \'2\'"></div> <div class="graph-container" id=\'labels_task_graph\' ng-show="tab_index == \'3\'"></div> </div> </dd> </dl> <dl class="frame" data-minheight="160" ng-show="graph_type == \'pulse\'"> <dt> <span class="title">项目周报</span> <ul class="tabs pull-left"> <li> <a ng-class="{\'active\':tab_index == \'4\'}" href="javascript:;" ng-click="js_change_tab(\'4\')">项目成员</a> </li> <li> <a ng-class="{\'active\':tab_index == \'5\'}" href="javascript:;" ng-click="js_change_tab(\'5\')">本周进度</a> </li> <li> </li> </ul> <span class="pull-right" ng-show="graph_type == \'pulse\' && global.loading_done"> <a title="上一周" href="javascript:;" ng-click="to_pulse_prev_week()" class="help-inline"><i class="icon-chevron-left"></i> </a> <h4 class=" help-inline ">{{pulse_graph_date}}</h4> <a title="下一周" href="javascript:;" ng-disabled="disable_pulse_next" ng-click="to_pulse_next_week()" class="help-inline"><i class="icon-chevron-right"></i> </a> </span> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div ng-show="tab_index == \'4\'"> <div class="graph-container" style="height:{{height}}" id=\'pulse_member_graph\' ng-show="tab_index == \'4\'"></div> </div> <div class="graph-container" id=\'pulse_weekly_graph\' ng-show="tab_index == \'5\'"></div> </div> </dd> </dl> <dl class="frame" data-minheight="160" ng-show="graph_type == \'daily\'"> <dt> <span class="title">项目日报</span> <ul class="tabs pull-left"> <li> <a ng-class="{\'active\':tab_index == \'8\'}" href="javascript:;" ng-click="js_change_tab(\'8\')">项目成员</a> </li> <li> <a ng-class="{\'active\':tab_index == \'9\'}" href="javascript:;" ng-click="js_change_tab(\'9\')">完成任务</a> </li> <li> <a ng-class="{\'active\':tab_index == \'10\'}" href="javascript:;" ng-click="js_change_tab(\'10\')">新增任务</a> </li> </ul> <span class="pull-right" ng-show="graph_type == \'daily\' && global.loading_done"> <a title="前一天" href="javascript:;" ng-click="js_to_prev_daily()" class="help-inline"><i class="icon-chevron-left"></i></a> <h4 class="center_title help-inline p_0">{{daily_end | dateFormatZHCN}}</h4> <a href="javascript:;" title="后一天" ng-disabled="disable_daily_next" ng-click="js_to_next_daily()" class="help-inline"><i class="icon-chevron-right"></i></a> </span> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div ng-show="tab_index == \'8\'"> <div class="graph-container" id=\'daily_task_graph\' style="height:{{height}}"></div> </div> <div class="graph-container" ng-show="tab_index == \'9\'"> <div class="entry-tasks"> <wt-task ng-repeat="task in daily_completed_tasks" task="task" class="slide-trigger" hide-action="true" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" task-entry-id="{{task.entry_id}}" ng-click="locator.to_task(task.pid, task.tid, false)"></wt-task> <div class="graph-empty-panel" ng-show="daily_completed_tasks.length==0"> <i class="icon-check"></i><br/> <span>没有完成任务</span> </div> </div> </div> <div class="graph-container" ng-show="tab_index == \'10\'"> <div class="entry-tasks"> <wt-task ng-repeat="task in daily_created_tasks" task="task" class="slide-trigger" hide-action="true" task-entry-id="{{task.entry_id}}" ng-click="locator.to_task(task.pid, task.tid, false)"></wt-task> <div class="graph-empty-panel noborder" ng-show="daily_created_tasks.length==0"> <i class="icon-check"></i><br/> <span>没有新增任务</span> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')
}]),angular.module("/ycjs/tpl/project/member/pop_add_member_select_role.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/member/pop_add_member_select_role.html",'<ul class="popbox-step"> <li class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择角色</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_add_user_as_admin()"> <strong>负责人</strong> <br/> <span class="text-muted pl_20">可以管理项目成员，对项目进行设置</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_member()"> <strong>成员</strong> <br/> <span class="text-muted pl_20">通用性操作，如创建任务、上传文件等</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_guest()"> <strong>访客</strong> <br/> <span class="text-muted pl_20">只能查看项目内容、发表评论、关注</span> </a> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/member/pop_add_prj_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/member/pop_add_prj_member.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>添加成员</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input autofocus="" type="text" class="form-control help-block" ng-model="search_user_input" placeholder="搜索成员" ng-change="js_search_user(search_user_input)"/> <br/> <div class="part-loading" wt-loading-done="members_loading_done"></div> <ul class="popbox-menu" ng-show="show_members.length == 0"> <li> <div class="empty-menu-nomin-h">没有可以添加的成员</div> </li> </ul> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in show_members"> <a href="javascript:;" tabindex="-1" ng-click="js_add_prj_member(member)"> <wt-avatar member="member" size="30" faceclass="plr_5" name="true" atname="true"></wt-avatar> <span class="action color_gray" ng-click="js_go_to_set_role($event,member)"><i class="icon-chevron-right"></i></span> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择角色</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_add_user_as_admin()"> <strong>负责人</strong> <br/> <span class="text-muted pl_20">可以管理项目成员，对项目进行设置</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_member()"> <strong>成员</strong> <br/> <span class="text-muted pl_20">通用性操作，如创建任务、上传文件等</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_guest()"> <strong>访客</strong> <br/> <span class="text-muted pl_20">只能查看项目内容、发表评论、关注</span> </a> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/member/pop_user_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/member/pop_user_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-avatar"> <div class="avatar-body" ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="selected_member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4> <span class="text-muted pl_15">{{selected_member.role | prj_role}}</span> <p> <span class="help-inline">@{{selected_member.name}}</span> </p> </div> <div class="member_desc ng-scope"> <span class="text-muted ng-binding">{{ selected_member.desc || "他很懒，还没有个人说明" }}</span> </div> </div> <div class="avatar-footer" ng-if="global.prj_module.setting | permission:project.info.permission"> <div class="pull-left color_gray"> {{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[selected_member.status] }} </div> <div ng-if="can_change"> &nbsp; <button ng-click="js_step(1)" class="btn btn-danger mr_15" ng-show="selected_member.status==1">设置权限</button> <button ng-click="js_step(2)" class="btn" >移除</button> </div> <div ng-show="!can_change" class="text-left"> <div> <span class="text-muted">你不能修改当前成员权限，每个项目至少需要一名负责人</span> </div> </div> </div> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置权限</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_set_user_as_admin()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==1]"></i> <strong>负责人</strong> <br/> <span class="text-muted pl_20">可以管理项目成员，对项目进行设置</span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_set_user_as_member()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==2]"></i> <strong>成员</strong> <br/> <span class="text-muted pl_20">通用性操作，如创建任务、上传文件等</span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_add_user_as_guest()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==3]"></i> <strong>访客</strong> <br/> <span class="text-muted pl_20">只能查看项目内容、发表评论、关注</span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移除成员</h3> </div> <div class="popbox-body"> <span>被移除的成员，将不能再访问该项目的信息，但<br/>相关的数据不会被删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_delete_prj_member(selected_member)" class="btn btn-danger">确定移除</button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/add_or_edit_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/add_or_edit_page.html",'<div class="prj_panel layout_content page-edit"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-if="global.prj_module.crud | permission:project.info.permission"> <button data-ng-show="!is_add && global.loading_done" ng-click="js_pop_delete($event)" class="btn mr_15 js-popbox" data-placement="bottom" data-align="right"> 删除</button> <button class="btn" data-ng-show="global.loading_done" ng-click="js_cancel_edit()"> 退出编辑 </button> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <dl class="frame" data-minheight="150" ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <dd> <div class="error-panel"> <i class="icon-file-text-alt"></i><br/> <span>你没有权限添加编辑该项目的文档</span><br/> <a class="btn btn-danger" href="/project/{{project.info.pid}}/page">查看文档列表</a> </div> </dd> </dl> <div class="container-fluid height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' ng-if="global.prj_module.crud | permission:project.info.permission"> <dl class="frame" data-minheight="150"> <form name="page_form" class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" novalidate=""> <div class="edit-container" ng-show="page" data-minheight="300" wt-ctrl-enter="js_save_page(page_form,true)"> <!-- <input type="text" name="page_title" ng-model="page.name" class="form-control help-block" placeholder="输入文档标题" required wt-focus="docTitleInputFocus"> <textarea type="text" ng-model="page.content" name="page_content" data-minheight="390" wt-ctrl-enter="js_save_page(page_form,true)" placeholder="编写文档内容(按Ctrl + 回车键提交)" wt-full-editor></textarea> --> <wt-new-editor edit-title="page.name" edit-content="page.content" pid="pid" entity-id="page.page_id" entity-type="page" message="page.message" parent-id="page.parent_id" is-notify="page.is_notify" > </wt-new-editor> </div> <div class="edit-footer" ng-show="page"> <div class="alert alert-danger wt-alert" ng-show="!is_add && page.locked==1 && (page.locked_by.uid != global.me.uid)"> <i class="icon-info-sign"></i> 文档正在被 <strong>{{page.locked_by.display_name}}</strong> 锁定编辑中，你无法编辑该文档 </div> <div class="row" > <div class="col-md-6"> <input type="text" name="page_message" ng-model="page.message" class="form-control help-block" placeholder="{{ page.placeholder }}" > <div class="checkbox" ng-if="is_add == true"> <label> <input type="checkbox" ng-model="page.is_notify"> 发送通知给关注的成员 </label> </div> </div> <div class="col-md-6" ng-if="is_add || page.parent_id != \'\'"> <select class="form-control help-block" ng-model="page.parent_id" name="page_parent_id" ng-options="rootpage.page_id as rootpage.name for rootpage in root_pages"> <option value="">选择父文档</option> </select> </div> </div> <div class="page-edit-action"> <button class="btn btn-success mr_15" wt-form-submit="js_save_page(page_form,true)" data-loading-text="保存并继续" loading-status="is_saving" ng-disabled="page.locked==1 && (page.locked_by.uid != global.me.uid)"> 保存并继续 </button> <button class="btn" wt-form-submit="js_save_page(page_form,false)" data-loading-text="保存" loading-status="is_saving" ng-disabled="page.locked==1 && (page.locked_by.uid != global.me.uid)"> 保存 </button> </div> </div> </form> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> ')}]),angular.module("/ycjs/tpl/project/page/page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/page.html",'<div class="layout_content page-view"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="pull-right"> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> <ul class="page-actions nav nav-pills pull-right"> <li ng-show="page.is_deleted" class="entity-warning">文档已经于 {{page.update_date | timeFormatZHCN}} 删除了 </li> <li ng-show="page.is_deleted" class="divider-v"></li> <li> <a href="javascript:;" wt-go-to="/project/{{ pid }}/page/" title="返回"> <i class="icon-chevron-left"></i> 返回 </a> </li> <li class="divider-v"></li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="/project/{{page.pid}}/page/{{page.page_id}}/edit" title="编辑"> <i class="icon-pencil"></i> 编辑 </a> </li> <li ng-show="(global.prj_module.crud | permission:entity_permission) && page.parent_id == \'\'" class="divider-v"></li> <li ng-show="(global.prj_module.crud | permission:entity_permission) && page.parent_id == \'\'"> <a href="/project/{{page.pid}}/page/add/{{page.page_id}}" title="添加子文档"> <i class="icon-plus"></i> 添加子文档 </a> </li> <li class="js-popbox" data-placement="bottom" ng-show="!page.is_deleted && (global.prj_module.view | permission:entity_permission)"> <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" title="更多"> <i class="icon-chevron-down"></i> 更多 </a> <ul class="dropdown-menu pull-right"> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_show_trash($event)"><i class="icon-trash"></i>删除</a> </li> <li ng-show="global.prj_module.crud | permission:entity_permission" class="divider"></li> <li><a href="javascript:;" wt-entity-share="[\'\',project.info.pid,\'pages\',page]"><i class="icon-share"></i>共享</a></li> <li><a href="javascript:;" wt-detail-print=""><i class="icon-print"></i>打印</a></li> <li ng-show="global.prj_module.crud | permission:entity_permission"> <a href="javascript:;" ng-click="js_got_page_ver_diff($event)"><i class="icon-time"></i>历史版本</a> </li> </ul> </li> </ul> </div> </div> <div class="height-nonav" wt-scroll> <wt-page-detail page="page"></wt-page-detail> <wt-entity-deny></wt-entity-deny> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> ')}]),angular.module("/ycjs/tpl/project/page/pop_delete_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_delete_page.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除文档</h3> </div> <div class="popbox-body"> <span>文档删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_delete()" class="btn btn-danger float_left">确定删除</button> </div>')}]),angular.module("/ycjs/tpl/project/page/pop_page_action.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_page_action.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>文档选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu" ng-if="(global.prj_module.crud | permission:project.info.permission)"> <li ng-show="show_sub_menu"><a href="/project/{{pid}}/page/add/{{page.page_id}}"> <i class="icon-file-text-alt"></i> 添加子文档 </a> </li> <li><a ng-click="js_step(1)" href="javascript:;"><i class="icon-eye-open"></i> 添加关注</a></li> <li class="divider"></li> <li><a ng-href="/project/{{ pid }}/page/{{ page.page_id }}/edit"><i class="icon-pencil"></i> 编辑</a></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class=" icon-trash"></i> 删除</a></li> </ul> <ul class="popbox-menu" ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <li> <a ng-click="js_toggle_watch($event,global.me,page)" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="global.me.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="page" all-member-click="js_watch_all($event, members, xEntity)"/> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除</h3> </div> <div class="popbox-body"> <span> 文档删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。<br/> </span> </div> <div class="popbox-footer"> <button ng-click="js_delete_page(page)" class="btn btn-danger" data-loading-text="删除中..." loading-status="is_deleting">确定删除 </button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/pop_pages_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_pages_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多选项</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> 数据导出</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-envelope"></i> 通过邮件创建文档</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>通过邮件创建文档</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> 发送邮件到以下地址 <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <strong>邮件标题</strong> <br/> <span class="text-muted pl_20">文档：这里写文档的标题</span> </a> </li> <li> <a href="javascript:;"> <strong>邮件正文</strong> <br/> <span class="text-muted pl_20">文档内容，支持markdown语法</span> </a> </li> <li> <a href="/guide" target="_blank"> <i class="icon-question-sign"></i> 查看更多帮助 </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>数据导出</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/pages/exports?format=json" target="_blank"> <i class="icon-code"></i> JSON数据 </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/pop_parents_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_parents_page.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择父文档</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="page in pages"> <a href="/project/{{ pid }}/page/add/{{page.page_id}}"> <i class="icon-file-text-alt"></i> {{page.name}} </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/page/project_pages.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/project_pages.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" ng-if="global.prj_module.crud | permission:project.info.permission"> <button class="btn btn-danger" wt-go-to="/project/{{ pid }}/page/add">新建文档 </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_add_subpage_pop($event)"> <i class="icon-xx"></i> 新建子文档</a> </li> </ul> </div> <div class="btn-group"> <button class="btn" ng-class="{\'active\':view_type==\'tree\'}" ng-click="set_view_type(\'tree\')" tooltip="分级展示" tooltip-placement="bottom"> <i class="icon-indent-right"></i> </button> <button class="btn" ng-class="{\'active\':view_type==\'list\'}" ng-click="set_view_type(\'list\')" tooltip="平级展示" tooltip-placement="bottom"> <i class="icon-list"></i> </button> </div> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <span class="title">文档</span> <ul class="tabs"> <li > <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">全部</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">我创建的</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 3}" href="javascript:;" ng-click="js_change_tab(3)">我关注的</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-if="pages == null || pages.length == 0 || (pages | filter:{is_hide:\'!true\'}).length == 0 "> <i class="icon-file-text-alt"></i><br/> <span>没有任何文档</span> </div> <div class="page-panel"> <div class="page-list" ng-if="pages"> <wt-page-item ng-repeat="page in pages" item-click="js_goto_page_detail($event,page)" subitem-click="js_goto_page_detail($event,sub_page)" view-type="view_type"></wt-page-item> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div>')}]),angular.module("/ycjs/tpl/project/page/version_diff.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/version_diff.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <span class="title"> <h4 class="pull-left breadcrumb-item mr_45"> <a href="/project/{{pid}}/page">文档</a> </h4> <span class="pull-left breadcrumb-item" ng-repeat="bc in breadcrumbs"> <div ng-bind-html="bc" ng-click="child_event_handler($event)" class="help-inlineblock">{{bc}}</div> <i class="icon-angle-right ml_10 mr_10 help-inlineblock" ng-hide="$last == true;"></i> </span> </span> <button class="btn ml_15 pull-right" ng-click="show_diff()" tooltip="请选择两个版本" ng-class="{true: \'disabled\'}[ready_to_compare == false]" ng-hide="show_compare_result">比对 </button> </dt> <dd> <div class="page-panel"> <div class="page-list" ng-hide="show_compare_result"> <div class="wt-row page-version-row" ng-class="{0:\'border-notop\'}[$index]" ng-repeat="version in page_vers" page-id="{{version.page_id}}"> <div class="column checkbox-version"> <div class="checkbox ml_5"> <label class="w_100p"> <input type="checkbox" class="mr_10" ng-click="select_version(version)" ng-class="{\'disabled\':ready_to_compare && !version.selected}" ng-disabled="ready_to_compare && !version.selected">#{{version.version}} </label> </div> </div> <div class="column message"> <span>{{version.message}}</span> </div> <div class="column owner"> <wt-avatar member="version.owner" name="true" size="30"></wt-avatar> </div> <div class="column date"> <span class="date">{{version.create_date | fromNow}}&nbsp;</span> </div> </div> </div> <div class="page-list" ng-show="show_compare_result"> <div id="diff_output_div" ng-bind-html="diff_result_html"> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div> ')}]),angular.module("/ycjs/tpl/project/post/add_or_edit_post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/add_or_edit_post.html",'<dl class="frame add_edit_panel" > <div class="post-edit-container"> <form name="post_form" class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" novalidate=""> <!-- <input type="text" id="new_post_title" autofocus name="post_title" ng-model="edit_post.name" class="form-control help-block" placeholder="话题名称" required=""> <wt-editor> <textarea type="text" ng-model="edit_post.content" name="post_content" wt-ctrl-enter="js_save_post(post_form)" placeholder="说点什么(按Ctrl + 回车键提交)"></textarea> </wt-editor> --> <div class="add-post-edit-wrapper " wt-ctrl-enter="js_save_post(post_form)"> <wt-new-editor edit-title="edit_post.name" edit-content="edit_post.content" pid="current_pid" entity-type="post" entity-id="edit_post.post_id" watchers="edit_post.watchers" > </wt-new-editor> </div> <div class="post_watch_bar"> <button class="btn btn-success mr_15" wt-form-submit="js_save_post(post_form)" data-loading-text="保存中..." loading-status="is_saving">保存</button> <button class="btn btn-cancel" ng-click="js_cancel_edit_post()">取消</button> <div class="pull-right"> <button class="btn js-popbox" data-placement="bottom" wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="edit_post" all-member-click="js_watch_all($event, members, xEntity)"> <i class="icon-eye-open"></i>添加关注 </button> <ul> <li ng-repeat="member in edit_post.watchers"> <wt-avatar member="member" class="js-popbox" pop-member="member" wt-pop-member="pop_watcher_options" size="30"></wt-avatar> </li> </ul> </div> </div> </form> </div> </dl>')}]),angular.module("/ycjs/tpl/project/post/pop_delete_post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_delete_post.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除话题</h3> </div> <div class="popbox-body"> <span>话题删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_post()" class="btn btn-danger float_left">确定删除</button> </div>')}]),angular.module("/ycjs/tpl/project/post/pop_post_action.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_post_action.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>话题选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-if="(global.prj_module.crud | permission:project.info.permission)"><a ng-click="js_step(1)"><i class="icon-eye-open"></i> 添加关注</a></li> <li ng-if="(global.prj_module.crud | permission:project.info.permission)"> <a ng-click="js_step(2)"><i class=" icon-trash"></i> 删除</a></li> <li ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <a ng-click="js_toggle_watch($event,global.me,edit_post)" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="global.me.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="edit_post" all-member-click="js_watch_all($event, members, xEntity)"/> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除</h3> </div> <div class="popbox-body"> <span> 话题删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。<br/> </span> </div> <div class="popbox-footer"> <button ng-click="js_delete_post(edit_post)" class="btn btn-danger" data-loading-text="删除中..." loading-status="is_deleting">确定删除 </button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/post/pop_posts_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_posts_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多选项</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> 数据导出</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-envelope"></i> 通过邮件创建话题</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>通过邮件创建话题</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> 发送邮件到以下地址 <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <strong>邮件标题</strong> <br/> <span class="text-muted pl_20">话题：这里写话题的标题</span> </a> </li> <li> <a href="javascript:;"> <strong>邮件正文</strong> <br/> <span class="text-muted pl_20">话题内容，支持Markdown语法</span> </a> </li> <li> <a href="/guide" target="_blank"> <i class="icon-question-sign"></i> 查看更多帮助 </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>数据导出</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/posts/exports?format=json" target="_blank"> <i class="icon-code"></i> JSON数据 </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/post/project_posts.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/project_posts.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <button class="btn btn-danger mr_15" ng-click="js_show_add_post()" type="button" ng-if="global.prj_module.crud | permission:project.info.permission">新建话题 </button> <div class="btn-group" ng-controller="post_filter_ctrl"> <button class="btn"> <i class="icon-sort-by-alphabet-alt"></i> </button> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="icon-caret-down"></i></a> <ul class="dropdown-menu pull-right"> <li ng-repeat="item in filter_items"><a href="" ng-click="js_select_filter(item)"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[item.is_selected]}}"></i>{{ item.name }}</a> </li> </ul> </div> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll> <div wt-slide-show="show_add_post" slide-change="js_slide_change(value)"> <ng-include src="\'/ycjs/tpl/project/post/add_or_edit_post.html\'"></ng-include> </div> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <span class="title">话题</span> <ul class="tabs"> <li> <a data-ng-class="{\'active\':current_tab == 0}" href="javascript:;" ng-click="js_change_tab(0)">全部</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">我发起的</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">我关注的</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="part_loading_done && posts != null && posts.length == 0 && !show_add_post_empty"> <i class="icon-list-alt"></i><br/> <span>还没有任何话题</span> </div> <div class="post-panel"> <div class="post-list"> <wt-post-item ng-repeat="post in posts" ng-click="show_post_entity(post.pid, post.post_id, false)"></wt-post-item> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" ng-click="js_load_more($event);"> 加载更多 </button> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div>')}]),angular.module("/ycjs/tpl/project/sidebar/add_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/add_member.html",'<div class="prj_sidebar_step_body"> <h5 for="add_member_email"> 通过邮件添加 </h5> <div class="plr_10 rightpanel-wrapper"> <div class="input-group mb_10"> <input type="email" id="add_member_email" ng-model="data.invite_email" wt-enter="js_invite_member(data.invite_email)" class="form-control" placeholder="请输入邮箱地址" required ng-focus="clear_alert()" ng-change="clear_alert()" /> <a href="javascript:;" class="input-group-addon plr_10" ng-click="js_invite_member(data.invite_email)"> <img src="/img/return_key.png" alt="return key" class="w_12"> </a> </div> <div class="part-loading mt_20" data-ng-show="member_inviting"></div> </div> <div class="m_10 alert alert-danger" ng-show="email_validation_error"> <i class="icon-remove-sign"></i> 请输入正确邮箱格式 </div> <div class="m_10 alert alert-success" ng-show="add_done"> <i class="icon-ok"></i> &nbsp;添加成功 </div> <div class="hr collapse_hide"></div> <h5 for="add_member_url">通过链接邀请</h5> <div class="plr_10"> <div class="mb_10"> <div ng-show="!join_project_link_open"> <span class="tips">把链接通过QQ、微信、邮件组等方式分享给团队成员，他们即可点击链接直接加入项目。</span><br/> <a href="javascript:;" ng-click="toggle_join_project_link()" >开启链接</a> </div> <div ng-show="join_project_link_open"> <input type="text" title="{{link_to_join}}" ng-model="link_to_join" class="form-control help-block" wt-click-select readonly="readonly" /> <span class="tips">成员加入后，为了防止链接泄漏可以选择</span> <a href="javascript:;" ng-click="toggle_join_project_link()">关闭链接</a> </div> </div> </div> <div class="hr collapse_hide"></div> <div class="add_member" ng-hide="is_individual_project"> <div class="part-loading mt_20" data-ng-show="loading_team_members"></div> <div data-ng-hide="loading_team_members"> <h5 class="pl_10" ng-hide="unassigned_team_members.length == 0">从团队成员添加</h5> <ul class="avatars" ng-hide="loading_team_members || unassigned_team_members.length == 0"> <li class="avatars-empty" ng-if="unassigned_team_members.length == 0"> <i class="icon-user icon-3x"></i> <br/>还没有团队成员 </li> <li ng-repeat="member in unassigned_team_members"> <div ng-click="js_add_user_as_member(member)" class="js-popbox member" data-placement="left" ng-class="{true: \'member-pendding\'}[[(member.status==2 || member.status==3)]]" title="{{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[member.status] }}"> <wt-avatar member="member" name="[member.display_name,22] | cutstr" size="30"></wt-avatar> </div> </li> </ul> <div class="hr" ng-hide="unassigned_team_visitors.length == 0 || unassigned_team_members.length == 0"></div> <h5 class="pl_10" ng-hide="unassigned_team_visitors.length == 0">从团队访客添加</h5> <ul class="avatars" ng-hide="unassigned_team_visitors.length == 0"> <li class="avatars-empty" ng-if="unassigned_team_visitors.length == 0"> <i class="icon-user icon-3x"></i> <br/>还没有团队访客 </li> <li ng-repeat="member in unassigned_team_visitors"> <div ng-click="js_add_user_as_member(member)" class="js-popbox member" data-placement="left" ng-class="{true: \'member-pendding\'}[[(member.status==2 || member.status==3)]]" title="{{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[member.status] }}"> <wt-avatar member="member" name="[member.display_name,22] | cutstr" size="30"></wt-avatar> </div> </li> </ul> </div> </div> </div> ')
}]),angular.module("/ycjs/tpl/project/sidebar/create_by_mail.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/create_by_mail.html",'<div class="prj_sidebar_step_body"> <dl class="prj_sidebar_dl"> <dt>发送邮件到以下地址</dt> <dd> <input type="text" ng-model="create_by_mail" class="form-control help-block" wt-click-select readonly="readonly"/> </dd> </dl> <div class="hr"></div> <dl class="prj_sidebar_dl"> <dt>查看详细的帮助</dt> <dd> <ul class="prj_sidebar_step_menu"> <li> <a href="/guide/task/create#bymail" target="_blank"> <i class="icon-check"></i> 创建任务 </a> </li> <li> <a href="/guide/post/create#by-email" target="_blank"> <i class="icon-list-alt"></i> 创建话题 </a> </li> <li> <a href="/guide/page/create#by-mail" target="_blank"> <i class="icon-file-text-alt"></i> 创建文档 </a> </li> </ul> </dd> </dl> </div> ')}]),angular.module("/ycjs/tpl/project/sidebar/export_data.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/export_data.html",'<div class="prj_sidebar_step_body" ng-init="oneAtATime=true;status={}"> <accordion close-others="oneAtATime"> <accordion-group is-open="status.open1" heading="导出JSON格式" ng-class="{true:\'open\'}[status.open1]"> <ul class="prj_sidebar_step_menu"> <li> <a href="/api/projects/{{pid}}/tasks/exports?format=json" target="_blank"> <i class="icon-check"></i> 任务 </a> </li> <li> <a href="/api/projects/{{pid}}/files/exports?format=json" target="_blank"> <i class="icon-file"></i> 文件</a> </li> <li> <a href="/api/projects/{{pid}}/posts/exports?format=json" target="_blank"> <i class="icon-list-alt"></i> 话题</a> </li> <li> <a href="/api/projects/{{pid}}/pages/exports?format=json" target="_blank"> <i class="icon-file-text-alt"></i> 文档</a> </li> </ul> </accordion-group> <accordion-group heading="导出CSV格式" is-open="status.open2" ng-class="{true:\'open\'}[status.open2]"> <ul class="prj_sidebar_step_menu"> <li> <a href="/api/projects/{{pid}}/tasks/exports?format=csv" target="_blank"> <i class="icon-check"></i> 任务 </a> </li> <li> <a href="/api/projects/{{pid}}/files/exports?format=csv" target="_blank"> <i class="icon-file"></i> 文件</a> </li> <li> <a href="/api/projects/{{pid}}/posts/exports?format=csv" target="_blank"> <i class="icon-list-alt"></i> 话题</a> </li> <li> <a href="/api/projects/{{pid}}/pages/exports?format=csv" target="_blank"> <i class="icon-file-text-alt"></i> 文档</a> </li> </ul> </accordion-group> </accordion> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/filter_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/filter_tasks.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <input type="text" class="form-control" ng-model="task_filter_text" ng-change="js_filter_text()" placeholder="输入查询条件" /> </div> <div class="hr"></div> <dl class="prj_sidebar_dl" ng-if="labels_is_set"> <dt>按标签筛选</dt> <dd> <ul class="checkable"> <li class="label-item" ng-repeat="label in labels_is_set"> <i class="icon-ok pull-right" ng-if="js_label_is_filter(label.name)"></i> <a href="javascript:;" class="js-toggle-label-filter" ng-click="js_filter_label(label)"> <span class="task-label {{label.name}}-label ml_5"></span> <span class="label-name help-inline ml_15">{{label.desc}}</span> </a> </li> </ul> </dd> </dl> <div class="hr" ng-if="labels_is_set"></div> <dl class="prj_sidebar_dl"> <dt>按成员筛选</dt> <dd> <ul class="avatars checkable"> <li ng-repeat="member in assigned_team_members"> <i class="icon-ok pull-right" ng-if="js_member_is_filter(member.uid)"></i> <div class="member m_sub5"> <wt-avatar member="member" class="m_sub5" size="30" name="[member.display_name,18] | cutstr" nameclass="ml_15" click="js_filter_member(member)"></wt-avatar> </div> </li> </ul> </dd> </dl> <div class="hr"></div> <dl class="prj_sidebar_dl"> <dt>按截止日期筛选</dt> <dd> <ul class="checkable"> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'today\'"></i> <a ng-click="js_filter_date(\'today\')"> <span class="ml_50">今天</span> </a> </li> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'tomorrow\'"></i> <a ng-click="js_filter_date(\'tomorrow\')"> <span class="ml_50">明天</span> </a> </li> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'week\'"></i> <a ng-click="js_filter_date(\'week\')"> <span class="ml_50">本周</span> </a> </li> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'nextweek\'"></i> <a ng-click="js_filter_date(\'nextweek\')"> <span class="ml_50">下周</span> </a> </li> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'month\'"></i> <a ng-click="js_filter_date(\'month\')"> <span class="ml_50">本月</span> </a> </li> <li class="ptb_2"> <i class="icon-ok pull-right" ng-if="task_filters.date == \'due\'"></i> <a ng-click="js_filter_date(\'due\')"> <span class="ml_50">已过期</span> </a> </li> </ul> </dd> </dl> <div class="hr"></div> <dl class="prj_sidebar_dl"> <dd> <ul class="checkable"> <li class="ptb_2"> <a ng-click="clear_task_filters()"> <span class="ml_50">清除筛选</span> </a> </li> </ul> </dd> </dl> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_copy.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_copy.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <form name="prj_copy_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div class="form-group"> <label class="control-label">项目名称：</label> <div> <input type="text" ng-model="prj_copy.name" placeholder="项目名称" name="prj_name" autofocus class="form-control" required/> </div> </div> <div class="form-group"> <label class="control-label">选择团队：</label> <div> <select class="form-control" ng-model="prj_copy.dest_team" ng-options="team.name for team in prj_copy.teams"></select> </div> </div> <div class="form-group"> <label class="control-label">选择公开性：</label> <div> <select class="form-control" ng-model="prj_copy.selected_visibility" ng-options="visibility.name for visibility in prj_copy.visibility_options"></select> </div> </div> <div class="form-group"> <label class="control-label">是否保留：</label> <div class="checkbox"> <label> <input name="prj_copy.keepTask" type="checkbox" ng-model="prj_copy.keepTasks"> 任务 </label> </div> <div class="checkbox"> <label > <input name="prj_copy.keepTask" type="checkbox" ng-model="prj_copy.keepFiles"> 文件 </label> </div> <div class="checkbox"> <label > <input name="prj_copy.keepTask" type="checkbox" ng-model="prj_copy.keepPosts"> 话题 </label> </div> <div class="checkbox"> <label > <input name="prj_copy.keepTask" type="checkbox" ng-model="prj_copy.keepPages"> 文档 </label> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_prj_copy(prj_copy_form)" data-loading-text="拷贝中..." class="btn btn-success mr_15" loading-status="is_prj_copying">拷贝</button> </div> </div> </form> </div> </div> ')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting.html",'<div class="prj_sidebar_step_body"> <ul class="prj_sidebar_step_menu"> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(31)"> 修改基本信息</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(32)"> 修改项目标识</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(33)"> 项目偏好设置</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(40)"> 项目应用设置</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(50)"> Webhook 设置</a> </li> <li class="divider" ng-if="global.prj_module.setting | permission:project.info.permission"></li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(34)"> 归档项目 </a> </li> <li ng-if="project.info.curr_role==1&&project.info.archived==0"> <a href="javascript:;" ng-click="js_step(39)"> 移动项目 </a> </li> <li ng-if="project.info.curr_role==1&&project.info.archived==1"> <a href="javascript:;" ng-click="js_step(35)"> 激活项目</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(36)"> 删除项目</a> </li> <li class="divider" ng-if="project.info.curr_role==1"></li> <li ng-if="project.info.archived==0"> <a href="javascript:;" ng-click="js_step(37)"> 邮件通知</a> </li> <li> <a href="javascript:;" ng-click="js_step(38)"> 退出项目</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_activate.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_activate.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <span class="tips">该项目当前状态为已归档，你可以选择激活。激活项目后，项目成员可以正常访问和操作项目内容<br/><br/></span> <button ng-click="js_prj_unarchive()" data-loading-text="激活中..." loading-status="is_unarchiving" class="btn btn-success">确定激活 </button> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_archive.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_archive.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <span class="tips">项目归档后，项目内容将成只读，不能被更新。选择重新激活后，项目将恢复正常。<br/><br/></span> <button ng-click="js_prj_archive()" data-loading-text="归档中..." loading-status="is_archiving" class="btn btn-success">确定归档 </button> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_baseinfo.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_baseinfo.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <form name="prj_update_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div class="form-group"> <label class="control-label">项目名称：</label> <div> <input type="text" ng-model="project.info.new_name" placeholder="项目名称" name="prj_name" autofocus required class="form-control"/> </div> </div> <div class="form-group"> <label class="control-label">项目公开性：</label> <div> <select class="form-control" ng-model="project.info.new_visibility" ng-options="visibility.id as visibility.name for visibility in visibilities"></select> </div> </div> <div class="form-group"> <label class="control-label">项目描述：</label> <div> <textarea wt-ctrl-enter="js_prj_update(prj_update_form)" ng-model="project.info.new_desc" placeholder="为项目添加简短描述（可选）" name="prj_desc" rows="4" class="form-control"/> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_prj_update(prj_update_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_prj_saveing">确定 </button> </div> </div> </form> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_del.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_del.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <span class="tips"> 删除项目后，所有的内容都将被删除，并且不能恢复。<br/><br/>请输入项目的完整名称，确认要删除该项目：<br/><br/> </span> <input type="text" class="form-control" ng-model="prj_name" wt-enter="js_prj_del(prj_name)" placeholder="项目名称"> <br/> <button ng-click="js_prj_del(prj_name)" ng-disabled="prj_name != project.info.name" class="btn btn-danger" data-loading-text="删除中..." loading-status="is_deleting"> 确认并删除 </button> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_identify.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_identify.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <form name="prj_logo_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <ul class="prj-colors list-col-4"> <li ng-repeat="prj_color in prj_colors" class="text-center"> <span ng-click="js_color_select(prj_color)" class="prj_color" ng-style="{backgroundColor:prj_color}"> <i class="icon-white icon-ok" ng-show="prj_color == project.info.new_bg"></i> </span> </li> </ul> <ul class="prj-icons list-col-4"> <li ng-repeat="prj_icon in prj_icons" class="text-center" ng-class="{true:\'active\'}[prj_icon == project.info.new_pic]"> <span ng-click="js_icon_select(prj_icon)" class="prj_icon" ng-style="{color:project.info.new_bg}"> <i class="{{prj_icon}}"></i> </span> </li> </ul> <br/> <button wt-form-submit="js_prj_set_logo(prj_logo_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_logo_saving">确定 </button> </form> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_nav.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_nav.html",'<div class="prj_sidebar_step_body prj_sidebar_main" data-minheight="140"> <dl class="prj_sidebar_dl"> <dt> 开启的应用（拖拽排序）： </dt> <dd> <ul class="js_sortable checkable min-h50" ui-sortable="nav_sortable_options" ng-model="prj_navigations"> <li ng-repeat="nav in prj_navigations" nav-id="{{nav.id}}"> <a href="javascript:;" class="ptb_8"> <i ng-class="nav.icon" class="p_12"></i> {{nav.title}}</a> </li> </ul> </dd> </dl> <ul class="prj_sidebar_step_menu"> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_step(41)"><i class="icon-th-large"></i> 添加关闭应用</a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_nav_plugin.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_nav_plugin.html",'<div class="prj_sidebar_step_body prj_sidebar_main" data-minheight="140"> <ul class="prj_sidebar_step_menu checkable"> <div ng-repeat="nav in prj_navigations_all" nav-id="{{nav.id}}"> <li ng-click="js_toggle_nav(nav)"> <i class="pull-right icon-ok" ng-if="( [prj_navigations_navids,nav.id] | indexOf ) || prj_navigations_navids.length == 0"></i> <a href="javascript:;"> <i ng-class="nav.icon"></i> {{nav.title}} <br/> <span class="desc"> {{nav.desc}} </span> </a> </li> <li class="divider"></li> </div> </ul> </div> ')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_notify.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_notify.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <div ng-show="project.info.is_notify==1&&project.info.archived==0"> <span class="tips">当前邮件通知开启，您将收到关于该项目的所有邮件通知。可以选择关闭邮件通知，您将不会收到邮件通知。</span><br/><br/> <button class="btn btn-success" ng-click="js_prj_unnotify()"><i class="icon-off"></i> 关闭邮件通知 </button> </div> <div ng-show="project.info.is_notify==0&&project.info.archived==0"> <span class="tips">当前邮件通知关闭，您将不会收到关于该项目的所有邮件通知。可以选择再次启用邮件通知。</span><br/><br/> <button class="btn btn-success" ng-click="js_prj_notify()"><i class="icon-bell"></i> 打开邮件通知 </button> </div> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_preference.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_preference.html",'<div class="prj_sidebar_step_body"> <dl class="prj_sidebar_dl"> <dt>任务完成后自动归档</dt> <dd> <ul class="checkable"> <li> <i class="icon-ok pull-right" ng-if="project.info.auto_archived == 1"></i> <a href="javascript:;" ng-click="js_toggle_autoarchive()"> <span class="ml_15" ng-if="project.info.auto_archived == 1">开启</span> <span class="ml_15" ng-if="project.info.auto_archived == 0">关闭</span> </a> </li> </ul> </dd> </dl> <div class="hr"></div> <dl class="prj_sidebar_dl"> <dt>日历中显示已完成任务</dt> <dd> <ul class="checkable"> <li> <i class="icon-ok pull-right" ng-if="project.info.show_completed == 1"></i> <a href="javascript:;" ng-click="js_toggle_show_done_task_in_event()"> <span class="ml_15" ng-if="project.info.show_completed == 1">开启</span> <span class="ml_15" ng-if="project.info.show_completed == 0">关闭</span> </a> </li> </ul> </dd> </dl> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_quit.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_quit.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <div ng-hide="project.info.curr_role == 1 && !has_other_admin"> <span class="tips"> 退出项目后，你将无法再访问该项目内容，但相关的数据不会被删除。<br/></br>请输入项目的完整名称，确认要退出该项目：<br/><br/> </span> <input type="text" class="form-control" ng-model="prj_name" placeholder="项目名称"> <br/> </div> <span class="tips" ng-show="project.info.curr_role==1 && !has_other_admin"> 您是项目唯一负责人，因此不能退出项目。<br/><br/> </span> <button ng-click="js_prj_quit(prj_name)" ng-disabled="prj_name != project.info.name" class="btn btn-danger" data-loading-text="退出中..." loading-status="is_quiting"> 确定退出 </button> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_timingtask_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_timingtask_list.html",'<div class="prj_sidebar_step_body"> <div class="sidebar_table"> <table class="table table-bordered"> <thead> <tr> <th>名称</th> </tr> </thead> <tbody> <tr ng-if="loading_prj_timingtasks"> <td class="part-loading"></td> </tr> <tr ng-if="prj_timingtasks.length==0"> <td class="noresult text-muted" ng-if="true"> 还没有任何 循环任务 记录 </td> </tr> <tr ng-if="!loading_prj_timingtasks" ng-repeat="timingtask in prj_timingtasks"> <td> {{timingtask.name}} <br/> <span class="text-muted fs_12"> {{ {0:\'每日\',1:\'每周\',2:\'每月\'}[timingtask.recurrence]}} </span> <button class="pull-right btn btn-defalut btn-sm" ng-click="js_timingtask_del($event,timingtask)"> 删除 </button> </td> </tr> </tbody> </table> <div class="fs_14 text-muted"> <i class="icon-info-sign"></i> 请在任务更多菜单中添加循环任务。 </div> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_transfer.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_transfer.html",'<div class="prj_sidebar_step_body "> <div class="p_10"> <span class="tips">移动当前项目到另外一个团队</span> </div> <dl class="prj_sidebar_dl"> <dd> <ul class="task-filter-checkable " ng-init="data.transfer_to_tid = project.info.team_id"> <li ng-repeat="team in transfer_to_teams" ng-click="set_transfer_to(team.team_id)" class="ptb_2"> <a href="javascript:;"> <div class="help-inlineblock m_5"><i ng-class="{true:\'icon-user\', false: \'icon-sitemap\'}[team.team_id == -1]"></i></div> <span class="ml_10">{{team.name}}</span> <i class="icon-ok p_5 pull-right" ng-if="data.transfer_to_tid==team.team_id"></i> </a> </li> </ul> </dd> </dl> <button ng-click="transfer()" data-loading-text="移动中..." loading-status="is_transfering" class="btn btn-success ml_10 " ng-class="{true:\'disabled\'}[data.transfer_to_tid == project.info.team_id]" ng-hide="flashing_success" >确定移动 </button> </div> ')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_webhook_add_edit.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_webhook_add_edit.html",'<div class="prj_sidebar_step_body"> <div class="p_10"> <form name="webhook_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div class="form-group"> <label class="control-label">Webhook 名称：</label> <div> <input type="text" ng-model="webhook.name" placeholder="Webhook 名称" name="webhook_name" wt-autofocus required class="form-control"/> </div> </div> <div class="form-group"> <label class="control-label">通知 URL：</label> <div> <input type="text" ng-model="webhook.web_hook_url" placeholder="https://example.com/postreceive" name="webhook_url" required wt-regex="^(https?|s):\\/\\/(((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$" class="form-control"/> </div> </div> <div class="form-group"> <label class="control-label">URL 密钥：</label> <div> <input type="text" ng-model="webhook.secret" placeholder="(选填)" name="webhook_secret" class="form-control"/> </div> </div> <div class="form-group"> <label class="control-label">通知内容：</label> <select ng-model="webhook.is_every" class="form-control"> <option value="1">全部事件</option> <option value="0">自定义事件</option> </select> <div ng-if="webhook.is_every==0"> <div class="checkbox" ng-repeat="item in webhook_action" > <label> <input type="checkbox" name="webhook_actions" id="webhook_actions_{{$index}}" ng-model="webhook.actions[$index]" ng-true-value="{{item.action}}" ng-false-value=""/> {{item.desc}} </label> </div> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_webhook_add_edit(webhook_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_prj_saveing">确定 </button> <button ng-if="!webhook.wid" class="btn" ng-click="js_step(50)"> 取消 </button> <button ng-if="webhook.wid" class="btn js-popbox" ng-click="js_webhook_del($event,webhook)"> 删除 </button> </div> </div> </form> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/project_setting_webhook_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/project_setting_webhook_list.html",'<div class="prj_sidebar_step_body"> <div class="sidebar_table"> <table class="table table-bordered"> <thead> <tr> <th>Webhook 名称</th> </tr> </thead> <tbody> <tr ng-if="loading_prj_webhooks"> <td class="part-loading"></td> </tr> <tr ng-if="prj_webhooks.length==0"> <td class="noresult text-muted" colspan="4" ng-if="true"> 还没有任何 Webhook 记录 </td> </tr> <tr class="clickable" ng-if="!loading_prj_webhooks" ng-repeat="webhook in prj_webhooks" ng-click="js_webhook_edit($event,webhook)"> <td> {{webhook.name}} <span class="text-muted fs_12"> {{ {true:\'全部\',false:(webhook.actions)}[webhook.is_every==1]}} </span> <i class="icon-chevron-right pull-right text-muted"></i> </td> </tr> </tbody> </table> <button class="btn btn-success" ng-click="js_step(51)">添加 Webhook</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/sidebar/setting_label.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/setting_label.html","<ng-include src=\"'/ycjs/tpl/project/task/pop_mod_set_labels.html'\"></ng-include>")}]),angular.module("/ycjs/tpl/project/sidebar/sidebar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/sidebar/sidebar.html",'<div class="prj_sidebar h_100p" wt-sidebar-toggle="global.right_sidebar_is_fold" data-ng-controller="prj_sidebar_ctrl"> <div class="prj_sidebar_header collapse_show"> <ul class="list-inline"> <li ng-class="{\'active\':(global.project_sidebar_foldview==\'module\')}"> <a href="javascript:;" ng-mouseover="global.project_sidebar_foldview = \'module\'" title="应用"> <i class="icon-th-large"></i> </a> </li> <li ng-class="{\'active\':(global.project_sidebar_foldview==\'member\')}"> <a href="javascript:;" ng-mouseover="global.project_sidebar_foldview = \'member\'" title="成员"> <i class="icon-user"></i> </a> </li> </ul> </div> <div id="tour_02_01" ng-switch on="step" class="prj_sidebar_step_header collapse_hide"> <div ng-switch-default ng-click="js_toggle_step_body()"> <a href="javascript:;"> <button ng-class="{false:\'icon-caret-down\',true:\'icon-caret-up\'}[bodyOpen]"></button> <h3 class="pl_15">项目选项</h3> </a> </div> <div ng-switch-when="1" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>筛选任务</h3> </a> </div> <div ng-switch-when="8" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>循环任务列表</h3> </a> </div> <div ng-switch-when="2" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>定义标签</h3> </a> </div> <div ng-switch-when="3" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>项目设置</h3> </a> </div> <div ng-switch-when="31" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>修改基本信息</h3> </a> </div> <div ng-switch-when="32" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>修改项目标识</h3> </a> </div> <div ng-switch-when="33" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>项目偏好设置</h3> </a> </div> <div ng-switch-when="40" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>项目应用设置</h3> </a> </div> <div ng-switch-when="41" ng-click="js_step(40)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>添加关闭应用</h3> </a> </div> <div ng-switch-when="50" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>Webhooks 设置</h3> </a> </div> <div ng-switch-when="51" ng-click="js_step(50)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>添加 webhook</h3> </a> </div> <div ng-switch-when="52" ng-click="js_step(50)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>修改 webhook</h3> </a> </div> <div ng-switch-when="34" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>归档项目</h3> </a> </div> <div ng-switch-when="35" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>激活项目</h3> </a> </div> <div ng-switch-when="36" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>删除项目</h3> </a> </div> <div ng-switch-when="37" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>邮件通知</h3> </a> </div> <div ng-switch-when="38" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>退出项目</h3> </a> </div> <div ng-switch-when="39" ng-click="js_step(3)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>移动项目</h3> </a> </div> <div ng-switch-when="4" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>数据导出</h3> </a> </div> <div ng-switch-when="5" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>通过邮件创建内容</h3> </a> </div> <div ng-switch-when="6" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>添加项目成员</h3> </a> </div> <div ng-switch-when="7" ng-click="js_step(0)"> <a href="javascript:;"> <button class="back icon-chevron-left"></button> <h3>拷贝项目</h3> </a> </div> </div> <div class="hr"></div> <div data-height="119" wt-scroll> <ul class="prj_sidebar_step" ng-switch on="step" ng-if="!global.right_sidebar_is_fold"> <li ng-switch-default class="prj_sidebar_step_li"> <div class="prj_sidebar_step_body animate-sidebarbody-slide" ng-if="bodyOpen"> <ul class="prj_sidebar_step_menu"> <li ng-class="{\'disabled\':global.project_iconmenu!=\'task\'}"> <a href="javascript:;" ng-click="js_step(1,$event)"> <i class="icon-filter"></i> 筛选任务</a> </li> <li> <a href="/project/{{pid}}/archive"> <i class="icon-archive"></i> 查看归档任务</a> </li> <li class="divider"></li> <li ng-class="{\'disabled\':!(global.prj_module.crud | permission:project.info.permission)}"> <a href="javascript:;" ng-click="js_step(2,$event)"> <i class="icon-tags"></i> 定义标签</a> </li> <li ng-if="global.prj_module.setting | permission:project.info.permission"> <a href="javascript:;" ng-click="js_step(8,$event)"> <i class="icon-repeat"></i> 循环任务列表</a> </li> <li ng-class="{\'disabled\': project.info.curr_role == 4}"> <a ng-click="js_goto_prj_setting($event)"> <i class="icon-cog"></i> 项目设置</a> </li> <li class="divider"></li> <li> <a ng-click="js_goto_prj_copy($event)"> <i class="icon-copy"></i> 拷贝项目</a> </li> <li> <a href="javascript:;" ng-click="js_step(4)"> <i class="icon-share"></i> 数据导出</a> </li> <li> <a href="javascript:;" ng-click="js_step(5,$event)"> <i class="icon-envelope"></i> 通过邮件创建内容</a> </li> <li ng-if="global.prj_module.crud | permission:project.info.permission"> <a href="/project/{{pid}}/trash"> <i class="icon-trash"></i> 回收站</a> </li> <li class="disabled" ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <a href="javascript:;"> <i class="icon-trash"></i> 回收站</a> </li> </ul> <div class="hr"></div> </div> </li> <li ng-switch-when="1" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/filter_tasks.html\'"></ng-include> </li> <li ng-switch-when="2" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/setting_label.html\'"></ng-include> </li> <li ng-switch-when="3" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting.html\'"></ng-include> </li> <li ng-switch-when="31" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_baseinfo.html\'"></ng-include> </li> <li ng-switch-when="32" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_identify.html\'"></ng-include> </li> <li ng-switch-when="33" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_preference.html\'"></ng-include> </li> <li ng-switch-when="34" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_archive.html\'"></ng-include> </li> <li ng-switch-when="35" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_activate.html\'"></ng-include> </li> <li ng-switch-when="36" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_del.html\'"></ng-include> </li> <li ng-switch-when="37" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_notify.html\'"></ng-include> </li> <li ng-switch-when="38" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_quit.html\'"></ng-include> </li> <li ng-switch-when="39" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_transfer.html\'"></ng-include> </li> <li ng-switch-when="40" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_nav.html\'"></ng-include> </li> <li ng-switch-when="41" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_nav_plugin.html\'"></ng-include> </li> <li ng-switch-when="50" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_webhook_list.html\'"></ng-include> </li> <li ng-switch-when="51" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_webhook_add_edit.html\'"></ng-include> </li> <li ng-switch-when="52" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_webhook_add_edit.html\'"></ng-include> </li> <li ng-switch-when="4" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/export_data.html\'"></ng-include> </li> <li ng-switch-when="5" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/create_by_mail.html\'"></ng-include> </li> <li ng-switch-when="6" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/add_member.html\'"></ng-include> </li> <li ng-switch-when="7" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_copy.html\'"></ng-include> </li> <li ng-switch-when="8" class="prj_sidebar_step_li"> <ng-include src="\'/ycjs/tpl/project/sidebar/project_setting_timingtask_list.html\'"></ng-include> </li> </ul> <div class="prj_sidebar_main" ng-hide=" step!=0 && !global.right_sidebar_is_fold "> <div ng-show="(global.right_sidebar_is_fold==false) || global.right_sidebar_is_fold==true && global.project_sidebar_foldview==\'module\'"> <h4 ng-hide="global.right_sidebar_is_fold">应用</h4> <ul class="prj_sidebar_module"> <li ng-class="{\'active\':global.project_iconmenu==nav.name}" ng-repeat="nav in prj_navigations"> <a ng-href="/project/{{pid}}/{{nav.name}}" title="{{nav.title + nav.shortcuts}}"> <i ng-class="nav.icon"></i> <br/>{{nav.title}}</a> </li> </ul> </div> <div class="hr collapse_hide"></div> <div class="prj_sidebar_body"> <div ng-show="(global.project_sidebar_view == \'member\' && global.right_sidebar_is_fold==false) || global.right_sidebar_is_fold==true && global.project_sidebar_foldview==\'member\'" class="prj_member_list" ng-class="{true:\'fold\'}[global.right_sidebar_is_fold]" ng-controller="prj_member_ctrl"> <h4 ng-hide="global.right_sidebar_is_fold">成员</h4> <ul class="avatars" ng-class="{ \'list-col-4\':global.right_sidebar_is_fold==false }"> <li ng-if="global.loading_done && (global.prj_module.setting | permission:project.info.permission)"> <div class="js-popbox member text-center" ng-click="js_step(6)" tooltip="添加成员" tooltip-placement="bottom"> <a class="avatar-add" href="javascript:;"> <span class="o"> <i class="icon-plus"></i> </span> </a> </div> </li> <li ng-repeat="member in project.members | filter:isMemberFilter()"> <div ng-click="js_prj_member_pop($event,member)" class="js-popbox member" data-placement="left" ng-class="{true: \'member-pendding\'}[member.status==3]" title="{{{3: \'成员已经退出团队\'}[member.status]}}"> <wt-avatar member="member" status="true" class="text-center" namebr="true" role="member.role" drag="{true: $parent.draggable_options,false:\'\'}[member.status==1 && member.role != 3 && project.info.curr_role!=3]"></wt-avatar> </div> </li> </ul> <div ng-if="(!global.right_sidebar_is_fold) && ((project.members | filter:isGuestFilter()).length > 0)"> <div class="hr collapse_hide mt_5"></div> <h4 ng-hide="global.right_sidebar_is_fold">访客</h4> <ul class="avatars list-col-4"> <li ng-repeat="member in project.members | filter:isGuestFilter()"> <div class="js-popbox member" ng-click="js_prj_member_pop($event,member)" data-placement="left"> <wt-avatar member="member" status="true" class="text-center" namebr="true"></wt-avatar> </div> </li> </ul> </div> <div ng-if="(!global.right_sidebar_is_fold) && ((project.members | filter:{status:2}).length > 0)"> <div class="hr collapse_hide mt_5"></div> <h4 ng-hide="global.right_sidebar_is_fold">已邀请成员</h4> <ul class="avatars list-col-4"> <li ng-repeat="member in project.members | filter:isStatusPendingFilter()"> <div class="js-popbox member member-pendding" title="成员还未接受邀请" ng-click="js_prj_member_pop($event,member)" data-placement="left"> <wt-avatar member="member" status="true" class="text-center" namebr="true" role="member.role"></wt-avatar> </div> </li> </ul> </div> </div> </div> </div> </div> </div> ')
}]),angular.module("/ycjs/tpl/project/task/pop_add_entry.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_entry.html",' <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建列表</h3> </div> <form name="add_entry_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body w_300"> <input name="entry_name" ng-model="name" placeholder="列表名" type="text" class="form-control w_260" required wt-autofocus=""/> </div> <div class="popbox-footer"> <button wt-form-submit="js_add_entry(add_entry_form, name)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_save_ing">确定 </button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </form> ')}]),angular.module("/ycjs/tpl/project/task/pop_add_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建任务</h3> </div> <form name="add_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300"> <div class="form-group" ng-show="entries.length > 0"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" wt-autofocus="" placeholder="输入任务内容" required ng-model="new_task.temp_name" wt-enter="js_add_task(add_task_form, new_task)"></textarea> </div> </div> <div class="form-group" ng-show="entries.length > 0"> <label>列表：</label> <select class="form-control" ng-model="new_task.entry" required="" ng-options="entry as entry.name for entry in entries"> </select> </div> <div ng-show="entries.length == 0"> <p class="alert alert-info">必须创建列表后才可以创建任务哦！ </p> <button href="javascript:;" class="btn btn-success" ng-click="js_to_add_entry_pop()">开始添加列表</button> </div> </div> <div class="popbox-footer" ng-show="entries.length > 0"> <button wt-form-submit="js_add_task(add_task_form, new_task)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_save_ing">保存 </button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </form>')}]),angular.module("/ycjs/tpl/project/task/pop_add_task_entry.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_task_entry.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li" > <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>新建任务</h3> </div> <form name="add_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300 pb_0" ng-if="entries.length > 0"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="输入任务内容" required name="task_name" ng-model="new_task.name" wt-enter="js_add_task(add_task_form, new_task)" wt-focus> </textarea> </div> </div> <div class="form-group"> <label>列表：</label> <div> <select class="form-control" name="entry_select" ng-model="new_task.entry" required="" ng-options="entry as entry.name for entry in entries"> </select> </div> </div> <div class="form-group"> <label>截止日期：</label> <div> <input type="text" class="form-control" required="" ng-model="new_task.expire_date" readonly ng-click="js_step(1)" > </div> </div> <div class="form-group" ng-show="add_task_form.$errors.length > 0"> <div> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_task_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_add_task(add_task_form, new_task)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_saving_task">保存 </button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </div> </div> <div class="popbox-body w_300 part-loading" data-ng-if="loading_entries"></div> <div class="popbox-body w_300 pb_0" data-ng-if="entries.length == 0"> <div ng-show="entries.length == 0"> <p class="alert alert-info">必须创建列表后才可以创建任务哦！ </p> </div> </div> </form> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置截止日期</h3> </div> <div class="popbox-body"> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'today\')">今天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'tomorrow\')">明天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'week\')">本周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'next_week\')">下周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'month\')">本月</a> </li> </ul> <div wt-datepicker="new_task.expire_date" select="js_step(0)"></div> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_archive_entry_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_archive_entry_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>列表选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_unarchive_entry()"><i class="icon-xx"></i>重新激活列表</a></li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_assign_label.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_assign_label.html",' <ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置标签</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[label.assigned]" class="icon-white"></i> </span> <span class="label-name" title="{{label.desc}}">{{[label.desc,30 ]| cutstr}}</span> </a> </li> <li ng-show="labels==0"> <div class="empty-menu">还未定义标签</div></li> <li class="divider"></li> <li><a ng-click="js_goto_set_labels()"><i class="icon-tags"></i> 定义标签</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(2)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>定义标签</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_copy_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_copy_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>拷贝任务</h3> </div> <div class="popbox-body w_300"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="输入任务内容" required ng-model="new_task.name" wt-enter="js_copy_task(add_task_form, new_task)"></textarea> </div> </div> <div ng-if="new_task.show_keeps">保留...<br/></div> <div class="checkbox" ng-if="new_task.label_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_labels"> 标签 ({{new_task.label_count}}) </label> </div> <div class="checkbox" ng-if="new_task.member_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_members"> 成员 ({{new_task.member_count}}) </label> </div> <div class="checkbox" ng-if="new_task.watcher_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_watchers"> 关注 ({{new_task.watcher_count}}) </label> </div> <div class="checkbox" ng-if="new_task.todo_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_todos"> 检查项 ({{new_task.todo_count}}) </label> </div> <div class="checkbox" ng-if="new_task.file_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_attachments"> 附件 ({{new_task.file_count}}) </label> </div> <div class="checkbox" ng-if="new_task.comment_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_comments"> 评论 ({{new_task.comment_count}}) </label> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_copy_task(new_task)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_copying">保存 </button> <button ng-click="js_close()" class="btn">取消</button> </div> ')}]),angular.module("/ycjs/tpl/project/task/pop_delete_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_delete_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除任务</h3> </div> <div class="popbox-body"> <span>任务删除后会放在回收站，可以在回收站选择<br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_delete_task()" class="btn btn-danger float_left">确定删除</button> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_entry_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_entry_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>列表选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu" ng-if="(global.prj_module.crud | permission:project.info.permission)"> <li> <a href="javascript:;" ng-click="js_top_open_add_task_composer($event)"> <i class="icon-xx"></i> 新建任务</a> </li> <li> <a ng-click="js_step(6)"> <i class="icon-xx"></i> 批量操作任务</a> </li> <li> <a ng-click="js_archived_all()"> <i class="icon-archive"></i> 归档完成任务</a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_step(1)"> <i class="icon-xx"></i> 重命名</a> </li> <li> <a ng-click="js_watcher_entry_toggle()" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="entry.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_step(11)"> <i class="icon-ellipsis-horizontal"></i> 更多操作</a> </li> </ul> <ul class="popbox-menu" ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <li> <a ng-click="js_watcher_entry_toggle()" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="entry.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>重命名列表</h3> </div> <form name="edit_entry_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <input name="entry_name" type="text" ng-model="entry_name" placeholder="列表名" class="w_260 form-control" required wt-focus/> </div> <div class="popbox-footer"> <button wt-form-submit="js_change_name(edit_entry_form, entry_name)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_save_ing">确定</button> <button ng-click="js_close(result)" class="btn float_left">取消</button> </div> </form> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(11)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>归档列表</h3> </div> <div class="popbox-body"> <span>列表归档后任务不能再被修改， <br>可以在归档项中重新打开</span> </div> <div class="popbox-footer"> <button ng-click="js_archive_entry()" class="btn btn-success">确定归档</button> </div> </li> <li ng-switch-when="5" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除列表</h3> </div> <div class="popbox-body"> <span>列表删除后会放在回收站，可以在回收站选择 <br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_entry()" class="btn btn-danger">确定删除</button> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>批量操作</h3> </div> <div class="popbox-body"> <ul class="popbox-menu" ng-hide="entry.tasks.length == 0"> <li> <a href="javascript:;" ng-click="js_to_move()"> <i class="icon-share-alt"></i> 移动任务</a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_to_assign()"> <i class="icon-user"></i> 分配任务</a> </li> <li> <a href="javascript:;" ng-click="js_to_set_label()"> <i class="icon-tag"></i> 设置标签</a> </li> <li> <a href="javascript:;" ng-click="js_step(10)"> <i class="icon-time"></i> 设置截至时间</a> </li> </ul> <ul class="popbox-menu" ng-show="entry.tasks.length == 0"> <li> <div class="empty-menu-nomin-h">该列表下没有可操作的任务</div> </li> </ul> </div> </li> <li ng-switch-when="7" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动任务到</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_move_to(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[entry.move_selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> <li ng-show="entries.length == 0"> <div class="empty-menu-nomin-h">没有可以移动的列表</div> </li> </ul> </div> </div> </li> <li ng-switch-when="8" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>分配任务</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block" /> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned_all]" class="color_gray"></i> <wt-avatar member="member" name="true" atname="true" faceclass="plr_5" size="30"></wt-avatar> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="9" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置标签</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" tabindex="-1" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="icon-xx" class="icon-white"></i> </span> <span class="label-name">{{label.desc}}</span> </a> </li> <li ng-show="labels==0"> <div class="empty-menu">还未定义标签</div> </li> <li class="divider"></li> <li><a ng-click="js_to_set_labels()"><i class="icon-tags"></i> 定义标签</a> </li> </ul> </div> </li> <li ng-switch-when="9.1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(9)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>定义标签</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> <li ng-switch-when="10" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置截止日期</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden" /> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'today\')">今天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'tomorrow\')">明天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'week\')">本周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'next_week\')">下周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'month\')">本月</a> </li> </ul> <div wt-datepicker="expire_date"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_set_expire(expire_date)">确定</a> </div> </li> <li ng-switch-when="11" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多操作</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_to_move_entry()"> <i class="icon-share-alt"></i> 移动</a> </li> <li> <a href="javascript:;" ng-click="js_to_copy_entry()"> <i class="icon-copy"></i> 拷贝</a> </li> <li> <a href="javascript:;" ng-click="js_step(4)"> <i class="icon-archive"></i> 归档</a> </li> <li> <a ng-click="js_step(5)" href="javascript:;"> <i class="icon-trash"></i> 删除</a> </li> </ul> </div> </li> <li ng-switch-when="13" class="popbox-step-li w_355"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动列表</h3> </div> <div class="popbox-body"> <div class="form-group"> <select ng-model="entry_move.dest_project" class="form-control" ng-options="project.name group by project.team_id for project in entry_move_to_prjs" wt-team-name> </select> </div> <div class="form-group"> <button class="btn btn-success mr_15" ng-click="move_entry()" > 移动 </button> <button class="btn mr_15" ng-click="move_entry_cancel()" > 取消 </button> </div> </div> </li> <li ng-switch-when="12" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(11)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>拷贝列表</h3> </div> <div class="popbox-body w_300"> <input name="entry_name" wt-enter="js_copy_entry(new_entry)" ng-model="new_entry.name" placeholder="列表名" type="text" class="form-control w_260" required autofocus/> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_copy_entry(new_entry)" data-loading-text="正在创建..." loading-status="is_copying">确定</a> <a class="btn" ng-click="js_step(11)">取消</a> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_mod_set_labels.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_mod_set_labels.html",'<div class="popbox-body"> <form class="form-horizontal labels" role="form" wt-enter="js_set_lables(blue, green, orange, purple, red, yellow)"> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label blue-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="blue" class="js-label-title form-control" id="blue" name="blue" placeholder="未定义标签"> </div> </div> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label green-label" for="green"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="green" class="js-label-title form-control" id="green" name="green" placeholder="未定义标签"> </div> </div> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label orange-label" for="orange"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="orange" class="js-label-title form-control" id="orange" name="orange" placeholder="未定义标签"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label purple-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="purple" class="js-label-title form-control" id="purple" name="purple" placeholder="未定义标签"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label red-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="red" class="js-label-title form-control" id="red" name="red" placeholder="未定义标签"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label yellow-label" for="yellow"></span> </label> <div class="col-xs-10"> <input type="text" ng-model="yellow" class="js-label-title form-control" id="yellow" name="yellow" placeholder="未定义标签"> </div> </div> </form> </div> <div class="popbox-footer"> <button ng-click="js_set_lables(blue, green, orange, purple, red, yellow)" class="btn btn-success mr_15" data-loading-text="保存中..." loading-status="is_save_ing">确定</button> <button ng-click="js_step(0)" class="btn">取消</button> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_move_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_move_task.html",'<li class="popbox-step-li w_355"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动任务到</h3> </div> <div class="popbox-body"> <form name="task_move_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div>选择项目</div> <div class="form-group"> <select ng-model="task_move.move_to_prj" class="form-control" ng-options="project.name group by project.team_id for project in task_move.projects" wt-team-name ng-change="handle_move_to_prj_change()"></select> </div> <div>选择列表</div> <div class="form-group"> <select ng-model="task_move.move_to_entry" class="form-control" ng-options="entry.name for entry in task_move.entries" required></select> </div> <div class="form-group"> <button wt-form-submit="move_task(task_move_form)" data-loading-text="移动中..." class="btn btn-success mr_15" loading-status="is_task_moving">移动</button> <button class="btn mr_15" ng-click="js_close()" > 取消 </button> </div> </form> </div> </li>')}]),angular.module("/ycjs/tpl/project/task/pop_task_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_menu.html",'<ul class="popbox-step" ng-switch on="step" wt-stop-propagation="" ng-if="global.prj_module.crud | permission:project.info.permission"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>任务选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(2)"><i class="icon-tag"></i> 设置标签</a> </li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-user"></i> 分配任务</a> </li> <li data-ng-hide="is_add_task"><a href="javascript:;" ng-click="js_step(4)"><i class="icon-eye-open"></i> 添加关注</a> </li> <li><a ng-click="js_step(3)"><i class="icon-time"></i> 设置截止日期</a> </li> <li data-ng-hide="is_add_task" class="divider"></li> <li data-ng-hide="is_add_task"><a ng-click="js_step(40)"><i class="icon-paper-clip"></i> 添加附件</a> </li> <li data-ng-hide="is_add_task" ng-if="global.prj_module.setting | permission:project.info.permission"> <a ng-click="js_step(50)"><i class="icon-repeat"></i> 设为循环任务</a> </li> <li data-ng-hide="is_add_task" class="divider"></li> <li data-ng-hide="is_add_task"><a ng-click="js_archive_task()"><i class="icon-archive"></i> 归档</a> </li> <li data-ng-hide="is_add_task"><a ng-click="js_step(30)"><i class="icon-ellipsis-horizontal"></i> 更多操作</a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <wt-toggle-members toggle-click="js_toggle_member($event, member, xEntity)" pid="pid" type="member" entity="task" /> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置标签</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" tabindex="-1" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[label.assigned]" class="icon-white"></i> </span> <span class="label-name" title="{{label.desc}}">{{[label.desc,30]|cutstr}}</span> </a> </li> <li ng-if="labels==0"> <div class="empty-menu">还未定义标签</div> </li> <li class="divider"></li> <li><a ng-click="js_goto_set_labels()"><i class="icon-tags"></i> 定义标签</a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置截止日期</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden" /> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_today()">今天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_tomorrow()">明天</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_week()">本周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_next_week()">下周</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_month()">本月</a> </li> </ul> <div wt-datepicker="task.expire_date_temp"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_set_expire(task.expire_date_temp)">确定</a> <a class="btn" ng-click="js_cancel_expire()">取消截止日期</a> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid="pid" type="watch" entity="task" all-member-click="js_watch_all($event, members, xEntity)" /> </li> <li ng-switch-when="5" class="popbox-step-li w_355"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移动任务到</h3> </div> <div class="popbox-body"> <form name="task_move_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div>选择项目</div> <div class="form-group"> <select ng-model="task_move.move_to_prj" class="form-control" ng-options="project.name group by project.team_id for project in task_move.projects" wt-team-name></select> </div> <div>选择列表</div> <div class="form-group"> <select ng-model="task_move.move_to_entry" class="form-control" ng-options="entry.name for entry in task_move.entries" required></select> </div> <div class="form-group"> <button wt-form-submit="move_task(task_move_form)" data-loading-text="移动中..." class="btn btn-success mr_15" loading-status="is_task_moving">移动</button> <button class="btn mr_15" ng-click="js_close()" > 取消 </button> </div> </form> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>删除</h3> </div> <div class="popbox-body"> <span>任务删除后会放在回收站，可以在回收站选择 <br/>恢复或者彻底删除。</span> </div> <div class="popbox-footer"> <button ng-click="js_del_task()" class="btn btn-danger">确定删除</button> </div> </li> <li ng-switch-when="21" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(2)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>定义标签</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> <li ng-switch-when="30" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>更多操作</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li data-ng-hide="is_add_task"><a ng-click="js_show_task_move()"><i class="icon-share-alt"></i> 移动</a> </li> <li data-ng-hide="is_add_task"><a ng-click="js_to_copy_task()"><i class="icon-copy"></i> 拷贝</a> </li> <li data-ng-hide="is_add_task"> <a ng-click="js_step(6)" href="javascript:;"><i class="icon-trash"></i> 删除</a> </li> </ul> </div> </li> <li ng-switch-when="31" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>拷贝任务</h3> </div> <form name="copy_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="输入任务内容" required ng-model="new_task.name" wt-enter="js_copy_task(add_task_form, new_task)"></textarea> </div> </div> <div ng-if="new_task.show_keeps">保留... <br/> </div> <div class="checkbox" ng-if="new_task.label_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_labels">标签 ({{new_task.label_count}})</label> </div> <div class="checkbox" ng-if="new_task.member_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_members">成员 ({{new_task.member_count}})</label> </div> <div class="checkbox" ng-if="new_task.watcher_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_watchers">关注 ({{new_task.watcher_count}})</label> </div> <div class="checkbox" ng-if="new_task.todo_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_todos">检查项 ({{new_task.todo_count}})</label> </div> <div class="checkbox" ng-if="new_task.file_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_attachments">附件 ({{new_task.file_count}})</label> </div> <div class="checkbox" ng-if="new_task.comment_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_comments">评论 ({{new_task.comment_count}})</label> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_copy_task(copy_task_form, new_task)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_copying">保存</button> <button ng-click="js_close(result)" class="btn">取消</button> </div> </form> </li> <li ng-switch-when="40" class="popbox-step-li " > <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>添加附件</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_to_upload_files($event)"> <i class="icon-xx"></i> 本地上传</a> <input wt-uploadfile="file_upload_option" class="hide" multiple type="file" name="files[]" title="添加文件" /> </li> <li> <a href="javascript:;" ng-click="js_step(42)"> <i class="icon-xx"></i> 从项目文件选择 </a> </li> <li class="divider"></li> <li> <div class="part-loading mt_12" ng-if="js_uploadbylink_uploading"></div> <form class="form-inline text-nowarp" role="form" ng-show="!js_uploadbylink_uploading"> <input type="text" ng-model="$parent.$parent.uploadlink_url" class="form-control input-md" placeholder="粘贴下载链接"> <button class="btn btn-default plr_10" type="button" ng-click="js_uploadbylink($event)">添加</button> </form> </li> </ul> </div> </li> <li ng-switch-when="50" class="popbox-step-li"> <ng-include src="\'/ycjs/tpl/project/task/pop_task_timingtask.html\'"></ng-include> </li> <!-- <li ng-switch-when="41" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(40)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>从项目文件选择</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-if="prj_files_loading"></div> <ul class="popbox-menu"> <li ng-repeat="file in files" ng-click="js_attach(file)"> <a class="file-item-li-menu" ng-class="{0:\'file-picfile\', 1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}" /> <span class="file-name">{{file.name}}</span> </a> </li> <li ng-if="files.length == 0 && prj_files_loaded"> <div class="empty-menu">没有文件</div> </li> </ul> </div> </div> </li> --> <li ng-switch-when="42" class="popbox-step-li"> <wt-add-attachment-from-file entity="task" go-back-further="js_step(40)"></wt-add-attachment-from-file> </li> </ul> <div ng-if="!(global.prj_module.crud | permission:project.info.permission)"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>任务选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_toggle_watch($event,global.me,task)" href="javascript:;"> <i class="icon-xx"></i> 关注 <span class="text-muted small-tip ng-scope" ng-if="global.me.watched"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </div> ')
}]),angular.module("/ycjs/tpl/project/task/pop_task_timingtask.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_timingtask.html",'<div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设为循环任务</h3> </div> <div class="popbox-body"> <form name="timingtask_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" role="form" novalidate> <div class="form-group"> <label class="control-label">循环创建名称：</label> <div> <input type="text" ng-model="timingtask.name" placeholder="循环任务名称" name="timingtask_name" wt-autofocus required class="form-control"/> </div> </div> <div class="form-group"> <label class="control-label">创建周期：</label> <div> <select ng-model="timingtask.recurrence" class="form-control"> <option value="0" ng-selected="true">每日</option> <option value="1">每周</option> <option value="2">每月</option> </select> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_timingtask_add(timingtask_form)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_prj_saveing">确定 </button> <button class="btn" ng-click="js_close()"> 取消 </button> </div> </div> </form> </div> ')}]),angular.module("/ycjs/tpl/project/task/pop_unarchive_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_unarchive_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>激活任务</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <div class="part-loading" ng-if="entries == null"></div> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_unarchive_task(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-columns\'}[entry.selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/project_archive_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/project_archive_tasks.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame archive" data-minheight="160"> <dt> <span class="title">归档任务</span> <ul class="tabs"> <li> <a ng-class="{\'task\': \'active\'}[archived_view]" href="javascript:;" ng-click="js_archive_view_toggle(\'task\')"> 任务 </a> </li> <li> <a ng-class="{\'entry\': \'active\'}[archived_view]" href="javascript:;" ng-click="js_archive_view_toggle(\'entry\')"> 列表 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="archived_view == \'task\' && tasks.length == 0 && global.loading_done"> <i class="icon-check"></i><br/> <span>还没有归档任务</span> </div> <div class="empty-panel" ng-show="archived_view == \'entry\' && entries.length == 0 && global.loading_done"> <i class="icon-columns"></i><br/> <span>还没有归档列表</span> </div> <div class="archived_panel"> <div class="archived_entries_panel" ng-show="archived_view == \'entry\'"> <div class="wt-row" ng-repeat="entry in entries"> <div class="column column-icon"> <i class="icon-columns"></i> </div> <div class="column column-name"> {{entry.name}} </div> <div class="column column-date"> {{entry.update_date | timeFormatZHCN}} </div> <div class="column column-action"> <a href="javascript:;" ng-click="js_unarchive_entry($event, entry.entry_id)" ng-show="global.prj_module.crud | permission:project.info.permission" title="激活列表" tooltip="激活列表" tooltip-placement="bottom"> <i class="icon-mail-reply"></i> </a> </div> </div> </div> <div class="task-list-panel" ng-show="archived_view == \'task\'"> <div class="group-list" ng-show="tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in tasks"> <div class="group-header" ng-show="task.is_show_date"> <span>{{task.update_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, false)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> <a class="js-popbox task-action" href="javascript:;" ng-click="js_show_entry_menu($event, task)" data-placement="left" ng-show="global.prj_module.crud | permission:project.info.permission" tooltip="激活" tooltip-placement="bottom"> <i class="icon-mail-reply"></i> </a> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="!has_no_more && !loading_tasks && global.loading_done == true" class="btn" ng-click="load_archived_tasks_more()" data-loading-text="加载中..." loading-status="loading_notice">加载更多... </button> <div class="load-more part-loading" ng-show="!has_no_more && loading_tasks"></div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> ')}]),angular.module("/ycjs/tpl/project/task/project_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/project_tasks.html",'<div class="prj_panel layout_content"> <div class="layout_content_main h_100p"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div id="tour_project_tasks_create_button" class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" ng-if="global.prj_module.crud | permission:project.info.permission"> <button class="btn btn-danger" ng-click="js_add_task_pop($event)">新建任务 </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" id="btn_new_task" wt-click="js_add_task_pop($event)"> <i class="icon-xx"></i> 新建任务</a> </li> <li> <a href="javascript:;" id="btn_new_entry" wt-click="js_add_entry_pop($event)"> <i class="icon-xx"></i> 新建列表</a> </li> </ul> </div> <div class="btn-group js-popbox mr_15"> <button class="btn" ng-click="js_show_project_tasks_filter($event)"> <span class="color_main" ng-if="filter_turn_on">开启</span> <span ng-if="!filter_turn_on">筛选</span> </button> <a class="btn dropdown-toggle" href="javascript:;" data-toggle="dropdown"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li><a href="javascript:;" ng-click="js_show_assign_me_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'assign_me\']"></i> 分配给我的任务 </a> </li> <li><a href="javascript:;" ng-click="js_show_my_watch_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'my_watch\']"></i> 我关注的任务 </a> </li> <li><a href="javascript:;" ng-click="js_show_my_create_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'my_create\']"></i> 我创建的任务 </a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_show_project_tasks_filter($event)"> <i class="icon-xx"></i> 任务筛选 </a> </li> </ul> </div> <button class="btn" ng-click="$root.js_right_sidebar_toggle($event)"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="entries_panel js-sortable layout_content_main_nonav" ng-mouseover="js_mouseover_entries_panel($event)" ng-mousemove="js_mousemove_entries_panel($event)" wt-mousedown-move wt-scroll=\'{"horizontalScroll":true,"advanced":{"autoExpandHorizontalScroll":true,"autoScrollOnFocus":false}}\'> <div class="entries_panel_sortarea" sortable="entries_sort_options"> <div id="entry_main_{{ entry.entry_id }}" class="entry" ng-class="{\'entry-selected\':entry.selected == true}" ng-repeat="entry in entries track by entry.entry_id" entry-id="{{entry.entry_id}}" pos="{{ entry.pos }}"> <div class="entry_header"> <div class="entry_header_title js-editable"> <h2>{{entry.name}} <i data-ng-class="{true:\'icon-eye-open\',false:\'\'}[entry.watched]"></i> </h2> </div> <a href="javascript:;" class="js-popbox entry_header_menu" ng-if="global.prj_module.watch | permission:project.info.permission" ng-click="js_show_entry_menu($event,entry)" data-placement="bottom" data-align="left"> <i class="icon-play-circle"></i> </a> </div> <div class="entry-task-panel" wt-scroll wt-scrollnoheight="{{{true:\'250\',false:\'206\'}[!!(global.prj_module.crud | permission:project.info.permission)]}}"> <wt-task-composer class="entry-add-top-composer" task-save="js_add_task($event, new_task, entry, isTop);" position="top" composer-show="entry.task_top_enabled"></wt-task-composer> <div class="entry-tasks js-sortable" sortable="tasks_sort_options"> <wt-task ng-repeat="task in entry.tasks" task="task" ng-hide="task.is_filter" class="right_click_trigger slide-trigger js-popbox" data-placement="bottom" data-align="left" ng-mouseleave="js_mouseleave_task($event,task)" ng-class="{\'task-selected\':task.selected == true,\'task-first\':$first,\'task-last\':$last,\'task-last-nocomposer\':($last&&!(global.prj_module.crud | permission:project.info.permission)) }" droppable="member_drop_options" task-entry-id="{{task.entry_id}}" task-pos="{{task.pos}}" ng-click="js_open_task_detail($event,task)"> </wt-task> </div> <wt-task-composer class="entry-add-bottom-composer" task-save="js_add_task($event, new_task, entry, isTop);" position="bottom" composer-show="entry.task_bottom_enabled"></wt-task-composer> </div> <div class="entry-task-footer" ng-if="global.prj_module.crud | permission:project.info.permission"> <a href="javascript:;" class="js-add-task-composer" ng-click="js_open_add_task_composer($event, entry)" ng-hide="entry.task_bottom_enabled | filter:false">新建任务</a> </div> </div> </div> <div class="entry-new" ng-show="global.loading_done && (global.prj_module.crud | permission:project.info.permission)" ng-class="{true:\'entry-add\'}[!is_show_add_entry]"> <a href="javascript:;" ng-show="!is_show_add_entry" ng-click="is_show_add_entry = !is_show_add_entry" ng-class="{true:\'entry-add\'}[!is_show_add_entry]"> <i class="icon-plus"></i> 新建列表 </a> <div class="m_10" ng-show="is_show_add_entry" wt-show-edit="is_show_add_entry"> <div class="form-group"> <input name="entry_name" ng-model="entry_name" placeholder="列表名" wt-enter="js_add_entry(entry_name)" type="text" class="form-control" required wt-focus="entry_input_focus"/> </div> <div class="form-group"> <button ng-click="js_add_entry(entry_name)" data-loading-text="保存中..." class="btn btn-success mr_15" loading-status="is_adding_entry">确定 </button> <button ng-click="is_show_add_entry = false" class="btn">取消 </button> </div> </div> </div> </div> </div> <div class="layout_right_sidebar h_100p"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-if="project.info.archived"></div>')}]),angular.module("/ycjs/tpl/project/trash/pop_empty_trash.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/pop_empty_trash.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>清空回收站</h3> </div> <div class="popbox-body"> <span>回收站里的数据将会永久删除，并且无法恢复。<br/>确认要清空回收站？</span> </div> <div class="popbox-footer"> <button ng-click="js_empty_trash()" class="btn btn-danger">确定清空</button> </div>')}]),angular.module("/ycjs/tpl/project/trash/pop_trash_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/pop_trash_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选项</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_restore()" ng-show="entity.etype != \'task\'"><i class="icon-undo"></i> 恢复</a></li> <li><a href="javascript:;" ng-click="js_step(1)" ng-show="entity.etype == \'task\'"><i class="icon-undo"></i> 恢复</a></li> <li ng-if="global.prj_module.setting | permission:project.info.permission"><a href="javascript:;" ng-click="js_destory()"><i class="icon-trash"></i> 彻底删除</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>恢复任务到</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_restore_task(entry)"> <span class="icon" ng-class="{true:\'icon-ok\',false:\'\'}[entry.selected == 1]"></span> <span>{{entry.name}}</span> </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/trash/project_trash.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/project_trash.html",'<div class="layout_content prj_panel"> <div class="layout_content_main"> <div class="mod_navbar"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <button class="btn btn-danger js-popbox" ng-click="js_clear_trash($event)" type="button" ng-show="global.prj_module.setting | permission:project.info.permission">清空回收站 </button> <button class="btn ml_15" ng-click="$root.js_right_sidebar_toggle($event)" tooltip-placement="bottom" tooltip="{{{true:\'展开\',false:\'折叠\'}[global.right_sidebar_is_fold]}}"> <i ng-class="{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]"></i> </button> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title"> 回收站 </span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[filter_type==0]" href="javascript:;" ng-click="js_filter(0)"> 全部 </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==1]" href="javascript:;" ng-click="js_filter(1)"> 任务 </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==3]" href="javascript:;" ng-click="js_filter(3)"> 文件 </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==2]" href="javascript:;" ng-click="js_filter(2)"> 话题 </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==4]" href="javascript:;" ng-click="js_filter(4)"> 文档 </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="wtobjs != null && wtobjs.length == 0" ng-cloak> <i class="icon-trash"></i><br/> <span>回收站没有内容</span> </div> <div class="trash-panel"> <div class="prj-trash" ng-show="wtobjs.length > 0"> <div class="wt-row" ng-repeat="wtobj in wtobjs"> <div class="column column-icon"> <i ng-class="{ \'task\': \'icon-check\', \'entry\': \'icon-columns\', \'file\': \'icon-file\', \'folder\': \'icon-folder-close\', \'page\': \'icon-file-text\', \'event\': \'icon-calendar\', \'post\': \'icon-list-alt\' }[wtobj.entity.etype]"></i> </div> <div class="column column-name" ng-click="locator.to_entity(project.info.pid, wtobj.entity);"> <span class="name">{{wtobj.entity.name}}</span> </div> <div class="column column-actor"> <wt-avatar member="wtobj.actor" name="true" faceclass="plr_5" size="30"></wt-avatar> </div> <div class="column column-date"> <span> {{wtobj.delete_date | timeFormatZHCN}} </span> </div> <div class="column column-menu"> <a href="javascript:;" class="js-popbox trash-item-menu" ng-show="global.prj_module.crud | permission:project.info.permission" ng-click="js_show_trash_menu($event, wtobj)"> <i class="icon-play-circle"></i> </a> </div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar"> <ng-include src="\'/ycjs/tpl/project/sidebar/sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="project.info.archived"></div>')}]),angular.module("/ycjs/tpl/team/free_apply.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/free_apply.html",'<div class="mod_navbar"> <div class="title"> <h3> <i class="icon-heart mr_10"></i>申请公益版 </h3> </div> </div> <div class="common-content-panel feedback-panel height-nonav" wt-scroll> <div class="content-container"> <div class="content"> <div class="content-wrapper"> <div class="content-title"> 申请公益版 </div> <div ng-hide="apply_success || !global.loading_done" class="mt_12"> <form class="form-horizontal wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="free_apply_form" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">团队类型：</label> <div class="col-xs-10"> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="1" checked>公益组织 </label> </div> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="2">学生社团 </label> </div> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="3">开源项目团队 </label> </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">申请团队：</label> <div class="col-xs-10"> <select name="selected_team" class="form-control" required="" ng-model="selected_team" ng-options="t.name for t in owner_teams"> <option value="">-- 选择团队 --</option> </select> <p class="alert alert-info mb_0 mt_12" data-ng-show="owner_teams && owner_teams.length == 0"> <i class="icon icon-info-sign mr_5"></i>你还没有自己的团队，立即 <a href="/teams/add">创建团队吧</a>！ </p> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">简单描述：</label> <div class="col-xs-10"> <textarea wt-editor name="apply_team_desc" ng-model="team_desc" class="form-control" required="" placeholder="为你的团队做个简单的介绍，最好提供团队的官方微博或网站。" rows="5"></textarea> </div> </div> <div class="form-group" ng-show="free_apply_form.$errors.length > 0"> <div class="col-xs-2"></div> <div class="col-xs-10"> <div class="alert alert-danger mb_0"> <i class="icon-remove-sign"></i> {{free_apply_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <div class="col-xs-2"></div> <div class="col-xs-10"> <button type="button" wt-form-submit="js_free_apply(free_apply_form)" data-loading-text="申请中..." loading-status="is_applying" class="btn btn-success btn-sure">立即申请 </button> </div> </div> </form> </div> <div class="success-panel" ng-show="apply_success"> <i class="imgicon-success"></i><br/><br/> <span>非常感谢你对Worktile的关注，你的公益版申请已经收到，我们会尽快审核</span> </div> </div> </div> <div class="sidebar"> <div class="sidebar-widget"> <h4>常见问题</h4> <ul> <li> 1. 公益版免费期限1年，到期后需要重新提交申请 </li> <li> 2. 公益版的团队成员人数上限是100人 </li> <li> 3. 公益版目前支持学生社团、公益组织和开源团队 </li> <li> 4. 请尽量提供官方微博或官方网站 </li> </ul> </div> <div class="sidebar-widget"> <h4>支持</h4> <ul> <li> <i class="icon-weibo"></i> <a href="http://weibo.com/worktile"> 微博：@Worktile </a> </li> <li> <i class="icon-envelope-alt"></i> <a href="mailto:support@worktile.com"> 邮箱：support@worktile.com </a> </li> <li> <i class="icon-phone"></i> <a href="javascript:;"> 电话：400-805-6966 </a> </li> <li> <i class="icon-linux"></i> <a href="javascript:;"> QQ群：110257147 </a> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/pop_member_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_member_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-avatar"> <div class="avatar-body" ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="selected_member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4> <span class="text-muted pl_15">{{selected_member.role | role}}</span> <p> <span class="help-inline">@{{selected_member.name}}</span> </p> </div> <div class="member_desc ng-scope"> <span class="text-muted ng-binding">{{ selected_member.desc || "他很懒，还没有个人说明" }}</span> </div> </div> <div class="avatar-footer" ng-hide="!current_team.is_owner && !(current_team.curr_role | is_admin) && selected_member.uid != current_team.owner.uid"> <div class="pull-left color_gray" ng-if="selected_member.uid == current_team.owner.uid"> 团队所有者 </div> <section ng-hide="selected_member.uid == current_team.owner.uid || !(current_team.curr_role | is_admin)"> <div ng-show="(current_team.curr_role | is_admin) && selected_member.status | is_pending"> <button ng-click="js_view_invite_code()" class="btn btn-danger mr_15">发送邀请链接</button> <button ng-click="js_step(4)" class="btn">移除</button> </div> <div ng-show="(current_team.curr_role | is_admin) && !(selected_member.status | is_pending)"> <button ng-click="js_step(5);" class="btn btn-danger mr_15">设置权限</button> <button ng-click="js_step(2)" class="btn">移除</button> </div> </section> </div> </div> </li> <li ng-switch-when="10" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>成员设置</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-hide="selected_member.uid == team.owner.uid" class="mr_15"> <a ng-click="js_step(5);"><i class="icon-xx"></i> 设置权限</a> </li> <li ng-show="(!(selected_member.status | is_pending)) && (selected_member.uid != team.owner.uid)"> <a ng-click="js_step(2)"><i class="icon-trash"></i> 从团队移除</a> </li> <li ng-show="(selected_member.status | is_pending)" class="divider"></li> <li ng-show="(selected_member.status | is_pending)"> <a ng-click="js_view_invite_code()"><i class="icon-xx"></i>发送邀请链接</a> </li> <li ng-show="(selected_member.status | is_pending)"> <a ng-click="js_step(4)"><i class="icon-xx"></i> 取消邀请</a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置分组</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="group in team.groups"> <a href="javascript:;" tabindex="-1" ng-click="js_set_group(selected_member, group)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[selected_member.group_id==group.group_id]" class="color_gray"></i> <span class="pl_5">{{group.name}}</span> </a> </li> <li ng-show="team.groups==0"> <div class="empty-menu">还未新建分组</div> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>移除成员</h3> </div> <div class="popbox-body"> <div class="part-loading" data-ng-hide="loading_unique_admin_prjs_done"></div> <div class="alert alert-info" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length == 0">被移除的成员，将不能再访问该团队的任何信息，但相关的数据不会被删除。</div> <div class="alert alert-warning" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length > 0"> 该成员在当前团队中有{{unique_admin_prjs.length}}个项目是唯一负责人，删除后，这些项目将无法添加新成员，请谨慎操作。 </div> <button data-ng-show="loading_unique_admin_prjs_done" ng-click="js_delete_member(selected_member)" class="btn btn-danger" data-loading-text="删除中..." loading-status="is_deleting_member">确定移除 </button> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{selected_member.display_name}}</h3> </div> <div class="popbox-body" wt-scroll> <ul class="popbox-menu"> <li ng-repeat="member_project in member_projects_auth"> <a href=""> <span class="pull-left text-muted">{{member_project.name}}</span> <span class="pull-right">{{member_project.curr_role | role}}</span> </a> </li> </ul> <span ng-show="member_projects_auth != null && member_projects_auth.length == 0">没有参与的项目</span> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>取消邀请</h3> </div> <div class="popbox-body"> <div class="alert alert-info">取消邀请后，发送给该成员的邀请链接将会失效，成员加入该团队需要你再次发送邀请。</div> <button class="btn btn-danger" ng-click="js_cancel_invite(selected_member)" data-loading-text="取消中..." loading-status="is_canceling_invite">取消邀请 </button> </div> </li> <li ng-switch-when="5" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>设置权限</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_set_user_as_admin()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[(selected_member.role | is_admin)]" class="color_gray"></i> <strong>管理员</strong> <br/> <span class="text-muted pl_20">可以创建项目，邀请成员加入团队</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_set_user_as_member()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[(selected_member.role | is_member)]" class="color_gray"></i> <strong>成员</strong> <br/> <span class="text-muted pl_20">访问和操作自己参与的项目</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_set_user_as_guest()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[(selected_member.role | is_guest)]" class="color_gray"></i> <strong>访客</strong> <br/> <span class="text-muted pl_20">不是团队成员，只能访问和操作自己参与的项目</span> </a> </li> </ul> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>发送邀请链接</h3> </div> <div class="popbox-body"> <div class="alert alert-info">如果 <strong>{{ selected_member.display_name }}</strong> 没有收到邀请邮件，可以把下面的邀请链接直接发给他： </div> <input class="input form-control help-block" wt-click-select type="text" ng-model="selected_member.invite_url" readonly="readonly"> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/team/pop_team_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_team_list.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>我的团队</h3> </div> <div class="popbox-avatar"> <div class="avatar-body fixed-width"> <ul class="popbox-menu"> <li ng-repeat="team in teams"> <a href="/teams/{{team.team_id}}"> {{team.name}} <span class="edition in-list" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> {{team.edition | teamEdition }} </span> </a> </li> </ul> </div> <div class="avatar-footer"> <a href="/account/teams"><i class="icon-sitemap mr_5"></i>团队管理</a> </div> </div>')}]),angular.module("/ycjs/tpl/team/pop_transfer_team.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_transfer_team.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>选择转让的成员</h3> </div> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="搜索成员" class="form-control help-block"/> <br> <div class="part-loading" wt-loading-done="members_loading_done"></div> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in team_members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_to_transfer_confirm(member)"> <wt-avatar member="member" name="true" atname="true" size="30" faceclass="plr_5"></wt-avatar> </a> </li> <li class="empty-menu-nomin-h" ng-show="members_loading_done && (team_members | isNullOrEmpty)"> 没有可以转让的团队成员 </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/team/team.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team.html",' <div class="layout_content" ng-if="(global.team_module.view_base | permission:current_team.permission)"> <div class="layout_content_main no_sidebar "> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main" ng-hide="current_team.permission == global.team_module.view_base"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="main-content height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <div class="box-panel-body" ng-hide="current_team.permission == global.team_module.view_base"> <dt class="frame-dt"> <span class="title">成员</span> <ul class="tabs" ng-if="global.team_module.view | permission:current_team.permission"> <li> <a ng-class="{true: \'active\'}[member_current_tab == \'member\']" href="javascript:;" ng-click="member_set_tab(\'member\')"> 团队成员 </a> </li> <li> <a ng-class="{true: \'active\'}[member_current_tab == \'guest\']" href="javascript:;" ng-click="member_set_tab(\'guest\')"> 团队访客 </a> </li> </ul> </dt> <div class="" ng-show="member_current_tab === \'member\'"> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done" class="team-panel"> <ul class="avatars" ng-if="global.team_module.view_base | permission:current_team.permission"> <li ng-show="current_team.curr_role | is_admin" class="avatar-invite"> <a class="avatar-add avatar-56" href="/teams/{{current_team.team_id}}/invite"> <span class="o"> <i class="icon-plus"></i> </span> <br>邀请成员 </a> </li> <li ng-repeat="member in members | filter:teamMembersFilter() | filter:isStatusOkFilter()"> <wt-avatar member="member" size="56" name="[member.display_name,10] | cutstr" namebr="true" status="true" click="js_show_member_menu($event,member)" class="js-popbox member m_15" data-placement="right" role="member.role" is-team="true" data-align="top"></wt-avatar> </li> </ul> <div ng-if="(members | filter:{status:2}).length > 0 && (global.team_module.view | permission:current_team.permission) "> <dt class="frame-dt m_15"></dt> <h4 class="ml_10">已邀请成员</h4> <ul class="avatars" ng-if="global.team_module.view_base | permission:current_team.permission"> <li ng-repeat="member in members | filter:teamMembersFilter() | filter:isStatusPendingFilter()"> <wt-avatar member="member" size="56" name="[member.display_name,10] | cutstr" namebr="true" status="true" click="js_show_member_menu($event,member)" class="js-popbox member m_15" data-placement="right" data-auto-adapt="true" role="member.role" is-team="true" data-align="top"></wt-avatar> </li> </ul> </div> </div> </div> <div class="team-panel" ng-if="(members | filter:{role:3}).length > 0 && member_current_tab === \'guest\' "> <ul class="avatars"> <li ng-repeat="member in members | filter:{role:3}"> <wt-avatar member="member" size="56" name="[member.display_name,10] | cutstr" namebr="true" click="js_show_member_menu($event,member)" class="js-popbox member m_15" status="true" is-team="true" data-placement="right" data-align="top"></wt-avatar> </li> </ul> </div> <div class="empty-panel" ng-if="(members | filter:{role:3}).length == 0 && member_current_tab === \'guest\'"> <i class="icon-user"></i> <br/> <span>该团队暂时没有访客</span> </div> </div> <div class="box-panel-body" ng-show="current_team.permission == global.team_module.view_base"> <dt class="frame-dt"> <span class="title">项目</span> </dt> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="project-list project-panel"> <div class="wt-row" ng-repeat="project in team_projects | filter:teamProjectsFilter(current_visibility)" wt-go-to="/project/{{project.pid}}" data-ng-class="{1:\'show-star\'}[project.is_star]"> <div class="column column-star"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'从常用项目移除\', 0: \'设置为常用项目\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> &nbsp; </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> <div class="empty-panel" ng-if="(team_projects | filter:teamProjectsFilter(current_visibility)).length == 0 && part_loading_done" ng-cloak> <i class="icon-inbox"></i> <br/> <span>没有团队公开项目</span> </div> </div> </div> </dl> </div> </div> <div class="right-panel" ng-hide="current_team.permission == global.team_module.view_base"> <ng-include src="\'/ycjs/tpl/team/team_admin_task_stats_widget.html\'"></ng-include> <widget-add-team-member-by-link current-team="current_team"> </widget-add-team-member-by-link> </div> <div class="right-panel" ng-show="current_team.permission == global.team_module.view_base"> <ng-include src="\'/ycjs/tpl/team/team_admin_task_stats_widget.html\'"></ng-include> <ng-include src="\'/ycjs/tpl/team/team_member_list_widget.html\'"></ng-include> </div> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include> ')
}]),angular.module("/ycjs/tpl/team/team_admin_basic.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_basic.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="basic_setting"> <div class="panel-section"> <h4>修改基本信息</h4> </div> <div class="panel-section"> <form name="team_set_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form form-horizontal w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">团队名称：</label> <div class="col-xs-10"> <input name="team_name" type="text" ng-model="name" placeholder="团队名称" class="form-control" required autofocus/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">团队描述：</label> <div class="col-xs-10"> <textarea rows="4" ng-model="desc" class="form-control" placeholder="为团队添加简短描述（可选）"></textarea> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <button data-loading-text="保存中..." wt-form-submit="js_set_team(team_set_form, name, desc, url)" class="btn btn-success" loading-status="is_team_saveing">确定 </button> </div> </div> </form> <hr/> </div> </div> <div class="team-visibility"> <div ng-switch="visibility_step"> <div ng-switch-when="1"> <div class="panel-section"> <h4>团队公开性</h4> </div> <div class="panel-section"> <div class="form-group"> <select class="form-control ng-valid-required w_360" ng-model="data.visibilityValue" ng-options="p.description for p in teamVisibilityArray"> </select> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" ng-click="js_visibility_step(2)" ng-show="data.visibilityValue != originalValue"> 更改 </button> <button class="btn btn-default float_left " ng-click="js_visibility_cancel()" ng-show="data.visibilityValue != originalValue"> 取消 </button> </div> </div> </div> <div ng-switch-when="2"> <div class="title"> <h4>输入帐户密码</h4> </div> <wt-confirm-password class="w_360" confirm-cancel="js_visibility_step(1)" confirm-success="js_visibility_step(3)"></wt-confirm-password> </div> <div ng-switch-when="3"> <div class="title"> <h4>确认更改团队公开性</h4> </div> <div class="alert alert-info w_660"> <span><i class="icon icon-info-sign mr_5"></i> <span>确认要把当前团队改成</span> <strong>{{ data.visibilityValue.description }}</strong>么？</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="正在变更中..." loading-status="is_visibility_saving" ng-click="js_update_visibility()">确认 </button> <button class="btn float_left" ng-click="js_visibility_step(1)">取消 </button> </div> </div> </div> <hr/> </div> <div class="transfer"> <div data-ng-switch="transfer_step"> <div class="panel-section" data-ng-switch-when="1"> <div class="title"> <h4>转让团队</h4> </div> <div class="form-group"> <span>当前团队所有者：</span> <wt-avatar member="team.owner" name="true" atname="true" size="30" faceclass="plr_5"></wt-avatar> </div> <div class="alert alert-warning w_660"> <span><i class="icon icon-info-sign mr_5"></i> 转让后你将没有权限管理该团队。</span> <br/> </div> <div class="form-group"> <button class="btn btn-danger float_left js-popbox" data-placement="right" data-align="top" ng-click="js_transfer_pop($event)">转让当前团队 </button> </div> <hr/> </div> <div class="panel-section" data-ng-switch-when="2"> <div class="title"> <h4>输入帐户密码</h4> </div> <wt-confirm-password class="w_360" confirm-cancel="js_transfer_step(1)" confirm-success="js_transfer_step(3)"></wt-confirm-password> </div> <div class="panel-section" data-ng-switch-when="3"> <div class="title"> <h4>确认转让当前团队</h4> </div> <div class="alert alert-info w_660"> <span><i class="icon icon-info-sign mr_5"></i> 确认要把当前团队转让给 {{ selected_member.display_name }} 么？</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="正在转让中..." loading-status="is_transferring" ng-click="js_transfer()"> 确认转让 </button> <button class="btn float_left" ng-click="js_transfer_step(1)">取消 </button> </div> </div> </div> </div> <div class="dismiss"> <div data-ng-switch="dismiss_step"> <div class="panel-section" data-ng-switch-when="1"> <div class="title"> <h4>解散团队</h4> </div> <div class="alert alert-warning w_660"> <span><i class="icon icon-info-sign mr_5"></i> 该操作不可撤销，解散团队后，团队成员将不能访问该团队的一切数据，请谨慎操作。</span> <br/> </div> <div class="form-group"> <button class="btn btn-danger float_left" data-placement="right" data-align="top" ng-click="js_dismiss_step(2)">解散当前团队 </button> </div> </div> <div class="panel-section" data-ng-switch-when="2"> <div class="title"> <h4>输入帐户密码</h4> </div> <wt-confirm-password class="w_360" confirm-cancel="js_dismiss_step(1)" confirm-success="js_dismiss_step(3)"></wt-confirm-password> </div> <div class="panel-section" data-ng-switch-when="3"> <div class="title"> <h4>确认解散当前团队</h4> </div> <div class="alert alert-info w_660"> <span><i class="icon icon-info-sign mr_5"></i>解散团队后，团队成员将不能访问该团队的一切数据。确认解散当前团队吗？</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="正在解散中..." loading-status="is_dismissing" ng-click="js_dismiss()">确认解散 </button> <button class="btn float_left" ng-click="js_dismiss_step(1)">取消 </button> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_billing.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_billing.html",'<div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main" wt-scroll> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container" data-ng-show="global.loading_done"> <div class="panel-section"> <h4>账单记录</h4> <div class="option-block"> <div class="account-info mr_15">累计扣费：<span class="number">￥{{sub.fee}}</span></div> </div> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>日期</th> <th>账单号</th> <th>成员人数</th> <th>价格</th> <th>金额</th> </tr> </thead> <tbody> <tr data-ng-repeat="billing in billings"> <td>{{billing.transaction_date | timeFormatZHCN}}</td> <td>{{billing.billing_no}}</td> <td>{{billing.quantily}}</td> <td>{{billing.price | currency:"￥"}}</td> <td>{{billing.amount | currency:"￥"}}</td> </tr> <tr data-ng-show="billings.length == 0"> <td colspan="5"> 还没有账单记录</td> </tr> </tbody> </table> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_billing_details.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_billing_details.html","")}]),angular.module("/ycjs/tpl/team/team_admin_change_quota.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_change_quota.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-group"></i> <h5>修改团队成员配额</h5> <input wt-enter="js_change_team_quota()" wt-focus-event="js_team_quota_focus()" ng-model="team_quota" type="text" class="form-control" placeholder="请输入团队配额人数"/> <p class="alert alert-danger" data-ng-show="change_quota_error.length > 0"> <i class="icon-remove-sign"></i> {{change_quota_error}} </p> <button class="btn btn-success btn-upgrade btn-block" ng-click="js_change_team_quota()" data-loading-text="修改..." loading-status="is_changing">修改配额 </button> <span class="tips">如需帮助，请拨打 010-84787492 联系我们</span> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_consultant.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_consultant.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <ng-include src="\'/ycjs/tpl/team/team_mask_panel.html\'"></ng-include> <div class="panel-section" data-ng-show="part_loading_done && team.edition==2"> <table class="table table-striped table-bordered"> <tbody> <tr> <td>客服号</td> <td><span class="em">{{sub.support_no}}号</span></td> </tr> <tr> <td>QQ号</td> <td>{{sub.support_qq}}</td> </tr> <tr> <td>电话</td> <td>010-84787492</td> </tr> <tr> <td>邮箱</td> <td><a href="mailto:wow@worktile.com">wow@worktile.com</a></td> </tr> <tr> <td>微信客服</td> <td> <img ng-src="/img/index/contact-code.png" alt="getworktile"> <br/> <br/> 扫描上面的二维码或搜索微信号：<span class="em">getworktile</span> </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_degrade.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_degrade.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-sitemap"></i> <h5>降级到免费版</h5> <p class="alert alert-danger" data-ng-show="degrade_error.length > 0"> <i class="icon-remove-sign"></i> {{degrade_error}} </p> <button ng-disabled="degrade_disabled" class="btn btn-success btn-block" ng-click="js_degrade_team()" data-loading-text="正在降级..." loading-status="is_degrading">确认降级到免费版 </button> <span class="tips">如需帮助，请拨打 400-805-6966 联系我们</span> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_export.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_export.html",' <div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> <button data-ng-click="js_export_data()" class="btn btn-danger" data-loading-text="提交中..." loading-status="bulk_exporting" ng-show="global.loading_done && team.edition==2">导出数据 </button> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_mask_panel.html\'"></ng-include> <div class="center-panel-container height-nonav" ng-show="global.loading_done && team.edition==2" wt-scroll> <div class="panel-section"> <h4>数据导出</h4> <div class="option-block meta-desc"> <i class="icon-info-sign mr_5"></i>数据导出需要先提交，准备就绪后才可以下载。 </div> </div> <div class="panel-section inner"> <table class="table table-hover table-bordered"> <thead> <tr> <th>请求时间</th> <th>格式</th> <th>状态</th> <th>操作</th> </tr> </thead> <tbody> <tr data-ng-repeat="export in bulkexports"> <td> {{export.request_date | timeFormatZHCN}} </td> <td> {{{1:\'JSON\'}[export.download_format]}} </td> <td>{{export.status | exportStatus}}</td> <td> 无 </td> </tr> <tr data-ng-show="bulkexports.length == 0"> <td colspan="4"> 还没有数据导出记录 </td> </tr> <tr data-ng-show="!loading_export_done"> <td colspan="4" align="center"> <div class="part-loading mb_0"></div> </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="exports_pagination_opts"></div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_left_nav.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_left_nav.html",'<dl data-minheight="160" class="frame"> <ul class="nav nav-pills nav-stacked"> <li ng-class="{true:\'active\'}[active_team_admin_nav_tab==\'member\']"> <a ng-href="/teams/{{team_id}}"><i class=" icon-user"></i><br/>成员</a> </li> <li ng-class="{true:\'active\'}[active_team_admin_nav_tab==\'projects\']"> <a ng-href="/teams/{{team_id}}/projects"><i class="icon-inbox"></i><br/>项目</a> </li> <li ng-class="{true:\'active\'}[active_team_admin_nav_tab==\'admin\']" ng-if="global.team_module.view | permission:current_team.permission"> <a ng-href="{{\'/teams/\'+current_team.team_id+{true:\'/admin\',false:\'/setting\'}[current_team.owner.uid == global.me.uid]}}"><i class="icon-cog "></i><br/>设置</a> </li> </ul> </dl> ')}]),angular.module("/ycjs/tpl/team/team_admin_members.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_members.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>成员</th> <th>邮箱</th> <th>加入日期</th> <th>角色</th> <th>状态</th> <th>项目数</th> <th>设置</th> </tr> </thead> <tbody> <tr data-ng-repeat="member in account_members"> <td> <wt-avatar member="member" name="true" size="30"></wt-avatar> </td> <td>{{member.email}}</td> <td>{{member.join_date | timeFormatZHCN}}</td> <td>{{member.role | role}}</td> <td>{{member.status | memberStatus}}</td> <td>{{member.prj_count}}</td> <td><a class="js-popbox" href="javascript:;" data-placement="left" data-align="middle" data-ng-click="js_show_member_menu($event,member,team)">设置</a> </td> </tr> <tr data-ng-if="account_members.length == 0"> <td colspan="7"> 还没有团队成员 </td> </tr> <tr data-ng-show="!account_members"> <td colspan="7" align="center"> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_pay_coupon.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_pay_coupon.html",' <div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container" data-ng-show="team"> <div class="panel-section"> <div class="center-box normal-box"> <i class="center-box-icon icon-gift"></i> <h5>使用代金券充值</h5> <input wt-enter="js_redeem_coupon()" wt-focus-event="js_redeem_coupon_focus()" ng-model="coupon_code" type="text" class="form-control" placeholder="请输入代金券序列号"/> <p class="alert alert-danger" data-ng-show="redeem_coupon_error.length > 0"> <i class="icon-remove-sign"></i> {{redeem_coupon_error}} </p> <button class="btn btn-success btn-block" ng-click="js_redeem_coupon()" data-loading-text="正在充值..." loading-status="is_redeeming">确认充值 </button> <span class="tips">如需帮助，请拨打 010-84787492 联系我们</span> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_pay_online.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_pay_online.html",' <div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main"> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container" data-ng-show="team"> <div class="panel-section"> <h4>在线充值</h4> <ul class="pay-online"> <li> <span class="pay-number">1</span> 购买人数: <span class="pay-people"><i class="icon-ex-users"></i> {{sub.quota}} 个人 </span> <span class="pay-people-tooltip text-muted">(￥10月/人)</span> </li> <li class="pay-amount-list"> <span class="pay-number">2</span> 充值金额:<br/> <div class="pay-amount" data-ng-class="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]" data-ng-click="js_selected_amount(pay_amount,pay_form)" data-ng-repeat="pay_amount in pay_amounts"> <span class="pay-amount-time">{{pay_amount.display_time}}</span> <span class="pay-amount-number">￥ <b>{{pay_amount.amount}}</b> </span> <span class="icon-ok-sign" ng-show="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]"></span> <span class="pay-amount-send" data-ng-show="pay_amount.presentation > 0"> <i class="icon-gift"></i> 送：￥{{pay_amount.presentation}} </span> </div> </li> <li> <span class="pay-number">3</span> 支付方式：<br/> <div class="radio"> <label> <input type="radio" name="pay_type" value="1" checked="checked" /> <img ng-src="/img/alipay.png" width="135" height="45" /> </label> </div> </li> <li> <p class="alert alert-info"> 购买人数：{{sub.quota}}人<br/> 充值金额：￥{{selected_amount.amount || 0}} <br/> 支付方式：支付宝<br/> </p> </li> <li data-ng-show="pay_form.$errors.length > 0"> <p class="alert alert-danger"> <i class="icon-remove-sign"></i> {{pay_form.$errors[0]}} </p> </li> <li> <form name="pay_form" action="/pay/online/alipay" method="post" target="_blank"> <input hidden="" name="payment_no" ng-model="payment_no"> <input hidden="" name="amount" ng-model="selected_amount.amount"> <input hidden="" name="team_id" ng-model="team_id"> <button class="btn btn-success" type="submit" data-ng-click="js_pay(pay_form)"> 支付</button> </form> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_payment.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_payment.html",' <div class="layout_content"> <div class="layout_content_sidebar"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main" wt-scroll> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container" data-ng-show="global.loading_done"> <div class="panel-section"> <h4>付费管理</h4> <div class="option-block"> <div class="account-info mr_15">账户余额：<span class="number">￥{{sub.balance}}</span></div> <a href="/teams/{{team_id}}/pay" class="btn btn-danger mr_15">在线充值</a> <a href="/teams/{{team_id}}/pay_coupon" class="btn">代金券充值</a> </div> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>日期</th> <th>充值方式</th> <th>金额</th> <th>状态</th> <th>操作</th> </tr> </thead> <tbody> <tr data-ng-repeat="payment in payments"> <td>{{payment.transaction_date | timeFormatZHCN}}</td> <td>{{payment.type | payType}}</td> <td ng-class="{1:\'pay-unpaid\',2:\'pay-success\',3:\'pay-failed\'}[payment.status]"> ￥{{payment.amount}} </td> <td>{{payment.status | payStatus}} </td> <td> <div data-ng-hide="(payment.status | payStatusIsSuccess)"> <a href="/pay/online/alipay?team_id={{team_id}}&payment_no={{payment.payment_no}}" target="_blank">继续支付</a> | <a href="javascript:;" data-ng-click="js_cancel_payment(payment)">取消支付</a> </div> <div data-ng-show="(payment.status | payStatusIsSuccess)"> 无 </div> </td> </tr> <tr data-ng-show="payments.length == 0"> <td colspan="5">还没有付费记录</td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="payments_pagination_opts"></div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_projects.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>项目名称</th> <th>负责人</th> <th>成员人数</th> <th>状态</th> <th>创建时间</th> </tr> </thead> <tbody> <tr data-ng-repeat="project in account_projects"> <td>{{project.name}}</td> <td> <wt-avatar ng-repeat="admin in project.admins" member="admin" name="true" size="30" class="mr_15"></wt-avatar> </td> <td>{{project.member_count}}</td> <td>{{project.archived | projectStatus}}</td> <td>{{project.create_date | timeFormatZHCN}}</td> </tr> <tr data-ng-if="account_projects.length == 0"> <td colspan="5"> 还没有任何项目 </td> </tr> <tr data-ng-show="!account_projects"> <td colspan="5" align="center"> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_security.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_security.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class=" height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section inner" data-ng-show="part_loading_done"> <table class="table table-hover table-bordered pt_15"> <thead> <tr> <th>操作人</th> <th>行为</th> <th>IP地址</th> <th>时间</th> </tr> </thead> <tbody> <tr data-ng-repeat="history in histories"> <td> <wt-avatar member="history.actor" name="true" size="30"></wt-avatar> </td> <td style="width: 40%">{{history.verb_display}} <wt-avatar member="history.member" name="true" size="30"></wt-avatar> </td> <td>{{history.location + \'（\'+ history.ipaddress + \'）\'}}</td> <td>{{history.published | timeFormatZHCN}}</td> </tr> <tr data-ng-show="histories.length == 0"> <td colspan="4"> 还没有安全日志 </td> </tr> <tr data-ng-show="!loading_histories_done"> <td colspan="4" align="center"> </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="security_pagination_opts"></div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_sidebar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_sidebar.html",'<div wt-scroll=\'{"scrollButtons":{"enable":true}}\' data-scrollnoheight="160"> <ul class="nav_listmenu"> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'basic\']"> <a href="/teams/{{team_id}}/admin/basic"> <i class="icon-cog mr_5"></i>基本设置 </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'members\']"> <a href="/teams/{{team_id}}/admin/members"> <i class="icon-user mr_5"></i>成员管理 </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'projects\']"> <a href="/teams/{{team_id}}/admin/projects"> <i class="icon-inbox mr_5"></i>项目管理 </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'security\']"> <a href="/teams/{{team_id}}/admin/security"> <i class="icon-shield mr_5"></i>安全日志 </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'consultant\']"> <a href="/teams/{{team_id}}/admin/consultant"> <i class="icon-female mr_5"></i>专属顾问 </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_summary.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_summary.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <h4>团队信息</h4> </div> <div class="panel-section"> <table summary class="table table-striped table-bordered"> <tbody> <tr> <td>团队名称</td> <td>{{team.name}}</td> </tr> <tr> <td>创建时间</td> <td>{{team.create_date | dateFormatZHCN}}</td> </tr> <tr> <td>团队描述</td> <td>{{team.desc}}</td> </tr> </tbody> </table> </div> <div class="panel-section"> <h4>项目与成员</h4> </div> <div class="panel-section"> <table summary class="table table-bordered"> <tbody> <tr> <td>团队成员</td> <td> <div class="progress-warp"> <progress> <bar ng-repeat="bar in member_stacked track by $index" value="bar.value" type="{{bar.type}}"> <span></span> </bar> </progress> </div> <ul class="inline-items clearfix"> <li> <span class="number member-count"></span> <span class="text">{{team.member_count}} 位活动成员</span> </li> <li> <span class="number invite-count"></span> <span class="text">发送 {{team.invite_count}} 个邀请</span> </li> </ul> </td> </tr> <tr> <td>团队可见</td> <td> <div class="progress-warp"> <progress> <bar ng-repeat="bar in project_stacked track by $index" value="bar.value" type="{{bar.type}}"> <span></span> </bar> </progress> </div> <ul class="inline-items clearfix"> <li> <span class="number active-count"></span> <span class="text">{{team.active_count}} 个活动项目</span> </li> <li> <span class="number archived-count"></span> <span class="text">{{team.archived_count}} 个归档项目</span> </li> </ul> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_tabs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_tabs.html",'<ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_menu == \'summary\']" href="/teams/{{team_id}}/admin/summary"> 摘要 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'basic\']" href="/teams/{{team_id}}/admin/basic"> 基本设置 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'members\']" href="/teams/{{team_id}}/admin/members"> 成员管理 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'projects\']" href="/teams/{{team_id}}/admin/projects"> 项目管理 </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'security\']" href="/teams/{{team_id}}/admin/security"> 安全日志 </a> </li> </ul>')}]),angular.module("/ycjs/tpl/team/team_admin_task_stats_widget.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_task_stats_widget.html",'<div class="box-panel my-tasks-overview"> <div ng-class="{true:\'box-panel-header\'}[!!(global.team_module.view | permission:current_team.permission)]" class=" hello-body" > <div class="hello-right pb_10"> <h4>{{current_team.name}}</h4> <br ng-if="current_team.desc !=\'\'"> <span> {{current_team.desc}}</span> <br> <span> 创建于{{current_team.create_date | dateFormatZHCN}}</span> </div> </div> <div class="box-panel-body" ng-if="global.team_module.view | permission:current_team.permission"> <ul> <li class="tasks-uncompleted"> <a href="javascript:;" ng-click="go_to_team_task_sub_tab(\'uncompleted\')"> <span class="count" data-ng-show="!loading_overview_done"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="loading_overview_done">{{team_tasks_overview.uncompleted}}</span> <span class="text">待完成任务</span> </a> </li> <li class="tasks-expired"> <a href="javascript:;" ng-click="go_to_team_task_sub_tab(\'expired\')"> <span class="count" data-ng-show="!loading_overview_done"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="loading_overview_done">{{team_tasks_overview.expired}}</span> <span class="text">过期任务</span> </a> </li> <li class="tasks-completed noborder"> <a href="javascript:;" ng-click="go_to_team_task_sub_tab(\'completed\')"> <span class="count" data-ng-show="!loading_overview_done"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="loading_overview_done">{{team_tasks_overview.completed}}</span> <span class="text">已完成任务</span> </a> </li> </ul> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_top_tab.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_top_tab.html","<ul class=\"tabs\"> <li> <a ng-href=\"/teams/{{team_id}}\" ng-class=\"{true:'active'}[active_team_admin_nav_tab=='member']\">成员</a> </li> <li> <a ng-href=\"/teams/{{team_id}}/projects\" ng-class=\"{true: 'active'}[active_team_admin_nav_tab=='projects']\">项目</a> </li> <li ng-if=\"global.team_module.view | permission:current_team.permission\"> <a ng-href=\"/teams/{{team_id}}/tasks\" ng-class=\"{true: 'active'}[active_team_admin_nav_tab=='tasks']\">任务</a> </li> <li ng-if=\"global.team_module.view | permission:current_team.permission\" > <a ng-href=\"{{'/teams/'+current_team.team_id+{true:'/admin',false:'/setting'}[current_team.owner.uid == global.me.uid]}}\" ng-class=\"{true:'active'}[active_team_admin_nav_tab=='admin']\">设置</a> </li> </ul>")}]),angular.module("/ycjs/tpl/team/team_admin_upgrade.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_upgrade.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar" wt-scroll> <div class="mod_navbar"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>团队设置</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-briefcase"></i> <h5>升级团队到商业版</h5> <input wt-enter="js_upgrade_team()" wt-focus-event="js_team_quota_focus()" ng-model="team_quota" type="text" class="form-control" placeholder="输入团队成员人数"/> <p class="alert alert-danger" data-ng-show="upgrade_error.length > 0"> <i class="icon-remove-sign"></i> {{upgrade_error}} </p> <button class="btn btn-success btn-block" ng-click="js_upgrade_team()" data-loading-text="正在升级..." loading-status="is_upgrading">马上升级 </button> <span class="tips">如需帮助，请拨打 400-805-6966 联系我们</span> </div> </div> </dd> </dl> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/team/team_mask_panel.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_mask_panel.html",'<div class="mask-panel" ng-show="team.edition==1 || team.edition==3" ng-cloak> <i class="icon-briefcase"></i><br/> <span>商业版团队才可享受此功能</span><br/><br/> <a href="/teams/{{team_id}}/upgrade" class="btn btn-danger btn-lg">升级到商业版</a> </div>')}]),angular.module("/ycjs/tpl/team/team_member_invite.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_member_invite.html",'<div class="layout_content" ng-if="(global.team_module.add_member | permission:current_team.permission)"> <div class="layout_content_main no_sidebar "> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="main-content height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <div class="box-panel-body"> <dt class="frame-dt"> <span class="title">邀请成员</span> </dt> <dd> <form class="form-horizontal" role="form" name="invite_member_form" novalidate wt-form-validate="{blurTrig:false,showMsg:false}" wt-enter="js_invite_enter($event,invite_member_form)"> <div class="panel-section"> <div class="section-header"> <h4>输入成员邮箱</h4> </div> <div class="section-body pl_20"> <div ng-repeat="member in invite_members"> <div class="form-group"> <div class="col-xs-10"> <span ng-show="false">{{member.index = $index}}</span> <div class="input-group"> <input type="email" class="form-control col-xs-3" ui-event="{ focus : \'js_email_focus(invite_member_form)\' }" placeholder="输入邮箱地址" ng-model="member.email" name="member_email" type="email" tabindex="{{$index+1}}"> <div class="input-group-btn"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"> {{member.role | role}} <span class="caret"></span> </button> <ul class="dropdown-menu pull-right" role="menu"> <li ng-repeat="r in invite_member_roles"> <a href="javascript:;" ng-click="member.role = r.role">{{r.name}}</a> </li> </ul> </div> </div> </div> <span ng-show="invite_members.length > 1" class="delete col-xs-2" style="line-height:33px;"> <a href="javascript:;" ng-click="js_delete_member($event,member)">删除</a> </span> </div> </div> <a href="javascript:;" class="btn" ng-click="js_add_invite_member()">再添加一个</a> <br/> <br/> </div> </div> <div class="panel-section"> <div class="section-header"> <h4>说点什么</h4> </div> <div class="clearfix ml_15"> <div class="col-xs-10 pl_0"> <textarea class="message form-control help-block" rows="4" ng-init="invite_message=\'Worktile是一个简单好用的团队协作工具，我们团队使用它来跟踪任务进展情况，讨论问题，共享文件和文档，安排团队的日程，大家赶快加入吧。\'" ng-model="invite_message" tabindex="{{invite_members.length+1}}"> </textarea> </div> </div> <div class="alert alert-danger ml_15 mt_12 mb_0 w_678" ng-show="invite_member_form.$errors.length > 0"> <i class="icon-remove-sign"></i> <span ng-bind-html-unsafe="invite_member_form.$errors[0]"></span> </div> </div> <div class="panel-section ml_15"> <div class="section-body"> <button ng-click="js_invite_members(invite_member_form)" type="button" class="btn btn-success mr_15" data-loading-text="发送中..." loading-status="is_sending"> 发送邀请 </button> <button ng-click="js_cancel_invite()" class="btn btn-cancel">取消</button> </div> </div> </form> </dd> </div> </dl> </div> </div> <div class="right-panel"> <div class="box-panel today-event"> <div class="box-panel-header"> <h4><i class="icon-user mr_10"></i>角色说明</h4> </div> <div class="box-panel-body"> <ul> <li> <span>管理员</span> <a href="javascript:;">可以创建项目和邀请团队成员</a> </li> <li> <span>成员</span> <a href="javascript:;">只能看到自己参与的项目和团队可见项目</a> </li> </ul> </div> </div> <widget-add-team-member-by-link current-team="current_team"> </widget-add-team-member-by-link> </div> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include> ')}]),angular.module("/ycjs/tpl/team/team_member_list_widget.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_member_list_widget.html",' <div class="box-panel my-tasks-overview" > <div class="box-panel-header" > <h4>成员</h4> </div> <div class="box-panel-body" > <div ng-repeat="member in members | filter:teamMembersFilter() | filter:isStatusOkFilter()"> <wt-avatar member="member" name="member.display_name" size="30" class="m_15" data-placement="right" ></wt-avatar> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_not_found.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_not_found.html",'<div class="layout_content prj_panel" ng-if="part_loading_done && !(global.team_module.view_base | permission:current_team.permission)"> <div class="layout_content_main no_sidebar"> <dl class="frame" data-minheight="90"> <dt> <span class="title">出错啦</span> </dt> <dd> <div class="error-panel"> <i class="icon-sitemap"></i><br/> <span>团队不存在或者你不是当前团队成员</span><br/> <a class="btn btn-danger" href="/account/teams">管理我的团队</a> </div> </dd> </dl> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_projects.html",' <div class="layout_content" ng-if="(global.team_module.view_base | permission:current_team.permission)"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="main-content height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <div class="box-panel-body"> <dt class="frame-dt"> <span class="title">项目</span> <a href="javascript:;" ng-click="js_pop_new_menu($event)" ng-if="global.team_module.add_project | permission:current_team.permission" class="btn btn-danger pull-right" master_new_dialog step="2">新建项目 </a> <ul class="tabs" ng-if="global.team_module.view | permission:current_team.permission"> <li> <a ng-class="{true: \'active\'}[current_visibility == 1]" href="javascript:;" ng-click="js_set_current_visibility(1)"> 我参与的 </a> </li> <li> <a ng-class="{true: \'active\'}[current_visibility == 2]" href="javascript:;" ng-click="js_set_current_visibility(2)"> 团队可见 </a> </li> </ul> </dt> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="empty-panel" ng-if="(team_projects | filter:teamProjectsFilter(current_visibility)).length == 0 && part_loading_done" ng-cloak> <i class="icon-inbox"></i> <br/> <span ng-if="current_visibility == 1">还没有参与任何项目</span> <span ng-if="current_visibility == 2">没有团队可见项目</span> <span ng-if="current_visibility == 3">没有团队公开项目</span> </div> <div data-ng-show="part_loading_done"> <div class="project-list project-panel"> <div class="wt-row" ng-repeat="project in team_projects | filter:teamProjectsFilter(current_visibility)" wt-go-to="/project/{{project.pid}}" data-ng-class="{1:\'show-star\'}[project.is_star]"> <div class="column column-star"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'从常用项目移除\', 0: \'设置为常用项目\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> &nbsp; </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </div> </div> </div> </dl> </div> </div> <div class="right-panel"> <ng-include src="\'/ycjs/tpl/team/team_admin_task_stats_widget.html\'"></ng-include> </div> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include> ')}]),angular.module("/ycjs/tpl/team/team_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_setting.html",'<div class="layout_content" ng-if="(global.team_module.view | permission:current_team.permission)"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class=" height-nonav" wt-scroll> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <span class="title">设置</span> <ul class="tabs"> <li> <a class="active" href="javascript:;"> 退出团队 </a> </li> </ul> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="single-panel-section"> <div class="single-panel-section-content"> <div ng-switch="quit_team_step"> <div class="panel-section" data-ng-switch-when="1"> <div class=" alert alert-warning w_660"> <span><i class="icon icon-info-sign mr_5"></i>该操作不可撤销，退出团队后，您将不能访问该团队的一切数据，请谨慎操作。</span> </div> <div class="form-group"> <button class="btn btn-danger float_left" data-placement="right" data-align="top" ng-click="js_quit_team_step(2)">退出当前团队 </button> </div> </div> <div class="panel-section" ng-switch-when="2"> <wt-confirm-password class="w_360" confirm-cancel="js_quit_team_step(1)" confirm-success="js_quit_team_step(3)"></wt-confirm-password> </div> <div class="panel-section" ng-switch-when="3"> <div class=" alert alert-warning w_660" data-ng-show="!(unique_admin_prjs.length > 0)"> <span><i class="icon icon-info-sign mr_5"></i>该操作不可撤销，退出团队后，您将不能访问该团队的一切数据，是否继续？</span> </div> <div class=" alert alert-warning w_660" data-ng-show="unique_admin_prjs.length > 0"> <span><i class="icon icon-info-sign mr_5"></i>您在当前团队中有{{unique_admin_prjs.length}}个项目是唯一负责人，如果您退出当前团队，这些项目将无法添加新成员，请谨慎操作。</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="正在退出中..." loading-status="is_quiting" ng-click="js_quit_team()">确认退出 </button> <button class="btn float_left" ng-click="js_quit_team_step(1)">取消 </button> </div> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include> ')}]),angular.module("/ycjs/tpl/team/team_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_tasks.html",'<div class="layout_content" ng-if="(global.team_module.view_base | permission:current_team.permission)"> <div class="layout_content_main no_sidebar "> <div class="mod_navbar"> <div class="title"> <ng-include src="\'/ycjs/tpl/team/team_title.html\'"></ng-include> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/team/team_admin_top_tab.html\'"></ng-include> </div> </div> </div> <div class="main-content height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <div class="box-panel-body"> <dt class="frame-dt"> <span class="title">{{page_title}}</span> <ul class="tabs"> <li> <a href="javascript:;" ng-click="change_task_tab(\'uncompleted\')" ng-class="{true: \'active\'}[task_tab == \'uncompleted\']">待完成</a> </li> <li> <a href="javascript:;" ng-click="change_task_tab(\'expired\')" ng-class="{true: \'active\'}[task_tab == \'expired\']">已过期</a> </li> <li> <a href="javascript:;" ng-click="change_task_tab(\'completed\')" ng-class="{true: \'active\'}[task_tab == \'completed\']">已完成</a> </li> </ul> </dt> <div class="part-loading mt_20" data-ng-hide="switching_sub_tab_loading_done"></div> <div ng-show="task_tab === \'uncompleted\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="uncompleted_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有未完成的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="uncompleted_tasks.length > 0"> <div class="group-item" ng-repeat="task in uncompleted_tasks "> <div class="group-header" ng-show="task.is_show_date"> <span>{{ task.create_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"></div> <button class="btn" ng-show="more_page.uncompleted && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_more(\'uncompleted\');" > 加载更多... </button> </div> </div> </div> </div> <div ng-show="task_tab === \'expired\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="expired_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有已经过期的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="expired_tasks.length > 0"> <div class="group-item" ng-repeat="task in expired_tasks "> <div class="group-header" ng-show="task.is_show_date"> <span>{{ task.expire_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"></div> <button class="btn" ng-show="more_page.expired && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_more(\'expired\');" > 加载更多... </button> </div> </div> </div> </div> <div ng-show="task_tab === \'completed\' && switching_sub_tab_loading_done"> <div class="empty-panel noborder" data-ng-show="completed_tasks.length == 0"> <i class="icon-check"></i> <br> <span>没有已经完成的任务</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="completed_tasks.length > 0"> <div class="group-item" ng-repeat="task in completed_tasks "> <div class="group-header" ng-show="task.is_show_date"> <span>{{ task.completed_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"></div> <button class="btn" ng-show="more_page.completed && part_loading_done" data-loading-text="加载中..." loading-status="!part_loading_done" ng-click="load_more(\'completed\');" > 加载更多... </button> </div> </div> </div> </div> </div> </dl> </div> </div> <div class="right-panel"> <div class="box-panel"> <div class="box-panel-header"> <h4 class="pull-left"> <i class="icon-filter mr_10"></i> 任务筛选 </h4> </div> <div ng-switch on="filter_tab"> <div class="box-panel-body" ng-switch-when="tab_filter_member"> <ul class="avatars checkable"> <li ng-repeat="member in members | filter:isMemberFilter()"> <i class="icon-ok pull-right p_10" ng-if="member.uid == filter_uid"></i> <div class="member"> <wt-avatar member="member" size="30" name="[member.display_name,18] | cutstr" nameclass="ml_15" ng-click="js_filter_member(member.uid, member)"></wt-avatar> </div> </li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_title.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_title.html",'<h3> <i class="icon-sitemap mr_10"></i> {{current_team.name}} </h3> <a href="javascript:;" class="ml_15" tooltip-placement="bottom" tooltip="{{current_team.visibility | teamVisibility}}" show-team-visibility-options ng-click="show($event)"> <i ng-class="{\'icon-private\':current_team.visibility == 1,\'icon-public\':current_team.visibility == 2}"></i> </a> ')}]),angular.module("/ycjs/tpl/user/help.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/help.html",'<div class="mod_navbar"> <div class="title"> <h3><i class="icon-question-sign mr_10"></i>帮助中心</h3> </div> </div> <div class="common-content-panel help-panel height-nonav" wt-scroll> <div class="content-container"> <div class="content"> <div class="content-wrapper"> <div class="manual-list"> <div class="manual-item"> <a href="/guide" target="_blank"> <i class="icon-book"></i> <h4> 用户指南 </h4> <span> 什么是团队？如何邀请成员？权限如何控制？一切问题都能在这里找到答案。 </span> </a> </div> <div class="manual-item"> <a href="/shortcuts" target="_blank"> <i class="icon-keyboard"></i> <h4> 键盘快捷键 </h4> <span> 高效的工作，从使用快捷键开始。在任何页面，您只要按？键即可打开快捷键列表。 </span> </a> </div> <div class="manual-item"> <a href="/videos" target="_blank"> <i class="icon-facetime-video"></i> <h4> 帮助视频 </h4> <span> 通过视频快速了解如何使用Worktile，包括快速入门以及Worktile的进阶技巧 </span> </a> </div> <div class="manual-item"> <a href="/blog" target="_blank"> <i class="icon-rss"></i> <h4> 官方博客 </h4> <span> 在这里你可以找到产品更新日志，使用技巧，用户故事等等，看看同行们如何通过Worktile提升工作效率。 </span> </a> </div> <div class="manual-item"> <a href="/mobile" target="_blank"> <i class="icon-mobile-phone icon-large"></i> <h4> 移动版 </h4> <span> 同时支持iPhone版和Android版，让协同无处不在，随时随地与团队一起工作。 </span> </a> </div> <div class="manual-item"> <a href="/feedback" target="_blank"> <i class="icon-comment"></i> <h4> 在线反馈 </h4> <span> 有则改之，无则加勉，欢迎您通过左侧的联系方式或在线反馈与我们联系。 </span> </a> </div> </div> </div> </div> <div class="sidebar"> <div class="sidebar-widget"> <h4>微信客服</h4> <div class="contact-code"> <img src="/img/index/contact-code.png?ver=<%-config.version%>"> </div> </div> <div class="sidebar-widget"> <h4>支持</h4> <ul> <li> <i class="icon-weibo"></i> <a href="http://weibo.com/worktile"> 微博：@Worktile </a> </li> <li> <i class="icon-envelope-alt"></i> <a href="mailto:support@worktile.com"> 邮箱：support@worktile.com </a> </li> <li> <i class="icon-phone"></i> <a href="javascript:;"> 电话：400-805-6966 </a> </li> <li> <i class="icon-linux"></i> <a href="javascript:;"> QQ群：371897560 </a> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/user/pop_user_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/pop_user_setting.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>帐户</h3> </div> <div class="popbox-avatar"> <div class=""> <div class="clearfix avatar-body"> <div class="clearfix"> <wt-avatar member="global.me" size="56" wt-disable-drag></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline mr_15">{{global.me.display_name}}</h4> <span class="help-inline color_gray">@{{global.me.name}}</span> <p> <span class="help-inline">{{global.me.email}}</span> </p> </div> </div> <ul class="popbox-menu" style="margin-top: 15px;"> <li class="divider"></li> <li><a href="/account/settings"><i class="icon-user mr_5"></i>帐户设置</a> </li> <li><a href="/account/teams"><i class="icon-sitemap mr_5"></i>团队管理</a> </li> <li class="divider"></li> <li><a href="/club" target="_blank"><i class="icon-comments-alt mr_5"></i>用户社区</a> </li> <li><a href="/help" target="_blank"><i class="icon-question-sign mr_5"></i>帮助中心</a> </li> <li><a href="/share"><i class="icon-thumbs-up-alt mr_5"></i>推荐给好友</a> </li> </ul> </div> <div class="avatar-footer"> <button ng-click="js_user_logout()" class="btn btn-danger">退出</button> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/user/share.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/share.html",'<div class="single-panel" wt-scroll data-scrollnoheight="58"> <div class="share-panel"> <br/><br/> <h3 class="mb_100">推荐 <span>Worktile</span> 给你的小伙伴们</h3> <div id="share-wohoo"></div> <div class="share-section weixin-share"> <h4>微信分享</h4> <div> <p>用微信扫描右侧二维码 <br/> 分享到朋友圈</p></div> </div> <div class="share-section social-share"> <h4>微博分享</h4> <div> <a target="_blank" class="btn btn-danger btn-lg" href="http://v.t.sina.com.cn/share/share.php?appkey=worktile-appkey&title=Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。了解更多请点击 http://worktile.com @Worktile&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg"> <i class="icon-weibo"></i> 新浪微博 </a> &nbsp; &nbsp; <a target="_blank" class="btn btn-primary btn-lg" href="http://share.v.t.qq.com/index.php?c=share&a=index&url=http://worktile.com&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg&appkey=801421649&title=Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。了解更多请点击 http://worktile.com @Worktile"> <img src="/img/share/share-qqweibo-logo.png" width="25" height="25"/> 腾讯微博 </a> </div> </div> <div class="share-section mail-share"> <h4>发送邮件给你的小伙伴</h4> <div class="pt_45 clearfix"> <form class="form-horizontal wt-form" role="form" name="share_friend_form" novalidate wt-form-validate="{blurTrig:false,showMsg:false}" wt-enter="js_invite_enter($event,invite_member_form)"> <div class="form-group"> <div class="col-xs-8"> <input type="email" required="" class="form-control col-xs-3" placeholder="输入邮箱地址" ng-model="share_email" name="share_email" type="email"> </div> <div class="col-xs-4"> <button wt-form-submit="js_send_share_email(share_friend_form)" type="button" class="btn btn-success mr_15" data-loading-text="发送中..." loading-status="is_sending"> 发送邀请 </button> </div> </div> <dl> <dt> 邮件预览 </dt> <dd> <div class="col-xs-8 pl_0"> <textarea required="" class="message form-control help-block" rows="4" ng-model="share_desc" name="share_desc"> </textarea> </div> </dd> <dd> <div class="col-xs-8 pl_0"> <div class="alert alert-danger mt_12" ng-show="share_friend_form.$errors.length > 0"> <i class="icon-remove-sign"></i> <span ng-bind="share_friend_form.$errors[0]"></span> </div> </div> </dd> </dl> </form> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/user/user_profile.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/user_profile.html","")}]),angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig",function(e){"use strict";var t;return t={},angular.extend(t,e),{require:"?ngModel",link:function(t,i,n,a){var s=function(){return angular.extend({},e,t.$eval(n.uiDate))},r=function(){var e=!1,n=s();if(a){var r=n.onSelect||angular.noop;n.onSelect=function(n,s){t.$apply(function(){e=!0,a.$setViewValue(i.datepicker("getDate")),r(n,s),i.blur()})},n.beforeShow=function(){e=!0},n.onClose=function(){e=!1},i.on("blur",function(){e||t.$apply(function(){i.datepicker("setDate",i.datepicker("getDate")),a.$setViewValue(i.datepicker("getDate"))})}),a.$render=function(){var e=a.$viewValue;if(angular.isDefined(e)&&null!==e&&!angular.isDate(e))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof e+" - use ui-date-format to convert it from a string");i.datepicker("setDate",e)}}i.datepicker("destroy"),i.datepicker(n),a&&a.$render()};t.$watch(s,r,!0)}}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateFormatConfig",function(e){var t={require:"ngModel",link:function(t,i,n,a){var s=n.uiDateFormat||e;s?(a.$formatters.push(function(e){return angular.isString(e)?jQuery.datepicker.parseDate(s,e):null}),a.$parsers.push(function(e){return e?jQuery.datepicker.formatDate(s,e):null})):(a.$formatters.push(function(e){return angular.isString(e)?new Date(e):null}),a.$parsers.push(function(e){return e?e.toISOString():null}))}};return t}]),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{}).controller("uiCalendarCtrl",["$scope","$timeout",function(e,t){var i=1,n=1,a=e.eventSources,s=e.calendarWatchEvent?e.calendarWatchEvent:angular.noop,r=function(e){var i;return e&&(i=function(){var i=arguments;t(function(){e.apply(this,i)})}),i};this.eventsFingerprint=function(e){return e.__uiCalId||(e.__uiCalId=n++),""+e.__uiCalId+(e.id||"")+(e.title||"")+(e.url||"")+(+e.start||"")+(+e.end||"")+(e.allDay||"")+(e.className||"")+s(e)||""},this.sourcesFingerprint=function(e){return e.__id||(e.__id=i++)},this.allEvents=function(){for(var e=[],t=0,i=a.length;i>t;t++){var n=a[t];if(angular.isArray(n))e.push(n);else if(angular.isObject(n)&&angular.isArray(n.events)){var s={};for(var r in n)"_uiCalId"!==r&&"events"!==r&&(s[r]=n[r]);for(var o=0;n.events.length>o;o++)angular.extend(n.events[o],s);e.push(n.events)}}return Array.prototype.concat.apply([],e)},this.changeWatcher=function(e,t){var i,n=function(){for(var a,r,i=angular.isFunction(e)?e():e,n=[],o=0,l=i.length;l>o;o++)r=i[o],a=t(r),s[a]=r,n.push(a);return n},a=function(e,t){var a,s,i=[],n={};for(a=0,s=t.length;s>a;a++)n[t[a]]=!0;for(a=0,s=e.length;s>a;a++)n[e[a]]||i.push(e[a]);return i},s={},r=function(e,n){var r,o,l,c,d={},u=a(n,e);for(r=0,o=u.length;o>r;r++){var p=u[r];l=s[p],delete s[p];var f=t(l);f===p?i.onRemoved(l):(d[f]=p,i.onChanged(l))}var h=a(e,n);for(r=0,o=h.length;o>r;r++)c=h[r],l=s[c],d[c]||i.onAdded(l)};return i={subscribe:function(e,t){e.$watch(n,function(e,i){t&&t(e,i)===!1||r(e,i)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,t){var i={};return angular.extend(i,t),angular.extend(i,e),angular.forEach(i,function(e,t){"function"==typeof e&&(i[t]=r(i[t]))}),i}}]).directive("uiCalendar",["uiCalendarConfig","$locale",function(e,t){var i=function(e){var t,i;t=[];for(i in e)t[i]=e[i];return t},n=t.DATETIME_FORMATS;return e=angular.extend({monthNames:i(n.MONTH),monthNamesShort:i(n.SHORTMONTH),dayNames:i(n.DAY),dayNamesShort:i(n.SHORTDAY)},e||{}),{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(t,i,n,a){function d(){var r,i=n.uiCalendar?t.$parent.$eval(n.uiCalendar):{};r=a.getFullCalendarConfig(i,e),c={eventSources:s},angular.extend(c,r);var o={};for(var l in c)"eventSources"!==l&&(o[l]=c[l]);return JSON.stringify(o)}var s=t.eventSources,r=!1,o=a.changeWatcher(s,a.sourcesFingerprint),l=a.changeWatcher(a.allEvents,a.eventsFingerprint),c=null;t.destroy=function(){t.calendar=n.calendar?t.$parent[n.calendar]=i.html(""):i.html("")},t.init=function(){t.calendar.fullCalendar(c)},o.onAdded=function(e){t.calendar.fullCalendar("addEventSource",e),r=!0},o.onRemoved=function(e){t.calendar.fullCalendar("removeEventSource",e),r=!0},l.onAdded=function(e){t.calendar.fullCalendar("renderEvent",e,!0)},l.onRemoved=function(e){t.calendar.fullCalendar("removeEvents",function(t){return t===e})},l.onChanged=function(e){t.calendar.fullCalendar("updateEvent",e)},o.subscribe(t),l.subscribe(t,function(){return r===!0?(r=!1,!1):void 0}),t.$watch(d,function(){t.destroy(),t.init()})}}}]),function(e){e.Jcrop=function(t,i){function l(e){return Math.round(e)+"px"}function c(e){return n.baseClass+"-"+e}function d(){return e.fx.step.hasOwnProperty("backgroundColor")}function u(t){var i=e(t).offset();return[i.left,i.top]}function p(e){return[e.pageX-a[0],e.pageY-a[1]]}function f(t){"object"!=typeof t&&(t={}),n=e.extend(n,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof n[t]&&(n[t]=function(){})})}function h(e,t,i){if(a=u(E),tt.setCursor("move"===e?e:e+"-resize"),"move"===e)return tt.activateHandlers(_(t),w,i);var n=Q.getFixed(),s=g(e),r=Q.getCorner(g(s));Q.setPressed(Q.getCorner(s)),Q.setCurrent(r),tt.activateHandlers(m(e,n),w,i)}function m(e,t){return function(i){if(n.aspectRatio)switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}Q.setCurrent(i),et.update()}}function _(e){var t=e;return it.watchKeys(),function(e){Q.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,et.update()}}function g(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function v(e){return function(t){return n.disabled?!1:"move"!==e||n.allowMove?(a=u(E),X=!0,h(e,p(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function b(e,t,i){var n=e.width(),a=e.height();n>t&&t>0&&(n=t,a=t/e.width()*e.height()),a>i&&i>0&&(a=i,n=i/e.height()*e.width()),Y=e.width()/n,U=e.height()/a,e.width(n).height(a)}function y(e){return{x:e.x*Y,y:e.y*U,x2:e.x2*Y,y2:e.y2*U,w:e.w*Y,h:e.h*U}}function w(){var t=Q.getFixed();t.w>n.minSelect[0]&&t.h>n.minSelect[1]?(et.enableHandles(),et.done()):et.release(),tt.setCursor(n.allowSelect?"crosshair":"default")}function k(e){if(n.disabled)return!1;if(!n.allowSelect)return!1;X=!0,a=u(E),et.disableHandles(),tt.setCursor("crosshair");var t=p(e);return Q.setPressed(t),et.update(),tt.activateHandlers(j,w,"touch"===e.type.substring(0,5)),it.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function j(e){Q.setCurrent(e),et.update()}function x(){var t=e("<div></div>").addClass(c("tracker"));return r&&t.css({opacity:0,backgroundColor:"white"}),t}function nt(e){M.removeClass().addClass(c("holder")).addClass(e)}function at(e,t){function b(){window.setTimeout(y,u)}var i=e[0]/Y,a=e[1]/U,s=e[2]/Y,r=e[3]/U;if(!G){var o=Q.flipCoords(i,a,s,r),l=Q.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=n.animationDelay,p=o[0]-c[0],f=o[1]-c[1],h=o[2]-c[2],m=o[3]-c[3],_=0,g=n.swingSpeed;i=d[0],a=d[1],s=d[2],r=d[3],et.animMode(!0);var y=function(){return function(){_+=(100-_)/g,d[0]=Math.round(i+_/100*p),d[1]=Math.round(a+_/100*f),d[2]=Math.round(s+_/100*h),d[3]=Math.round(r+_/100*m),_>=99.8&&(_=100),100>_?(rt(d),b()):(et.done(),et.animMode(!1),"function"==typeof t&&t.call(gt))}}();b()}}function st(e){rt([e[0]/Y,e[1]/U,e[2]/Y,e[3]/U]),n.onSelect.call(gt,y(Q.getFixed())),et.enableHandles()}function rt(e){Q.setPressed([e[0],e[1]]),Q.setCurrent([e[2],e[3]]),et.update()}function ot(){return y(Q.getFixed())}function lt(){return Q.getFixed()}function ct(e){f(e),_t()}function dt(){n.disabled=!0,et.disableHandles(),et.setCursor("default"),tt.setCursor("default")}function ut(){n.disabled=!1,_t()}function pt(){et.done(),tt.activateHandlers(null,null)}function ft(){M.remove(),C.show(),C.css("visibility","visible"),e(t).removeData("Jcrop")}function ht(e,t){et.release(),dt();var i=new Image;i.onload=function(){var a=i.width,s=i.height,r=n.boxWidth,o=n.boxHeight;E.width(a).height(s),E.attr("src",e),A.attr("src",e),b(E,r,o),T=E.width(),z=E.height(),A.width(T).height(z),N.width(T+2*O).height(z+2*O),M.width(T).height(z),J.resize(T,z),ut(),"function"==typeof t&&t.call(gt)},i.src=e}function mt(e,t,i){var a=t||n.bgColor;n.bgFade&&d()&&n.fadeTime&&!i?e.animate({backgroundColor:a},{queue:!1,duration:n.fadeTime}):e.css("backgroundColor",a)}function _t(e){n.allowResize?e?et.enableOnly():et.enableHandles():et.disableHandles(),tt.setCursor(n.allowSelect?"crosshair":"default"),et.setCursor(n.allowMove?"move":"default"),n.hasOwnProperty("trueSize")&&(Y=n.trueSize[0]/T,U=n.trueSize[1]/z),n.hasOwnProperty("setSelect")&&(st(n.setSelect),et.done(),delete n.setSelect),J.refresh(),n.bgColor!=L&&(mt(n.shade?J.getShades():M,n.shade?n.shadeColor||n.bgColor:n.bgColor),L=n.bgColor),H!=n.bgOpacity&&(H=n.bgOpacity,n.shade?J.refresh():et.setBgOpacity(H)),R=n.maxSize[0]||0,q=n.maxSize[1]||0,W=n.minSize[0]||0,B=n.minSize[1]||0,n.hasOwnProperty("outerImage")&&(E.attr("src",n.outerImage),delete n.outerImage),et.refresh()
}var a,n=e.extend({},e.Jcrop.defaults),s=navigator.userAgent.toLowerCase(),r=/msie/.test(s),o=/msie [1-6]\./.test(s);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),f(i);var $={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},C=e(t),S=!0;if("IMG"==t.tagName){if(0!=C[0].width&&0!=C[0].height)C.width(C[0].width),C.height(C[0].height);else{var D=new Image;D.src=C[0].src,C.width(D.width),C.height(D.height)}var E=C.clone().removeAttr("id").css($).show();E.width(C.width()),E.height(C.height()),C.after(E).hide()}else E=C.css($).show(),S=!1,null===n.shade&&(n.shade=!0);b(E,n.boxWidth,n.boxHeight);var T=E.width(),z=E.height(),M=e("<div />").width(T).height(z).addClass(c("holder")).css({position:"relative",backgroundColor:n.bgColor}).insertAfter(C).append(E);n.addClass&&M.addClass(n.addClass);var A=e("<div />"),P=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),F=e("<div />").width("100%").height("100%").css("zIndex",320),I=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=Q.getFixed();n.onDblClick.call(gt,e)}).insertBefore(E).append(P,F);S&&(A=e("<img />").attr("src",E.attr("src")).css($).width(T).height(z),P.append(A)),o&&I.css({overflowY:"hidden"});var R,q,W,B,Y,U,X,G,K,O=n.boundary,N=x().width(T+2*O).height(z+2*O).css({position:"absolute",top:l(-O),left:l(-O),zIndex:290}).mousedown(k),L=n.bgColor,H=n.bgOpacity;a=u(E);var Z=function(){function e(){var n,e={},t=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(n=0;t.length>n;n++){var a=t[n];a="on"+a;var s=a in i;s||(i.setAttribute(a,"return;"),s="function"==typeof i[a]),e[t[n]]=s}return e.touchstart&&e.touchend&&e.touchmove}catch(r){return!1}}function t(){return n.touchSupport===!0||n.touchSupport===!1?n.touchSupport:e()}return{createDragger:function(e){return function(t){return n.disabled?!1:"move"!==e||n.allowMove?(a=u(E),X=!0,h(e,p(Z.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return k(Z.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),Q=function(){function o(n){n=f(n),i=e=n[0],a=t=n[1]}function l(e){e=f(e),s=e[0]-i,r=e[1]-a,i=e[0],a=e[1]}function c(){return[s,r]}function d(n){var s=n[0],r=n[1];0>e+s&&(s-=s+e),0>t+r&&(r-=r+t),a+r>z&&(r+=z-(a+r)),i+s>T&&(s+=T-(i+s)),e+=s,i+=s,t+=r,a+=r}function u(e){var t=p();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function p(){if(!n.aspectRatio)return m();var g,v,b,y,s=n.aspectRatio,r=n.minSize[0]/Y,o=n.maxSize[0]/Y,l=n.maxSize[1]/U,c=i-e,d=a-t,u=Math.abs(c),p=Math.abs(d),f=u/p;return 0===o&&(o=10*T),0===l&&(l=10*z),s>f?(v=a,b=p*s,g=0>c?e-b:b+e,0>g?(g=0,y=Math.abs((g-e)/s),v=0>d?t-y:y+t):g>T&&(g=T,y=Math.abs((g-e)/s),v=0>d?t-y:y+t)):(g=i,y=u/s,v=0>d?t-y:t+y,0>v?(v=0,b=Math.abs((v-t)*s),g=0>c?e-b:b+e):v>z&&(v=z,b=Math.abs(v-t)*s,g=0>c?e-b:b+e)),g>e?(r>g-e?g=e+r:g-e>o&&(g=e+o),v=v>t?t+(g-e)/s:t-(g-e)/s):e>g&&(r>e-g?g=e-r:e-g>o&&(g=e-o),v=v>t?t+(e-g)/s:t-(e-g)/s),0>g?(e-=g,g=0):g>T&&(e-=g-T,g=T),0>v?(t-=v,v=0):v>z&&(t-=v-z,v=z),_(h(e,t,g,v))}function f(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>T&&(e[0]=T),e[1]>z&&(e[1]=z),[Math.round(e[0]),Math.round(e[1])]}function h(e,t,i,n){var a=e,s=i,r=t,o=n;return e>i&&(a=i,s=e),t>n&&(r=n,o=t),[a,r,s,o]}function m(){var r,n=i-e,s=a-t;return R&&Math.abs(n)>R&&(i=n>0?e+R:e-R),q&&Math.abs(s)>q&&(a=s>0?t+q:t-q),B/U&&B/U>Math.abs(s)&&(a=s>0?t+B/U:t-B/U),W/Y&&W/Y>Math.abs(n)&&(i=n>0?e+W/Y:e-W/Y),0>e&&(i-=e,e-=e),0>t&&(a-=t,t-=t),0>i&&(e-=i,i-=i),0>a&&(t-=a,a-=a),i>T&&(r=i-T,e-=r,i-=r),a>z&&(r=a-z,t-=r,a-=r),e>T&&(r=e-z,a-=r,t-=r),t>z&&(r=t-z,a-=r,t-=r),_(h(e,t,i,a))}function _(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var s,r,e=0,t=0,i=0,a=0;return{flipCoords:h,setPressed:o,setCurrent:l,getOffset:c,moveOffset:d,getCorner:u,getFixed:p}}(),J=function(){function s(e,t){a.left.css({height:l(t)}),a.right.css({height:l(t)})}function r(){return o(Q.getFixed())}function o(e){a.top.css({left:l(e.x),width:l(e.w),height:l(e.y)}),a.bottom.css({top:l(e.y2),left:l(e.x),width:l(e.w),height:l(z-e.y2)}),a.right.css({left:l(e.x2),width:l(T-e.x2)}),a.left.css({width:l(e.x)})}function c(){return e("<div />").css({position:"absolute",backgroundColor:n.shadeColor||n.bgColor}).appendTo(i)}function d(){t||(t=!0,i.insertBefore(E),r(),et.setBgOpacity(1,0,1),A.hide(),u(n.shadeColor||n.bgColor,1),et.isAwake()?f(n.bgOpacity,1):f(1,1))}function u(e,t){mt(m(),e,t)}function p(){t&&(i.remove(),A.show(),t=!1,et.isAwake()?et.setBgOpacity(n.bgOpacity,1,1):(et.setBgOpacity(1,1,1),et.disableHandles()),mt(M,0,1))}function f(e,a){t&&(n.bgFade&&!a?i.animate({opacity:1-e},{queue:!1,duration:n.fadeTime}):i.css({opacity:1-e}))}function h(){n.shade?d():p(),et.isAwake()&&f(n.bgOpacity)}function m(){return i.children()}var t=!1,i=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),a={top:c(),left:c().height(z),right:c().height(z),bottom:c()};return{update:r,updateRaw:o,getShades:m,setBgColor:u,enable:d,disable:p,resize:s,refresh:h,opacity:f}}(),et=function(){function d(t){var i=e("<div />").css({position:"absolute",opacity:n.borderOpacity}).addClass(c(t));return P.append(i),i}function u(t,i){var n=e("<div />").mousedown(v(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return Z.support&&n.bind("touchstart.jcrop",Z.createDragger(t)),F.append(n),n}function p(e){var t=n.handleSize,a=u(e,i++).css({opacity:n.handleOpacity}).addClass(c("handle"));return t&&a.width(t).height(t),a}function f(e){return u(e,i++).addClass("jcrop-dragbar")}function h(e){var t;for(t=0;e.length>t;t++)r[e[t]]=f(e[t])}function m(e){var t,i;for(i=0;e.length>i;i++){switch(e[i]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}a[e[i]]=d(t)}}function _(e){var t;for(t=0;e.length>t;t++)s[e[t]]=p(e[t])}function g(e,t){n.shade||A.css({top:l(-t),left:l(-e)}),I.css({top:l(t),left:l(e)})}function b(e,t){I.width(Math.round(e)).height(Math.round(t))}function w(){var e=Q.getFixed();Q.setPressed([e.x,e.y]),Q.setCurrent([e.x2,e.y2]),k()}function k(e){return t?j(e):void 0}function j(e){var i=Q.getFixed();b(i.w,i.h),g(i.x,i.y),n.shade&&J.updateRaw(i),t||C(),e?n.onSelect.call(gt,y(i)):n.onChange.call(gt,y(i))}function $(e,i,a){(t||i)&&(n.bgFade&&!a?E.animate({opacity:e},{queue:!1,duration:n.fadeTime}):E.css("opacity",e))}function C(){I.show(),n.shade?J.opacity(H):$(H,!0),t=!0}function S(){z(),I.hide(),n.shade?J.opacity(1):$(1),t=!1,n.onRelease.call(gt)}function D(){o&&F.show()}function T(){return o=!0,n.allowResize?(F.show(),!0):void 0}function z(){o=!1,F.hide()}function M(e){e?(G=!0,z()):(G=!1,T())}function O(){M(!1),w()}var t,i=370,a={},s={},r={},o=!1;n.dragEdges&&e.isArray(n.createDragbars)&&h(n.createDragbars),e.isArray(n.createHandles)&&_(n.createHandles),n.drawBorders&&e.isArray(n.createBorders)&&m(n.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var N=x().mousedown(v("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.support&&N.bind("touchstart.jcrop",Z.createDragger("move")),P.append(N),z(),{updateVisible:k,update:j,release:S,refresh:w,isAwake:function(){return t},setCursor:function(e){N.css("cursor",e)},enableHandles:T,enableOnly:function(){o=!0},showHandles:D,disableHandles:z,animMode:M,setBgOpacity:$,done:O}}(),tt=function(){function s(t){N.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",d).bind("touchend.jcrop",u):a&&e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",l)}function r(){N.css({zIndex:290}),e(document).unbind(".jcrop")}function o(e){return t(p(e)),!1}function l(e){return e.preventDefault(),e.stopPropagation(),X&&(X=!1,i(p(e)),et.isAwake()&&n.onSelect.call(gt,y(Q.getFixed())),r(),t=function(){},i=function(){}),!1}function c(e,n,a){return X=!0,t=e,i=n,s(a),!1}function d(e){return t(p(Z.cfilter(e))),!1}function u(e){return l(Z.cfilter(e))}function f(e){N.css("cursor",e)}var t=function(){},i=function(){},a=n.trackDocument;return a||N.mousemove(o).mouseup(l).mouseout(l),E.before(N),{activateHandlers:c,setCursor:f}}(),it=function(){function a(){n.keySupport&&(t.show(),t.focus())}function s(){t.hide()}function r(e,t,i){n.allowMove&&(Q.moveOffset([t,i]),et.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function l(e){if(e.ctrlKey||e.metaKey)return!0;K=e.shiftKey?!0:!1;var t=K?10:1;switch(e.keyCode){case 37:r(e,-t,0);break;case 39:r(e,t,0);break;case 38:r(e,0,-t);break;case 40:r(e,0,t);break;case 27:n.allowSelect&&et.release();break;case 9:return!0}return!1}var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return n.keySupport&&(t.keydown(l).blur(s),o||!n.fixedSupport?(t.css({position:"absolute",left:"-20px"}),i.append(t).insertBefore(E)):t.insertBefore(E)),{watchKeys:a}}();Z.support&&N.bind("touchstart.jcrop",Z.newSelection),F.hide(),_t(!0);var gt={setImage:ht,animateTo:at,setSelect:st,setOptions:ct,tellSelect:ot,tellScaled:lt,setClass:nt,disable:dt,enable:ut,cancel:pt,release:et.release,destroy:ft,focus:it.watchKeys,getBounds:function(){return[T*Y,z*U]},getWidgetSize:function(){return[T,z]},getScaleFactor:function(){return[Y,U]},getOptions:function(){return n},ui:{holder:M,selection:I}};return r&&M.bind("selectstart",function(){return!1}),C.data("Jcrop",gt),gt},e.fn.Jcrop=function(t,i){var n;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n)}):(e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n))}),this},e.Jcrop.Loader=function(t,i,n){function r(){s.complete?(a.unbind(".jcloader"),e.isFunction(i)&&i.call(s)):window.setTimeout(r,50)}var a=e(t),s=a[0];a.bind("load.jcloader",r).bind("error.jcloader",function(){a.unbind(".jcloader"),e.isFunction(n)&&n.call(s)}),s.complete&&e.isFunction(i)&&(a.unbind(".jcloader"),i.call(s))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){"use strict";var t=function(e,i,n){var s,r,a=document.createElement("img");if(a.onerror=i,a.onload=function(){!r||n&&n.noRevoke||t.revokeObjectURL(r),i&&i(t.scale(a,n))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))s=r=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;s=e,n&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin)}return s?(a.src=s,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:i&&i(e)})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,i,n,a,s,r,o,l,c){return e.getContext("2d").drawImage(t,i,n,a,s,r,o,l,c),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,i){i=i||{};var c,d,u,p,f,h,m,_,g,n=document.createElement("canvas"),a=e.getContext||t.hasCanvasOption(i)&&n.getContext,s=e.naturalWidth||e.width,r=e.naturalHeight||e.height,o=s,l=r,v=function(){var e=Math.max((u||o)/o,(p||l)/l);e>1&&(o=Math.ceil(o*e),l=Math.ceil(l*e))},b=function(){var e=Math.min((c||o)/o,(d||l)/l);1>e&&(o=Math.ceil(o*e),l=Math.ceil(l*e))};return a&&(i=t.getTransformedOptions(i),m=i.left||0,_=i.top||0,i.sourceWidth?(f=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(m=s-f-i.right)):f=s-m-(i.right||0),i.sourceHeight?(h=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(_=r-h-i.bottom)):h=r-_-(i.bottom||0),o=f,l=h),c=i.maxWidth,d=i.maxHeight,u=i.minWidth,p=i.minHeight,a&&c&&d&&i.crop?(o=c,l=d,g=f/h-c/d,0>g?(h=d*f/c,void 0===i.top&&void 0===i.bottom&&(_=(r-h)/2)):g>0&&(f=c*h/d,void 0===i.left&&void 0===i.right&&(m=(s-f)/2))):((i.contain||i.cover)&&(u=c=c||u,p=d=d||p),i.cover?(b(),v()):(v(),b())),a?(n.width=o,n.height=l,t.transformCoordinates(n,i),t.renderImageToCanvas(n,e,m,_,f,h,0,0,o,l)):(e.width=o,e.height=l,e)},t.createObjectURL=function(e){return i?i.createObjectURL(e):!1},t.revokeObjectURL=function(e){return i?i.revokeObjectURL(e):!1},t.readFile=function(e,t,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=t,i=i||"readAsDataURL",n[i])return n[i](e),n}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,i,n){n=n||{};var a=this,s=n.maxMetaDataSize||262144,r={},o=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(o||!e.readFile(e.blobSlice.call(t,0,s),function(t){var u,p,f,h,s=t.target.result,o=new DataView(s),l=2,c=o.byteLength-4,d=l;if(65496===o.getUint16(0)){for(;c>l&&(u=o.getUint16(l),u>=65504&&65519>=u||65534===u);){if(p=o.getUint16(l+2)+2,l+p>o.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(f=e.metaDataParsers.jpeg[u])for(h=0;f.length>h;h+=1)f[h].call(a,o,l,p,r,n);l+=p,d=l}!n.disableImageHead&&d>6&&(r.imageHead=s.slice?s.slice(0,d):new Uint8Array(s).subarray(0,d))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(r)},"readAsArrayBuffer"))&&i(r)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,i){var n,a,s;if(!i||t+i>e.byteLength)return console.log("Invalid Exif data: Invalid thumbnail data."),void 0;for(n=[],a=0;i>a;a+=1)s=e.getUint8(t+a),n.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+n.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,i,n,a,s,r){var l,c,d,u,p,f,o=e.exifTagTypes[a];if(!o)return console.log("Invalid Exif data: Invalid tag type."),void 0;if(l=o.size*s,c=l>4?i+t.getUint32(n+8,r):n+8,c+l>t.byteLength)return console.log("Invalid Exif data: Invalid data offset."),void 0;if(1===s)return o.getValue(t,c,r);for(d=[],u=0;s>u;u+=1)d[u]=o.getValue(t,c+u*o.size,r);if(o.ascii){for(p="",u=0;d.length>u&&(f=d[u],"\0"!==f);u+=1)p+=f;return p}return d},e.parseExifTag=function(t,i,n,a,s){var r=t.getUint16(n,a);s.exif[r]=e.getExifValue(t,i,n,t.getUint16(n+2,a),t.getUint32(n+4,a),a)},e.parseExifTags=function(e,t,i,n,a){var s,r,o;if(i+6>e.byteLength)return console.log("Invalid Exif data: Invalid directory offset."),void 0;if(s=e.getUint16(i,n),r=i+2+12*s,r+4>e.byteLength)return console.log("Invalid Exif data: Invalid directory size."),void 0;for(o=0;s>o;o+=1)this.parseExifTag(e,t,i+2+12*o,n,a);return e.getUint32(r,n)},e.parseExifData=function(t,i,n,a,s){if(!s.disableExif){var o,l,c,r=i+10;if(1165519206===t.getUint32(i+4)){if(r+8>t.byteLength)return console.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==t.getUint16(i+8))return console.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(t.getUint16(r)){case 18761:o=!0;break;case 19789:o=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==t.getUint16(r+2,o))return console.log("Invalid Exif data: Missing TIFF marker."),void 0;l=t.getUint32(r+4,o),a.exif=new e.ExifMap,l=e.parseExifTags(t,r,r+l,o,a),l&&!s.disableExifThumbnail&&(c={exif:{}},l=e.parseExifTags(t,r,r+l,o,c),c.exif[513]&&(a.exif.Thumbnail=e.getExifThumbnail(t,r+c.exif[513],c.exif[514]))),a.exif[34665]&&!s.disableExifSub&&e.parseExifTags(t,r,r+a.exif[34665],o,a),a.exif[34853]&&!s.disableExifGps&&e.parseExifTags(t,r,r+a.exif[34853],o,a)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";var t,i,n;e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},t=e.ExifMap.prototype.tags,i=e.ExifMap.prototype.map;for(n in t)t.hasOwnProperty(n)&&(i[t[n]]=n);e.ExifMap.prototype.getAll=function(){var i,n,e={};for(i in this)this.hasOwnProperty(i)&&(n=t[i],n&&(e[n]=this.getText(n)));return e}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,i;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(e,-e.width+1,0),0===i.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var s,r,o,l,c,i=e.naturalHeight||e.height,n=document.createElement("canvas"),a=n.getContext("2d");for(t&&(i/=2),n.width=1,n.height=i,a.drawImage(e,0,0),s=a.getImageData(0,0,1,i).data,r=0,o=i,l=i;l>r;)c=s[4*(l-1)+3],0===c?o=l:r=l,l=o+r>>1;return l/i||1},e.renderImageToCanvas=function(i,n,a,s,r,o,l,c,d,u){if("image/jpeg"===n._type){var _,g,v,b,p=i.getContext("2d"),f=document.createElement("canvas"),h=1024,m=f.getContext("2d");if(f.width=h,f.height=h,p.save(),_=e.detectSubsampling(n),_&&(a/=2,s/=2,r/=2,o/=2),g=e.detectVerticalSquash(n,_),_||1!==g){for(s*=g,d=Math.ceil(h*d/r),u=Math.ceil(h*u/o/g),c=0,b=0;o>b;){for(l=0,v=0;r>v;)m.clearRect(0,0,h,h),m.drawImage(n,a,s,r,o,-v,-b,r,o),p.drawImage(f,0,0,h,h,l,c,d,u),v+=h,l+=d;b+=h,c+=u}return p.restore(),i}}return t(i,n,a,s,r,o,l,c,d,u)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var i=e.getContext("2d"),n=e.width,a=e.height,s=t.orientation;if(s)switch(s>4&&(e.width=a,e.height=n),s){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,a),i.rotate(Math.PI);break;case 4:i.translate(0,a),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-a);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-a),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var i,t={};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);switch(e.orientation){case 2:t.left=e.right,t.right=e.left;break;case 3:t.left=e.right,t.top=e.bottom,t.right=e.left,t.bottom=e.top;break;case 4:t.top=e.bottom,t.bottom=e.top;break;case 5:t.left=e.top,t.top=e.left,t.right=e.bottom,t.bottom=e.right;break;case 6:t.left=e.top,t.top=e.right,t.right=e.bottom,t.bottom=e.left;break;case 7:t.left=e.bottom,t.top=e.right,t.right=e.top,t.bottom=e.left;break;case 8:t.left=e.bottom,t.top=e.left,t.right=e.top,t.bottom=e.right}return e.orientation>4&&(t.maxWidth=e.maxHeight,t.maxHeight=e.maxWidth,t.minWidth=e.minHeight,t.minHeight=e.minWidth,t.sourceWidth=e.sourceHeight,t.sourceHeight=e.sourceWidth),t}}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(i||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,r,o,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),s=new ArrayBuffer(t.length),r=new Uint8Array(s),o=0;t.length>o;o+=1)r[o]=t.charCodeAt(o);return l=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?r:s],{type:l}):(c=new a,c.append(s),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,i,n){n&&t.toDataURL&&s?e(s(this.toDataURL(i,n))):e(this.mozGetAsFile("blob",i))}:t.toDataURL&&s&&(t.toBlob=function(e,t,i){e(s(this.toDataURL(t,i)))})),"function"==typeof define&&define.amd?define(function(){return s}):e.dataURLtoBlob=s}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var a,s,r,n=i.initialIframeSrc||"javascript:false;";return{send:function(o,l){a=e('<form style="display:none;"></form>'),a.attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),t+=1,s=e('<iframe src="'+n+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];s.unbind("load").bind("load",function(){var t;try{if(t=s.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+n+'"></iframe>').appendTo(a),window.setTimeout(function(){a.remove()},0)}),a.prop("target",s.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(a)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",r[t]||i.paramName)}),a.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),a.submit(),t&&t.length&&i.fileInput.each(function(i,n){var a=e(t[i]);e(n).prop("name",a.prop("name")),a.replaceWith(n)})}),a.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",n),a&&a.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;
return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=8*(t-this.loaded)*(1e3/n),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var n,i=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&t.progressInterval>i-t._time&&e.loaded!==e.total)return;t._time=i,n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=n-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=n,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,a=t.files[0],s=t.multipart||!e.support.xhrFileUpload,r=t.paramName[0];t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:r,value:t.blob}):e.each(t.files,function(e,i){n.push({name:t.paramName[e]||r,value:i})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(r,t.blob,a.name):e.each(t.files,function(e,a){(i._isInstanceOf("File",a)||i._isInstanceOf("Blob",a))&&n.append(t.paramName[e]||r,a,a.name)})),t.data=n):(t.contentType=a.type,t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)n.push(i),a-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var a=e.Deferred(),s=a.promise();return i=i||this.options.context||s,t===!0?a.resolveWith(i,n):t===!1&&a.rejectWith(i,n),s.abort=a.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,i){var n=this,a=function(t){return e.Deferred().resolveWith(n,[t]).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||a(this)).pipe(e,t)),this._processQueue||a(this)},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",t,this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var u,p,n=this,a=t.files[0],s=a.size,r=t.uploadedBytes,o=t.maxChunkSize||s,l=this._blobSlice,c=e.Deferred(),d=c.promise();return this._isXHRUpload(t)&&l&&(r||s>o)&&!t.data?i?!0:r>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(p=function(){var i=e.extend({},t),d=i._progress.loaded;i.blob=l.call(a,r,r+o,a.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+r+"-"+(r+i.chunkSize-1)+"/"+s,n._initXHRData(i),n._initProgressListener(i),u=(n._trigger("chunksend",null,i)!==!1&&e.ajax(i)||n._getXHRPromise(!1,i.context)).done(function(a,o,l){r=n._getUploadedBytes(l)||r+i.chunkSize,d+i.chunkSize-i._progress.loaded&&n._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r-i.uploadedBytes,total:r-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=r,i.result=a,i.textStatus=o,i.jqXHR=l,n._trigger("chunkdone",null,i),n._trigger("chunkalways",null,i),s>r?p():c.resolveWith(i.context,[a,o,l])}).fail(function(e,t,a){i.jqXHR=e,i.textStatus=t,i.errorThrown=a,n._trigger("chunkfail",null,i),n._trigger("chunkalways",null,i),c.rejectWith(i.context,[e,t,a])})},this._enhancePromise(d),d.abort=function(){return u.abort()},p(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,a){var s=a._progress.total,r=a._response;s>a._progress.loaded&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),a),r.result=a.result=t,r.textStatus=a.textStatus=i,r.jqXHR=a.jqXHR=n,this._trigger("done",null,a)},_onFail:function(e,t,i,n){var a=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),a.jqXHR=n.jqXHR=e,a.textStatus=n.textStatus=t,a.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var a,s,r,o,n=this,l=n._getAJAXSettings(i),c=function(){return n._sending+=1,l._bitrateTimer=new n._BitrateTimer,a=a||((s||n._trigger("send",t,l)===!1)&&n._getXHRPromise(!1,l.context,s)||n._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){n._onDone(e,t,i,l)}).fail(function(e,t,i){n._onFail(e,t,i,l)}).always(function(e,t,i){if(n._onAlways(e,t,i,l),n._sending-=1,n._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>n._sending)for(var a=n._slots.shift();a;){if("pending"===n._getDeferredState(a)){a.resolve();break}a=n._slots.shift()}0===n._active&&n._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this._sending>=this.options.limitConcurrentUploads?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),o=r.pipe(c)):(this._sequence=this._sequence.pipe(c,c),o=this._sequence),o.abort=function(){return s=[,"abort","abort"],a?a.abort():(r&&r.rejectWith(l.context,s),c())},this._enhancePromise(o)):c()},_onAdd:function(t,i){var l,c,d,u,n=this,a=!0,s=e.extend({},this.options,i),r=s.limitMultiFileUploads,o=this._getParamName(s);if((s.singleFileUploads||r)&&this._isXHRUpload(s))if(!s.singleFileUploads&&r)for(d=[],l=[],u=0;i.files.length>u;u+=r)d.push(i.files.slice(u,u+r)),c=o.slice(u,u+r),c.length||(c=o),l.push(c);else l=o;else d=[i.files],l=[o];return i.originalFiles=i.files,e.each(d||i.files,function(s,r){var o=e.extend({},i);return o.files=d?r:[r],o.paramName=l[s],n._initResponseObject(o),n._initProgressObject(o),n._addConvenienceMethods(t,o),a=n._trigger("add",t,o)}),a},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r,n=this,a=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,a.resolve(t._file)):t.file(function(e){e.relativePath=i,a.resolve(e)},s):t.isDirectory?(r=t.createReader(),r.readEntries(function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){a.resolve(e)}).fail(s)},s)):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,a,i=t.prop("webkitEntries")||t.prop("entries");if(i&&i.length)return this._handleFileTreeEntries(i);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(a=t.prop("value"),!a)return e.Deferred().resolve([]).promise();n=[{name:a.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",t,n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};return i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",t,n)===!1||this._onAdd(t,n)===!1)?!1:void 0},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,i=e.dataTransfer,n={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,t._trigger("drop",e,n)!==!1&&t._onAdd(e,n)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;if(i){if(this._trigger("dragover",t)===!1)return!1;-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,n){t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var s,r,i=this,n=e.Deferred(),a=n.promise();return a.abort=function(){return r=!0,s?s.abort():(n.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!r){if(!e.length)return n.reject(),void 0;t.files=e,s=i._onSend(null,t).then(function(e,t,i){n.resolve(e,t,i)},function(e,t,i){n.reject(e,t,i)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var a=e(this);n.process(function(){return a.fileupload("process",n)}),t.call(this,i,n)}},processActions:{},_processFile:function(t){var i=this,n=e.Deferred().resolveWith(i,[t]),a=n.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(e,t){var n=function(e){return i.processActions[t.action].call(i,e,t)};a=a.pipe(n,t.always&&n)}),a.done(function(){i._trigger("processdone",null,t),i._trigger("processalways",null,t)}).fail(function(){i._trigger("processfail",null,t),i._trigger("processalways",null,t)}),a},_transformProcessQueue:function(t){var i=[];e.each(t.processQueue,function(){var n={},a=this.action,s=this.prefix===!0?a:this.prefix;e.each(this,function(i,a){n[i]="string"===e.type(a)&&"@"===a.charAt(0)?t[a.slice(1)||(s?s+i.charAt(0).toUpperCase()+i.slice(1):i)]:a}),i.push(n)}),t.processQueue=i},processing:function(){return this._processing},process:function(t){var i=this,n=e.extend({},this.options,t);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(t){var a=t?e.extend({},n):n,s=function(){return i._processFile(a)};a.index=t,i._processing+=1,i._processingQueue=i._processingQueue.pipe(s,s).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process.js"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var a=this,s=i.files[i.index],r=e.Deferred();return"number"===e.type(n.maxFileSize)&&s.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(s.type)||!t(s,function(e){e.src&&(i.img=e),r.resolveWith(a,[i])},n)?i:r.promise()},resizeImage:function(i,n){if(n.disabled)return i;var o,l,c,a=this,s=e.Deferred(),r=function(e){i[e.getContext?"canvas":"img"]=e,s.resolveWith(a,[i])};return n=e.extend({canvas:!0},n),i.exif&&(n.orientation===!0&&(n.orientation=i.exif.get("Orientation")),n.thumbnail&&(o=i.exif.get("Thumbnail")))?(t(o,r,n),s.promise()):(l=n.canvas&&i.canvas||i.img,l&&(c=t.scale(l,n),c.width!==l.width||c.height!==l.height)?(r(c),s.promise()):i)},saveImage:function(t,i){if(!t.canvas||i.disabled)return t;var n=this,a=t.files[t.index],s=a.name,r=e.Deferred(),o=function(e){e.name||(a.type===e.type?e.name=a.name:a.name&&(e.name=a.name.replace(/\..+$/,"."+e.type.substr(6)))),t.files[t.index]=e,r.resolveWith(n,[t])};if(t.canvas.mozGetAsFile)o(t.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(a.type)&&s||(s&&s.replace(/\..+$/,"")||"blob")+".png",a.type));else{if(!t.canvas.toBlob)return t;t.canvas.toBlob(o,a.type)}return r.promise()},loadImageMetaData:function(i,n){if(n.disabled)return i;var a=this,s=e.Deferred();return t.parseMetaData(i.files[i.index],function(t){e.extend(i,t),s.resolveWith(a,[i])},n),s.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var i=e.files[e.index],n=new Blob([e.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,e.files[e.index]=n,e},setImage:function(e,t){var i=e.canvas||e.img;return i&&!t.disabled&&(e.files[e.index][t.name||"preview"]=i),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process.js"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(i,n){if(n.disabled)return i;var s,r,a=i.files[i.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(a.type)&&("number"!==e.type(n.maxFileSize)||n.maxFileSize>=a.size)&&(!n.fileTypes||n.fileTypes.test(a.type))&&(s=t.createObjectURL(a))?(r=this._audioElement.cloneNode(!1),r.src=s,r.controls=!0,i.audio=r,i):i},setAudio:function(e,t){return e.audio&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.audio),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process.js"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(i,n){if(n.disabled)return i;var s,r,a=i.files[i.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(a.type)&&("number"!==e.type(n.maxFileSize)||n.maxFileSize>=a.size)&&(!n.fileTypes||n.fileTypes.test(a.type))&&(s=t.createObjectURL(a))?(r=this._videoElement.cloneNode(!1),r.src=s,r.controls=!0,i.video=r,i):i},setVideo:function(e,t){return e.video&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.video),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var n=e.Deferred(),a=this.options,s=t.files[t.index];return"number"===e.type(i.maxNumberOfFiles)&&(a.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?s.error=a.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(s.type)||i.acceptFileTypes.test(s.name)?i.maxFileSize&&s.size>i.maxFileSize?s.error=a.i18n("maxFileSize"):"number"===e.type(s.size)&&i.minFileSize>s.size?s.error=a.i18n("minFileSize"):delete s.error:s.error=a.i18n("acceptFileTypes"),s.error||t.files.error?(t.files.error=!0,n.rejectWith(this,[t])):n.resolveWith(this,[t]),n.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","angular","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e):e()}(function(){"use strict";angular.module("blueimp.fileupload",[]).provider("fileUpload",function(){var t,e=function(){var e=angular.element(this).fileupload("option","scope")(),t=angular.injector(["ng"]).get("$timeout");t(function(){e.$apply()})};t=this.defaults={handleResponse:function(e,t){var i=t.result&&t.result.files;i?t.scope().replace(t.files,i):(t.errorThrown||"error"===t.textStatus)&&(t.files[0].error=t.errorThrown||t.textStatus)},add:function(e,t){var i=t.scope();t.process(function(){return i.process(t)}).always(function(){var e=t.files[0],n=function(){return t.submit()};angular.forEach(t.files,function(e,i){e._index=i,e.$state=function(){return t.state()},e.$progress=function(){return t.progress()},e.$response=function(){return t.response()},t.formData&&(e.formData=t.formData,e.formData.size=e.size)}),e.$cancel=function(){return i.clear(t.files),t.abort()},"rejected"===e.$state()?e._$submit=n:e.$submit=n,i.$apply(function(){var n=i.option("prependFiles")?"unshift":"push";Array.prototype[n].apply(i.queue,t.files),e.$submit&&(i.option("autoUpload")||t.autoUpload)&&t.autoUpload!==!1&&e.$submit()})})},progress:function(e,t){t.scope().$apply()},done:function(e,t){var i=this;t.scope().$apply(function(){t.handleResponse.call(i,e,t)})},fail:function(e,t){var i=this;if("abort"!==t.errorThrown){if(t.dataType&&t.dataType.indexOf("json")===t.dataType.length-4)try{t.result=angular.fromJson(t.jqXHR.responseText)}catch(n){}t.scope().$apply(function(){t.handleResponse.call(i,e,t)})}},stop:e,processstart:e,processstop:e,getNumberOfFiles:function(){return this.scope().queue.length},dataType:"json",autoUpload:!1},this.$get=[function(){return{defaults:t}}]}).provider("formatFileSizeFilter",function(){var e={units:[{size:1e9,suffix:" GB"},{size:1e6,suffix:" MB"},{size:1e3,suffix:" KB"}]};this.defaults=e,this.$get=function(){return function(t){if(!angular.isNumber(t))return"";for(var a,s,i=!0,n=0;i;){if(i=e.units[n],a=i.prefix||"",s=i.suffix||"",n===e.units.length-1||t>=i.size)return a+(t/i.size).toFixed(2)+s;n+=1}}}}).controller("FileUploadController",["$scope","$element","$attrs","$window","fileUpload",function(e,t,i,n,a){var s={progress:function(){return t.fileupload("progress")},active:function(){return t.fileupload("active")},option:function(e,i){return t.fileupload("option",e,i)},add:function(e){return t.fileupload("add",e)},send:function(e){return t.fileupload("send",e)},process:function(e){return t.fileupload("process",e)},processing:function(e){return t.fileupload("processing",e)}};e.disabled=!n.jQuery.support.fileInput,e.queue=e.queue||[],e.clear=function(e){var t=this.queue,i=t.length,n=e,a=1;for(angular.isArray(e)&&(n=e[0],a=e.length);i;)if(i-=1,t[i]===n)return t.splice(i,a)},e.replace=function(e,t){var a,s,i=this.queue,n=e[0];for(a=0;i.length>a;a+=1)if(i[a]===n){for(s=0;t.length>s;s+=1)i[a+s]=t[s];return}},e.applyOnQueue=function(e){var i,n,t=this.queue.slice(0);for(i=0;t.length>i;i+=1)n=t[i],n[e]&&n[e]()},e.submit=function(){this.applyOnQueue("$submit")},e.cancel=function(){this.applyOnQueue("$cancel")},angular.extend(e,s),t.fileupload(angular.extend({scope:function(){return e}},a.defaults)).on("fileuploadadd",function(t,i){i.scope=e.option("scope")}).on(["fileuploadadd","fileuploadsubmit","fileuploadsend","fileuploaddone","fileuploadfail","fileuploadalways","fileuploadprogress","fileuploadprogressall","fileuploadstart","fileuploadstop","fileuploadchange","fileuploadpaste","fileuploaddrop","fileuploaddragover","fileuploadchunksend","fileuploadchunkdone","fileuploadchunkfail","fileuploadchunkalways","fileuploadprocessstart","fileuploadprocess","fileuploadprocessdone","fileuploadprocessfail","fileuploadprocessalways","fileuploadprocessstop"].join(" "),function(t,i){e.$emit(t.type,i).defaultPrevented&&t.preventDefault()}).on("remove",function(){var t;for(t in s)s.hasOwnProperty(t)&&delete e[t]}),e.$watch(i.fileUpload,function(e){e&&t.fileupload("option",e)})}]).controller("FileUploadProgressController",["$scope","$attrs","$parse",function(e,t,i){var n=i(t.fileUploadProgress),a=function(){var t=n(e);t&&t.total&&(e.num=Math.floor(100*(t.loaded/t.total)))};a(),e.$watch(t.fileUploadProgress+".loaded",function(e,t){e!==t&&a()})}]).controller("FileUploadPreviewController",["$scope","$element","$attrs","$parse",function(e,t,i,n){var a=n(i.fileUploadPreview),s=a(e);s.preview&&t.append(s.preview)}]).directive("fileUpload",function(){return{controller:"FileUploadController"}}).directive("fileUploadProgress",function(){return{controller:"FileUploadProgressController"}}).directive("fileUploadPreview",function(){return{controller:"FileUploadPreviewController"}}).directive("download",function(){return function(e,t){t.on("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",t.prop("download"),t.prop("href")].join(":"))}catch(i){}})}})}),function(e){e.PaginationCalculator=function(e,t){this.maxentries=e,this.opts=t},e.extend(e.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(e){var t=Math.floor(this.opts.num_display_entries/2),i=this.numPages(),n=i-this.opts.num_display_entries,a=e>t?Math.max(Math.min(e-t,n),0):0,s=e>t?Math.min(e+t+this.opts.num_display_entries%2,i):Math.min(this.opts.num_display_entries,i);return{start:a,end:s}}}),e.PaginationRenderers={},e.PaginationRenderers.defaultRenderer=function(t,i){this.maxentries=t,this.opts=i,this.pc=new e.PaginationCalculator(t,i)},e.extend(e.PaginationRenderers.defaultRenderer.prototype,{createLink:function(t,i,n){var a,s=this.pc.numPages();return t=0>t?0:s>t?t:s-1,n=e.extend({text:t+1,classes:""},n||{}),a=t==i?isNaN(n.text)?e("<li class='disabled'><a>"+n.text+"</a></li>"):e("<li class='active'><a>"+n.text+"</a></li>"):e("<li><a href='"+this.opts.link_to.replace(/__id__/,t)+"'>"+n.text+"</a></li>"),n.classes&&a.addClass(n.classes),a.data("page_id",t),a},appendRange:function(e,t,i,n,a){var s;for(s=i;n>s;s++)this.createLink(s,t,a).appendTo(e)},getLinks:function(t,i){t=parseInt(t);var n,a,s=this.pc.getInterval(t),r=this.pc.numPages(),o=e("<ul class='pagination'></ul>");return this.opts.items_per_page>=this.maxentries?o:(this.opts.prev_text&&(t>0||this.opts.prev_show_always)&&o.append(this.createLink(t-1,t,{text:this.opts.prev_text,classes:"prev"})),s.start>0&&this.opts.num_edge_entries>0&&(a=Math.min(this.opts.num_edge_entries,s.start),this.appendRange(o,t,0,a,{classes:"sp"}),s.start>this.opts.num_edge_entries&&this.opts.ellipse_text&&e("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(o)),this.appendRange(o,t,s.start,s.end),r>s.end&&this.opts.num_edge_entries>0&&(r-this.opts.num_edge_entries>s.end&&this.opts.ellipse_text&&e("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(o),n=Math.max(r-this.opts.num_edge_entries,s.end),this.appendRange(o,t,n,r,{classes:"ep"})),this.opts.next_text&&(r-1>t||this.opts.next_show_always)&&o.append(this.createLink(t+1,t,{text:this.opts.next_text,classes:"next"})),e("li:not(.disabled, .active) a",o).click(i),o)}}),e.fn.pagination=function(t,i){function o(t){var n=e(t.target).parent().data("page_id"),a=l(n);return a||t.stopPropagation(),a}function l(e){n.data("current_page",e),s=a.getLinks(e,o),n.empty(),s.appendTo(n);var t=i.callback(e,n);return t}i=e.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"javascript:;",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},i||{});var a,s,r,n=this;if(r=i.current_page,n.data("current_page",r),t=!t||0>t?1:t,i.items_per_page=!i.items_per_page||0>i.items_per_page?1:i.items_per_page,!e.PaginationRenderers[i.renderer])throw new ReferenceError("Pagination renderer '"+i.renderer+"' was not found in jQuery.PaginationRenderers object.");a=new e.PaginationRenderers[i.renderer](t,i);var c=new e.PaginationCalculator(t,i),d=c.numPages();n.bind("setPage",{numPages:d},function(e,t){return t>=0&&e.data.numPages>t?(l(t),!1):void 0}),n.bind("prevPage",function(){var i=e(this).data("current_page");return i>0&&l(i-1),!1}),n.bind("nextPage",{numPages:d},function(t){var i=e(this).data("current_page");return t.data.numPages-1>i&&l(i+1),!1}),n.bind("currentPage",function(){var i=e(this).data("current_page");return l(i),!1}),s=a.getLinks(r,o),n.empty(),s.appendTo(n),i.load_first_page&&i.callback(r,n)}}(jQuery),function(){!function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t,i,n,a,s,r,o,l,c,d,u;return d="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return e.noop()},t.prototype.getPosition=function(){return e.noop()},t.prototype.getOldIEPos=function(){var e,t;return t=o.selection.createRange(),e=o.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length
},t.prototype.getPos=function(){var e,t,i;return(i=this.range())?(e=i.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(i.endContainer,i.endOffset),t=e.toString().length,e.detach(),t):o.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=o.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,i,n,a;if(c.getSelection&&(n=this.range())){if(0>n.endOffset-1)return null;t=n.cloneRange(),t.setStart(n.endContainer,n.endOffset-1),t.setEnd(n.endContainer,n.endOffset),a=t.getBoundingClientRect(),i={height:a.height,left:a.left+a.width,top:a.top},t.detach()}else o.selection&&(i=this.getOldIEOffset());return i&&!l&&(i.top+=e(c).scrollTop(),i.left+=e(c).scrollLeft()),i},t.prototype.range=function(){var e;return c.getSelection?(e=c.getSelection(),e.rangeCount>0?e.getRangeAt(0):null):void 0},t}(),i=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,i,n,a,s,r;return t=this.domInputor,s=o.selection.createRange(),a=0,s&&s.parentElement()===t&&(n=t.value.replace(/\r\n/g,"\n"),i=n.length,r=t.createTextRange(),r.moveToBookmark(s.getBookmark()),e=t.createTextRange(),e.collapse(!1),a=r.compareEndPoints("StartToEnd",e)>-1?i:-r.moveStart("character",-i)),a},t.prototype.getPos=function(){return o.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,i;return t=this.domInputor,o.selection?(i=t.createTextRange(),i.move("character",e),i.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,i,n,a;return i=this.domInputor.createTextRange(),e||(e=this.getPos()),i.move("character",e),n=i.boundingLeft,a=i.boundingTop,t=i.boundingHeight,{left:n,top:a,height:t}},t.prototype.getOffset=function(t){var i,n,a;return i=this.$inputor,o.selection?(n=this.getIEOffset(t),n.top+=e(c).scrollTop()+i.scrollTop(),n.left+=e(c).scrollLeft()+i.scrollLeft(),n):(n=i.offset(),a=this.getPosition(t),n={left:n.left+a.left-i.scrollLeft(),top:n.top+a.top-i.scrollTop(),height:a.height})},t.prototype.getPosition=function(e){var t,i,a,s,r,o;return t=this.$inputor,a=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),o=t.val().slice(0,e),s="<span>"+a(o)+"</span>",s+="<span id='caret'>|</span>",r=new n(t),i=r.create(s).rect()},t.prototype.getIEPosition=function(e){var t,i,n,a,s;return n=this.getIEOffset(e),i=this.$inputor.offset(),a=n.left-i.left,s=n.top-i.top,t=n.height,{left:a,top:s,height:t}},t}(),n=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],t.prototype.mirrorCss=function(){var t,i=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},e.each(this.css_attr,function(e,n){return t[n]=i.$inputor.css(n)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,i;return e=this.$mirror.find("#caret"),t=e.position(),i={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),i},t}(),a={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},r={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return o.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(t){var i,n;return n=this.getOffset(t),l&&(i=e(l).offset(),n.top+=i.top,n.left+=i.left),n}},o=null,c=null,l=null,u=function(e){return l=e,c=e.contentWindow,o=e.contentDocument||c.document},s=function(t,i){var n,a;if(e.isPlainObject(i)&&(a=i.iframe))return t.data("caret-iframe",a),u(a);if(a=t.data("caret-iframe"))return u(a);o=t[0].ownerDocument,c=o.defaultView||o.parentWindow;try{return l=c.frameElement}catch(s){n=s}},e.fn.caret=function(n){var o;return"object"==typeof n?(s(this,n),this):r[n]?(s(this),o=a.contentEditable(this)?new t(this):new i(this),r[n].apply(o,Array.prototype.slice.call(arguments,1))):e.error("Method "+n+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=i,e.fn.caret.Utils=a,e.fn.caret.apis=r})}.call(this),function(){(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(e){var t,i,n,a,s,r,o,l,c,d=[].slice;n=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.iframe=null,this.setIframe(),this.listen()}return t.prototype.setIframe=function(e){var t;if(e)return this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e,this;this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{return this.iframe=this.window.frameElement}catch(i){t=i}},t.prototype.controller=function(e){var t,i,n,a;if(this.alias_maps[e])i=this.controllers[this.alias_maps[e]];else{a=this.controllers;for(n in a)if(t=a[n],n===e){i=t;break}}return i?i:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var i,n;return i=(n=this.controllers)[e]||(n[e]=new s(this,e)),t.alias&&(this.alias_maps[t.alias]=e),i.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(){var i;return null!=(i=e.controller())?i.view.hide():void 0}}(this)).on("blur.atwhoInner",function(e){return function(){var i;return(i=e.controller())?i.view.hide(i.get_opt("display_timeout")):void 0}}(this))},t.prototype.shutdown=function(){var e,t,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner")},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var i;return(i=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){return t.look_up()?e.set_context_for(t.at):void 0},i)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var i;switch(t.keyCode){case o.ESC:t.preventDefault(),null!=(i=this.controller())&&i.view.hide();break;case o.DOWN:case o.UP:case o.CTRL:e.noop();break;case o.P:case o.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var i,n;if(i=null!=(n=this.controller())?n.view:void 0,this.controllers&&(t.keyCode===o.ENTER||t.keyCode===o.ESC))for(var a in this.controllers){var s=this.controllers[a].setting.callbacks.keydown;s&&s(t,i&&i.visible())}if(i&&i.visible())switch(t.keyCode){case o.ESC:t.preventDefault(),i.hide();break;case o.UP:t.preventDefault(),i.prev();break;case o.DOWN:t.preventDefault(),i.next();break;case o.P:if(!t.ctrlKey)return;t.preventDefault(),i.prev();break;case o.N:if(!t.ctrlKey)return;t.preventDefault(),i.next();break;case o.TAB:case o.ENTER:if(!i.visible())return;t.preventDefault(),i.choosing=!0,i.choose();break;default:e.noop()}},t}(),s=function(){function i(i,n){this.app=i,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,t.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new l(this),this.view=new c(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},i.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho["default"],t),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.call_default=function(){var t,i,n;n=arguments[0],t=arguments.length>=2?d.call(arguments,1):[];try{return r[n].apply(this,t)}catch(a){return i=a,e.error(""+i+" Or maybe At.js doesn't have function "+n)}},i.prototype.trigger=function(e,t){var i,n;return null==t&&(t=[]),t.push(this),i=this.get_opt("alias"),n=i?""+e+"-"+i+".atwho":""+e+".atwho",this.$inputor.trigger(n,t)},i.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||r[e]},i.prototype.get_opt=function(e){var i;try{return this.setting[e]}catch(n){return i=n,null}},i.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},i.prototype.catch_query=function(){var e,t,i,n,a,s;return t=this.content(),e=this.$inputor.caret("pos"),s=t.slice(0,e),n=this.callbacks("matcher").call(this,this.at,s,this.get_opt("start_with_space")),"string"==typeof n&&this.get_opt("max_len",20)>=n.length?(a=e-n.length,i=a+n.length,this.pos=a,n={text:n,head_pos:a,end_pos:i},this.trigger("matched",[this.at,n.text])):(n=null,this.view.hide()),this.query=n},i.prototype.rect=function(){var e,t;if(e=this.$inputor.caret({iframe:this.app.iframe}).caret("offset",this.pos-1))return"true"===this.$inputor.attr("contentEditable")&&(e=this.cur_rect||(this.cur_rect=e)||e),t=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},i.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},i.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},i.prototype.insert_content_for=function(t){var i,n,a;return n=t.data("value"),a=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!a?n:(i=e.extend({},t.data("item-data"),{"atwho-data-value":n,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,a,i))},i.prototype.insert=function(t,i){var n,a,s,r,o,l,c,d,u,p,f;return n=this.$inputor,"true"===n.attr("contentEditable")&&(s="atwho-view-flag atwho-view-flag-"+(this.get_opt("alias")||this.at),r=""+t+"<span contenteditable='false'>&nbsp;<span>",o="<span contenteditable='false' class='"+s+"'>"+r+"</span>",a=e(o,this.app.document).data("atwho-data-item",i.data("item-data")),this.app.document.selection&&(a=e("<span contenteditable='true'></span>",this.app.document).html(a))),n.is("textarea, input")?(t=this.get_opt("space_after")?t+" ":""+t,u=n.val(),p=u.slice(0,Math.max(this.query.head_pos-this.at.length,0)),f=""+p+t+u.slice(this.query.end_pos||0),n.val(f),n.caret("pos",p.length+t.length)):(c=this.range)?(l=c.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,c.setStart(c.endContainer,Math.max(l,0)),c.setEnd(c.endContainer,c.endOffset),c.deleteContents(),c.insertNode(a[0]),c.collapse(!1),d=this.app.window.getSelection(),d.removeAllRanges(),d.addRange(c)):(c=this.ie8_range)&&(c.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),c.pasteHTML(r),c.collapse(!1),c.select()),n.is(":focus")||n.focus(),n.change()},i.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},i.prototype.look_up=function(){var t,i;if(t=this.catch_query())return i=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(i,this)),t},i}(),l=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var i,n,a;return i=this.fetch(),n=this.context.get_opt("search_key"),i=this.context.callbacks("filter").call(this.context,e,i,n)||[],a=this.context.callbacks("remote_filter"),i.length>0||!a&&0===i.length?t(i):a.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),c=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(i){return t.find(".cur").removeClass("cur"),e(i.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.click_event=t,e.choose(),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(){var e,t;return(e=this.$el.find(".cur")).length?(t=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,t,e),e),this.context.trigger("inserted",[e,this.click_event]),this.hide()):void 0},t.prototype.reposition=function(t){var i,n;return t.bottom+this.$el.height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.$el.height()),i={left:t.left,top:t.bottom},null!=(n=this.context.callbacks("before_reposition"))&&n.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.choosing?(this.choosing=!1,void 0):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e){var t;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[this.click_event]),this.click_event=void 0):(t=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(t,e))},t.prototype.render=function(t){var i,n,a,s,r,o,l;if(!(e.isArray(t)&&t.length>0))return this.hide(),void 0;for(this.$el.find("ul").empty(),n=this.$el.find("ul"),r=this.context.get_opt("tpl"),o=0,l=t.length;l>o;o++)a=t[o],a=e.extend({},a,{"atwho-at":this.context.at}),s=this.context.callbacks("tpl_eval").call(this.context,r,a),i=e(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text)),i.data("item-data",a),n.append(i);return this.show(),this.context.get_opt("highlight_first")?n.find("li:first").addClass("cur"):void 0},t}(),o={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},r={before_save:function(t){var i,n,a,s;if(!e.isArray(t))return t;for(s=[],n=0,a=t.length;a>n;n++)i=t[n],e.isPlainObject(i)?s.push(i):s.push({name:i});return s},matcher:function(e,t,i){var n,a;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(e="(?:^|\\s)"+e),a=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),n=a.exec(t),n?n[2]||n[1]:null},filter:function(e,t,i){var n,a,s,r;for(r=[],a=0,s=t.length;s>a;a++)n=t[a],~n[i].toLowerCase().indexOf(e.toLowerCase())&&r.push(n);return r},remote_filter:null,sorter:function(e,t,i){var n,a,s,r;if(!e)return t;for(r=[],a=0,s=t.length;s>a;a++)n=t[a],n.atwho_order=n[i].toLowerCase().indexOf(e.toLowerCase()),n.atwho_order>-1&&r.push(n);return r.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var i;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,i){return t[i]})}catch(n){return i=n,""}},highlighter:function(e,t){var i;return t?(i=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(i,function(e,t,i,n){return"> "+t+"<strong>"+i+"</strong>"+n+" <"})):e},before_insert:function(e){return e},after_insert:function(){},keydown:function(){}},i={load:function(e,t){var i;return(i=this.controller(e))?i.model.load(t):void 0},getInsertedItemsWithIDs:function(t){var i,n,a;return(i=this.controller(t))?(t&&(t="-"+(i.get_opt("alias")||i.at)),n=[],a=e.map(this.$inputor.find("span.atwho-view-flag"+(t||"")),function(t){var i;return i=e(t).data("atwho-data-item"),n.indexOf(i.id)>-1?void 0:(i.id&&(n.push=i.id),i)}),[n,a]):[null,null]},getInsertedItems:function(e){return i.getInsertedItemsWithIDs.apply(this,[e])[1]},getInsertedIDs:function(e){return i.getInsertedItemsWithIDs.apply(this,[e])[0]},setIframe:function(e){return this.setIframe(e)},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},a={init:function(t){var i,a;return a=(i=e(this)).data("atwho"),a||i.data("atwho",a=new n(this)),a.reg(t.at,t),this}},t=e("<div id='atwho-container'></div>"),e.fn.atwho=function(n){var s,r;return r=arguments,e("body").append(t),s=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var t;return"object"!=typeof n&&n?i[n]?(t=e(this).data("atwho"))?s=i[n].apply(t,Array.prototype.slice.call(r,1)):void 0:e.error("Method "+n+" does not exist on jQuery.caret"):a.init.apply(this,r)}),s||this},e.fn.atwho["default"]={at:void 0,alias:void 0,space_after:!0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span>${atwho-data-value}</span>",callbacks:r,search_key:"name",start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){function $t(e,t){var i;e||(e={});for(i in t)e[i]=t[i];return e}function Ct(){var e,i,t=arguments,n={},a=function(e,t){var i,n;"object"!=typeof e&&(e={});for(n in t)t.hasOwnProperty(n)&&(i=t[n],e[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?a(e[n]||{},i):t[n]);return e};for(t[0]===!0&&(n=t[1],t=Array.prototype.slice.call(t,2)),i=t.length,e=0;i>e;e++)n=a(n,t[e]);return n}function St(){for(var e=0,t=arguments,i=t.length,n={};i>e;e++)n[t[e++]]=t[e];return n}function Dt(e,t){return parseInt(e,t||10)}function Et(e){return"string"==typeof e}function Tt(e){return"object"==typeof e}function zt(e){return"[object Array]"===Object.prototype.toString.call(e)}function Mt(e){return"number"==typeof e}function At(e){return n.log(e)/n.LN10}function Pt(e){return n.pow(10,e)}function Ft(e,t){for(var i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}}function It(t){return t!==e&&null!==t}function Ot(e,t,i){var n,a;if(Et(t))It(i)?e.setAttribute(t,i):e&&e.getAttribute&&(a=e.getAttribute(t));else if(It(t)&&Tt(t))for(n in t)e.setAttribute(n,t[n]);return a}function Nt(e){return zt(e)?e:[e]}function Lt(){var t,i,e=arguments,n=e.length;for(t=0;n>t;t++)if(i=e[t],i!==void 0&&null!==i)return i}function Ht(t,i){_&&!k&&i&&i.opacity!==e&&(i.filter="alpha(opacity="+100*i.opacity+")"),$t(t.style,i)}function Rt(e,i,n,a,s){var r=t.createElement(e);return i&&$t(r,i),s&&Ht(r,{padding:0,border:V,margin:0}),n&&Ht(r,n),a&&a.appendChild(r),r}function qt(e,t){var i=function(){};return i.prototype=new e,$t(i.prototype,t),i}function Wt(e,t,i,n){var a=T.lang,s=+e||0,r=-1===t?(s.toString().split(".")[1]||"").length:isNaN(t=c(t))?2:t,o=void 0===i?a.decimalPoint:i,l=void 0===n?a.thousandsSep:n,d=0>s?"-":"",u=String(Dt(s=c(s).toFixed(r))),p=u.length>3?u.length%3:0;return d+(p?u.substr(0,p)+l:"")+u.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+l)+(r?o+c(s-u).toFixed(r).slice(2):"")}function Bt(e,t){return new Array((t||2)+1-String(e).length).join(0)+e}function Yt(e,t,i){var n=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(n),i.apply(this,e)}}function Ut(e,t){var s,i=/f$/,n=/\.([0-9])/,a=T.lang;return i.test(e)?(s=e.match(n),s=s?s[1]:-1,null!==t&&(t=Wt(t,s,a.decimalPoint,e.indexOf(",")>-1?a.thousandsSep:""))):t=z(e,t),t}function Vt(e,t){for(var a,s,r,o,l,d,u,i="{",n=!1,c=[];-1!==(u=e.indexOf(i));){if(a=e.slice(0,u),n){for(s=a.split(":"),r=s.shift().split("."),l=r.length,d=t,o=0;l>o;o++)d=d[r[o]];s.length&&(d=Ut(s.join(":"),d)),c.push(d)}else c.push(a);e=e.slice(u+1),n=!n,i=n?"}":"{"}return c.push(e),c.join("")}function Xt(e){return n.pow(10,s(n.log(e)/n.LN10))}function Gt(e,t,i,n){var a,s;for(i=Lt(i,1),a=e/i,t||(t=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?t=[1,2,5,10]:.1>=i&&(t=[1/i]))),s=0;t.length>s&&(e=t[s],!((t[s]+(t[s+1]||t[s]))/2>=a));s++);return e*=i}function Kt(){this.color=0,this.symbol=0}function Zt(e,t){var n,a,i=e.length;for(a=0;i>a;a++)e[a].ss_i=a;for(e.sort(function(e,i){return n=t(e,i),0===n?e.ss_i-i.ss_i:n}),a=0;i>a;a++)delete e[a].ss_i}function Qt(e){for(var t=e.length,i=e[0];t--;)i>e[t]&&(i=e[t]);return i}function Jt(e){for(var t=e.length,i=e[0];t--;)e[t]>i&&(i=e[t]);return i}function ei(e,t){var i;for(i in e)e[i]&&e[i]!==t&&e[i].destroy&&e[i].destroy(),delete e[i]}function ti(e){E||(E=Rt(H)),e&&E.appendChild(e),E.innerHTML=""}function ii(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;i.console&&console.log(n)}function ni(e){return parseFloat(e.toPrecision(14))}function ai(e,t){M=Lt(e,t.animation)}function ji(){var e=T.global.useUTC,t=e?"getUTC":"get",i=e?"setUTC":"set";ut=6e4*(e&&T.global.timezoneOffset||0),dt=e?Date.UTC:function(e,t,i,n,a,s){return new Date(e,t,Lt(i,1),Lt(n,0),Lt(a,0),Lt(s,0)).getTime()},pt=t+"Minutes",ft=t+"Hours",ht=t+"Day",mt=t+"Date",_t=t+"Month",gt=t+"FullYear",vt=i+"Minutes",bt=i+"Hours",yt=i+"Date",wt=i+"Month",kt=i+"FullYear"}function xi(e){return T=Ct(!0,T,e),ji(),T}function $i(){return T}function Ti(){}function Mi(e,t,i,n){this.axis=e,this.pos=t,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function Ai(){this.init.apply(this,arguments)}function Wi(){this.init.apply(this,arguments)}function Vi(e,t,i,n,a){var s=e.chart.inverted;this.axis=e,this.isNegative=i,this.options=t,this.x=n,this.total=null,this.points={},this.stack=a,this.alignOptions={align:t.align||(s?i?"left":"right":"center"),verticalAlign:t.verticalAlign||(s?"middle":i?"bottom":"top"),y:Lt(t.y,s?4:i?14:-6),x:Lt(t.x,s?i?-6:6:0)},this.textAlign=t.textAlign||(s?i?"right":"left":"center")}var e,$,C,E,T,z,M,A,P,lt,dt,ut,pt,ft,ht,mt,_t,gt,vt,bt,yt,wt,kt,t=document,i=window,n=Math,a=n.round,s=n.floor,r=n.ceil,o=n.max,l=n.min,c=n.abs,d=n.cos,u=n.sin,p=n.PI,f=2*p/360,h=navigator.userAgent,m=i.opera,_=/msie/i.test(h)&&!m,v=(8===t.documentMode,/AppleWebKit/.test(h)),b=/Firefox/.test(h),y=/(Mobile|Android|Windows Phone)/.test(h),w="http://www.w3.org/2000/svg",k=!!t.createElementNS&&!!t.createElementNS(w,"svg").createSVGRect,j=b&&4>parseInt(h.split("Firefox/")[1],10),x=!k&&!_&&!!t.createElement("canvas").getContext,S={},D=0,F=function(){},I=[],O=0,N="@product.name@",L="@product.version@",H="div",R="absolute",q="relative",W="hidden",B="highcharts-",Y="visible",U="px",V="none",X="M",G="L",K=/^[0-9]+$/,Z="",Q="hover",J="select",et="millisecond",tt="second",it="minute",nt="hour",at="day",st="week",rt="month",ot="year",ct="stroke-width",jt={},xt=i.Highcharts=i.Highcharts?ii(16,!0):{};z=function(e,t,i){if(!It(t)||isNaN(t))return"Invalid date";e=Lt(e,"%Y-%m-%d %H:%M:%S");var s,n=new Date(t-ut),r=n[ft](),o=n[ht](),l=n[mt](),c=n[_t](),d=n[gt](),u=T.lang,p=u.weekdays,f=$t({a:p[o].substr(0,3),A:p[o],d:Bt(l),e:l,b:u.shortMonths[c],B:u.months[c],m:Bt(c+1),y:d.toString().substr(2,2),Y:d,H:Bt(r),I:Bt(r%12||12),l:r%12||12,M:Bt(n[pt]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:Bt(n.getSeconds()),L:Bt(a(t%1e3),3)},xt.dateFormats);for(s in f)for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof f[s]?f[s](t):f[s]);return i?e.substr(0,1).toUpperCase()+e.substr(1):e},Kt.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},P=St(et,1,tt,1e3,it,6e4,nt,36e5,at,864e5,st,6048e5,rt,26784e5,ot,31556952e3),A={init:function(e,t,i){t=t||"";var r,o,l,u,p,n=e.shift,a=t.indexOf("C")>-1,s=a?7:3,c=t.split(" "),d=[].concat(i),f=function(e){for(l=e.length;l--;)e[l]===X&&e.splice(l+1,0,e[l+1],e[l+2],e[l+1],e[l+2])};if(a&&(f(c),f(d)),e.isArea&&(u=c.splice(c.length-6,6),p=d.splice(d.length-6,6)),d.length/s>=n&&c.length===d.length)for(;n--;)d=[].concat(d).splice(0,s).concat(d);if(e.shift=0,c.length)for(r=d.length;r>c.length;)o=[].concat(c).splice(c.length-s,s),a&&(o[s-6]=o[s-2],o[s-5]=o[s-1]),c=c.concat(o);return u&&(c=c.concat(u),d=d.concat(p)),[c,d]},step:function(e,t,i,n){var r,a=[],s=e.length;if(1===i)a=n;else if(s===t.length&&1>i)for(;s--;)r=parseFloat(e[s]),a[s]=isNaN(r)?e[s]:i*parseFloat(t[s]-r)+r;else a=t;return a}},function(n){i.HighchartsAdapter=i.HighchartsAdapter||n&&{init:function(t){var s,i=n.fx,a=i.step,r=n.Tween,o=r&&r.propHooks,l=n.cssHooks.opacity;n.extend(n.easing,{easeOutQuad:function(e,t,i,n,a){return-n*(t/=a)*(t-2)+i}}),n.each(["cur","_default","width","height","opacity"],function(t,n){var l,s=a;"cur"===n?s=i.prototype:"_default"===n&&r&&(s=o[n],n="set"),l=s[n],l&&(s[n]=function(i){var a;return i=t?i:this,"align"!==i.prop?(a=i.elem,a.attr?a.attr(i.prop,"cur"===n?e:i.now):l.apply(this,arguments)):void 0})}),Yt(l,"get",function(e,t,i){return t.attr?t.opacity||0:e.call(this,t,i)}),s=function(e){var n,i=e.elem;e.started||(n=t.init(i,i.d,i.toD),e.start=n[0],e.end=n[1],e.started=!0),i.attr("d",t.step(e.start,e.end,e.pos,i.toD))},r?o.d={set:s}:a.d=s,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){for(var i=0,n=e.length;n>i;i++)if(t.call(e[i],e[i],i,e)===!1)return i},n.fn.highcharts=function(){var n,a,s,t="Chart",i=arguments;return this[0]&&(Et(i[0])&&(t=i[0],i=Array.prototype.slice.call(i,1)),n=i[0],n!==e&&(n.chart=n.chart||{},n.chart.renderTo=this[0],s=new xt[t](n,i[1]),a=this),n===e&&(a=I[Ot(this[0],"data-highcharts-chart")])),a}},getScript:n.getScript,inArray:n.inArray,adapterRun:function(e,t){return n(e)[t]()},grep:n.grep,map:function(e,t){for(var i=[],n=0,a=e.length;a>n;n++)i[n]=t.call(e[n],e[n],n,e);return i},offset:function(e){return n(e).offset()},addEvent:function(e,t,i){n(e).bind(t,i)},removeEvent:function(e,i,a){var s=t.removeEventListener?"removeEventListener":"detachEvent";t[s]&&e&&!e[s]&&(e[s]=function(){}),n(e).unbind(i,a)},fireEvent:function(e,t,i,a){var o,s=n.Event(t),r="detached"+t;!_&&i&&(delete i.layerX,delete i.layerY,delete i.returnValue),$t(s,i),e[t]&&(e[r]=e[t],e[t]=null),n.each(["preventDefault","stopPropagation"],function(e,t){var i=s[t];s[t]=function(){try{i.call(s)}catch(e){"preventDefault"===t&&(o=!0)}}}),n(e).trigger(s),e[r]&&(e[t]=e[r],e[r]=null),!a||s.isDefaultPrevented()||o||a(s)},washMouseEvent:function(t){var i=t.originalEvent||t;return i.pageX===e&&(i.pageX=t.pageX,i.pageY=t.pageY),i},animate:function(t,i,a){var s=n(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),s.stop(),i.opacity!==e&&t.attr&&(i.opacity+="px"),s.animate(i,a)},stop:function(e){n(e).stop()}}}(i.jQuery);var si=i.HighchartsAdapter,ri=si||{};si&&si.init.call(si,A);var oi=ri.adapterRun,ci=(ri.getScript,ri.inArray),di=ri.each,ui=ri.grep,pi=ri.offset,fi=ri.map,hi=ri.addEvent,mi=ri.removeEvent,_i=ri.fireEvent,gi=ri.washMouseEvent,vi=ri.animate,bi=ri.stop,yi={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};T={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8085e8","#8d4653","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com@product.cdnpath@/@product.version@/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com@product.cdnpath@/@product.version@/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:Ct(yi,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":Wt(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:R,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:R,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:q,top:"1em"},style:{position:R,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:k,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:y?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var wi=T.plotOptions,ki=wi.line;ji();var Ci=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Si=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Di=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ei=function(e){function a(e){e&&e.stops?n=fi(e.stops,function(e){return Ei(e[1])}):(i=Ci.exec(e),i?t=[Dt(i[1]),Dt(i[2]),Dt(i[3]),parseFloat(i[4],10)]:(i=Si.exec(e),i?t=[Dt(i[1],16),Dt(i[2],16),Dt(i[3],16),1]:(i=Di.exec(e),i&&(t=[Dt(i[1]),Dt(i[2]),Dt(i[3]),1]))))}function s(i){var a;return n?(a=Ct(e),a.stops=[].concat(a.stops),di(n,function(e,t){a.stops[t]=[a.stops[t][0],e.get(i)]})):a=t&&!isNaN(t[0])?"rgb"===i?"rgb("+t[0]+","+t[1]+","+t[2]+")":"a"===i?t[3]:"rgba("+t.join(",")+")":e,a}function r(e){if(n)di(n,function(t){t.brighten(e)});else if(Mt(e)&&0!==e){var i;
for(i=0;3>i;i++)t[i]+=Dt(255*e),0>t[i]&&(t[i]=0),t[i]>255&&(t[i]=255)}return this}function o(e){return t[3]=e,this}var i,n,t=[];return a(e),{get:s,brighten:r,rgba:t,setOpacity:o}};Ti.prototype={init:function(e,i){var n=this;n.element="span"===i?Rt(i):t.createElementNS(w,i),n.renderer=e},opacity:1,animate:function(e,t,i){var n=Lt(t,M,!0);bi(this),n?(n=Ct(n,{}),i&&(n.complete=i),vi(this,e,n)):(this.attr(e),i&&i())},colorGradient:function(e,t,i){var a,s,r,o,l,c,d,u,p,f,h,n=this.renderer,m=[];if(e.linearGradient?s="linearGradient":e.radialGradient&&(s="radialGradient"),s){r=e[s],o=n.gradients,c=e.stops,p=i.radialReference,zt(r)&&(e[s]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&p&&!It(r.gradientUnits)&&(r=Ct(r,{cx:p[0]-p[2]/2+r.cx*p[2],cy:p[1]-p[2]/2+r.cy*p[2],r:r.r*p[2],gradientUnits:"userSpaceOnUse"}));for(f in r)"id"!==f&&m.push(f,r[f]);for(f in c)m.push(c[f]);m=m.join(","),o[m]?h=o[m].attr("id"):(r.id=h=B+D++,o[m]=l=n.createElement(s).attr(r).add(n.defs),l.stops=[],di(c,function(e){var t;0===e[1].indexOf("rgba")?(a=Ei(e[1]),d=a.get("rgb"),u=a.get("a")):(d=e[1],u=1),t=n.createElement("stop").attr({offset:e[0],"stop-color":d,"stop-opacity":u}).add(l),l.stops.push(t)})),i.setAttribute(t,"url("+n.url+"#"+h+")")}},attr:function(t,i){var n,a,r,l,s=this.element,o=this;if("string"==typeof t&&i!==e&&(n=t,t={},t[n]=i),"string"==typeof t)o=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(n in t)a=t[n],l=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(r||(this.symbolAttr(t),r=!0),l=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),l||(this[n+"Setter"]||this._defaultSetter).call(this,a,n,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,a);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return o},updateShadows:function(e,t){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(e,"height"===e?o(t-(i[n].cutHeight||0),0):"d"===e?this.d:t)},addClass:function(e){var t=this.element,i=Ot(t,"class")||"";return-1===i.indexOf(e)&&Ot(t,"class",i+" "+e),this},symbolAttr:function(e){var t=this;di(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){t[i]=Lt(e[i],t[i])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":V)},crisp:function(e){var i,r,t=this,n={},o=e.strokeWidth||t.strokeWidth||t.attr&&t.attr("stroke-width")||0;r=a(o)%2/2,e.x=s(e.x||t.x||0)+r,e.y=s(e.y||t.y||0)+r,e.width=s((e.width||t.width||0)-2*r),e.height=s((e.height||t.height||0)-2*r),e.strokeWidth=o;for(i in e)t[i]!==e[i]&&(t[i]=n[i]=e[i]);return n},css:function(e){var s,r,l,t=this,i=t.styles,n={},a=t.element,o="",c=!i;if(e&&e.color&&(e.fill=e.color),i)for(r in e)e[r]!==i[r]&&(n[r]=e[r],c=!0);if(c){if(s=t.textWidth=e&&e.width&&"text"===a.nodeName.toLowerCase()&&Dt(e.width),i&&(e=$t(i,n)),t.styles=e,s&&(x||!k&&t.renderer.forExport)&&delete e.width,_&&!k)Ht(t.element,e);else{l=function(e,t){return"-"+t.toLowerCase()};for(r in e)o+=r.replace(/([A-Z])/g,l)+":"+e[r]+";";Ot(a,"style",o)}s&&t.added&&t.renderer.buildText(t)}return t},on:function(e,t){var i=this,n=i.element;return C&&"click"===e?(n.ontouchstart=function(e){i.touchEventFired=Date.now(),e.preventDefault(),t.call(n,e)},n.onclick=function(e){(-1===h.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&t.call(n,e)}):n["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},updateTransform:function(){var l,e=this,t=e.translateX||0,i=e.translateY||0,n=e.scaleX,a=e.scaleY,s=e.inverted,r=e.rotation,o=e.element;s&&(t+=e.attr("width"),i+=e.attr("height")),l=["translate("+t+","+i+")"],s?l.push("rotate(90) scale(-1,1)"):r&&l.push("rotate("+r+" "+(o.getAttribute("x")||0)+" "+(o.getAttribute("y")||0)+")"),(It(n)||It(a))&&l.push("scale("+Lt(n,1)+" "+Lt(a,1)+")"),l.length&&o.setAttribute("transform",l.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,i){var n,s,r,o,c,l={},d=this.renderer,u=d.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,(!i||Et(i))&&(this.alignTo=c=i||"renderer",Ft(u,this),u.push(this),i=null)):(e=this.alignOptions,t=this.alignByTranslate,c=this.alignTo),i=Lt(i,d[c],d),n=e.align,s=e.verticalAlign,r=(i.x||0)+(e.x||0),o=(i.y||0)+(e.y||0),("right"===n||"center"===n)&&(r+=(i.width-(e.width||0))/{right:1,center:2}[n]),l[t?"translateX":"x"]=a(r),("bottom"===s||"middle"===s)&&(o+=(i.height-(e.height||0))/({bottom:1,middle:2}[s]||1)),l[t?"translateY":"y"]=a(o),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(){var n,a,h,e=this,t=e.bBox,i=e.renderer,s=e.rotation,r=e.element,o=e.styles,l=s*f,p=e.textStr;if((""===p||K.test(p))&&(h="num."+p.toString().length+(o?"|"+o.fontSize+"|"+o.fontFamily:"")),h&&(t=i.cache[h]),!t){if(r.namespaceURI===w||i.forExport){try{t=r.getBBox?$t({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight}}catch(m){}(!t||0>t.width)&&(t={width:0,height:0})}else t=e.htmlGetBBox();i.isSVG&&(n=t.width,a=t.height,_&&o&&"11px"===o.fontSize&&"16.9"===a.toPrecision(3)&&(t.height=a=14),s&&(t.width=c(a*u(l))+c(n*d(l)),t.height=c(a*d(l))+c(n*u(l)))),e.bBox=t,h&&(i.cache[h]=t)}return t},show:function(e){return e&&this.element.namespaceURI===w?(this.element.removeAttribute("visibility"),this):this.attr({visibility:e?"inherit":Y})},hide:function(){return this.attr({visibility:W})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.hide()}})},add:function(e){var a,o,l,c,d,t=this.renderer,i=e||t,n=i.element||t.box,s=this.element,r=this.zIndex;if(e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&t.buildText(this),r&&(i.handleZ=!0,r=Dt(r)),i.handleZ)for(a=n.childNodes,c=0;a.length>c;c++)if(o=a[c],l=Ot(o,"zIndex"),o!==s&&(Dt(l)>r||!It(r)&&It(l))){n.insertBefore(s,o),d=!0;break}return d||n.appendChild(s),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var a,s,r,e=this,t=e.element||{},i=e.shadows,n=e.renderer.isSVG&&"SPAN"===t.nodeName&&e.parentGroup;if(t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,bi(e),e.clipPath&&(e.clipPath=e.clipPath.destroy()),e.stops){for(r=0;e.stops.length>r;r++)e.stops[r]=e.stops[r].destroy();e.stops=null}for(e.safeRemoveChild(t),i&&di(i,function(t){e.safeRemoveChild(t)});n&&0===n.div.childNodes.length;)a=n.parentGroup,e.safeRemoveChild(n.div),delete n.div,n=a;e.alignTo&&Ft(e.renderer.alignedObjects,e);for(s in e)delete e[s];return null},shadow:function(e,t,i){var a,s,l,c,d,u,n=[],r=this.element;if(e){for(c=Lt(e.width,3),d=(e.opacity||.15)/c,u=this.parentInverted?"(-1,-1)":"("+Lt(e.offsetX,1)+", "+Lt(e.offsetY,1)+")",a=1;c>=a;a++)s=r.cloneNode(0),l=2*c+1-2*a,Ot(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":d*a,"stroke-width":l,transform:"translate"+u,fill:V}),i&&(Ot(s,"height",o(Ot(s,"height")-l,0)),s.cutHeight=l),t?t.element.appendChild(s):r.parentNode.insertBefore(s,r),n.push(s);this.shadows=n}return this},xGetter:function(e){return"circle"===this.element.nodeName&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){var t=Lt(this[e],this.element?this.element.getAttribute(e):null,0);return/^[0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(e,t,i){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),i.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var t;if(e=e&&e.toLowerCase()){for(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),t=e.length;t--;)e[t]=Dt(e[t])*this.element.getAttribute("stroke-width");e=e.join(","),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,i){this[t]=e,i.setAttribute(t,e)},"stroke-widthSetter":function(e,t,i){0===e&&(e=1e-5),this.strokeWidth=e,i.setAttribute(t,e)},titleSetter:function(e){var i=this.element.getElementsByTagName("title")[0];i||(i=t.createElementNS(w,"title"),this.element.appendChild(i)),i.textContent=e},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,i){"string"==typeof e?i.setAttribute(t,e):e&&this.colorGradient(e,t,i)},zIndexSetter:function(e,t,i){i.setAttribute(t,e),this[t]=e},_defaultSetter:function(e,t,i){i.setAttribute(t,e)}},Ti.prototype.yGetter=Ti.prototype.xGetter,Ti.prototype.translateXSetter=Ti.prototype.translateYSetter=Ti.prototype.rotationSetter=Ti.prototype.verticalAlignSetter=Ti.prototype.scaleXSetter=Ti.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},Ti.prototype.strokeSetter=Ti.prototype.fillSetter;var zi=function(){this.init.apply(this,arguments)};zi.prototype={Element:Ti,init:function(e,n,a,s,o){var d,u,p,l=this,c=location;d=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(s)),u=d.element,e.appendChild(u),-1===e.innerHTML.indexOf("xmlns")&&Ot(u,"xmlns",w),l.isSVG=!0,l.box=u,l.boxWrapper=d,l.alignedObjects=[],l.url=(b||v)&&t.getElementsByTagName("base").length?c.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",p=this.createElement("desc").add(),p.element.appendChild(t.createTextNode("Created with "+N+" "+L)),l.defs=this.createElement("defs").add(),l.forExport=o,l.gradients={},l.cache={},l.setSize(n,a,!1);var f,h;b&&e.getBoundingClientRect&&(l.subPixelFix=f=function(){Ht(e,{left:0,top:0}),h=e.getBoundingClientRect(),Ht(e,{left:r(h.left)-h.left+U,top:r(h.top)-h.top+U})},f(),hi(i,"resize",f))},getStyle:function(e){return this.style=$t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),ei(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&mi(i,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var o,c,d,i=e.element,n=this,a=n.forExport,s=Lt(e.textStr,"").toString(),r=-1!==s.indexOf("<"),l=i.childNodes,u=Ot(i,"x"),p=e.styles,f=e.textWidth,h=p&&p.lineHeight,m=l.length,_=function(e){return h?Dt(h):n.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:p&&p.fontSize||n.style.fontSize||12).h};m--;)i.removeChild(l[m]);return r||-1!==s.indexOf(" ")?(c=/<.*style="([^"]+)".*>/,d=/<.*href="(http[^"]+)".*>/,f&&!e.added&&this.box.appendChild(i),o=r?s.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[s],""===o[o.length-1]&&o.pop(),di(o,function(s,r){var o,l=0;s=s.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),o=s.split("|||"),di(o,function(s){if(""!==s||1===o.length){var g,h={},m=t.createElementNS(w,"tspan");if(c.test(s)&&(g=s.match(c)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),Ot(m,"style",g)),d.test(s)&&!a&&(Ot(m,"onclick",'location.href="'+s.match(d)[1]+'"'),Ht(m,{cursor:"pointer"})),s=(s.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==s&&(m.appendChild(t.createTextNode(s)),l?h.dx=0:r&&null!==u&&(h.x=u),Ot(m,h),!l&&r&&(!k&&a&&Ht(m,{display:"block"}),Ot(m,"dy",_(m),v&&m.offsetHeight)),i.appendChild(m),l++,f))for(var j,x,E,b=s.replace(/([^\^])-/g,"$1- ").split(" "),y=b.length>1&&"nowrap"!==p.whiteSpace,$=e._clipHeight,C=[],S=_(),D=1;y&&(b.length||C.length);)delete e.bBox,E=e.getBBox(),x=E.width,!k&&n.forExport&&(x=n.measureSpanWidth(m.firstChild.data,e.styles)),j=x>f,j&&1!==b.length?(m.removeChild(m.firstChild),C.unshift(b.pop())):(b=C,C=[],b.length&&(D++,$&&D*S>$?(b=["..."],e.attr("title",e.textStr)):(m=t.createElementNS(w,"tspan"),Ot(m,{dy:S,x:u}),g&&Ot(m,"style",g),i.appendChild(m),x>f&&(f=x)))),b.length&&m.appendChild(t.createTextNode(b.join(" ").replace(/- /g,"-")))}})}),void 0):(i.appendChild(t.createTextNode(s)),void 0)},button:function(e,t,i,n,a,s,r,o,l){var u,p,f,h,m,g,c=this.label(e,t,i,l,null,null,null,null,"button"),d=0,v={x1:0,y1:0,x2:0,y2:1};return a=Ct({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},a),f=a.style,delete a.style,s=Ct(a,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},s),h=s.style,delete s.style,r=Ct(a,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},r),m=r.style,delete r.style,o=Ct(a,{style:{color:"#CCC"}},o),g=o.style,delete o.style,hi(c.element,_?"mouseover":"mouseenter",function(){3!==d&&c.attr(s).css(h)}),hi(c.element,_?"mouseout":"mouseleave",function(){3!==d&&(u=[a,s,r][d],p=[f,h,m][d],c.attr(u).css(p))}),c.setState=function(e){c.state=d=e,e?2===e?c.attr(r).css(m):3===e&&c.attr(o).css(g):c.attr(a).css(f)},c.on("click",function(){3!==d&&n.call(c)}).attr(a).css($t({cursor:"default"},f))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=a(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=a(e[2])+t%2/2),e},path:function(e){var t={fill:V};return zt(e)?t.d=e:Tt(e)&&$t(t,e),this.createElement("path").attr(t)},circle:function(e,t,i){var n=Tt(e)?e:{x:e,y:t,r:i},a=this.createElement("circle");return a.xSetter=function(e){this.element.setAttribute("cx",e)},a.ySetter=function(e){this.element.setAttribute("cy",e)},a.attr(n)},arc:function(e,t,i,n,a,s){var r;return Tt(e)&&(t=e.y,i=e.r,n=e.innerR,a=e.start,s=e.end,e=e.x),r=this.symbol("arc",e||0,t||0,i||0,i||0,{innerR:n||0,start:a||0,end:s||0}),r.r=i,r},rect:function(t,i,n,a,s,r){s=Tt(t)?t.r:s;var l=this.createElement("rect"),c=Tt(t)?t:t===e?{}:{x:t,y:i,width:o(n,0),height:o(a,0)};return r!==e&&(c.strokeWidth=r,c=l.crisp(c)),s&&(c.r=s),l.rSetter=function(e){Ot(this.element,{rx:e,ry:e})},l.attr(c)},setSize:function(e,t,i){var n=this,a=n.alignedObjects,s=a.length;for(n.width=e,n.height=t,n.boxWrapper[Lt(i,!0)?"animate":"attr"]({width:e,height:t});s--;)a[s].align()},g:function(e){var t=this.createElement("g");return It(e)?t.attr({"class":B+e}):t},image:function(e,t,i,n,a){var r,s={preserveAspectRatio:V};return arguments.length>1&&$t(s,{x:t,y:i,width:n,height:a}),r=this.createElement("image").attr(s),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):r.element.setAttribute("hc-svg-href",e),r},symbol:function(e,t,i,n,s,r){var o,d,p,f,h,l=this.symbols[e],c=l&&l(a(t),a(i),n,s,r),u=/^url\((.*?)\)$/;return c?(o=this.path(c),$t(o,{symbolName:e,x:t,y:i,width:n,height:s}),r&&$t(o,r)):u.test(e)&&(h=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(a((n-t[0])/2),a((s-t[1])/2)))},p=e.match(u)[1],f=S[p],o=this.image(p).attr({x:t,y:i}),o.isImg=!0,f?h(o,f):(o.attr({width:0,height:0}),d=Rt("img",{onload:function(){h(o,S[p]=[this.width,this.height])},src:p}))),o},symbols:{circle:function(e,t,i,n){var a=.166*i;return[X,e+i/2,t,"C",e+i+a,t,e+i+a,t+n,e+i/2,t+n,"C",e-a,t+n,e-a,t,e+i/2,t,"Z"]},square:function(e,t,i,n){return[X,e,t,G,e+i,t,e+i,t+n,e,t+n,"Z"]},triangle:function(e,t,i,n){return[X,e+i/2,t,G,e+i,t+n,e,t+n,"Z"]},"triangle-down":function(e,t,i,n){return[X,e,t,G,e+i,t,e+i/2,t+n,"Z"]},diamond:function(e,t,i,n){return[X,e+i/2,t,G,e+i,t+n/2,e+i/2,t+n,e,t+n/2,"Z"]},arc:function(e,t,i,n,a){var s=a.start,r=a.r||i||n,o=a.end-.001,l=a.innerR,c=a.open,f=d(s),h=u(s),m=d(o),_=u(o),g=p>a.end-s?0:1;return[X,e+r*f,t+r*h,"A",r,r,0,g,1,e+r*m,t+r*_,c?X:G,e+l*m,t+l*_,"A",l,l,0,g,0,e+l*f,t+l*h,c?"":"Z"]},callout:function(e,t,i,n,s){var f,r=6,o=6,c=l(s&&s.r||0,i,n),d=c+o,u=s&&s.anchorX,p=s&&s.anchorY,h=a(s.strokeWidth||0)%2/2;return e+=h,t+=h,f=["M",e+c,t,"L",e+i-c,t,"C",e+i,t,e+i,t,e+i,t+c,"L",e+i,t+n-c,"C",e+i,t+n,e+i,t+n,e+i-c,t+n,"L",e+c,t+n,"C",e,t+n,e,t+n,e,t+n-c,"L",e,t+c,"C",e,t,e,t,e+c,t],u&&u>i&&p>t+d&&t+n-d>p?f.splice(13,3,"L",e+i,p-o,e+i+r,p,e+i,p+o,e+i,t+n-c):u&&0>u&&p>t+d&&t+n-d>p?f.splice(33,3,"L",e,p+o,e-r,p,e,p-o,e,t+c):p&&p>n&&u>e+d&&e+i-d>u?f.splice(23,3,"L",u+o,t+n,u,t+n+r,u-o,t+n,e+c,t+n):p&&0>p&&u>e+d&&e+i-d>u&&f.splice(3,3,"L",u-o,t,u,t-r,u+o,t,i-c,t),f}},clipRect:function(e,t,i,n){var a,s=B+D++,r=this.createElement("clipPath").attr({id:s}).add(this.defs);return a=this.rect(e,t,i,n,0).add(r),a.id=s,a.clipPath=r,a},text:function(e,t,i,n){var r,a=this,s=x||!k&&a.forExport,o={};return n&&!a.forExport?a.html(e,t,i):(o.x=Math.round(t||0),i&&(o.y=Math.round(i)),(e||0===e)&&(o.text=e),r=a.createElement("text").attr(o),s&&r.css({position:R}),n||(r.xSetter=function(e,t,i){var a,s,n=i.childNodes;for(s=1;n.length>s;s++)a=n[s],a.getAttribute("x")===i.getAttribute("x")&&a.setAttribute("x",e);i.setAttribute(t,e)}),r)},fontMetrics:function(e){e=e||this.style.fontSize,e=/px/.test(e)?Dt(e):/em/.test(e)?12*parseFloat(e):12;var t=24>e?e+4:a(1.2*e),i=a(.8*t);return{h:t,b:i}},label:function(t,i,n,s,r,o,l,c,d){function S(){var e,t,i=f.element.style;m=(void 0===b||void 0===y||p.styles.textAlign)&&f.textStr&&f.getBBox(),p.width=(b||m.width||0)+2*g+v,p.height=(y||m.height||0)+2*g,$=g+u.fontMetrics(i&&i.fontSize).b,C&&(h||(e=a(-_*g),t=c?-$:0,p.box=h=s?u.symbol(s,e,t,p.width,p.height,x):u.rect(e,t,p.width,p.height,0,x[ct]),h.attr("fill",V).add(p)),h.isImg||h.attr($t({width:a(p.width),height:a(p.height)},x)),x=null)}function D(){var a,t=p.styles,i=t&&t.textAlign,n=v+g*(1-_);a=c?0:$,It(b)&&m&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(b-m.width)),(n!==f.x||a!==f.y)&&(f.attr("x",n),a!==e&&f.attr("y",a)),f.x=n,f.y=a}function E(e,t){h?h.attr(e,t):x[e]=t}var h,m,b,y,w,k,$,C,u=this,p=u.g(d),f=u.text("",0,0,l).attr({zIndex:1}),_=0,g=3,v=0,j=0,x={};p.onAdd=function(){f.add(p),p.attr({text:t||"",x:i,y:n}),h&&It(r)&&p.attr({anchorX:r,anchorY:o})},p.widthSetter=function(e){b=e},p.heightSetter=function(e){y=e},p.paddingSetter=function(e){It(e)&&e!==g&&(g=e,D())},p.paddingLeftSetter=function(e){It(e)&&e!==v&&(v=e,D())},p.alignSetter=function(e){_={left:0,center:.5,right:1}[e]},p.textSetter=function(t){t!==e&&f.textSetter(t),S(),D()},p["stroke-widthSetter"]=function(e,t){e&&(C=!0),j=e%2/2,E(t,e)},p.strokeSetter=p.fillSetter=p.rSetter=function(e,t){"fill"===t&&e&&(C=!0),E(t,e)},p.anchorXSetter=function(e,t){r=e,E(t,e+j-w)},p.anchorYSetter=function(e,t){o=e,E(t,e-k)},p.xSetter=function(e){p.x=e,_&&(e-=_*((b||m.width)+g)),w=a(e),p.attr("translateX",w)},p.ySetter=function(e){k=p.y=a(e),p.attr("translateY",k)};var T=p.css;return $t(p,{css:function(t){if(t){var i={};t=Ct(t),di(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],function(n){t[n]!==e&&(i[n]=t[n],delete t[n])}),f.css(i)}return T.call(p,t)},getBBox:function(){return{width:m.width+2*g,height:m.height+2*g,x:m.x-g,y:m.y-g}},shadow:function(e){return h&&h.shadow(e),p},destroy:function(){mi(p.element,"mouseenter"),mi(p.element,"mouseleave"),f&&(f=f.destroy()),h&&(h=h.destroy()),Ti.prototype.destroy.call(p),p=u=S=D=E=null}})}},$=zi,Mi.prototype={addLabel:function(){var u,_,g,w,e=this,t=e.axis,i=t.options,n=t.chart,s=t.horiz,r=t.categories,l=t.names,c=e.pos,d=i.labels,p=t.tickPositions,f=s&&r&&!d.step&&!d.staggerLines&&!d.rotation&&n.plotWidth/p.length||!s&&(n.margin[3]||.33*n.chartWidth),h=c===p[0],m=c===p[p.length-1],v=r?Lt(r[c],l[c],c):c,b=e.label,y=p.info;t.isDatetimeAxis&&y&&(w=i.dateTimeLabelFormats[y.higherRanks[c]||y.unitName]),e.isFirst=h,e.isLast=m,u=t.labelFormatter.call({axis:t,chart:n,isFirst:h,isLast:m,dateTimeLabelFormat:w,value:t.isLog?ni(Pt(v)):v}),_=f&&{width:o(1,a(f-2*(d.padding||10)))+U},_=$t(_,d.style),It(b)?b&&b.attr({text:u}).css(_):(g={align:t.labelAlign},Mt(d.rotation)&&(g.rotation=d.rotation),f&&d.ellipsis&&(g._clipHeight=t.len/p.length),e.label=It(u)&&d.enabled?n.renderer.text(u,0,0,d.useHTML).attr(g).css(_).add(t.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?e.getBBox()[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.label.getBBox(),t=this.axis,i=t.horiz,n=t.options,a=n.labels,s=i?e.width:e.height,r=i?a.x-s*{left:0,center:.5,right:1}[t.labelAlign]:0,o=i?s+r:s;return[r,o]},handleOverflow:function(t,i){var h,m,_,g,w,n=!0,a=this.axis,s=this.isFirst,r=this.isLast,o=a.horiz,l=o?i.x:i.y,c=a.reversed,d=a.tickPositions,u=this.getLabelSides(),p=u[0],f=u[1],v=this.label.line||0,b=a.labelEdge,y=a.justifyLabels&&(s||r);if(b[v]===e||l+p>b[v]?b[v]=l+f:y||(n=!1),y){w=a.justifyToPlot,h=w?a.pos:0,m=w?h+a.len:a.chart.chartWidth;do t+=s?1:-1,_=a.ticks[d[t]];while(d[t]&&(!_||_.label.line!==v));g=_&&_.label.xy&&_.label.xy.x+_.getLabelSides()[s?0:1],s&&!c||r&&c?h>l+p&&(l=h-p,_&&l+f>g&&(n=!1)):l+f>m&&(l=m-f,_&&g>l+p&&(n=!1)),i.x=l}return n},getPosition:function(e,t,i,n){var a=this.axis,s=a.chart,r=n&&s.oldChartHeight||s.chartHeight;return{x:e?a.translate(t+i,null,null,n)+a.transB:a.left+a.offset+(a.opposite?(n&&s.oldChartWidth||s.chartWidth)-a.right-a.left:0),y:e?r-a.bottom+a.offset-(a.opposite?a.height:0):r-a.translate(t+i,null,null,n)-a.transB}},getLabelPosition:function(e,t,i,n,a,s,r,o){var l=this.axis,c=l.transA,u=l.reversed,p=l.staggerLines,h=l.chart.renderer.fontMetrics(a.style.fontSize).b,m=a.rotation;return e=e+a.x-(s&&n?s*c*(u?-1:1):0),t=t+a.y-(s&&!n?s*c*(u?1:-1):0),m&&2===l.side&&(t-=h-h*d(m*f)),It(a.y)||m||(t+=h-i.getBBox().height/2),p&&(i.line=r/(o||1)%p,t+=i.line*(l.labelOffset/p)),{x:e,y:t}},getMarkPath:function(e,t,i,n,a,s){return s.crispLine([X,e,t,G,e+(a?0:-i),t+(a?i:0)],n)},render:function(t,i,n){var x,C,D,a=this,s=a.axis,r=s.options,o=s.chart,l=o.renderer,c=s.horiz,d=a.type,u=a.label,p=a.pos,f=r.labels,h=a.gridLine,m=d?d+"Grid":"grid",_=d?d+"Tick":"tick",g=r[m+"LineWidth"],v=r[m+"LineColor"],b=r[m+"LineDashStyle"],y=r[_+"Length"],w=r[_+"Width"]||0,k=r[_+"Color"],j=r[_+"Position"],$=a.mark,S=f.step,E=!0,T=s.tickmarkOffset,z=a.getPosition(c,p,T,i),M=z.x,A=z.y,P=c&&M===s.pos+s.len||!c&&A===s.pos?-1:1;this.isActive=!0,g&&(x=s.getPlotLinePath(p+T,g*P,i,!0),h===e&&(D={stroke:v,"stroke-width":g},b&&(D.dashstyle=b),d||(D.zIndex=1),i&&(D.opacity=0),a.gridLine=h=g?l.path(x).attr(D).add(s.gridGroup):null),!i&&h&&x&&h[a.isNew?"attr":"animate"]({d:x,opacity:n})),w&&y&&("inside"===j&&(y=-y),s.opposite&&(y=-y),C=a.getMarkPath(M,A,y,w*P,c,l),$?$.animate({d:C,opacity:n}):a.mark=l.path(C).attr({stroke:k,"stroke-width":w,opacity:n}).add(s.axisGroup)),u&&!isNaN(M)&&(u.xy=z=a.getLabelPosition(M,A,u,c,f,T,t,S),a.isFirst&&!a.isLast&&!Lt(r.showFirstLabel,1)||a.isLast&&!a.isFirst&&!Lt(r.showLastLabel,1)?E=!1:s.isRadial||f.step||f.rotation||i||0===n||(E=a.handleOverflow(t,z)),S&&t%S&&(E=!1),E&&!isNaN(z.y)?(z.opacity=n,u[a.isNew?"attr":"animate"](z),a.isNew=!1):u.attr("y",-9999))},destroy:function(){ei(this,this.axis)}},Ai.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:yi,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Wt(this.total,-1)},style:yi.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:20},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,i){var n=i.isX,a=this;a.horiz=t.inverted?!n:n,a.isXAxis=n,a.coll=n?"xAxis":"yAxis",a.opposite=i.opposite,a.side=i.side||(a.horiz?a.opposite?0:2:a.opposite?1:3),a.setOptions(i);var s=this.options,r=s.type,o="datetime"===r;a.labelFormatter=s.labels.formatter||a.defaultLabelFormatter,a.userOptions=i,a.minPixelPadding=0,a.chart=t,a.reversed=s.reversed,a.zoomEnabled=s.zoomEnabled!==!1,a.categories=s.categories||"category"===r,a.names=[],a.isLog="logarithmic"===r,a.isDatetimeAxis=o,a.isLinked=It(s.linkedTo),a.tickmarkOffset=a.categories&&"between"===s.tickmarkPlacement?.5:0,a.ticks={},a.labelEdge=[],a.minorTicks={},a.plotLinesAndBands=[],a.alternateBands={},a.len=0,a.minRange=a.userMinRange=s.minRange||s.maxZoom,a.range=s.range,a.offset=s.offset||0,a.stacks={},a.oldStacks={},a.max=null,a.min=null,a.crosshair=Lt(s.crosshair,Nt(t.options.tooltip.crosshairs)[n?0:1],!1);var l,c=a.options.events;-1===ci(a,t.axes)&&(n&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,a):t.axes.push(a),t[a.coll].push(a)),a.series=a.series||[],t.inverted&&n&&a.reversed===e&&(a.reversed=!0),a.removePlotBand=a.removePlotBandOrLine,a.removePlotLine=a.removePlotBandOrLine;for(l in c)hi(a,l,c[l]);a.isLog&&(a.val2lin=At,a.lin2val=Pt)},setOptions:function(e){this.options=Ct(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],Ct(T[this.coll],e))},defaultLabelFormatter:function(){var o,l,t=this.axis,i=this.value,n=t.categories,a=this.dateTimeLabelFormat,s=T.lang.numericSymbols,r=s&&s.length,d=t.options.labels.format,u=t.isLog?i:t.tickInterval;if(d)l=Vt(d,this);else if(n)l=i;else if(a)l=z(a,i);else if(r&&u>=1e3)for(;r--&&l===e;)o=Math.pow(1e3,r+1),u>=o&&null!==s[r]&&(l=Wt(i/o,-1)+s[r]);return l===e&&(l=c(i)>=1e4?Wt(i,0):Wt(i,-1,e,"")),l},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=null,e.buildStacks&&e.buildStacks(),di(e.series,function(i){if(i.visible||!t.options.chart.ignoreHiddenSeries){var a,r,c,n=i.options,s=n.threshold;e.hasVisibleSeries=!0,e.isLog&&0>=s&&(s=null),e.isXAxis?(a=i.xData,a.length&&(e.dataMin=l(Lt(e.dataMin,a[0]),Qt(a)),e.dataMax=o(Lt(e.dataMax,a[0]),Jt(a)))):(i.getExtremes(),c=i.dataMax,r=i.dataMin,It(r)&&It(c)&&(e.dataMin=l(Lt(e.dataMin,r),r),e.dataMax=o(Lt(e.dataMax,c),c)),It(s)&&(e.dataMin>=s?(e.dataMin=s,e.ignoreMinPadding=!0):s>e.dataMax&&(e.dataMax=s,e.ignoreMaxPadding=!0)))}})},translate:function(e,t,i,n,a,s){var u,r=this,o=1,l=0,c=n?r.oldTransA:r.transA,d=n?r.oldMin:r.min,p=r.minPixelPadding,f=(r.options.ordinal||r.isLog&&a)&&r.lin2val;return c||(c=r.transA),i&&(o*=-1,l=r.len),r.reversed&&(o*=-1,l-=o*(r.sector||r.len)),t?(e=e*o+l,e-=p,u=e/c+d,f&&(u=r.lin2val(u))):(f&&(e=r.val2lin(e)),"between"===s&&(s=.5),u=o*(e-d)*c+l+o*p+(Mt(s)?c*s*r.pointRange:0)),u},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,i,n,s){var d,u,p,f,_,r=this,o=r.chart,l=r.left,c=r.top,h=i&&o.oldChartHeight||o.chartHeight,m=i&&o.oldChartWidth||o.chartWidth,g=r.transB;return s=Lt(s,r.translate(e,null,null,i)),d=p=a(s+g),u=f=a(h-s-g),isNaN(s)?_=!0:r.horiz?(u=c,f=h-r.bottom,(l>d||d>l+r.width)&&(_=!0)):(d=l,p=m-r.right,(c>u||u>c+r.height)&&(_=!0)),_&&!n?null:o.renderer.crispLine([X,d,u,G,p,f],t||1)},getLinearTickPositions:function(e,t,i){var n,a,o=ni(s(t/e)*e),l=ni(r(i/e)*e),c=[];if(t===i&&Mt(t))return[t];for(n=o;l>=n&&(c.push(n),n=ni(n+e),n!==a);)a=n;return c},getMinorTickPositions:function(){var s,r,o,e=this,t=e.options,i=e.tickPositions,n=e.minorTickInterval,a=[];if(e.isLog)for(o=i.length,r=1;o>r;r++)a=a.concat(e.getLogTickPositions(n,i[r-1],i[r],!0));else if(e.isDatetimeAxis&&"auto"===t.minorTickInterval)a=a.concat(e.getTimeTicks(e.normalizeTimeTickInterval(n),e.min,e.max,t.startOfWeek)),e.min>a[0]&&a.shift();else for(s=e.min+(i[0]-e.min)%n;e.max>=s;s+=n)a.push(s);return a},adjustForMinRange:function(){var s,o,c,d,u,p,f,h,t=this,i=t.options,n=t.min,a=t.max,r=t.dataMax-t.dataMin>=t.minRange;if(t.isXAxis&&t.minRange===e&&!t.isLog&&(It(i.min)||It(i.max)?t.minRange=null:(di(t.series,function(t){for(u=t.xData,p=t.xIncrement?1:u.length-1,c=p;c>0;c--)d=u[c]-u[c-1],(o===e||o>d)&&(o=d)}),t.minRange=l(5*o,t.dataMax-t.dataMin))),t.minRange>a-n){var m=t.minRange;s=(m-a+n)/2,f=[n-s,Lt(i.min,n-s)],r&&(f[2]=t.dataMin),n=Jt(f),h=[n+m,Lt(i.max,n+m)],r&&(h[2]=t.dataMax),a=Qt(h),m>a-n&&(f[0]=a-m,f[1]=Lt(i.min,a-m),n=Jt(f))}t.min=n,t.max=a},setAxisTranslation:function(e){var a,d,t=this,i=t.max-t.min,n=t.axisPointRange||0,s=0,r=0,c=t.linkedParent,u=!!t.categories,p=t.transA;(t.isXAxis||u||n)&&(c?(s=c.minPointOffset,r=c.pointRangePadding):di(t.series,function(e){var c=u?1:t.isXAxis?e.pointRange:t.axisPointRange||0,d=e.options.pointPlacement,p=e.closestPointRange;c>i&&(c=0),n=o(n,c),s=o(s,Et(d)?0:c/2),r=o(r,"on"===d?0:c),!e.noSharedTooltip&&It(p)&&(a=It(a)?l(a,p):p)}),d=t.ordinalSlope&&a?t.ordinalSlope/a:1,t.minPointOffset=s*=d,t.pointRangePadding=r*=d,t.pointRange=l(n,i),t.closestPointRange=a),e&&(t.oldTransA=p),t.translationSlope=t.transA=p=t.len/(i+r||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=p*s},setTickPositions:function(e){var h,m,b,y,t=this,i=t.chart,n=t.options,a=t.isLog,s=t.isDatetimeAxis,r=t.isXAxis,d=t.isLinked,u=t.options.tickPositioner,p=n.maxPadding,f=n.minPadding,_=n.tickInterval,g=n.minTickInterval,v=n.tickPixelInterval,w=t.categories;if(d?(t.linkedParent=i[t.coll][n.linkedTo],m=t.linkedParent.getExtremes(),t.min=Lt(m.min,m.dataMin),t.max=Lt(m.max,m.dataMax),n.type!==t.linkedParent.options.type&&ii(11,1)):(t.min=Lt(t.userMin,n.min,t.dataMin),t.max=Lt(t.userMax,n.max,t.dataMax)),a&&(!e&&0>=l(t.min,Lt(t.dataMin,t.min))&&ii(10,1),t.min=ni(At(t.min)),t.max=ni(At(t.max))),t.range&&It(t.max)&&(t.userMin=t.min=o(t.min,t.max-t.range),t.userMax=t.max,t.range=null),t.beforePadding&&t.beforePadding(),t.adjustForMinRange(),w||t.axisPointRange||t.usePercentage||d||!It(t.min)||!It(t.max)||(h=t.max-t.min,h&&(It(n.min)||It(t.userMin)||!f||!(0>t.dataMin)&&t.ignoreMinPadding||(t.min-=h*f),It(n.max)||It(t.userMax)||!p||!(t.dataMax>0)&&t.ignoreMaxPadding||(t.max+=h*p))),Mt(n.floor)&&(t.min=o(t.min,n.floor)),Mt(n.ceiling)&&(t.max=l(t.max,n.ceiling)),t.min===t.max||void 0===t.min||void 0===t.max?t.tickInterval=1:d&&!_&&v===t.linkedParent.options.tickPixelInterval?t.tickInterval=t.linkedParent.tickInterval:(t.tickInterval=Lt(_,w?1:(t.max-t.min)*v/o(t.len,v)),!It(_)&&v>t.len&&!this.isRadial&&!this.isLog&&!w&&n.startOnTick&&n.endOnTick&&(y=!0,t.tickInterval/=4)),r&&!e&&di(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(!0),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),t.pointRange&&(t.tickInterval=o(t.pointRange,t.tickInterval)),!_&&g>t.tickInterval&&(t.tickInterval=g),s||a||_||(t.tickInterval=Gt(t.tickInterval,null,Xt(t.tickInterval),n)),t.minorTickInterval="auto"===n.minorTickInterval&&t.tickInterval?t.tickInterval/5:n.minorTickInterval,t.tickPositions=b=n.tickPositions?[].concat(n.tickPositions):u&&u.apply(t,[t.min,t.max]),b||(!t.ordinalPositions&&(t.max-t.min)/t.tickInterval>o(2*t.len,200)&&ii(19,!0),b=s?t.getTimeTicks(t.normalizeTimeTickInterval(t.tickInterval,n.units),t.min,t.max,n.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):a?t.getLogTickPositions(t.tickInterval,t.min,t.max):t.getLinearTickPositions(t.tickInterval,t.min,t.max),y&&b.splice(1,b.length-2),t.tickPositions=b),!d){var $,k=b[0],j=b[b.length-1],x=t.minPointOffset||0;
n.startOnTick?t.min=k:t.min-x>k&&b.shift(),n.endOnTick?t.max=j:j>t.max+x&&b.pop(),1===b.length&&($=c(t.max)>1e13?1:.001,t.min-=$,t.max+=$)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(t[n]||0)&&this.options.alignTicks!==!1&&(t[n]=i.length),e.maxTicks=t},adjustTickAmount:function(){var t=this,i=t.chart,n=t._maxTicksKey,a=t.tickPositions,s=i.maxTicks;if(s&&s[n]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&t.options.alignTicks!==!1&&this.min!==e){var l,r=t.tickAmount,o=a.length;if(t.tickAmount=l=s[n],l>o){for(;l>a.length;)a.push(ni(a[a.length-1]+t.tickInterval));t.transA*=(o-1)/(l-1),t.max=a[a.length-1]}It(r)&&l!==r&&(t.isDirty=!0)}},setScale:function(){var i,n,a,s,e=this,t=e.stacks;if(e.oldMin=e.min,e.oldMax=e.max,e.oldAxisLength=e.len,e.setAxisSize(),s=e.len!==e.oldAxisLength,di(e.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(a=!0)}),s||a||e.isLinked||e.forceRedraw||e.userMin!==e.oldUserMin||e.userMax!==e.oldUserMax){if(!e.isXAxis)for(i in t)for(n in t[i])t[i][n].total=null,t[i][n].cum=0;e.forceRedraw=!1,e.getSeriesExtremes(),e.setTickPositions(),e.oldUserMin=e.userMin,e.oldUserMax=e.userMax,e.isDirty||(e.isDirty=s||e.min!==e.oldMin||e.max!==e.oldMax)}else if(!e.isXAxis){e.oldStacks&&(t=e.stacks=e.oldStacks);for(i in t)for(n in t[i])t[i][n].cum=t[i][n].total}e.setMaxTicks()},setExtremes:function(e,t,i,n,a){var s=this,r=s.chart;i=Lt(i,!0),a=$t(a,{min:e,max:t}),_i(s,"setExtremes",a,function(){s.userMin=e,s.userMax=t,s.eventArgs=a,s.isDirtyExtremes=!0,i&&r.redraw(n)})},zoom:function(t,i){var n=this.dataMin,a=this.dataMax,s=this.options;return this.allowZoomOutside||(It(n)&&l(n,Lt(s.min,n))>=t&&(t=e),It(a)&&i>=o(a,Lt(s.max,a))&&(i=e)),this.displayBtn=t!==e||i!==e,this.setExtremes(t,i,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,i=t.offsetLeft||0,n=t.offsetRight||0,a=this.horiz,s=Lt(t.width,e.plotWidth-i+n),r=Lt(t.height,e.plotHeight),l=Lt(t.top,e.plotTop),c=Lt(t.left,e.plotLeft+i),d=/%$/;d.test(r)&&(r=parseInt(r,10)/100*e.plotHeight),d.test(l)&&(l=parseInt(l,10)/100*e.plotHeight+e.plotTop),this.left=c,this.top=l,this.width=s,this.height=r,this.bottom=e.chartHeight-r-l,this.right=e.chartWidth-s-c,this.len=o(a?s:r,0),this.pos=a?c:l},getExtremes:function(){var e=this,t=e.isLog;return{min:t?ni(Pt(e.min)):e.min,max:t?ni(Pt(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,i=t.isLog,n=i?Pt(t.min):t.min,a=i?Pt(t.max):t.max;return n>e||null===e?e=n:e>a&&(e=a),t.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t,i=(Lt(e,0)-90*this.side+720)%360;return t=i>15&&165>i?"right":i>195&&345>i?"left":"center"},getOffset:function(){var p,f,m,j,x,S,D,E,T,z,M,A,P,t=this,i=t.chart,n=i.renderer,a=t.options,r=t.tickPositions,l=t.ticks,c=t.horiz,d=t.side,u=i.inverted?[1,0,3,2][d]:d,h=0,_=0,g=a.title,v=a.labels,b=0,y=i.axisOffset,w=i.clipOffset,k=[-1,1,1,-1][d],$=1,C=Lt(v.maxStaggerLines,5),F=2===d?n.fontMetrics(v.style.fontSize).b:0;if(t.hasData=p=t.hasVisibleSeries||It(t.min)&&It(t.max)&&!!r,t.showAxis=f=p||Lt(a.showEmpty,!0),t.staggerLines=t.horiz&&v.staggerLines,t.axisGroup||(t.gridGroup=n.g("grid").attr({zIndex:a.gridZIndex||1}).add(),t.axisGroup=n.g("axis").attr({zIndex:a.zIndex||2}).add(),t.labelGroup=n.g("axis-labels").attr({zIndex:v.zIndex||7}).addClass(B+t.coll.toLowerCase()+"-labels").add()),p||t.isLinked){if(t.labelAlign=Lt(v.align||t.autoLabelAlign(v.rotation)),di(r,function(e){l[e]?l[e].addLabel():l[e]=new Mi(t,e)}),t.horiz&&!t.staggerLines&&C&&!v.rotation){for(S=t.reversed?[].concat(r).reverse():r;C>$;){for(D=[],E=!1,x=0;S.length>x;x++)T=S[x],z=l[T].label&&l[T].label.getBBox(),A=z?z.width:0,P=x%$,A&&(M=t.translate(T),D[P]!==e&&D[P]>M&&(E=!0),D[P]=M+A);if(!E)break;$++}$>1&&(t.staggerLines=$)}di(r,function(e){(0===d||2===d||{1:"left",3:"right"}[d]===t.labelAlign)&&(b=o(l[e].getLabelSize(),b))}),t.staggerLines&&(b*=t.staggerLines,t.labelOffset=b)}else for(j in l)l[j].destroy(),delete l[j];g&&g.text&&g.enabled!==!1&&(t.axisTitle||(t.axisTitle=n.text(g.text,0,0,g.useHTML).attr({zIndex:7,rotation:g.rotation||0,align:g.textAlign||{low:"left",middle:"center",high:"right"}[g.align]}).addClass(B+this.coll.toLowerCase()+"-title").css(g.style).add(t.axisGroup),t.axisTitle.isNew=!0),f&&(h=t.axisTitle.getBBox()[c?"height":"width"],_=Lt(g.margin,c?5:10),m=g.offset),t.axisTitle[f?"show":"hide"]()),t.offset=k*Lt(a.offset,y[d]),t.axisTitleMargin=Lt(m,b+_+(b&&k*a.labels[c?"y":"x"]-F)),y[d]=o(y[d],t.axisTitleMargin+h+k*t.offset),w[u]=o(w[u],2*s(a.lineWidth/2))},getLinePath:function(e){var t=this.chart,i=this.opposite,n=this.offset,a=this.horiz,s=this.left+(i?this.width:0)+n,r=t.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(e*=-1),t.renderer.crispLine([X,a?this.left:s,a?r:this.top,G,a?t.chartWidth-this.right:s,a?r:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,i=this.top,n=this.len,a=this.options.title,s=e?t:i,r=this.opposite,o=this.offset,l=Dt(a.style.fontSize||12),c={low:s+(e?0:n),middle:s+n/2,high:s+(e?n:0)}[a.align],d=(e?i+this.height:t)+(e?1:-1)*(r?-1:1)*this.axisTitleMargin+(2===this.side?l:0);return{x:e?c:d+(r?this.width:0)+o+(a.x||0),y:e?d-(r?this.height:0)+o:c+(a.y||0)}},render:function(){var d,b,x,S,t=this,i=t.horiz,n=t.reversed,a=t.chart,s=a.renderer,r=t.options,o=t.isLog,l=t.isLinked,c=t.tickPositions,u=t.axisTitle,p=t.ticks,f=t.minorTicks,h=t.alternateBands,m=r.stackLabels,_=r.alternateGridColor,g=t.tickmarkOffset,v=r.lineWidth,y=a.hasRendered,w=y&&It(t.oldMin)&&!isNaN(t.oldMin),k=t.hasData,j=t.showAxis,$=r.labels.overflow,C=t.justifyLabels=i&&$!==!1;t.labelEdge.length=0,t.justifyToPlot="justify"===$,di([p,f,h],function(e){var t;for(t in e)e[t].isActive=!1}),(k||l)&&(t.minorTickInterval&&!t.categories&&di(t.getMinorTickPositions(),function(e){f[e]||(f[e]=new Mi(t,e,"minor")),w&&f[e].isNew&&f[e].render(null,!0),f[e].render(null,!1,1)}),c.length&&(d=c.slice(),(i&&n||!i&&!n)&&d.reverse(),C&&(d=d.slice(1).concat([d[0]])),di(d,function(e,i){C&&(i=i===d.length-1?0:i+1),(!l||e>=t.min&&t.max>=e)&&(p[e]||(p[e]=new Mi(t,e)),w&&p[e].isNew&&p[e].render(i,!0,.1),p[e].render(i,!1,1))}),g&&0===t.min&&(p[-1]||(p[-1]=new Mi(t,-1,null,!0)),p[-1].render(-1))),_&&di(c,function(i,n){0===n%2&&t.max>i&&(h[i]||(h[i]=new xt.PlotLineOrBand(t)),x=i+g,S=c[n+1]!==e?c[n+1]+g:t.max,h[i].options={from:o?Pt(x):x,to:o?Pt(S):S,color:_},h[i].render(),h[i].isActive=!0)}),t._addedPlotLB||(di((r.plotLines||[]).concat(r.plotBands||[]),function(e){t.addPlotBandOrLine(e)}),t._addedPlotLB=!0)),di([p,f,h],function(e){var t,i,n=[],s=M?M.duration||500:0,r=function(){for(i=n.length;i--;)e[n[i]]&&!e[n[i]].isActive&&(e[n[i]].destroy(),delete e[n[i]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,n.push(t));e!==h&&a.hasRendered&&s?s&&setTimeout(r,s):r()}),v&&(b=t.getLinePath(v),t.axisLine?t.axisLine.animate({d:b}):t.axisLine=s.path(b).attr({stroke:r.lineColor,"stroke-width":v,zIndex:7}).add(t.axisGroup),t.axisLine[j?"show":"hide"]()),u&&j&&(u[u.isNew?"attr":"animate"](t.getTitlePosition()),u.isNew=!1),m&&m.enabled&&t.renderStackTotals(),t.isDirty=!1},redraw:function(){var e=this,t=e.chart,i=t.pointer;i&&i.reset(!0),e.render(),di(e.plotLinesAndBands,function(e){e.render()}),di(e.series,function(e){e.isDirty=!0})},destroy:function(e){var n,s,t=this,i=t.stacks,a=t.plotLinesAndBands;e||mi(t);for(n in i)ei(i[n]),i[n]=null;for(di([t.ticks,t.minorTicks,t.alternateBands],function(e){ei(e)}),s=a.length;s--;)a[s].destroy();di(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){if(this.crosshair){if((It(t)||!Lt(this.crosshair.snap,!0))===!1)return this.hideCrosshair(),void 0;var i,s,n=this.crosshair,a=n.animation;if(Lt(n.snap,!0)?It(t)&&(s=this.chart.inverted!=this.horiz?t.plotX:this.len-t.plotY):s=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:Lt(t.stackY,t.y)):this.getPlotLinePath(null,null,null,null,s),null===i)return this.hideCrosshair(),void 0;if(this.cross)this.cross.attr({visibility:Y})[a?"animate":"attr"]({d:i},a);else{var r={"stroke-width":n.width||1,stroke:n.color||"#C0C0C0",zIndex:n.zIndex||2};n.dashStyle&&(r.dashstyle=n.dashStyle),this.cross=this.chart.renderer.path(i).attr(r).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},$t(Ai.prototype,lt);var Pi=xt.Tooltip=function(){this.init.apply(this,arguments)};Pi.prototype={init:function(e,t){var i=t.borderWidth,n=t.style,a=Dt(n.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:a,fill:t.backgroundColor,"stroke-width":i,r:t.borderRadius,zIndex:8}).css(n).css({padding:0}).add().attr({y:-9999}),x||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,i,n,a){var s=this,r=s.now,o=s.options.animation!==!1&&!s.isHidden,l=s.followPointer||s.len>1;$t(r,{x:o?(2*r.x+t)/3:t,y:o?(r.y+i)/2:i,anchorX:l?e:o?(2*r.anchorX+n)/3:n,anchorY:l?e:o?(r.anchorY+a)/2:a}),s.label.attr(r),o&&(c(t-r.x)>1||c(i-r.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(t,i,n,a)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},Lt(this.options.hideDelay,500)),t&&di(t,function(e){e.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,i){var n,d,s=this.chart,r=s.inverted,o=s.plotTop,l=0,c=0;return t=Nt(t),n=t[0].tooltipPos,this.followPointer&&i&&(i.chartX===e&&(i=s.pointer.normalize(i)),n=[i.chartX-s.plotLeft,i.chartY-o]),n||(di(t,function(e){d=e.series.yAxis,l+=e.plotX,c+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!r&&d?d.top-o:0)}),l/=t.length,c/=t.length,n=[r?s.plotWidth-c:l,this.shared&&!r&&t.length>1&&i?i.chartY-o:r?s.plotHeight-l:c]),fi(n,a)},getPosition:function(e,t,i){var r,n=this.chart,a=this.distance,s={},o=["y",n.chartHeight,t,i.plotY+n.plotTop],l=["x",n.chartWidth,e,i.plotX+n.plotLeft],c=i.ttBelow||n.inverted&&!i.negative||!n.inverted&&i.negative,d=function(e,t,i,n){var r=n-a>i,o=t>n+a+i,l=n-a-i,d=n+a;if(c&&o)s[e]=d;else if(!c&&r)s[e]=l;else if(r)s[e]=l;else{if(!o)return!1;s[e]=d}},u=function(e,t,i,n){return a>n||n>t-a?!1:(s[e]=i/2>n?1:n>t-i/2?t-i-2:n-i/2,void 0)},p=function(e){var t=o;o=l,l=t,r=e},f=function(){d.apply(0,o)!==!1?u.apply(0,l)!==!1||r||(p(!0),f()):r?s.x=s.y=0:(p(!0),f())};return(n.inverted||this.len>1)&&p(),f(),s},defaultFormatter:function(e){var n,t=this.points||Nt(this),i=t[0].series;return n=[e.tooltipHeaderFormatter(t[0])],di(t,function(e){i=e.series,n.push(i.tooltipFormatter&&i.tooltipFormatter(e)||e.point.tooltipFormatter(i.tooltipOptions.pointFormat))}),n.push(e.options.footerFormat||""),n.join("")},refresh:function(e,t){var r,o,l,d,h,_,i=this,n=i.chart,a=i.label,s=i.options,c={},u=[],p=s.formatter||i.defaultFormatter,f=n.hoverPoints,m=i.shared;clearTimeout(this.hideTimer),i.followPointer=Nt(e)[0].series.tooltipOptions.followPointer,l=i.getAnchor(e,t),r=l[0],o=l[1],!m||e.series&&e.series.noSharedTooltip?c=e.getLabelConfig():(n.hoverPoints=e,f&&di(f,function(e){e.setState()}),di(e,function(e){e.setState(Q),u.push(e.getLabelConfig())}),c={x:e[0].category,y:e[0].y},c.points=u,this.len=u.length,e=e[0]),d=p.call(c,i),_=e.series,this.distance=Lt(_.tooltipOptions.distance,16),d===!1?this.hide():(i.isHidden&&(bi(a),a.attr("opacity",1).show()),a.attr({text:d}),h=s.borderColor||e.color||_.color||"#606060",a.attr({stroke:h}),i.updatePosition({plotX:r,plotY:o,negative:e.negative,ttBelow:e.ttBelow}),this.isHidden=!1),_i(n,"tooltipRefresh",{text:d,x:r+n.plotLeft,y:o+n.plotTop,borderColor:h})},updatePosition:function(e){var t=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,e);this.move(a(n.x),a(n.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)},tooltipHeaderFormatter:function(e){var c,t=e.series,i=t.tooltipOptions,n=i.dateTimeLabelFormats,a=i.xDateFormat,s=t.xAxis,r=s&&"datetime"===s.options.type&&Mt(e.key),o=i.headerFormat,l=s&&s.closestPointRange;if(r&&!a){if(l){for(c in P)if(P[c]>=l||P[at]>=P[c]&&e.key%P[c]>0){a=n[c];break}}else a=n.day;a=a||n.year}return r&&a&&(o=o.replace("{point.key}","{point.key:"+a+"}")),Vt(o,{point:e,series:t})}};var Fi;C=t.documentElement.ontouchstart!==e;var Ii=xt.Pointer=function(e,t){this.init(e,t)};if(Ii.prototype={init:function(e,t){var r,o,i=t.chart,n=i.events,a=x?"":i.zoomType,s=e.inverted;this.options=t,this.chart=e,this.zoomX=r=/x/.test(a),this.zoomY=o=/y/.test(a),this.zoomHor=r&&!s||o&&s,this.zoomVert=o&&!s||r&&s,this.hasZoom=r||o,this.runChartClick=n&&!!n.click,this.pinchDown=[],this.lastValidTouch={},xt.Tooltip&&t.tooltip.enabled&&(e.tooltip=new Pi(e,t.tooltip),this.followTouchMove=t.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(t,i){var n,s,r;return t=t||window.event,t=gi(t),t.target||(t.target=t.srcElement),r=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,i||(this.chartPosition=i=pi(this.chart.container)),r.pageX===e?(n=o(t.x,t.clientX-i.left),s=t.y):(n=r.pageX-i.left,s=r.pageY-i.top),$t(t,{chartX:a(n),chartY:a(s)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return di(this.chart.axes,function(i){t[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(e[i.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var r,o,d,f,h,g,i=this,n=i.chart,a=n.series,s=n.tooltip,u=n.hoverPoint,p=n.hoverSeries,m=n.chartWidth,_=i.getIndex(e);if(s&&i.options.tooltip.shared&&(!p||!p.noSharedTooltip)){for(d=[],f=a.length,h=0;f>h;h++)a[h].visible&&a[h].options.enableMouseTracking!==!1&&!a[h].noSharedTooltip&&a[h].singularTooltips!==!0&&a[h].tooltipPoints.length&&(o=a[h].tooltipPoints[_],o&&o.series&&(o._dist=c(_-o.clientX),m=l(m,o._dist),d.push(o)));for(f=d.length;f--;)d[f]._dist>m&&d.splice(f,1);d.length&&d[0].clientX!==i.hoverX&&(s.refresh(d,e),i.hoverX=d[0].clientX)}r=p&&p.tooltipOptions.followPointer,p&&p.tracker&&!r?(o=p.tooltipPoints[_],o&&o!==u&&o.onMouseOver(e)):s&&r&&!s.isHidden&&(g=s.getAnchor([{}],e),s.updatePosition({plotX:g[0],plotY:g[1]})),s&&!i._onDocumentMouseMove&&(i._onDocumentMouseMove=function(e){I[Fi]&&I[Fi].pointer.onDocumentMouseMove(e)},hi(t,"mousemove",i._onDocumentMouseMove)),di(n.axes,function(t){t.drawCrosshair(e,Lt(o,u))})},reset:function(i){var n=this,a=n.chart,s=a.hoverSeries,r=a.hoverPoint,o=a.tooltip,l=o&&o.shared?a.hoverPoints:r;i=i&&o&&l,i&&Nt(l)[0].plotX===e&&(i=!1),i?(o.refresh(l),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),s&&s.onMouseOut(),o&&o.hide(),n._onDocumentMouseMove&&(mi(t,"mousemove",n._onDocumentMouseMove),n._onDocumentMouseMove=null),di(a.axes,function(e){e.hideCrosshair()}),n.hoverX=null)},scaleGroups:function(e,t){var n,i=this.chart;di(i.series,function(a){n=e||a.getPlotBox(),a.xAxis&&a.xAxis.zoomEnabled&&(a.group.attr(n),a.markerGroup&&(a.markerGroup.attr(n),a.markerGroup.clip(t?i.clipRect:null)),a.dataLabelsGroup&&a.dataLabelsGroup.attr(n))}),i.clipRect.attr(t||i.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var p,f,t=this.chart,i=t.options.chart,n=e.chartX,a=e.chartY,s=this.zoomHor,r=this.zoomVert,o=t.plotLeft,l=t.plotTop,d=t.plotWidth,u=t.plotHeight,h=this.mouseDownX,m=this.mouseDownY;o>n?n=o:n>o+d&&(n=o+d),l>a?a=l:a>l+u&&(a=l+u),this.hasDragged=Math.sqrt(Math.pow(h-n,2)+Math.pow(m-a,2)),this.hasDragged>10&&(p=t.isInsidePlot(h-o,m-l),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&p&&(this.selectionMarker||(this.selectionMarker=t.renderer.rect(o,l,s?1:d,r?1:u,0).attr({fill:i.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&s&&(f=n-h,this.selectionMarker.attr({width:c(f),x:(f>0?0:f)+h})),this.selectionMarker&&r&&(f=a-m,this.selectionMarker.attr({height:c(f),y:(f>0?0:f)+m})),p&&!this.selectionMarker&&i.panning&&t.pan(e,i.panning))},drop:function(e){var t=this.chart,i=this.hasPinched;if(this.selectionMarker){var u,n={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},a=this.selectionMarker,s=a.attr?a.attr("x"):a.x,r=a.attr?a.attr("y"):a.y,c=a.attr?a.attr("width"):a.width,d=a.attr?a.attr("height"):a.height;(this.hasDragged||i)&&(di(t.axes,function(e){if(e.zoomEnabled){var t=e.horiz,i=e.toValue(t?s:r),a=e.toValue(t?s+c:r+d);isNaN(i)||isNaN(a)||(n[e.coll].push({axis:e,min:l(i,a),max:o(i,a)}),u=!0)}}),u&&_i(t,"selection",n,function(e){t.zoom($t(e,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}t&&(Ht(t.container,{cursor:t._cursor}),t.cancelClick=this.hasDragged>10,t.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){I[Fi]&&I[Fi].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,i=this.chartPosition,n=t.hoverSeries;e=this.normalize(e,i),i&&n&&!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){var e=I[Fi];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;Fi=t.index,e=this.normalize(e),"mousedown"===t.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||t.openMenu||this.runPointActions(e)},inClass:function(e,t){for(var i;e;){if(i=Ot(e,"class")){if(-1!==i.indexOf(t))return!0;if(-1!==i.indexOf(B+"container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,i=e.relatedTarget||e.toElement,n=i&&i.point&&i.point.series;!t||t.options.stickyTracking||this.inClass(i,B+"tooltip")||n===t||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,i=t.hoverPoint,n=t.plotLeft,a=t.plotTop;e=this.normalize(e),e.cancelBubble=!0,t.cancelClick||(i&&this.inClass(e.target,B+"tracker")?(_i(i.series,"click",$t(e,{point:i})),t.hoverPoint&&i.firePointEvent("click",e)):($t(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-n,e.chartY-a)&&_i(t,"click",e)))},setDOMEvents:function(){var e=this,i=e.chart.container;i.onmousedown=function(t){e.onContainerMouseDown(t)},i.onmousemove=function(t){e.onContainerMouseMove(t)},i.onclick=function(t){e.onContainerClick(t)},hi(i,"mouseleave",e.onContainerMouseLeave),1===O&&hi(t,"mouseup",e.onDocumentMouseUp),C&&(i.ontouchstart=function(t){e.onContainerTouchStart(t)},i.ontouchmove=function(t){e.onContainerTouchMove(t)},1===O&&hi(t,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;mi(this.chart.container,"mouseleave",this.onContainerMouseLeave),O||(mi(t,"mouseup",this.onDocumentMouseUp),mi(t,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},$t(xt.Pointer.prototype,{pinchTranslate:function(e,t,i,n,a,s){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,i,n,a,s),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,i,n,a,s)},pinchTranslateDirection:function(e,t,i,n,a,s,r,o){var m,_,g,C,S,D,l=this.chart,d=e?"x":"y",u=e?"X":"Y",p="chart"+u,f=e?"width":"height",h=l["plot"+(e?"Left":"Top")],v=o||1,b=l.inverted,y=l.bounds[e?"h":"v"],w=1===t.length,k=t[0][p],j=i[0][p],x=!w&&t[1][p],$=!w&&i[1][p],E=function(){!w&&c(k-x)>20&&(v=o||c(j-$)/c(k-x)),g=(h-j)/v+k,m=l["plot"+(e?"Width":"Height")]/v};E(),_=g,y.min>_?(_=y.min,C=!0):_+m>y.max&&(_=y.max-m,C=!0),C?(j-=.8*(j-r[d][0]),w||($-=.8*($-r[d][1])),E()):r[d]=[j,$],b||(s[d]=g-h,s[f]=m),D=b?e?"scaleY":"scaleX":"scale"+u,S=b?1/v:v,a[f]=m,a[d]=_,n[D]=v,n["translate"+u]=S*h+(j-S*k)},pinch:function(e){var t=this,i=t.chart,n=t.pinchDown,a=t.followTouchMove,s=e.touches,r=s.length,c=t.lastValidTouch,d=t.hasZoom,u=t.selectionMarker,p={},f=1===r&&(t.inClass(e.target,B+"tracker")&&i.runTrackerClick||i.runChartClick),h={};!d&&!a||f||e.preventDefault(),fi(s,function(e){return t.normalize(e)}),"touchstart"===e.type?(di(s,function(e,t){n[t]={chartX:e.chartX,chartY:e.chartY}}),c.x=[n[0].chartX,n[1]&&n[1].chartX],c.y=[n[0].chartY,n[1]&&n[1].chartY],di(i.axes,function(e){if(e.zoomEnabled){var t=i.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,a=e.toPixels(e.dataMin),s=e.toPixels(e.dataMax),r=l(a,s),c=o(a,s);t.min=l(e.pos,r-n),t.max=o(e.pos+e.len,c+n)}})):n.length&&(u||(t.selectionMarker=u=$t({destroy:F},i.plotBox)),t.pinchTranslate(n,s,p,u,h,c),t.hasPinched=d,t.scaleGroups(p,h),!d&&a&&1===r&&this.runPointActions(t.normalize(e)))},onContainerTouchStart:function(e){var t=this.chart;Fi=t.index,1===e.touches.length?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)?(this.runPointActions(e),this.pinch(e)):this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){I[Fi]&&I[Fi].pointer.drop(e)}}),i.PointerEvent||i.MSPointerEvent){var Oi={},Ni=!!i.PointerEvent,Li=function(){var e,t=[];t.item=function(e){return this[e]};for(e in Oi)Oi.hasOwnProperty(e)&&t.push({pageX:Oi[e].pageX,pageY:Oi[e].pageY,target:Oi[e].target});return t},Hi=function(e,t,i,n){var a;e=e.originalEvent||e,"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!I[Fi]||(n(e),a=I[Fi].pointer,a[t]({type:i,target:e.currentTarget,preventDefault:F,touches:Li()}))};$t(Ii.prototype,{onContainerPointerDown:function(e){Hi(e,"onContainerTouchStart","touchstart",function(e){Oi[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){Hi(e,"onContainerTouchMove","touchmove",function(e){Oi[e.pointerId]={pageX:e.pageX,pageY:e.pageY},Oi[e.pointerId].target||(Oi[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){Hi(e,"onContainerTouchEnd","touchend",function(e){delete Oi[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,Ni?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,Ni?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(t,Ni?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Yt(Ii.prototype,"init",function(e,t,i){e.call(this,t,i),(this.hasZoom||this.followTouchMove)&&Ht(t.container,{"-ms-touch-action":V,"touch-action":V})}),Yt(Ii.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(hi)}),Yt(Ii.prototype,"destroy",function(e){this.batchMSEvents(mi),e.call(this)})}var Ri=xt.Legend=function(e,t){this.init(e,t)};Ri.prototype={init:function(e,t){var i=this,n=t.itemStyle,a=Lt(t.padding,8),s=t.itemMarginTop||0;this.options=t,t.enabled&&(i.baseline=Dt(n.fontSize)+3+s,i.itemStyle=n,i.itemHiddenStyle=Ct(n,t.itemHiddenStyle),i.itemMarginTop=s,i.padding=a,i.initialItemX=a,i.initialItemY=a-5,i.maxItemWidth=0,i.chart=e,i.itemHeight=0,i.lastLineHeight=0,i.symbolWidth=Lt(t.symbolWidth,16),i.pages=[],i.render(),hi(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(t,i){var f,h,n=this,a=n.options,s=t.legendItem,r=t.legendLine,o=t.legendSymbol,l=n.itemHiddenStyle.color,c=i?a.itemStyle.color:l,d=i?t.legendColor||t.color||"#CCC":l,u=t.options&&t.options.marker,p={fill:d};if(s&&s.css({fill:c,color:c}),r&&r.attr({stroke:d}),o){if(u&&o.isMarker){p.stroke=d,u=t.convertAttribs(u);for(f in u)h=u[f],h!==e&&(p[f]=h)}o.attr(p)}},positionItem:function(e){var t=this,i=t.options,n=i.symbolPadding,a=!i.rtl,s=e._legendItemPos,r=s[0],o=s[1],l=e.checkbox;e.legendGroup&&e.legendGroup.translate(a?r:t.legendWidth-r-2*n-4,o),l&&(l.x=r,l.y=o)},destroyItem:function(e){var t=e.checkbox;di(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&ti(e.checkbox)},destroy:function(){var e=this,t=e.group,i=e.box;i&&(e.box=i.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var i,t=this.group.alignAttr,n=this.clipHeight||this.legendHeight;t&&(i=t.translateY,di(this.allItems,function(a){var r,s=a.checkbox;s&&(r=i+s.y+(e||0)+3,Ht(s,{left:t.translateX+a.checkboxOffset+s.x-20+U,top:r+U,display:r>i-6&&i+n-6>r?"":V}))}))},renderTitle:function(){var a,e=this.options,t=this.padding,i=e.title,n=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),a=this.title.getBBox(),n=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(e){var m,y,w,t=this,i=t.chart,n=i.renderer,s=t.options,r="horizontal"===s.layout,l=t.symbolWidth,c=s.symbolPadding,d=t.itemStyle,u=t.itemHiddenStyle,p=t.padding,f=r?Lt(s.itemDistance,20):0,h=!s.rtl,_=s.width,g=s.itemMarginBottom||0,v=t.itemMarginTop,b=t.initialItemX,k=e.legendItem,j=e.series&&e.series.drawLegendSymbol?e.series:e,x=j.options,$=t.createCheckboxForItem&&x&&x.showCheckbox,C=s.useHTML;k||(e.legendGroup=n.g("legend-item").attr({zIndex:1}).add(t.scrollGroup),j.drawLegendSymbol(t,e),e.legendItem=k=n.text(s.labelFormat?Vt(s.labelFormat,e):s.labelFormatter.call(e),h?l+c:-c,t.baseline,C).css(Ct(e.visible?d:u)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),t.setItemEvents&&t.setItemEvents(e,k,C,d,u),t.colorizeItem(e,e.visible),$&&t.createCheckboxForItem(e)),y=k.getBBox(),w=e.checkboxOffset=s.itemWidth||e.legendItemWidth||l+c+y.width+f+($?20:0),t.itemHeight=m=a(e.legendItemHeight||y.height),r&&t.itemX-b+w>(_||i.chartWidth-2*p-b-s.x)&&(t.itemX=b,t.itemY+=v+t.lastLineHeight+g,t.lastLineHeight=0),t.maxItemWidth=o(t.maxItemWidth,w),t.lastItemY=v+t.itemY+g,t.lastLineHeight=o(m,t.lastLineHeight),e._legendItemPos=[t.itemX,t.itemY],r?t.itemX+=w:(t.itemY+=v+m+g,t.lastLineHeight=m),t.offsetWidth=_||o((r?t.itemX-b-f:w)+p,t.offsetWidth)},getAllItems:function(){var t=[];return di(this.chart.series,function(i){var n=i.options;Lt(n.showInLegend,It(n.linkedTo)?!1:e,!0)&&(t=t.concat(i.legendItems||("point"===n.legendType?i.data:i)))}),t},render:function(){var a,s,r,o,e=this,t=e.chart,i=t.renderer,n=e.group,l=e.box,c=e.options,d=e.padding,u=c.borderWidth,p=c.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,n||(e.group=n=i.g("legend").attr({zIndex:7}).add(),e.contentGroup=i.g().attr({zIndex:1}).add(n),e.scrollGroup=i.g().add(e.contentGroup)),e.renderTitle(),a=e.getAllItems(),Zt(a,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),c.reversed&&a.reverse(),e.allItems=a,e.display=s=!!a.length,di(a,function(t){e.renderItem(t)}),r=c.width||e.offsetWidth,o=e.lastItemY+e.lastLineHeight+e.titleHeight,o=e.handleOverflow(o),(u||p)&&(r+=d,o+=d,l?r>0&&o>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:r,height:o})),l.isNew=!1):(e.box=l=i.rect(0,0,r,o,c.borderRadius,u||0).attr({stroke:c.borderColor,"stroke-width":u||0,fill:p||V}).add(n).shadow(c.shadow),l.isNew=!0),l[s?"show":"hide"]()),e.legendWidth=r,e.legendHeight=o,di(a,function(t){e.positionItem(t)}),s&&n.align($t({width:r,height:o},c),!0,"spacingBox"),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var u,v,t=this,i=this.chart,n=i.renderer,s=this.options,r=s.y,o="top"===s.verticalAlign,c=i.spacingBox.height+(o?-r:r)-this.padding,d=s.maxHeight,p=this.clipRect,f=s.navigation,h=Lt(f.animation,!0),m=f.arrowSize||12,_=this.nav,g=this.pages,b=this.allItems;return"horizontal"===s.layout&&(c/=2),d&&(c=l(c,d)),g.length=0,e>c&&!s.useHTML?(this.clipHeight=u=c-20-this.titleHeight-this.padding,this.currentPage=Lt(this.currentPage,1),this.fullHeight=e,di(b,function(e,t){var i=e._legendItemPos[1],n=a(e.legendItem.getBBox().height),s=g.length;(!s||i-g[s-1]>u&&(v||i)!==g[s-1])&&(g.push(v||i),s++),t===b.length-1&&i+n-g[s-1]>u&&g.push(i),i!==v&&(v=i)}),p||(p=t.clipRect=n.clipRect(0,this.padding,9999,0),t.contentGroup.clip(p)),p.attr({height:u}),_||(this.nav=_=n.g().attr({zIndex:1}).add(this.group),this.up=n.symbol("triangle",0,0,m,m).on("click",function(){t.scroll(-1,h)}).add(_),this.pager=n.text("",15,10).css(f.style).add(_),this.down=n.symbol("triangle-down",0,0,m,m).on("click",function(){t.scroll(1,h)}).add(_)),t.scroll(0),e=c):_&&(p.attr({height:i.chartHeight}),_.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(t,i){var p,n=this.pages,a=n.length,s=this.currentPage+t,r=this.clipHeight,o=this.options.navigation,l=o.activeColor,c=o.inactiveColor,d=this.pager,u=this.padding;s>a&&(s=a),s>0&&(i!==e&&ai(i,this.chart),this.nav.attr({translateX:u,translateY:r+this.padding+7+this.titleHeight,visibility:Y}),this.up.attr({fill:1===s?c:l}).css({cursor:1===s?"default":"pointer"}),d.attr({text:s+"/"+a}),this.down.attr({x:18+this.pager.getBBox().width,fill:s===a?c:l}).css({cursor:s===a?"default":"pointer"}),p=-n[s-1]+this.initialItemY,this.scrollGroup.animate({translateY:p}),this.currentPage=s,this.positionCheckboxes(p))}};var qi=xt.LegendSymbolMixin={drawRectangle:function(e,t){var i=e.options.symbolHeight||12;t.legendSymbol=this.chart.renderer.rect(0,e.baseline-5-i/2,e.symbolWidth,i,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var n,r,u,t=this.options,i=t.marker,s=e.options,o=e.symbolWidth,l=this.chart.renderer,c=this.legendGroup,d=e.baseline-a(.3*l.fontMetrics(s.itemStyle.fontSize).b);t.lineWidth&&(u={"stroke-width":t.lineWidth},t.dashStyle&&(u.dashstyle=t.dashStyle),this.legendLine=l.path([X,0,d,G,o,d]).attr(u).add(c)),i&&i.enabled!==!1&&(n=i.radius,this.legendSymbol=r=l.symbol(this.symbol,o/2-n,d-n,2*n,2*n).add(c),r.isMarker=!0)}};(/Trident\/7\.0/.test(h)||b)&&Yt(Ri.prototype,"positionItem",function(e,t){var i=this,n=function(){t._legendItemPos&&e.call(i,t)};n(),setTimeout(n)}),Wi.prototype={init:function(e,t){var i,n=e.series;e.series=null,i=Ct(T,e),i.series=e.series=n,this.userOptions=e;var a=i.chart;this.margin=this.splashArray("margin",a),this.spacing=this.splashArray("spacing",a);var s=a.events;this.bounds={h:{},v:{}},this.callback=t,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=a.showAxes;var o,r=this;if(r.index=I.length,I.push(r),O++,a.reflow!==!1&&hi(r,"load",function(){r.initReflow()}),s)for(o in s)hi(r,o,s[o]);r.xAxis=[],r.yAxis=[],r.animation=x?!1:Lt(a.animation,!0),r.pointCount=0,r.counters=new Kt,r.firstRender()},initSeries:function(e){var a,t=this,i=t.options.chart,n=e.type||i.type||i.defaultSeriesType,s=jt[n];return s||ii(17,!0),a=new s,a.init(this,e),a},isInsidePlot:function(e,t,i){var n=i?t:e,a=i?e:t;return n>=0&&this.plotWidth>=n&&a>=0&&this.plotHeight>=a},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&di(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var o,l,p,t=this,i=t.axes,n=t.series,a=t.pointer,s=t.legend,r=t.isDirtyLegend,c=t.isDirtyBox,d=n.length,u=d,f=t.renderer,h=f.isHidden(),m=[];for(ai(e,t),h&&t.cloneRenderTo(),t.layOutTitles();u--;)if(p=n[u],p.options.stacking&&(o=!0,p.isDirty)){l=!0;break}if(l)for(u=d;u--;)p=n[u],p.options.stacking&&(p.isDirty=!0);di(n,function(e){e.isDirty&&"point"===e.options.legendType&&(r=!0)}),r&&s.options.enabled&&(s.render(),t.isDirtyLegend=!1),o&&t.getStacks(),t.hasCartesianSeries&&(t.isResizing||(t.maxTicks=null,di(i,function(e){e.setScale()})),t.adjustTickAmounts(),t.getMargins(),di(i,function(e){e.isDirty&&(c=!0)}),di(i,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,m.push(function(){_i(e,"afterSetExtremes",$t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(c||o)&&e.redraw()})),c&&t.drawChartBox(),di(n,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()
}),a&&a.reset(!0),f.draw(),_i(t,"redraw"),h&&t.cloneRenderTo(!0),di(m,function(e){e.call()})},get:function(e){var a,s,r,t=this,i=t.axes,n=t.series;for(a=0;i.length>a;a++)if(i[a].options.id===e)return i[a];for(a=0;n.length>a;a++)if(n[a].options.id===e)return n[a];for(a=0;n.length>a;a++)for(r=n[a].points||[],s=0;r.length>s;s++)if(r[s].id===e)return r[s];return null},getAxes:function(){var a,s,e=this,t=this.options,i=t.xAxis=Nt(t.xAxis||{}),n=t.yAxis=Nt(t.yAxis||{});di(i,function(e,t){e.index=t,e.isX=!0}),di(n,function(e,t){e.index=t}),a=i.concat(n),di(a,function(t){s=new Ai(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return di(this.series,function(t){e=e.concat(ui(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return ui(this.series,function(e){return e.selected})},getStacks:function(){var e=this;di(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),di(e.series,function(t){!t.options.stacking||t.visible!==!0&&e.options.chart.ignoreHiddenSeries!==!1||(t.stackKey=t.type+Lt(t.options.stack,""))})},setTitle:function(e,t,i){var s,r,n=this,a=n.options;s=a.title=Ct(a.title,e),r=a.subtitle=Ct(a.subtitle,t),di([["title",e,s],["subtitle",t,r]],function(e){var t=e[0],i=n[t],a=e[1],s=e[2];i&&a&&(n[t]=i=i.destroy()),s&&s.text&&!i&&(n[t]=n.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":B+t,zIndex:s.zIndex||4}).css(s.style).add())}),n.layOutTitles(i)},layOutTitles:function(e){var l,t=0,i=this.title,n=this.subtitle,a=this.options,s=a.title,o=a.subtitle,c=this.spacingBox.width-44;i&&(i.css({width:(s.width||c)+U}).align($t({y:15},s),!1,"spacingBox"),s.floating||s.verticalAlign||(t=i.getBBox().height)),n&&(n.css({width:(o.width||c)+U}).align($t({y:t+s.margin},o),!1,"spacingBox"),o.floating||o.verticalAlign||(t=r(t+n.getBBox().height))),l=this.titleOffset!==t,this.titleOffset=t,!this.isDirtyBox&&l&&(this.isDirtyBox=l,this.hasRendered&&Lt(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this,t=e.options.chart,i=t.width,n=t.height,a=e.renderToClone||e.renderTo;It(i)||(e.containerWidth=oi(a,"width")),It(n)||(e.containerHeight=oi(a,"height")),e.chartWidth=o(0,i||e.containerWidth||600),e.chartHeight=o(0,Lt(n,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var i=this.renderToClone,n=this.container;e?i&&(this.renderTo.appendChild(n),ti(i),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=i=this.renderTo.cloneNode(0),Ht(i,{position:R,top:"-9999px",display:"block"}),i.style.setProperty&&i.style.setProperty("display","block","important"),t.body.appendChild(i),n&&i.appendChild(n))},getContainer:function(){var i,a,s,r,l,c,e=this,n=e.options.chart,o="data-highcharts-chart";e.renderTo=r=n.renderTo,c=B+D++,Et(r)&&(e.renderTo=r=t.getElementById(r)),r||ii(13,!0),l=Dt(Ot(r,o)),!isNaN(l)&&I[l]&&I[l].hasRendered&&I[l].destroy(),Ot(r,o,e.index),r.innerHTML="",n.skipClone||r.offsetWidth||e.cloneRenderTo(),e.getChartSize(),a=e.chartWidth,s=e.chartHeight,e.container=i=Rt(H,{className:B+"container"+(n.className?" "+n.className:""),id:c},$t({position:q,overflow:W,width:a+U,height:s+U,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},n.style),e.renderToClone||r),e._cursor=i.style.cursor,e.renderer=n.forExport?new zi(i,a,s,n.style,!0):new $(i,a,s,n.style),x&&e.renderer.create(e,i,a,s)},getMargins:function(){var i,e=this,t=e.spacing,n=e.legend,a=e.margin,s=e.options.legend,r=Lt(s.margin,20),l=s.x,c=s.y,d=s.align,u=s.verticalAlign,p=e.titleOffset;e.resetMargins(),i=e.axisOffset,p&&!It(a[0])&&(e.plotTop=o(e.plotTop,p+e.options.title.margin+t[0])),n.display&&!s.floating&&("right"===d?It(a[1])||(e.marginRight=o(e.marginRight,n.legendWidth-l+r+t[1])):"left"===d?It(a[3])||(e.plotLeft=o(e.plotLeft,n.legendWidth+l+r+t[3])):"top"===u?It(a[0])||(e.plotTop=o(e.plotTop,n.legendHeight+c+r+t[0])):"bottom"===u&&(It(a[2])||(e.marginBottom=o(e.marginBottom,n.legendHeight-c+r+t[2])))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&di(e.axes,function(e){e.getOffset()}),It(a[3])||(e.plotLeft+=i[3]),It(a[0])||(e.plotTop+=i[0]),It(a[2])||(e.marginBottom+=i[2]),It(a[1])||(e.marginRight+=i[1]),e.setChartSize()},reflow:function(e){var n=this,a=n.options.chart,s=n.renderTo,r=a.width||oi(s,"width"),o=a.height||oi(s,"height"),l=e?e.target:i,c=function(){n.container&&(n.setSize(r,o,!1),n.hasUserSize=null)};n.hasUserSize||!r||!o||l!==i&&l!==t||((r!==n.containerWidth||o!==n.containerHeight)&&(clearTimeout(n.reflowTimeout),e?n.reflowTimeout=setTimeout(c,100):c()),n.containerWidth=r,n.containerHeight=o)},initReflow:function(){var e=this,t=function(t){e.reflow(t)};hi(i,"resize",t),hi(e,"destroy",function(){mi(i,"resize",t)})},setSize:function(e,t,i){var s,r,l,n=this;n.isResizing+=1,l=function(){n&&_i(n,"endResize",null,function(){n.isResizing-=1})},ai(i,n),n.oldChartHeight=n.chartHeight,n.oldChartWidth=n.chartWidth,It(e)&&(n.chartWidth=s=o(0,a(e)),n.hasUserSize=!!s),It(t)&&(n.chartHeight=r=o(0,a(t))),(M?vi:Ht)(n.container,{width:s+U,height:r+U},M),n.setChartSize(!0),n.renderer.setSize(s,r,i),n.maxTicks=null,di(n.axes,function(e){e.isDirty=!0,e.setScale()}),di(n.series,function(e){e.isDirty=!0}),n.isDirtyLegend=!0,n.isDirtyBox=!0,n.layOutTitles(),n.getMargins(),n.redraw(i),n.oldChartHeight=null,_i(n,"resize"),M===!1?l():setTimeout(l,M&&M.duration||500)},setChartSize:function(e){var f,h,m,_,g,v,b,t=this,i=t.inverted,n=t.renderer,l=t.chartWidth,c=t.chartHeight,d=t.options.chart,u=t.spacing,p=t.clipOffset;t.plotLeft=m=a(t.plotLeft),t.plotTop=_=a(t.plotTop),t.plotWidth=g=o(0,a(l-m-t.marginRight)),t.plotHeight=v=o(0,a(c-_-t.marginBottom)),t.plotSizeX=i?v:g,t.plotSizeY=i?g:v,t.plotBorderWidth=d.plotBorderWidth||0,t.spacingBox=n.spacingBox={x:u[3],y:u[0],width:l-u[3]-u[1],height:c-u[0]-u[2]},t.plotBox=n.plotBox={x:m,y:_,width:g,height:v},b=2*s(t.plotBorderWidth/2),f=r(o(b,p[3])/2),h=r(o(b,p[0])/2),t.clipBox={x:f,y:h,width:s(t.plotSizeX-o(b,p[1])/2-f),height:s(t.plotSizeY-o(b,p[2])/2-h)},e||di(t.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.spacing,i=e.margin;e.plotTop=Lt(i[0],t[0]),e.marginRight=Lt(i[1],t[1]),e.marginBottom=Lt(i[2],t[2]),e.plotLeft=Lt(i[3],t[3]),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var h,m,e=this,t=e.options.chart,i=e.renderer,n=e.chartWidth,a=e.chartHeight,s=e.chartBackground,r=e.plotBackground,o=e.plotBorder,l=e.plotBGImage,c=t.borderWidth||0,d=t.backgroundColor,u=t.plotBackgroundColor,p=t.plotBackgroundImage,f=t.plotBorderWidth||0,_=e.plotLeft,g=e.plotTop,v=e.plotWidth,b=e.plotHeight,y=e.plotBox,w=e.clipRect,k=e.clipBox;h=c+(t.shadow?8:0),(c||d)&&(s?s.animate(s.crisp({width:n-h,height:a-h})):(m={fill:d||V},c&&(m.stroke=t.borderColor,m["stroke-width"]=c),e.chartBackground=i.rect(h/2,h/2,n-h,a-h,t.borderRadius,c).attr(m).addClass(B+"background").add().shadow(t.shadow))),u&&(r?r.animate(y):e.plotBackground=i.rect(_,g,v,b,0).attr({fill:u}).add().shadow(t.plotShadow)),p&&(l?l.animate(y):e.plotBGImage=i.image(p,_,g,v,b).add()),w?w.animate({width:k.width,height:k.height}):e.clipRect=i.clipRect(k),f&&(o?o.animate(o.crisp({x:_,y:g,width:v,height:b})):e.plotBorder=i.rect(_,g,v,b,0,-f).attr({stroke:t.plotBorderColor,"stroke-width":f,fill:V,zIndex:1}).add()),e.isDirtyBox=!1},propFromSeries:function(){var i,a,s,e=this,t=e.options.chart,n=e.options.series;di(["inverted","angular","polar"],function(r){for(i=jt[t.type||t.defaultSeriesType],s=e[r]||t[r]||i&&i.prototype[r],a=n&&n.length;!s&&a--;)i=jt[n[a].type],i&&i.prototype[r]&&(s=!0);e[r]=s})},linkSeries:function(){var e=this,t=e.series;di(t,function(e){e.linkedSeries.length=0}),di(t,function(t){var i=t.options.linkedTo;Et(i)&&(i=":previous"===i?e.series[t.index-1]:e.get(i),i&&(i.linkedSeries.push(t),t.linkedParent=i))})},renderSeries:function(){di(this.series,function(e){e.translate(),e.setTooltipPoints&&e.setTooltipPoints(),e.render()})},render:function(){var r,e=this,t=e.axes,i=e.renderer,n=e.options,a=n.labels,s=n.credits;e.setTitle(),e.legend=new Ri(e,n.legend),e.getStacks(),di(t,function(e){e.setScale()}),e.getMargins(),e.maxTicks=null,di(t,function(e){e.setTickPositions(!0),e.setMaxTicks()}),e.adjustTickAmounts(),e.getMargins(),e.drawChartBox(),e.hasCartesianSeries&&di(t,function(e){e.render()}),e.seriesGroup||(e.seriesGroup=i.g("series-group").attr({zIndex:3}).add()),e.renderSeries(),a.items&&di(a.items,function(t){var n=$t(a.style,t.style),s=Dt(n.left)+e.plotLeft,r=Dt(n.top)+e.plotTop+12;delete n.left,delete n.top,i.text(t.html,s,r).attr({zIndex:2}).css(n).add()}),s.enabled&&!e.credits&&(r=s.href,e.credits=i.text(s.text,0,0).on("click",function(){r&&(location.href=r)}).attr({align:s.position.align,zIndex:8}).css(s.style).add().align(s.position)),e.hasRendered=!0},destroy:function(){var s,t=this,i=t.axes,n=t.series,a=t.container,r=a&&a.parentNode;for(_i(t,"destroy"),I[t.index]=e,O--,t.renderTo.removeAttribute("data-highcharts-chart"),mi(t),s=i.length;s--;)i[s]=i[s].destroy();for(s=n.length;s--;)n[s]=n[s].destroy();di(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var i=t[e];i&&i.destroy&&(t[e]=i.destroy())}),a&&(a.innerHTML="",mi(a),r&&ti(a));for(s in t)delete t[s]},isReadyToRender:function(){var e=this;return!k&&i==i.top&&"complete"!==t.readyState||x&&!i.canvg?(x?CanVGController.push(function(){e.firstRender()},e.options.global.canvasToolsURL):t.attachEvent("onreadystatechange",function(){t.detachEvent("onreadystatechange",e.firstRender),"complete"===t.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,i=e.callback;e.isReadyToRender()&&(e.getContainer(),_i(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),di(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),_i(e,"beforeRender"),xt.Pointer&&(e.pointer=new Ii(e,t)),e.render(),e.renderer.draw(),i&&i.apply(e,[e]),di(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),_i(e,"load"))},splashArray:function(e,t){var i=t[e],n=Tt(i)?i:[i,i,i,i];return[Lt(t[e+"Top"],n[0]),Lt(t[e+"Right"],n[1]),Lt(t[e+"Bottom"],n[2]),Lt(t[e+"Left"],n[3])]}},Wi.prototype.callbacks=[];var Bi=xt.CenteredSeriesMixin={getCenter:function(){var n,d,e=this.options,t=this.chart,i=2*(e.slicedOffset||0),a=t.plotWidth-2*i,s=t.plotHeight-2*i,r=e.center,o=[Lt(r[0],"50%"),Lt(r[1],"50%"),e.size||"100%",e.innerSize||0],c=l(a,s);return fi(o,function(e,t){return d=/%$/.test(e),n=2>t||2===t&&d,(d?[a,s,c,c][t]*Dt(e)/100:e)+(n?i:0)})}},Yi=function(){};Yi.prototype={init:function(e,t,i){var a,n=this;return n.series=e,n.applyOptions(t,i),n.pointAttr={},e.options.colorByPoint&&(a=e.options.colors||e.chart.options.colors,n.color=n.color||a[e.colorCounter++],e.colorCounter===a.length&&(e.colorCounter=0)),e.chart.pointCount++,n},applyOptions:function(t,i){var n=this,a=n.series,s=a.pointValKey;return t=Yi.prototype.optionsToObject.call(this,t),$t(n,t),n.options=n.options?$t(n.options,t):t,s&&(n.y=n[s]),n.x===e&&a&&(n.x=i===e?a.autoIncrement():i),n},optionsToObject:function(e){var s,t={},i=this.series,n=i.pointArrayMap||["y"],a=n.length,r=0,o=0;if("number"==typeof e||null===e)t[n[0]]=e;else if(zt(e))for(e.length>a&&(s=typeof e[0],"string"===s?t.name=e[0]:"number"===s&&(t.x=e[0]),r++);a>o;)t[n[o++]]=e[r++];else"object"==typeof e&&(t=e,e.dataLabels&&(i._hasPointLabels=!0),e.marker&&(i._hasPointMarkers=!0));return t},destroy:function(){var a,e=this,t=e.series,i=t.chart,n=i.hoverPoints;i.pointCount--,n&&(e.setState(),Ft(n,e),n.length||(i.hoverPoints=null)),e===i.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(mi(e),e.destroyElements()),e.legendItem&&i.legend.destroyItem(e);for(a in e)e[a]=null},destroyElements:function(){for(var i,e=this,t=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)i=t[n],e[i]&&(e[i]=e[i].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},tooltipFormatter:function(e){var t=this.series,i=t.tooltipOptions,n=Lt(i.valueDecimals,""),a=i.valuePrefix||"",s=i.valueSuffix||"";return di(t.pointArrayMap||["y"],function(t){t="{point."+t,(a||s)&&(e=e.replace(t+"}",a+t+"}"+s)),e=e.replace(t+"}",t+":,."+n+"f}")}),Vt(e,{point:this,series:this.series})},firePointEvent:function(e,t,i){var n=this,a=this.series,s=a.options;(s.point.events[e]||n.options&&n.options.events&&n.options.events[e])&&this.importEvents(),"click"===e&&s.allowPointSelect&&(i=function(e){n.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),_i(this,e,t,i)}};var Ui=function(){};Ui.prototype={isCartesian:!0,type:"line",pointClass:Yi,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,t){var n,a,i=this,s=e.series,r=function(e,t){return Lt(e.options.index,e._i)-Lt(t.options.index,t._i)};i.chart=e,i.options=t=i.setOptions(t),i.linkedSeries=[],i.bindAxes(),$t(i,{name:t.name,state:Z,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),x&&(t.animation=!1),a=t.events;for(n in a)hi(i,n,a[n]);(a&&a.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)&&(e.runTrackerClick=!0),i.getColor(),i.getSymbol(),di(i.parallelArrays,function(e){i[e+"Data"]=[]}),i.setData(t.data,!1),i.isCartesian&&(e.hasCartesianSeries=!0),s.push(i),i._i=s.length-1,Zt(s,r),this.yAxis&&Zt(this.yAxis.series,r),di(s,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var a,t=this,i=t.options,n=t.chart;di(t.axisTypes||[],function(s){di(n[s],function(n){a=n.options,(i[s]===a.index||i[s]!==e&&i[s]===a.id||i[s]===e&&0===a.index)&&(n.series.push(t),t[s]=n,n.isDirty=!0)}),t[s]||t.optionalAxis===s||ii(18,!0)})},updateParallelArrays:function(e,t){var i=e.series,n=arguments,a="number"==typeof t?function(n){var a="y"===n&&i.toYData?i.toYData(e):e[n];i[n+"Data"][t]=a}:function(e){Array.prototype[t].apply(i[e+"Data"],Array.prototype.slice.call(n,2))};di(i.parallelArrays,a)},autoIncrement:function(){var e=this,t=e.options,i=e.xIncrement;return i=Lt(i,t.pointStart,0),e.pointInterval=Lt(e.pointInterval,t.pointInterval,1),e.xIncrement=i+e.pointInterval,i},getSegments:function(){var n,e=this,t=-1,i=[],a=e.points,s=a.length;if(s)if(e.options.connectNulls){for(n=s;n--;)null===a[n].y&&a.splice(n,1);a.length&&(i=[a])}else di(a,function(e,n){null===e.y?(n>t+1&&i.push(a.slice(t+1,n)),t=n):n===s-1&&i.push(a.slice(t+1,n+1))});e.segments=i},setOptions:function(e){var o,t=this.chart,i=t.options,n=i.plotOptions,a=t.userOptions||{},s=a.plotOptions||{},r=n[this.type];return this.userOptions=e,o=Ct(r,n.series,e),this.tooltipOptions=Ct(T.tooltip,T.plotOptions[this.type].tooltip,a.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,e.tooltip),null===r.marker&&delete o.marker,o},getColor:function(){var a,s,e=this.options,t=this.userOptions,i=this.chart.options.colors,n=this.chart.counters;a=e.color||wi[this.type].color,a||e.colorByPoint||(It(t._colorIndex)?s=t._colorIndex:(t._colorIndex=n.color,s=n.color++),a=i[s]),this.color=a,n.wrapColor(i.length)},getSymbol:function(){var r,e=this,t=e.userOptions,i=e.options.marker,n=e.chart,a=n.options.symbols,s=n.counters;e.symbol=i.symbol,e.symbol||(It(t._symbolIndex)?r=t._symbolIndex:(t._symbolIndex=s.symbol,r=s.symbol++),e.symbol=a[r]),/^url/.test(e.symbol)&&(i.radius=0),s.wrapSymbol(a.length)},drawLegendSymbol:qi.drawLineMarker,setData:function(t,i,n,a){var l,m,g,s=this,r=s.points,o=r&&r.length||0,c=s.options,d=s.chart,u=null,p=s.xAxis,f=p&&!!p.categories,h=s.tooltipPoints,_=c.turboThreshold,v=this.xData,b=this.yData,y=s.pointArrayMap,w=y&&y.length;if(t=t||[],l=t.length,i=Lt(i,!0),a===!1||!l||o!==l||s.cropped||s.hasGroupedData){if(s.xIncrement=null,s.pointRange=f?1:c.pointRange,s.colorCounter=0,di(this.parallelArrays,function(e){s[e+"Data"].length=0}),_&&l>_){for(m=0;null===u&&l>m;)u=t[m],m++;if(Mt(u)){var k=Lt(c.pointStart,0),j=Lt(c.pointInterval,1);for(m=0;l>m;m++)v[m]=k,b[m]=t[m],k+=j;s.xIncrement=k}else if(zt(u))if(w)for(m=0;l>m;m++)g=t[m],v[m]=g[0],b[m]=g.slice(1,w+1);else for(m=0;l>m;m++)g=t[m],v[m]=g[0],b[m]=g[1];else ii(12)}else for(m=0;l>m;m++)t[m]!==e&&(g={series:s},s.pointClass.prototype.applyOptions.apply(g,[t[m]]),s.updateParallelArrays(g,m),f&&g.name&&(p.names[g.x]=g.name));for(Et(b[0])&&ii(14,!0),s.data=[],s.options.data=t,m=o;m--;)r[m]&&r[m].destroy&&r[m].destroy();h&&(h.length=0),p&&(p.minRange=p.userMinRange),s.isDirty=s.isDirtyData=d.isDirtyBox=!0,n=!1}else di(t,function(e,t){r[t].update(e,!1)});i&&d.redraw(n)},processData:function(t){var r,l,c,d,p,g,v,i=this,n=i.xData,a=i.yData,s=n.length,o=0,u=i.xAxis,f=i.options,h=f.cropThreshold,m=0,_=i.isCartesian;if(_&&!i.isDirty&&!u.isDirty&&!i.yAxis.isDirty&&!t)return!1;for(_&&i.sorted&&(!h||s>h||i.forceCrop)&&(g=u.min,v=u.max,g>n[s-1]||n[0]>v?(n=[],a=[]):(g>n[0]||n[s-1]>v)&&(r=this.cropData(i.xData,i.yData,g,v),n=r.xData,a=r.yData,o=r.start,l=!0,m=n.length)),p=n.length-1;p>=0;p--)c=n[p]-n[p-1],!l&&n[p]>g&&v>n[p]&&m++,c>0&&(d===e||d>c)?d=c:0>c&&i.requireSorting&&ii(15);i.cropped=l,i.cropStart=o,i.processedXData=n,i.processedYData=a,i.activePointCount=m,null===f.pointRange&&(i.pointRange=d||1),i.closestPointRange=d},cropData:function(e,t,i,n){var c,a=e.length,s=0,r=a,l=Lt(this.cropShoulder,1);for(c=0;a>c;c++)if(e[c]>=i){s=o(0,c-l);break}for(;a>c;c++)if(e[c]>n){r=c+l;break}return{xData:e.slice(s,r),yData:t.slice(s,r),start:s,end:r}},generatePoints:function(){var s,u,f,m,t=this,i=t.options,n=i.data,a=t.data,r=t.processedXData,o=t.processedYData,l=t.pointClass,c=r.length,d=t.cropStart||0,p=t.hasGroupedData,h=[];if(!a&&!p){var _=[];_.length=n.length,a=t.data=_}for(m=0;c>m;m++)u=d+m,p?h[m]=(new l).init(t,[r[m]].concat(Nt(o[m]))):(a[u]?f=a[u]:n[u]!==e&&(a[u]=f=(new l).init(t,n[u],r[m])),h[m]=f);if(a&&(c!==(s=a.length)||p))for(m=0;s>m;m++)m!==d||p||(m+=c),a[m]&&(a[m].destroyElements(),a[m].plotX=e);t.data=a,t.points=h},getExtremes:function(t){var s,u,p,f,h,m,_,g,v,i=this.xAxis,n=this.yAxis,a=this.processedXData,r=[],o=0,l=i.getExtremes(),c=l.min,d=l.max;for(t=t||this.stackedYData||this.processedYData,s=t.length,g=0;s>g;g++)if(m=a[g],_=t[g],u=null!==_&&_!==e&&(!n.isLog||_.length||_>0),p=this.getExtremesFromAll||this.cropped||(a[g+1]||m)>=c&&d>=(a[g-1]||m),u&&p)if(v=_.length)for(;v--;)null!==_[v]&&(r[o++]=_[v]);else r[o++]=_;this.dataMin=Lt(f,Qt(r)),this.dataMax=Lt(h,Jt(r))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var d,t=this,i=t.options,n=i.stacking,a=t.xAxis,s=a.categories,r=t.yAxis,o=t.points,l=o.length,c=!!t.modifyValue,u=i.pointPlacement,p="between"===u||Mt(u),f=i.threshold;for(d=0;l>d;d++){var b,y,h=o[d],m=h.x,_=h.y,g=h.low,v=n&&r.stacks[(t.negStacks&&f>_?"-":"")+t.stackKey];r.isLog&&0>=_&&(h.y=_=null),h.plotX=a.translate(m,0,0,0,1,u,"flags"===this.type),n&&t.visible&&v&&v[m]&&(b=v[m],y=b.points[t.index+","+d],g=y[0],_=y[1],0===g&&(g=Lt(f,r.min)),r.isLog&&0>=g&&(g=null),h.total=h.stackTotal=b.total,h.percentage=b.total&&100*(h.y/b.total),h.stackY=_,b.setOffset(t.pointXOffset||0,t.barW||0)),h.yBottom=It(g)?r.translate(g,0,1,0,1):null,c&&(_=t.modifyValue(_,h)),h.plotY="number"==typeof _&&1/0!==_?r.translate(_,0,1,0,1):e,h.clientX=p?a.translate(m,0,0,0,1):h.plotX,h.negative=(f||0)>h.y,h.category=s&&s[h.x]!==e?s[h.x]:h.x}t.getSegments()},animate:function(e){var a,s,c,t=this,i=t.chart,n=i.renderer,r=t.options.animation,o=t.clipBox||i.clipBox,l=i.inverted;r&&!Tt(r)&&(r=wi[t.type].animation),c=["_sharedClip",r.duration,r.easing,o.height].join(","),e?(a=i[c],s=i[c+"m"],a||(i[c]=a=n.clipRect($t(o,{width:0})),i[c+"m"]=s=n.clipRect(-99,l?-i.plotLeft:-i.plotTop,99,l?i.chartWidth:i.chartHeight)),t.group.clip(a),t.markerGroup.clip(s),t.sharedClipKey=c):(a=i[c],a&&a.animate({width:i.plotSizeX},r),i[c+"m"]&&i[c+"m"].animate({width:i.plotSizeX+99},r),t.animate=null)},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,i=this.group,n=this.clipBox;i&&this.options.clip!==!1&&(t&&n||i.clip(n?e.renderer.clipRect(n):e.clipRect),this.markerGroup.clip()),_i(this,"afterAnimate"),setTimeout(function(){t&&e[t]&&(n||(e[t]=e[t].destroy()),e[t+"m"]&&(e[t+"m"]=e[t+"m"].destroy()))},100)},drawPoints:function(){var i,o,l,c,d,u,p,f,h,v,b,y,t=this,n=t.points,r=t.chart,m=t.options,_=m.marker,g=t.pointAttr[""],w=t.markerGroup,k=Lt(_.enabled,.5*t.xAxis.len/_.radius>t.activePointCount);if(_.enabled!==!1||t._hasPointMarkers)for(c=n.length;c--;)d=n[c],o=s(d.plotX),l=d.plotY,h=d.graphic,v=d.marker||{},b=k&&v.enabled===e||v.enabled,y=r.isInsidePlot(a(o),l,r.inverted),b&&l!==e&&!isNaN(l)&&null!==d.y?(i=d.pointAttr[d.selected?J:Z]||g,u=i.r,p=Lt(v.symbol,t.symbol),f=0===p.indexOf("url"),h?h[y?"show":"hide"](!0).animate($t({x:o-u,y:l-u},h.symbolName?{width:2*u,height:2*u}:{})):y&&(u>0||f)&&(d.graphic=h=r.renderer.symbol(p,o-u,l-u,2*u,2*u).attr(i).add(w))):h&&(d.graphic=h.destroy())},convertAttribs:function(e,t,i,n){var s,r,a=this.pointAttrToOptions,o={};e=e||{},t=t||{},i=i||{},n=n||{};for(s in a)r=a[s],o[s]=Lt(e[r],t[s],i[s],n[s]);return o},getAttribs:function(){var s,c,d,p,b,y,e=this,t=e.options,i=wi[e.type].marker?t.marker:t,n=i.states,a=n[Q],r=e.color,o={stroke:r,fill:r},l=e.points||[],u=[],f=e.pointAttrToOptions,h=e.hasPointSpecificOptions,m=t.negativeColor,_=i.lineColor,g=i.fillColor,v=t.turboThreshold;if(t.marker?(a.radius=a.radius||i.radius+2,a.lineWidth=a.lineWidth||i.lineWidth+1):a.color=a.color||Ei(a.color||r).brighten(a.brightness).get(),u[Z]=e.convertAttribs(i,o),di([Q,J],function(t){u[t]=e.convertAttribs(n[t],u[Z])}),e.pointAttr=u,c=l.length,!v||v>c||h)for(;c--;){if(d=l[c],i=d.options&&d.options.marker||d.options,i&&i.enabled===!1&&(i.radius=0),d.negative&&m&&(d.color=d.fillColor=m),h=t.colorByPoint||d.color,d.options)for(y in f)It(i[f[y]])&&(h=!0);h?(i=i||{},p=[],n=i.states||{},s=n[Q]=n[Q]||{},t.marker||(s.color=s.color||!d.options.color&&a.color||Ei(d.color).brighten(s.brightness||a.brightness).get()),b={color:d.color},g||(b.fillColor=d.color),_||(b.lineColor=d.color),p[Z]=e.convertAttribs($t(b,i),u[Z]),p[Q]=e.convertAttribs(n[Q],u[Q],p[Z]),p[J]=e.convertAttribs(n[J],u[J],p[Z])):p=u,d.pointAttr=p}},destroy:function(){var n,a,r,o,l,e=this,t=e.chart,i=/AppleWebKit\/533/.test(h),s=e.data||[];for(_i(e,"destroy"),mi(e),di(e.axisTypes||[],function(t){l=e[t],l&&(Ft(l.series,e),l.isDirty=l.forceRedraw=!0)}),e.legendItem&&e.chart.legend.destroyItem(e),a=s.length;a--;)r=s[a],r&&r.destroy&&r.destroy();e.points=null,clearTimeout(e.animationTimeout),di(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(t){e[t]&&(n=i&&"group"===t?"hide":"destroy",e[t][n]())}),t.hoverSeries===e&&(t.hoverSeries=null),Ft(t.series,e);for(o in e)delete e[o]},getSegmentPath:function(e){var t=this,i=[],n=t.options.step;return di(e,function(a,s){var l,r=a.plotX,o=a.plotY;t.getPointSpline?i.push.apply(i,t.getPointSpline(e,a,s)):(i.push(s?G:X),n&&s&&(l=e[s-1],"right"===n?i.push(l.plotX,o):"center"===n?i.push((l.plotX+r)/2,l.plotY,(l.plotX+r)/2,o):i.push(r,l.plotY)),i.push(a.plotX,a.plotY))}),i},getGraphPath:function(){var i,e=this,t=[],n=[];return di(e.segments,function(a){i=e.getSegmentPath(a),a.length>1?t=t.concat(i):n.push(a[0])}),e.singlePoints=n,e.graphPath=t,t},drawGraph:function(){var e=this,t=this.options,i=[["graph",t.lineColor||this.color]],n=t.lineWidth,a=t.dashStyle,s="square"!==t.linecap,r=this.getGraphPath(),o=t.negativeColor;o&&i.push(["graphNeg",o]),di(i,function(i,o){var d,l=i[0],c=e[l];c?(bi(c),c.animate({d:r})):n&&r.length&&(d={stroke:i[1],"stroke-width":n,fill:V,zIndex:1},a?d.dashstyle=a:s&&(d["stroke-linecap"]=d["stroke-linejoin"]="round"),e[l]=e.chart.renderer.path(r).attr(d).add(e.group).shadow(!o&&t.shadow))})},clipNeg:function(){var s,r,l,g,v,e=this.options,t=this.chart,i=t.renderer,n=e.negativeColor||e.negativeFillColor,c=this.graph,d=this.area,u=this.posClip,p=this.negClip,f=t.chartWidth,h=t.chartHeight,m=o(f,h),_=this.yAxis;n&&(c||d)&&(s=a(_.toPixels(e.threshold||0,!0)),0>s&&(m-=s),g={x:0,y:0,width:m,height:s},v={x:0,y:s,width:m,height:m},t.inverted&&(g.height=v.y=t.plotWidth-s,i.isVML&&(g={x:t.plotWidth-s-t.plotLeft,y:0,width:f,height:h},v={x:s+t.plotLeft-f,y:0,width:t.plotLeft+s,height:f})),_.reversed?(r=v,l=g):(r=g,l=v),u?(u.animate(r),p.animate(l)):(this.posClip=u=i.clipRect(r),this.negClip=p=i.clipRect(l),c&&this.graphNeg&&(c.clip(u),this.graphNeg.clip(p)),d&&(d.clip(u),this.areaNeg.clip(p))))},invertGroups:function(){function i(){var t={width:e.yAxis.len,height:e.xAxis.len};di(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,t=e.chart;e.xAxis&&(hi(t,"resize",i),hi(e,"destroy",function(){mi(t,"resize",i)}),i(),e.invertGroups=i)},plotGroup:function(e,t,i,n,a){var s=this[e],r=!s;return r&&(this[e]=s=this.chart.renderer.g(t).attr({visibility:i,zIndex:n||.1}).add(a)),s[r?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var e=this.chart,t=this.xAxis,i=this.yAxis;return e.inverted&&(t=i,i=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:i?i.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var i,e=this,t=e.chart,n=e.options,a=n.animation,s=a&&!!e.animate&&t.renderer.isSVG&&Lt(a.duration,500)||0,r=e.visible?Y:W,o=n.zIndex,l=e.hasRendered,c=t.seriesGroup;i=e.plotGroup("group","series",r,o,c),e.markerGroup=e.plotGroup("markerGroup","markers",r,o,c),s&&e.animate(!0),e.getAttribs(),i.inverted=e.isCartesian?t.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||i.clip(t.clipRect),s&&e.animate(),l||(s?e.animationTimeout=setTimeout(function(){e.afterAnimate()},s):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this,t=e.chart,i=e.isDirtyData,n=e.group,a=e.xAxis,s=e.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:Lt(a&&a.left,t.plotLeft),translateY:Lt(s&&s.top,t.plotTop)})),e.translate(),e.setTooltipPoints&&e.setTooltipPoints(!0),e.render(),i&&_i(e,"updatedData")}},Vi.prototype={destroy:function(){ei(this,this.axis)},render:function(e){var t=this.options,i=t.format,n=i?Vt(i,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:W}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:W}).add(e)},setOffset:function(e,t){var m,i=this,n=i.axis,a=n.chart,s=a.inverted,r=this.isNegative,o=n.translate(n.usePercentage?100:this.total,0,0,0,1),l=n.translate(0),d=c(o-l),u=a.xAxis[0].translate(this.x)+e,p=a.plotHeight,f={x:s?r?o:o-d:u,y:s?p-u-t:r?p-o-d:p-o,width:s?d:t,height:s?t:d},h=this.label;h&&(h.align(this.alignOptions,null,f),m=h.alignAttr,h[this.options.crop===!1||a.isInsidePlot(m.x,m.y)?"show":"hide"](!0))}},Ai.prototype.buildStacks=function(){var e=this.series,t=Lt(this.options.reversedStacks,!0),i=e.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)e[t?i:e.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;e.length>i;i++)e[i].setPercentStacks()}},Ai.prototype.renderStackTotals=function(){var a,s,r,e=this,t=e.chart,i=t.renderer,n=e.stacks,o=e.stackTotalGroup;o||(e.stackTotalGroup=o=i.g("stack-labels").attr({visibility:Y,zIndex:6}).add()),o.translate(t.plotLeft,t.plotTop);for(a in n){s=n[a];for(r in s)s[r].render(o)}},Ui.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var g,v,b,y,w,k,j,x,e=this,t=e.processedXData,i=e.processedYData,n=[],a=i.length,s=e.options,r=s.threshold,l=s.stack,d=s.stacking,u=e.stackKey,p="-"+u,f=e.negStacks,h=e.yAxis,m=h.stacks,_=h.oldStacks;for(k=0;a>k;k++)j=t[k],x=i[k],w=e.index+","+k,g=f&&r>x,y=g?p:u,m[y]||(m[y]={}),m[y][j]||(_[y]&&_[y][j]?(m[y][j]=_[y][j],m[y][j].total=null):m[y][j]=new Vi(h,h.options.stackLabels,g,j,l)),v=m[y][j],v.points[w]=[v.cum||0],"percent"===d?(b=g?u:p,f&&m[b]&&m[b][j]?(b=m[b][j],v.total=b.total=o(b.total,v.total)+c(x)||0):v.total=ni(v.total+(c(x)||0))):v.total=ni(v.total+(x||0)),v.cum=(v.cum||0)+(x||0),v.points[w].push(v.cum),n[k]=v.cum;"percent"===d&&(h.usePercentage=!0),this.stackedYData=n,h.oldStacks={}}},Ui.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,i=e.yAxis.stacks,n=e.processedXData;di([t,"-"+t],function(t){for(var s,r,o,l,a=n.length;a--;)s=n[a],r=i[t]&&i[t][s],o=r&&r.points[e.index+","+a],o&&(l=r.total?100/r.total:0,o[0]=ni(o[0]*l),o[1]=ni(o[1]*l),e.stackedYData[a]=o[1])})};var Xi=qt(Ui);jt.line=Xi,wi.column=Ct(ki,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var Gi=qt(Ui,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Ui.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&di(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var r,d,t=this,i=t.options,n=t.xAxis,a=t.yAxis,s=n.reversed,o={},u=0;i.grouping===!1?u=1:di(t.chart.series,function(i){var n=i.options,s=i.yAxis;i.type===t.type&&i.visible&&a.len===s.len&&a.pos===s.pos&&(n.stacking?(r=i.stackKey,o[r]===e&&(o[r]=u++),d=o[r]):n.grouping!==!1&&(d=u++),i.columnIndex=d)});var p=l(c(n.transA)*(n.ordinalSlope||i.pointRange||n.closestPointRange||n.tickInterval||1),n.len),f=p*i.groupPadding,h=p-2*f,m=h/u,_=i.pointWidth,g=It(_)?(m-_)/2:m*i.pointPadding,v=Lt(_,m-2*g),b=(s?u-(t.columnIndex||0):t.columnIndex)||0,y=g+(f+b*m-p/2)*(s?-1:1);return t.columnMetrics={width:v,offset:y}},translate:function(){var e=this,t=e.chart,i=e.options,n=e.borderWidth=Lt(i.borderWidth,e.activePointCount>.5*e.xAxis.len?0:1),s=e.yAxis,d=i.threshold,u=e.translatedThreshold=s.getThreshold(d),p=Lt(i.minPointLength,5),f=e.getColumnMetrics(),h=f.width,m=e.barW=r(o(h,1+2*n)),_=e.pointXOffset=f.offset,g=-(n%2?.5:0),v=n%2?.5:1;t.renderer.isVML&&t.inverted&&(v+=1),Ui.prototype.translate.apply(e),di(e.points,function(i){var y,w,k,j,n=Lt(i.yBottom,u),r=l(o(-999-n,i.plotY),s.len+999+n),d=i.plotX+_,f=m,b=l(r,n),x=o(r,n)-b;p>c(x)&&p&&(x=p,b=a(c(b-u)>p?n-p:u-(u>=s.translate(i.y,0,1,0,1)?p:0))),i.barX=d,i.pointWidth=h,i.tooltipPos=t.inverted?[s.len-r,e.xAxis.len-d-f/2]:[d+f/2,r],j=.5>c(d),y=a(d+f)+g,d=a(d)+g,f=y-d,k=.5>c(b),w=a(b+x)+v,b=a(b)+v,x=w-b,j&&(d+=1,f-=1),k&&(b-=1,x+=1),i.shapeType="rect",i.shapeArgs={x:d,y:b,width:f,height:x}})},getSymbol:F,drawLegendSymbol:qi.drawRectangle,drawGraph:F,drawPoints:function(){var r,o,l,t=this,i=this.chart,n=t.options,a=i.renderer,s=n.animationLimit||250;di(t.points,function(c){var d=c.plotY,u=c.graphic;d===e||isNaN(d)||null===c.y?u&&(c.graphic=u.destroy()):(r=c.shapeArgs,l=It(t.borderWidth)?{"stroke-width":t.borderWidth}:{},o=c.pointAttr[c.selected?J:Z]||t.pointAttr[Z],u?(bi(u),u.attr(l)[s>i.pointCount?"animate":"attr"](Ct(r))):c.graphic=u=a[c.shapeType](r).attr(o).attr(l).add(t.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius))})},animate:function(e){var r,t=this,i=this.yAxis,n=t.options,a=this.chart.inverted,s={};k&&(e?(s.scaleY=.001,r=l(i.pos+i.len,o(i.pos,i.toPixels(n.threshold))),a?s.translateX=r-i.len:s.translateY=r,t.group.attr(s)):(s.scaleY=1,s[a?"translateX":"translateY"]=i.pos,t.group.animate(s,t.options.animation),t.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&di(t.series,function(t){t.type===e.type&&(t.isDirty=!0)
}),Ui.prototype.remove.apply(e,arguments)}});jt.column=Gi,wi.pie=Ct(ki,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Ki=qt(Yi,{init:function(){Yi.prototype.init.apply(this,arguments);var t,e=this;return 0>e.y&&(e.y=null),$t(e,{visible:e.visible!==!1,name:Lt(e.name,"Slice")}),t=function(t){e.slice("select"===t.type)},hi(e,"select",t),hi(e,"unselect",t),e},setVisible:function(t){var i=this,n=i.series,a=n.chart;i.visible=i.options.visible=t=t===e?!i.visible:t,n.options.data[ci(i,n.data)]=i.options,di(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&a.legend.colorizeItem(i,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,a.redraw())},slice:function(e,t,i){var r,n=this,a=n.series,s=a.chart;ai(i,s),t=Lt(t,!0),n.sliced=n.options.sliced=e=It(e)?e:!n.sliced,a.options.data[ci(n,a.data)]=n.options,r=e?n.slicedTranslation:{translateX:0,translateY:0},n.graphic.animate(r),n.shadowGroup&&n.shadowGroup.animate(r)},haloPath:function(e){var t=this.shapeArgs,i=this.series.chart;return this.series.chart.renderer.symbols.arc(i.plotLeft+t.x,i.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),Zi={type:"pie",isCartesian:!1,pointClass:Ki,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:F,animate:function(e){var t=this,i=t.points,n=t.startAngleRad;e||(di(i,function(e){var i=e.graphic,a=e.shapeArgs;i&&(i.attr({r:t.center[3]/2,start:n,end:n}),i.animate({r:a.r,start:a.start,end:a.end},t.options.animation))}),t.animate=null)},setData:function(e,t,i,n){Ui.prototype.setData.call(this,e,!1,i,n),this.processData(),this.generatePoints(),Lt(t,!0)&&this.chart.redraw(i)},generatePoints:function(){var e,i,n,a,t=0,s=this.options.ignoreHiddenPoint;for(Ui.prototype.generatePoints.call(this),i=this.points,n=i.length,e=0;n>e;e++)a=i[e],t+=s&&!a.visible?0:a.y;for(this.total=t,e=0;n>e;e++)a=i[e],a.percentage=t>0?100*(a.y/t):0,a.total=t},translate:function(e){this.generatePoints();var f,h,m,w,k,$,S,t=this,i=0,s=1e3,r=t.options,o=r.slicedOffset,c=o+r.borderWidth,_=r.startAngle||0,g=t.startAngleRad=p/180*(_-90),v=t.endAngleRad=p/180*(Lt(r.endAngle,_+360)-90),b=v-g,y=t.points,j=r.dataLabels.distance,x=r.ignoreHiddenPoint,C=y.length;for(e||(t.center=e=t.getCenter()),t.getX=function(t,i){return m=n.asin(l((t-e[1])/(e[2]/2+j),1)),e[0]+(i?-1:1)*d(m)*(e[2]/2+j)},$=0;C>$;$++)S=y[$],f=g+i*b,(!x||S.visible)&&(i+=S.percentage/100),h=g+i*b,S.shapeType="arc",S.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:a(f*s)/s,end:a(h*s)/s},m=(h+f)/2,m>1.5*p?m-=2*p:-p/2>m&&(m+=2*p),S.slicedTranslation={translateX:a(d(m)*o),translateY:a(u(m)*o)},w=d(m)*e[2]/2,k=u(m)*e[2]/2,S.tooltipPos=[e[0]+.7*w,e[1]+.7*k],S.half=-p/2>m||m>p/2?1:0,S.angle=m,c=l(c,j/2),S.labelPos=[e[0]+w+d(m)*j,e[1]+k+u(m)*j,e[0]+w+d(m)*c,e[1]+k+u(m)*c,e[0]+w,e[1]+k,0>j?"center":S.half?"right":"left",m]},drawGraph:null,drawPoints:function(){var n,a,r,o,e=this,t=e.chart,i=t.renderer,s=e.options.shadow;s&&!e.shadowGroup&&(e.shadowGroup=i.g("shadow").add(e.group)),di(e.points,function(t){a=t.graphic,o=t.shapeArgs,r=t.shadowGroup,s&&!r&&(r=t.shadowGroup=i.g("shadow").add(e.shadowGroup)),n=t.sliced?t.slicedTranslation:{translateX:0,translateY:0},r&&r.attr(n),a?a.animate($t(o,n)):t.graphic=a=i[t.shapeType](o).setRadialReference(e.center).attr(t.pointAttr[t.selected?J:Z]).attr({"stroke-linejoin":"round"}).attr(n).add(e.group).shadow(s,r),void 0!==t.visible&&t.setVisible(t.visible)})},sortByAngle:function(e,t){e.sort(function(e,i){return void 0!==e.angle&&(i.angle-e.angle)*t})},drawLegendSymbol:qi.drawRectangle,getCenter:Bi.getCenter,getSymbol:F};Zi=qt(Ui,Zi),jt.pie=Zi;var Qi=xt.TrackerMixin={drawTrackerPoint:function(){var t=this,i=t.chart,n=i.pointer,a=t.options.cursor,s=a&&{cursor:a},r=function(n){var s,a=n.target;for(i.hoverSeries!==t&&t.onMouseOver();a&&!s;)s=a.point,a=a.parentNode;s!==e&&s!==i.hoverPoint&&s.onMouseOver(n)};di(t.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),t._hasTracking||(di(t.trackerGroups,function(e){t[e]&&(t[e].addClass(B+"tracker").on("mouseover",r).on("mouseout",function(e){n.onTrackerMouseOut(e)}).css(s),C&&t[e].on("touchstart",r))}),t._hasTracking=!0)},drawTrackerGraph:function(){var f,h,e=this,t=e.options,i=t.trackByArea,n=[].concat(i?e.areaPath:e.graphPath),a=n.length,s=e.chart,r=s.pointer,o=s.renderer,l=s.options.tooltip.snap,c=e.tracker,d=t.cursor,u=d&&{cursor:d},p=e.singlePoints,m=function(){s.hoverSeries!==e&&e.onMouseOver()},_="rgba(192,192,192,"+(k?1e-4:.002)+")";if(a&&!i)for(h=a+1;h--;)n[h]===X&&n.splice(h+1,0,n[h+1]-l,n[h+2],G),(h&&n[h]===X||h===a)&&n.splice(h,0,G,n[h-2]+l,n[h-1]);for(h=0;p.length>h;h++)f=p[h],n.push(X,f.plotX-l,f.plotY,G,f.plotX+l,f.plotY);c?c.attr({d:n}):(e.tracker=o.path(n).attr({"stroke-linejoin":"round",visibility:e.visible?Y:W,stroke:_,fill:i?_:V,"stroke-width":t.lineWidth+(i?0:2*l),zIndex:2}).add(e.group),di([e.tracker,e.markerGroup],function(e){e.addClass(B+"tracker").on("mouseover",m).on("mouseout",function(e){r.onTrackerMouseOut(e)}).css(u),C&&e.on("touchstart",m)}))}};jt.column&&(Gi.prototype.drawTracker=Qi.drawTrackerPoint),jt.pie&&(jt.pie.prototype.drawTracker=Qi.drawTrackerPoint),jt.scatter&&(ScatterSeries.prototype.drawTracker=Qi.drawTrackerPoint),$t(Ri.prototype,{setItemEvents:function(e,t,i,n,a){var s=this;(i?t:e.legendGroup).on("mouseover",function(){e.setState(Q),t.css(s.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?n:a),e.setState()}).on("click",function(t){var i="legendItemClick",n=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(i,t,n):_i(e,i,t,n)})},createCheckboxForItem:function(e){var t=this;e.checkbox=Rt("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},t.options.itemCheckboxStyle,t.chart.container),hi(e.checkbox,"click",function(t){var i=t.target;_i(e,"checkboxClick",{checked:i.checked},function(){e.select()})})}}),T.legend.itemStyle.cursor="pointer",$t(Wi.prototype,{showResetZoom:function(){var e=this,t=T.lang,i=e.options.chart.resetZoomButton,n=i.theme,a=n.states,s="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},n,a&&a.hover).attr({align:i.position.align,title:t.resetZoomTitle}).add().align(i.position,!1,s)},zoomOut:function(){var e=this;_i(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var i,s,t=this,n=t.pointer,a=!1;!e||e.resetSelection?di(t.axes,function(e){i=e.zoom()}):di(e.xAxis.concat(e.yAxis),function(e){var t=e.axis,s=t.isXAxis;(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])&&(i=t.zoom(e.min,e.max),t.displayBtn&&(a=!0))}),s=t.resetZoomButton,a&&!s?t.showResetZoom():!a&&Tt(s)&&(t.resetZoomButton=s.destroy()),i&&t.redraw(Lt(t.options.chart.animation,e&&e.animation,100>t.pointCount))},pan:function(e,t){var a,i=this,n=i.hoverPoints;n&&di(n,function(e){e.setState()}),di("xy"===t?[1,0]:[1],function(t){var n=e[t?"chartX":"chartY"],s=i[t?"xAxis":"yAxis"][0],r=i[t?"mouseDownX":"mouseDownY"],c=(s.pointRange||0)/2,d=s.getExtremes(),u=s.toValue(r-n,!0)+c,p=s.toValue(r+i[t?"plotWidth":"plotHeight"]-n,!0)-c;s.series.length&&u>l(d.dataMin,d.min)&&o(d.dataMax,d.max)>p&&(s.setExtremes(u,p,!1,!1,{trigger:"pan"}),a=!0),i[t?"mouseDownX":"mouseDownY"]=n}),a&&i.redraw(!1),Ht(i.container,{cursor:"move"})}}),$t(Yi.prototype,{select:function(e,t){var i=this,n=i.series,a=n.chart;e=Lt(e,!i.selected),i.firePointEvent(e?"select":"unselect",{accumulate:t},function(){i.selected=i.options.selected=e,n.options.data[ci(i,n.data)]=i.options,i.setState(e&&J),t||di(a.getSelectedPoints(),function(e){e.selected&&e!==i&&(e.selected=e.options.selected=!1,n.options.data[ci(e,n.data)]=e.options,e.setState(Z),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this,i=t.series,n=i.chart,a=n.tooltip,s=n.hoverPoint;s&&s!==t&&s.onMouseOut(),t.firePointEvent("mouseOver"),!a||a.shared&&!i.noSharedTooltip||a.refresh(t,e),t.setState(Q),n.hoverPoint=t},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;t&&-1!==ci(this,t)||(this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var n,e=this,t=Ct(e.series.options.point,e.options),i=t.events;e.events=i;for(n in i)hi(e,n,i[n]);this.hasImportedEvents=!0}},setState:function(e,t){var h,_,g,v,i=this,n=i.plotX,a=i.plotY,s=i.series,r=s.options.states,o=wi[s.type].marker&&s.options.marker,l=o&&!o.enabled,c=o&&o.states[e],d=c&&c.enabled===!1,u=s.stateMarkerGraphic,p=i.marker||{},f=s.chart,m=s.halo;e=e||Z,v=i.pointAttr[e]||s.pointAttr[e],e===i.state&&!t||i.selected&&e!==J||r[e]&&r[e].enabled===!1||e&&(d||l&&c.enabled===!1)||e&&p.states&&p.states[e]&&p.states[e].enabled===!1||(i.graphic?(h=o&&i.graphic.symbolName&&v.r,i.graphic.attr(Ct(v,h?{x:n-h,y:a-h,width:2*h,height:2*h}:{})),u&&u.hide()):(e&&c&&(h=c.radius,g=p.symbol||s.symbol,u&&u.currentSymbol!==g&&(u=u.destroy()),u?u[t?"animate":"attr"]({x:n-h,y:a-h}):g&&(s.stateMarkerGraphic=u=f.renderer.symbol(g,n-h,a-h,2*h,2*h).attr(v).add(s.markerGroup),u.currentSymbol=g)),u&&u[e&&f.isInsidePlot(n,a,f.inverted)?"show":"hide"]()),_=r[e]&&r[e].halo,_&&_.size?(m||(s.halo=m=f.renderer.path().add(s.seriesGroup)),m.attr($t({fill:Ei(i.color||s.color).setOpacity(_.opacity).get()},_.attributes))[t?"animate":"attr"]({d:i.haloPath(_.size)})):m&&m.attr({d:[]}),i.state=e)},haloPath:function(e){var t=this.series,i=t.chart,n=t.getPlotBox(),a=i.inverted;return i.renderer.symbols.circle(n.translateX+(a?t.yAxis.len-this.plotY:this.plotX)-e,n.translateY+(a?t.xAxis.len-this.plotX:this.plotY)-e,2*e,2*e)}}),$t(Ui.prototype,{onMouseOver:function(){var e=this,t=e.chart,i=t.hoverSeries;i&&i!==e&&i.onMouseOut(),e.options.events.mouseOver&&_i(e,"mouseOver"),e.setState(Q),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,i=e.chart,n=i.tooltip,a=i.hoverPoint;a&&a.onMouseOut(),e&&t.events.mouseOut&&_i(e,"mouseOut"),!n||t.stickyTracking||n.shared&&!e.noSharedTooltip||n.hide(),e.setState(),i.hoverSeries=null},setState:function(e){var o,t=this,i=t.options,n=t.graph,a=t.graphNeg,s=i.states,r=i.lineWidth;if(e=e||Z,t.state!==e){if(t.state=e,s[e]&&s[e].enabled===!1)return;e&&(r=s[e].lineWidth||r+1),n&&!n.dashstyle&&(o={"stroke-width":r},n.attr(o),a&&a.attr(o))}},setVisible:function(t,i){var r,n=this,a=n.chart,s=n.legendItem,o=a.options.chart.ignoreHiddenSeries,l=n.visible;n.visible=t=n.userOptions.visible=t===e?!l:t,r=t?"show":"hide",di(["group","dataLabelsGroup","markerGroup","tracker"],function(e){n[e]&&n[e][r]()}),a.hoverSeries===n&&n.onMouseOut(),s&&a.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&di(a.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),di(n.linkedSeries,function(e){e.setVisible(t,!1)}),o&&(a.isDirtyBox=!0),i!==!1&&a.redraw(),_i(n,r)},setTooltipPoints:function(t){var a,r,c,f,h,m,_,i=this,n=[],d=i.xAxis,u=d&&d.getExtremes(),p=d?d.tooltipLen||d.len:i.chart.plotSizeX,g=[];if(i.options.enableMouseTracking!==!1&&!i.singularTooltips){for(t&&(i.tooltipPoints=null),di(i.segments||i.points,function(e){n=n.concat(e)}),d&&d.reversed&&(n=n.reverse()),i.orderTooltipPoints&&i.orderTooltipPoints(n),a=n.length,_=0;a>_;_++)if(f=n[_],h=f.x,h>=u.min&&u.max>=h)for(m=n[_+1],r=c===e?0:c+1,c=n[_+1]?l(o(0,s((f.clientX+(m?m.wrappedClientX||m.clientX:p))/2)),p):p;r>=0&&c>=r;)g[r++]=f;i.tooltipPoints=g}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var i=this;i.selected=t=t===e?!i.selected:t,i.checkbox&&(i.checkbox.checked=t),_i(i,t?"select":"unselect")},drawTracker:Qi.drawTrackerGraph}),$t(xt,{Axis:Ai,Chart:Wi,Color:Ei,Point:Yi,Tick:Mi,Renderer:$,Series:Ui,SVGElement:Ti,SVGRenderer:zi,arrayMin:Qt,arrayMax:Jt,charts:I,dateFormat:z,format:Vt,pathAnim:A,getOptions:$i,hasBidiBug:j,isTouchDevice:y,numberFormat:Wt,seriesTypes:jt,setOptions:xi,addEvent:hi,removeEvent:mi,createElement:Rt,discardElement:ti,css:Ht,each:di,extend:$t,map:fi,merge:Ct,pick:Lt,splat:Nt,extendClass:qt,pInt:Dt,wrap:Yt,svg:k,canvas:x,vml:!k&&!x,product:N,version:L})}(),function(e){function n(t){var i=t||window.event,n=[].slice.call(arguments,1),a=0,r=0,o=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(a=i.wheelDelta/120),i.detail&&(a=-i.detail/3),o=a,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(o=0,r=-1*a),void 0!==i.wheelDeltaY&&(o=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(r=-1*i.wheelDeltaX/120),n.unshift(t,a,r,o),(e.event.dispatch||e.event.handle).apply(this,n)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=t.length;i;)e.event.fixHooks[t[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){var t={init:function(t){var i={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},t=e.extend(!0,i,t);return this.each(function(){var i=e(this);if(t.set_width&&i.css("width",t.set_width),t.set_height&&i.css("height",t.set_height),e(document).data("mCustomScrollbar-index")){var n=parseInt(e(document).data("mCustomScrollbar-index"));e(document).data("mCustomScrollbar-index",n+1)}else e(document).data("mCustomScrollbar-index","1");i.wrapInner("<div class='mCustomScrollBox mCS-"+t.theme+"' id='mCSB_"+e(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+e(document).data("mCustomScrollbar-index"));var a=i.children(".mCustomScrollBox");if(t.horizontalScroll){a.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var s=a.children(".mCSB_h_wrapper");s.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:s.children().outerWidth(),position:"relative"}).unwrap()}else a.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var r=a.children(".mCSB_container");e.support.touch&&r.addClass("mCS_touch"),r.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var o=a.children(".mCSB_scrollTools"),l=o.children(".mCSB_draggerContainer"),c=l.children(".mCSB_dragger");if(t.horizontalScroll?c.data("minDraggerWidth",c.width()):c.data("minDraggerHeight",c.height()),t.scrollButtons.enable&&(t.horizontalScroll?o.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):o.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),a.bind("scroll",function(){i.is(".mCS_disabled")||a.scrollTop(0).scrollLeft(0)}),i.data({mCS_Init:!0,mCustomScrollbarIndex:e(document).data("mCustomScrollbar-index"),horizontalScroll:t.horizontalScroll,scrollInertia:t.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:t.mouseWheel,mouseWheelPixels:t.mouseWheelPixels,autoDraggerLength:t.autoDraggerLength,autoHideScrollbar:t.autoHideScrollbar,snapAmount:t.snapAmount,snapOffset:t.snapOffset,scrollButtons_enable:t.scrollButtons.enable,scrollButtons_scrollType:t.scrollButtons.scrollType,scrollButtons_scrollSpeed:t.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:t.scrollButtons.scrollAmount,autoExpandHorizontalScroll:t.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:t.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:t.advanced.normalizeMouseWheelDelta,contentTouchScroll:t.contentTouchScroll,onScrollStart_Callback:t.callbacks.onScrollStart,onScroll_Callback:t.callbacks.onScroll,onTotalScroll_Callback:t.callbacks.onTotalScroll,onTotalScrollBack_Callback:t.callbacks.onTotalScrollBack,onTotalScroll_Offset:t.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:t.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:t.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),t.horizontalScroll)"none"!==i.css("max-width")&&(t.advanced.updateOnContentResize||(t.advanced.updateOnContentResize=!0));else if(i.data("scrollnoheight")){var d=e(window).height();a.css("max-height",d-i.data("scrollnoheight"))}else{var u=!1,p=parseInt(i.css("max-height"));i.css("max-height").indexOf("%")>=0&&(u=p,p=i.parent().height()*u/100),i.css("overflow","hidden"),a.css("max-height",p)}if(i.mCustomScrollbar("update"),t.advanced.updateOnBrowserResize){var f,h=e(window).width(),m=e(window).height();e(window).bind("resize."+i.data("mCustomScrollbarIndex"),function(){f&&clearTimeout(f),f=setTimeout(function(){if(!i.is(".mCS_disabled")&&!i.is(".mCS_destroyed")){var t=e(window).width(),n=e(window).height();(h!==t||m!==n)&&("none"!==i.css("max-height")&&u&&a.css("max-height",i.parent().height()*u/100),i.data("scrollnoheight")&&a.css("max-height",n-i.data("scrollnoheight")),i.mCustomScrollbar("update"),h=t,m=n)}},150)})}if(t.advanced.updateOnContentResize){var _;if(t.horizontalScroll)var g=r.outerWidth(!0);else var g=r.outerHeight(!0);_=setInterval(function(){if(t.horizontalScroll){t.advanced.autoExpandHorizontalScroll&&r.css({position:"absolute",width:"auto"}).css({width:r.outerWidth()});var e=r.outerWidth(!0)}else var e=r.outerHeight(!0);e!=g&&(i.mCustomScrollbar("update"),g=e)},300)}})},update:function(){var t=e(this),i=t.children(".mCustomScrollBox"),n=i.children(".mCSB_container");n.removeClass("mCS_no_scrollbar"),t.removeClass("mCS_disabled mCS_destroyed"),i.scrollTop(0).scrollLeft(0);var a=i.children(".mCSB_scrollTools"),s=a.children(".mCSB_draggerContainer"),r=s.children(".mCSB_dragger");if(t.data("horizontalScroll")){var o=a.children(".mCSB_buttonLeft"),l=a.children(".mCSB_buttonRight"),c=i.width();t.data("autoExpandHorizontalScroll")&&n.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:n.outerWidth(),position:"relative"}).unwrap();var d=n.outerWidth()}else var u=a.children(".mCSB_buttonUp"),p=a.children(".mCSB_buttonDown"),f=i.height(),h=n.outerHeight();if(h>f&&!t.data("horizontalScroll")){a.css("display","block");var m=s.height();if(t.data("autoDraggerLength")){var _=Math.round(f/h*m),g=r.data("minDraggerHeight");if(g>=_)r.css({height:g});else if(_>=m-10){var v=m-10;r.css({height:v})}else r.css({height:_});r.children(".mCSB_dragger_bar").css({"line-height":r.height()+"px"})}var b=r.height(),y=(h-f)/(m-b);t.data("scrollAmount",y).mCustomScrollbar("scrolling",i,n,s,r,u,p,o,l);var w=Math.abs(n.position().top);t.mCustomScrollbar("scrollTo",w,{scrollInertia:0,trigger:"internal"})}else if(d>c&&t.data("horizontalScroll")){a.css("display","block");var k=s.width();if(t.data("autoDraggerLength")){var j=Math.round(c/d*k),x=r.data("minDraggerWidth");if(x>=j)r.css({width:x});else if(j>=k-10){var $=k-10;r.css({width:$})}else r.css({width:j})}var C=r.width(),y=(d-c)/(k-C);t.data("scrollAmount",y).mCustomScrollbar("scrolling",i,n,s,r,u,p,o,l);var w=Math.abs(n.position().left);t.mCustomScrollbar("scrollTo",w,{scrollInertia:0,trigger:"internal"})}else i.unbind("mousewheel focusin"),t.data("horizontalScroll")?r.add(n).css("left",0):r.add(n).css("top",0),a.css("display","none"),n.addClass("mCS_no_scrollbar"),t.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(t,n,a,s,r,o,l,c){function f(e,t,i,n){d.data("horizontalScroll")?d.mCustomScrollbar("scrollTo",s.position().left-t+n,{moveDragger:!0,trigger:"internal"}):d.mCustomScrollbar("scrollTo",s.position().top-e+i,{moveDragger:!0,trigger:"internal"})}function w(e){s.data("preventAction")||(s.data("preventAction",!0),d.mCustomScrollbar("scrollTo",e,{trigger:"internal"}))}function C(){var e=d.data("scrollButtons_scrollSpeed");return"auto"===d.data("scrollButtons_scrollSpeed")&&(e=Math.round((d.data("scrollInertia")+100)/40)),e}var d=e(this);if(!d.data("bindEvent_scrollbar_drag")){var u,p;e.support.msPointer?(s.bind("MSPointerDown",function(t){t.preventDefault(),d.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag");var i=e(this),n=i.offset(),a=t.originalEvent.pageX-n.left,r=t.originalEvent.pageY-n.top;i.width()>a&&a>0&&i.height()>r&&r>0&&(u=r,p=a)}),e(document).bind("MSPointerMove."+d.data("mCustomScrollbarIndex"),function(e){if(e.preventDefault(),d.data("on_drag")){var t=s,i=t.offset(),n=e.originalEvent.pageX-i.left,a=e.originalEvent.pageY-i.top;f(u,p,a,n)}}).bind("MSPointerUp."+d.data("mCustomScrollbarIndex"),function(){d.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})):(s.bind("mousedown touchstart",function(t){t.preventDefault(),t.stopImmediatePropagation();var a,r,i=e(this),n=i.offset();if("touchstart"===t.type){var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];a=o.pageX-n.left,r=o.pageY-n.top}else d.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag"),a=t.pageX-n.left,r=t.pageY-n.top;i.width()>a&&a>0&&i.height()>r&&r>0&&(u=r,p=a)}).bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation();var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],n=e(this),a=n.offset(),s=i.pageX-a.left,r=i.pageY-a.top;f(u,p,r,s)}),e(document).bind("mousemove."+d.data("mCustomScrollbarIndex"),function(e){if(d.data("on_drag")){var t=s,i=t.offset(),n=e.pageX-i.left,a=e.pageY-i.top;f(u,p,a,n)}}).bind("mouseup."+d.data("mCustomScrollbarIndex"),function(){d.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})),d.data({bindEvent_scrollbar_drag:!0})}if(e.support.touch&&d.data("contentTouchScroll")&&!d.data("bindEvent_content_touch")){var h,m,_,g,v,b,y;n.bind("touchstart",function(t){t.stopImmediatePropagation(),h=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],m=e(this),_=m.offset(),v=h.pageX-_.left,g=h.pageY-_.top,b=g,y=v}),n.bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation(),h=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],m=e(this).parent(),_=m.offset(),v=h.pageX-_.left,g=h.pageY-_.top,d.data("horizontalScroll")?d.mCustomScrollbar("scrollTo",y-v,{trigger:"internal"}):d.mCustomScrollbar("scrollTo",b-g,{trigger:"internal"})})}if(d.data("bindEvent_scrollbar_click")||(a.bind("click",function(t){var i=(t.pageY-a.offset().top)*d.data("scrollAmount"),n=e(t.target);d.data("horizontalScroll")&&(i=(t.pageX-a.offset().left)*d.data("scrollAmount")),(n.hasClass("mCSB_draggerContainer")||n.hasClass("mCSB_draggerRail"))&&d.mCustomScrollbar("scrollTo",i,{trigger:"internal",scrollEasing:"draggerRailEase"})}),d.data({bindEvent_scrollbar_click:!0})),d.data("mouseWheel")&&(d.data("bindEvent_mousewheel")||(t.bind("mousewheel",function(e,t){if(!("TEXTAREA"===e.target.tagName&&e.target.scrollHeight>e.target.clientHeight)){e.preventDefault(),e.stopImmediatePropagation();var i,r=d.data("mouseWheelPixels"),o=Math.abs(n.position().top),l=s.position().top,c=a.height()-s.height();d.data("normalizeMouseWheelDelta")&&(t=0>t?-1:1),"auto"===r&&(r=100+Math.round(d.data("scrollAmount")/2)),d.data("horizontalScroll")&&(l=s.position().left,c=a.width()-s.width(),o=Math.abs(n.position().left)),(t>0&&0!==l||0>t&&l!==c)&&(e.preventDefault(),e.stopImmediatePropagation()),i=o-t*r,d.mCustomScrollbar("scrollTo",i,{trigger:"internal"})}}),d.data({bindEvent_mousewheel:!0}))),d.data("scrollButtons_enable"))if("pixels"===d.data("scrollButtons_scrollType"))d.data("horizontalScroll")?(c.add(l).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",k,j),d.data({bindEvent_buttonsContinuous_x:!1}),d.data("bindEvent_buttonsPixels_x")||(c.bind("click",function(e){e.preventDefault(),w(Math.abs(n.position().left)+d.data("scrollButtons_scrollAmount"))}),l.bind("click",function(e){e.preventDefault(),w(Math.abs(n.position().left)-d.data("scrollButtons_scrollAmount"))}),d.data({bindEvent_buttonsPixels_x:!0}))):(o.add(r).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",k,j),d.data({bindEvent_buttonsContinuous_y:!1}),d.data("bindEvent_buttonsPixels_y")||(o.bind("click",function(e){e.preventDefault(),w(Math.abs(n.position().top)+d.data("scrollButtons_scrollAmount"))}),r.bind("click",function(e){e.preventDefault(),w(Math.abs(n.position().top)-d.data("scrollButtons_scrollAmount"))}),d.data({bindEvent_buttonsPixels_y:!0})));else if(d.data("horizontalScroll")){if(c.add(l).unbind("click"),d.data({bindEvent_buttonsPixels_x:!1}),!d.data("bindEvent_buttonsContinuous_x")){c.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollRight:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(n.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var k=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollRight"))};c.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",k),l.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollLeft:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(n.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var j=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollLeft"))};l.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",j),d.data({bindEvent_buttonsContinuous_x:!0})}}else if(o.add(r).unbind("click"),d.data({bindEvent_buttonsPixels_y:!1}),!d.data("bindEvent_buttonsContinuous_y")){o.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollDown:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(n.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var x=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollDown"))};o.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",x),r.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollUp:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(n.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var $=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollUp"))};r.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",$),d.data({bindEvent_buttonsContinuous_y:!0})}d.data("autoScrollOnFocus")&&(d.data("bindEvent_focusin")||(t.bind("focusin",function(){t.scrollTop(0).scrollLeft(0);var i=e(document.activeElement);if(i.is("input,textarea,select,button,a[tabindex],area,object")){var a=n.position().top,s=i.position().top,r=t.height()-i.outerHeight();d.data("horizontalScroll")&&(a=n.position().left,s=i.position().left,r=t.width()-i.outerWidth()),(0>a+s||a+s>r)&&d.mCustomScrollbar("scrollTo",s,{trigger:"internal"})}}),d.data({bindEvent_focusin:!0}))),d.data("autoHideScrollbar")&&(d.data("bindEvent_autoHideScrollbar")||(t.bind("mouseenter",function(){t.addClass("mCS-mouse-over"),i.showScrollbar.call(t.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(e){t.removeClass("mCS-mouse-over"),"mouseleave"===e.type&&i.hideScrollbar.call(t.children(".mCSB_scrollTools"))}),d.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(t,n){function b(e){switch(this.mcs={top:l.position().top,left:l.position().left,draggerTop:u.position().top,draggerLeft:u.position().left,topPct:Math.round(100*Math.abs(l.position().top)/Math.abs(l.outerHeight()-o.height())),leftPct:Math.round(100*Math.abs(l.position().left)/Math.abs(l.outerWidth()-o.width()))},e){case"onScrollStart":void 0!==a.data("mCS_tweenRunning",!0).data("onScrollStart_Callback")&&a.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(a,this.mcs);break;case"whileScrolling":a.data("whileScrolling_Callback").call(a,this.mcs);break;case"onScroll":a.data("onScroll_Callback").call(a,this.mcs);break;case"onTotalScrollBack":a.data("onTotalScrollBack_Callback").call(a,this.mcs);break;case"onTotalScroll":a.data("onTotalScroll_Callback").call(a,this.mcs)}}var r,f,h,m,_,a=e(this),s={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:a.data("scrollInertia"),scrollEasing:a.data("scrollEasing")},n=e.extend(s,n),o=a.children(".mCustomScrollBox"),l=o.children(".mCSB_container"),c=o.children(".mCSB_scrollTools"),d=c.children(".mCSB_draggerContainer"),u=d.children(".mCSB_dragger"),p=draggerSpeed=n.scrollInertia;if(!l.hasClass("mCS_no_scrollbar")&&(a.data({mCS_trigger:n.trigger}),a.data("mCS_Init")&&(n.callbacks=!1),t||0===t)){if("number"==typeof t)n.moveDragger?(r=t,t=a.data("horizontalScroll")?u.position().left*a.data("scrollAmount"):u.position().top*a.data("scrollAmount"),draggerSpeed=0):r=t/a.data("scrollAmount");else if("string"==typeof t){var g;g="top"===t?0:"bottom"!==t||a.data("horizontalScroll")?"left"===t?0:"right"===t&&a.data("horizontalScroll")?l.outerWidth()-o.width():"first"===t?a.find(".mCSB_container").find(":first"):"last"===t?a.find(".mCSB_container").find(":last"):a.find(t):l.outerHeight()-o.height(),1===g.length?(t=a.data("horizontalScroll")?g.position().left:g.position().top,r=t/a.data("scrollAmount")):r=t=g}if(a.data("horizontalScroll")){a.data("onTotalScrollBack_Offset")&&(h=-a.data("onTotalScrollBack_Offset")),a.data("onTotalScroll_Offset")&&(_=o.width()-l.outerWidth()+a.data("onTotalScroll_Offset")),0>r?(r=t=0,clearInterval(a.data("mCSB_buttonScrollLeft")),h||(f=!0)):r>=d.width()-u.width()?(r=d.width()-u.width(),t=o.width()-l.outerWidth(),clearInterval(a.data("mCSB_buttonScrollRight")),_||(m=!0)):t=-t;var v=a.data("snapAmount");v&&(t=Math.round(t/v)*v-a.data("snapOffset")),i.mTweenAxis.call(this,u[0],"left",Math.round(r),draggerSpeed,n.scrollEasing),i.mTweenAxis.call(this,l[0],"left",Math.round(t),p,n.scrollEasing,{onStart:function(){n.callbacks&&!a.data("mCS_tweenRunning")&&b("onScrollStart"),a.data("autoHideScrollbar")&&i.showScrollbar.call(c)},onUpdate:function(){n.callbacks&&b("whileScrolling")},onComplete:function(){n.callbacks&&(b("onScroll"),(f||h&&l.position().left>=h)&&b("onTotalScrollBack"),(m||_&&_>=l.position().left)&&b("onTotalScroll")),u.data("preventAction",!1),a.data("mCS_tweenRunning",!1),a.data("autoHideScrollbar")&&(o.hasClass("mCS-mouse-over")||i.hideScrollbar.call(c))}})}else{a.data("onTotalScrollBack_Offset")&&(h=-a.data("onTotalScrollBack_Offset")),a.data("onTotalScroll_Offset")&&(_=o.height()-l.outerHeight()+a.data("onTotalScroll_Offset")),0>r?(r=t=0,clearInterval(a.data("mCSB_buttonScrollUp")),h||(f=!0)):r>=d.height()-u.height()?(r=d.height()-u.height(),t=o.height()-l.outerHeight(),clearInterval(a.data("mCSB_buttonScrollDown")),_||(m=!0)):t=-t;
var v=a.data("snapAmount");v&&(t=Math.round(t/v)*v-a.data("snapOffset")),u.css("top",Math.round(r)),l.css("top",Math.round(t))}a.data("mCS_Init")&&a.data({mCS_Init:!1})}},stop:function(){var t=e(this),n=t.children().children(".mCSB_container"),a=t.children().children().children().children(".mCSB_dragger");i.mTweenAxisStop.call(this,n[0]),i.mTweenAxisStop.call(this,a[0])},disable:function(t){var i=e(this),n=i.children(".mCustomScrollBox"),a=n.children(".mCSB_container"),s=n.children(".mCSB_scrollTools"),r=s.children().children(".mCSB_dragger");n.unbind("mousewheel focusin mouseenter mouseleave touchend"),a.unbind("touchstart touchmove"),t&&(i.data("horizontalScroll")?r.add(a).css("left",0):r.add(a).css("top",0)),s.css("display","none"),a.addClass("mCS_no_scrollbar"),i.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var t=e(this);t.removeClass("mCustomScrollbar _mCS_"+t.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),e(document).unbind("mousemove."+t.data("mCustomScrollbarIndex")+" mouseup."+t.data("mCustomScrollbarIndex")+" MSPointerMove."+t.data("mCustomScrollbarIndex")+" MSPointerUp."+t.data("mCustomScrollbarIndex")),e(window).unbind("resize."+t.data("mCustomScrollbarIndex"))}},i={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(e,t,i,n,a,s){function m(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function _(){u||r.call(),u=m()-c,g(),u>=e._time&&(e._time=u>e._time?u+d-(u-e._time):u+d-1,u+1>e._time&&(e._time=u+1)),n>e._time?e._id=_request(_):l.call()}function g(){n>0?(e.currVal=y(e._time,p,h,n,a),f[t]=Math.round(e.currVal)+"px"):f[t]=i+"px",o.call()}function v(){d=1e3/60,e._time=u+d,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return g(),setTimeout(e,.01)},e._id=_request(_)}function b(){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)}function y(e,t,i,n,a){switch(a){case"linear":return i*e/n+t;case"easeOutQuad":return e/=n,-i*e*(e-2)+t;case"easeInOutQuad":return e/=n/2,1>e?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t);case"easeOutCubic":return e/=n,e--,i*(e*e*e+1)+t;case"easeOutQuart":return e/=n,e--,-i*(e*e*e*e-1)+t;case"easeOutQuint":return e/=n,e--,i*(e*e*e*e*e+1)+t;case"easeOutCirc":return e/=n,e--,i*Math.sqrt(1-e*e)+t;case"easeOutSine":return i*Math.sin(e/n*(Math.PI/2))+t;case"easeOutExpo":return i*(-Math.pow(2,-10*e/n)+1)+t;case"mcsEaseOut":var s=(e/=n)*e,r=s*e;return t+i*(.499999999999997*r*s+-2.5*s*s+5.5*r+-6.5*s+4*e);case"draggerRailEase":return e/=n/2,1>e?i/2*e*e*e+t:(e-=2,i/2*(e*e*e+2)+t)}}var d,s=s||{},r=s.onStart||function(){},o=s.onUpdate||function(){},l=s.onComplete||function(){},c=m(),u=0,p=e.offsetTop,f=e.style;"left"===t&&(p=e.offsetLeft);var h=i-p;b(),v()},mTweenAxisStop:function(e){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)},rafPolyfill:function(){for(var e=["ms","moz","webkit","o"],t=e.length;--t>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}};i.rafPolyfill.call(),e.support.touch=!!("ontouchstart"in window),e.support.msPointer=window.navigator.msPointerEnabled;var n="https:"==document.location.protocol?"https:":"http:";e.event.special.mousewheel||document.write('<script src="'+n+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"></script>'),e.fn.mCustomScrollbar=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist"),void 0):t.init.apply(this,arguments)}}(jQuery),function(e,t,i,n){"use strict";var a=i("html"),s=i(e),r=i(t),o=i.fancybox=function(){o.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==n,u=function(e){return e&&e.hasOwnProperty&&e instanceof i},p=function(e){return e&&"string"===i.type(e)},f=function(e){return p(e)&&e.indexOf("%")>0},h=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},m=function(e,t){var i=parseInt(e,10)||0;return t&&f(e)&&(i=o.getViewport()[t]/100*i),Math.ceil(i)},_=function(e,t){return m(e,t)+"px"};i.extend(o,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(i.isPlainObject(t)||(t={}),!1!==o.close(!0))?(i.isArray(e)||(e=u(e)?i(e).get():[e]),i.each(e,function(a,s){var l,c,d,f,h,m,_,r={};"object"===i.type(s)&&(s.nodeType&&(s=i(s)),u(s)?(r={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:!0,element:s},i.metadata&&i.extend(!0,r,s.metadata())):r=s),l=t.href||r.href||(p(s)?s:null),c=t.title!==n?t.title:r.title||"",d=t.content||r.content,f=d?"html":t.type||r.type,!f&&r.isDom&&(f=s.data("fancybox-type"),f||(h=s.prop("class").match(/fancybox\.(\w+)/),f=h?h[1]:null)),p(l)&&(f||(o.isImage(l)?f="image":o.isSWF(l)?f="swf":"#"===l.charAt(0)?f="inline":p(s)&&(f="html",d=s)),"ajax"===f&&(m=l.split(/\s+/,2),l=m.shift(),_=m.shift())),d||("inline"===f?l?d=i(p(l)?l.replace(/.*(?=#[^\s]+$)/,""):l):r.isDom&&(d=s):"html"===f?d=l:f||l||!r.isDom||(f="inline",d=s)),i.extend(r,{href:l,type:f,content:d,title:c,selector:_}),e[a]=r}),o.opts=i.extend(!0,{},o.defaults,t),t.keys!==n&&(o.opts.keys=t.keys?i.extend({},o.defaults.keys,t.keys):!1),o.group=e,o._start(o.opts.index)):void 0},cancel:function(){var e=o.coming;e&&!1!==o.trigger("onCancel")&&(o.hideLoading(),o.ajaxLoad&&o.ajaxLoad.abort(),o.ajaxLoad=null,o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),o.coming=null,o.current||o._afterZoomOut(e))},close:function(e){o.cancel(),!1!==o.trigger("beforeClose")&&(o.unbindEvents(),o.isActive&&(o.isOpen&&e!==!0?(o.isOpen=o.isOpened=!1,o.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),o.wrap.stop(!0,!0).removeClass("fancybox-opened"),o.transitions[o.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),o._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(o.player.timer)},i=function(){t(),o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},n=function(){t(),r.unbind(".player"),o.player.isActive=!1,o.trigger("onPlayEnd")},a=function(){o.current&&(o.current.loop||o.group.length-1>o.current.index)&&(o.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":t}),i(),o.trigger("onPlayStart"))};e===!0||!o.player.isActive&&e!==!1?a():n()},next:function(e){var t=o.current;t&&(p(e)||(e=t.direction.next),o.jumpto(t.index+1,e,"next"))},prev:function(e){var t=o.current;t&&(p(e)||(e=t.direction.prev),o.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var a=o.current;a&&(e=m(e),o.direction=t||a.direction[e>=a.index?"next":"prev"],o.router=i||"jumpto",a.loop&&(0>e&&(e=a.group.length+e%a.group.length),e%=a.group.length),a.group[e]!==n&&(o.cancel(),o._start(e)))},reposition:function(e,t){var s,n=o.current,a=n?n.wrap:null;a&&(s=o._getPosition(t),e&&"scroll"===e.type?(delete s.position,a.stop(!0,!0).animate(s,200)):(a.css(s),n.pos=i.extend({},n.dim,s)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null),o.isOpen&&!c&&(c=setTimeout(function(){var n=o.current;n&&!o.isClosing&&(o.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&o._setDimension(),"scroll"===t&&n.canShrink||o.reposition(e),o.trigger("onUpdate"),c=null)},i&&!d?0:300))},toggle:function(e){o.isOpen&&(o.current.fitToView="boolean"===i.type(e)?e:!o.current.fitToView,d&&(o.wrap.removeAttr("style").addClass("fancybox-tmp"),o.trigger("onUpdate")),o.update())},hideLoading:function(){r.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;o.hideLoading(),e=i('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body"),r.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),o.cancel())}),o.defaults.fixed||(t=o.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=o.current&&o.current.locked||!1,i={x:s.scrollLeft(),y:s.scrollTop()};return t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:s.width(),i.h=d&&e.innerHeight?e.innerHeight:s.height()),i},unbindEvents:function(){o.wrap&&u(o.wrap)&&o.wrap.unbind(".fb"),r.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var t,e=o.current;e&&(s.bind("orientationchange.fb"+(d?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),o.update),t=e.keys,t&&r.bind("keydown.fb",function(a){var s=a.which||a.keyCode,r=a.target||a.srcElement;return 27===s&&o.coming?!1:(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||r&&(r.type||i(r).is("[contenteditable]"))||i.each(t,function(t,r){return e.group.length>1&&r[s]!==n?(o[t](r[s]),a.preventDefault(),!1):i.inArray(s,r)>-1?(o[t](),a.preventDefault(),!1):void 0}),void 0)}),i.fn.mousewheel&&e.mouseWheel&&o.wrap.bind("mousewheel.fb",function(t,n,a,s){for(var r=t.target||null,l=i(r),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=h(l[0]),l=i(l).parent();0===n||c||o.group.length>1&&!e.canShrink&&(s>0||a>0?o.prev(s>0?"down":"left"):(0>s||0>a)&&o.next(0>s?"up":"right"),t.preventDefault())}))},trigger:function(e,t){var n,a=t||o.coming||o.current;if(a){if(i.isFunction(a[e])&&(n=a[e].apply(a,Array.prototype.slice.call(arguments,1))),n===!1)return!1;a.helpers&&i.each(a.helpers,function(t,n){n&&o.helpers[t]&&i.isFunction(o.helpers[t][e])&&o.helpers[t][e](i.extend(!0,{},o.helpers[t].defaults,n),a)}),r.trigger(e)}},isImage:function(e){return p(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return p(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var n,a,s,r,l,t={};if(e=m(e),n=o.group[e]||null,!n)return!1;if(t=i.extend(!0,{},o.opts,n),r=t.margin,l=t.padding,"number"===i.type(r)&&(t.margin=[r,r,r,r]),"number"===i.type(l)&&(t.padding=[l,l,l,l]),t.modal&&i.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=o.group,t.index=e,o.coming=t,!1===o.trigger("beforeLoad"))return o.coming=null,void 0;if(s=t.type,a=t.href,!s)return o.coming=null,o.current&&o.router&&"jumpto"!==o.router?(o.current.index=e,o[o.router](o.direction)):!1;if(o.isActive=!0,("image"===s||"swf"===s)&&(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),"image"===s&&(t.aspectRatio=!0),"iframe"===s&&d&&(t.scrolling="scroll"),t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)}),i.each(["Top","Right","Bottom","Left"],function(e,i){t.skin.css("padding"+i,_(t.padding[e]))}),o.trigger("onReady"),"inline"===s||"html"===s){if(!t.content||!t.content.length)return o._error("content")}else if(!a)return o._error("href");"image"===s?o._loadImage():"ajax"===s?o._loadAjax():"iframe"===s?o._loadIframe():o._afterLoad()},_error:function(e){i.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:o.coming.tpl.error}),o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,o.coming.width=this.width/o.opts.pixelRatio,o.coming.height=this.height/o.opts.pixelRatio,o._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,o._error("image")},e.src=o.coming.href,e.complete!==!0&&o.showLoading()},_loadAjax:function(){var e=o.coming;o.showLoading(),o.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){o.coming&&"abort"!==t?o._error("ajax",e):o.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,o._afterLoad())}}))},_loadIframe:function(){var e=o.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(o.showLoading(),t.one("load",function(){i(this).data("ready",1),d||i(this).bind("load.fb",o.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),o._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||o._afterLoad()},_preloadImages:function(){var a,s,e=o.group,t=o.current,i=e.length,n=t.preload?Math.min(t.preload,i-1):0;for(s=1;n>=s;s+=1)a=e[(t.index+s)%i],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,s,r,l,c,d,e=o.coming,t=o.current,n="fancybox-placeholder";if(o.hideLoading(),e&&o.isActive!==!1){if(!1===o.trigger("afterLoad",e,t))return e.wrap.stop(!0).trigger("onReset").remove(),o.coming=null,void 0;switch(t&&(o.trigger("beforeChange",t),t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),o.unbindEvents(),a=e,s=e.content,r=e.type,l=e.scrolling,i.extend(o,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:t}),c=a.href,r){case"inline":case"ajax":case"html":a.selector?s=i("<div>").html(s).find(a.selector):u(s)&&(s.data(n)||s.data(n,i('<div class="'+n+'"></div>').insertAfter(s).hide()),s=s.show().detach(),a.wrap.bind("onReset",function(){i(this).find(s).length&&s.hide().replaceAll(s.data(n)).data(n,!1)}));break;case"image":s=a.tpl.image.replace("{href}",c);break;case"swf":s='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+c+'"></param>',d="",i.each(a.swf,function(e,t){s+='<param name="'+e+'" value="'+t+'"></param>',d+=" "+e+'="'+t+'"'}),s+='<embed src="'+c+'" type="application/x-shockwave-flash" width="100%" height="100%"'+d+"></embed></object>"}u(s)&&s.parent().is(a.inner)||a.inner.append(s),o.trigger("beforeShow"),a.inner.css("overflow","yes"===l?"scroll":"no"===l?"hidden":l),o._setDimension(),o.reposition(),o.isOpen=!1,o.coming=null,o.bindEvents(),o.isOpened?t.prevMethod&&o.transitions[t.prevMethod]():i(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),o.transitions[o.isOpened?a.nextMethod:a.openMethod](),o._preloadImages()}},_setDimension:function(){var x,$,C,S,D,E,T,z,M,A,P,F,I,O,N,e=o.getViewport(),t=0,n=!1,a=!1,s=o.wrap,r=o.skin,l=o.inner,c=o.current,d=c.width,u=c.height,p=c.minWidth,h=c.minHeight,g=c.maxWidth,v=c.maxHeight,b=c.scrolling,y=c.scrollOutside?c.scrollbarWidth:0,w=c.margin,k=m(w[1]+w[3]),j=m(w[0]+w[2]);if(s.add(r).add(l).width("auto").height("auto").removeClass("fancybox-tmp"),x=m(r.outerWidth(!0)-r.width()),$=m(r.outerHeight(!0)-r.height()),C=k+x,S=j+$,D=f(d)?(e.w-C)*m(d)/100:d,E=f(u)?(e.h-S)*m(u)/100:u,"iframe"===c.type){if(O=c.content,c.autoHeight&&1===O.data("ready"))try{O[0].contentWindow.document.location&&(l.width(D).height(9999),N=O.contents().find("body"),y&&N.css("overflow-x","hidden"),E=N.outerHeight(!0))}catch(L){}}else(c.autoWidth||c.autoHeight)&&(l.addClass("fancybox-tmp"),c.autoWidth||l.width(D),c.autoHeight||l.height(E),c.autoWidth&&(D=l.width()),c.autoHeight&&(E=l.height()),l.removeClass("fancybox-tmp"));if(d=m(D),u=m(E),M=D/E,p=m(f(p)?m(p,"w")-C:p),g=m(f(g)?m(g,"w")-C:g),h=m(f(h)?m(h,"h")-S:h),v=m(f(v)?m(v,"h")-S:v),T=g,z=v,c.fitToView&&(g=Math.min(e.w-C,g),v=Math.min(e.h-S,v)),F=e.w-k,I=e.h-j,c.aspectRatio?(d>g&&(d=g,u=m(d/M)),u>v&&(u=v,d=m(u*M)),p>d&&(d=p,u=m(d/M)),h>u&&(u=h,d=m(u*M))):(d=Math.max(p,Math.min(d,g)),c.autoHeight&&"iframe"!==c.type&&(l.width(d),u=l.height()),u=Math.max(h,Math.min(u,v))),c.fitToView)if(l.width(d).height(u),s.width(d+x),A=s.width(),P=s.height(),c.aspectRatio)for(;(A>F||P>I)&&d>p&&u>h&&!(t++>19);)u=Math.max(h,Math.min(v,u-10)),d=m(u*M),p>d&&(d=p,u=m(d/M)),d>g&&(d=g,u=m(d/M)),l.width(d).height(u),s.width(d+x),A=s.width(),P=s.height();else d=Math.max(p,Math.min(d,d-(A-F))),u=Math.max(h,Math.min(u,u-(P-I)));y&&"auto"===b&&E>u&&F>d+x+y&&(d+=y),l.width(d).height(u),s.width(d+x),A=s.width(),P=s.height(),n=(A>F||P>I)&&d>p&&u>h,a=c.aspectRatio?T>d&&z>u&&D>d&&E>u:(T>d||z>u)&&(D>d||E>u),i.extend(c,{dim:{width:_(A),height:_(P)},origWidth:D,origHeight:E,canShrink:n,canExpand:a,wPadding:x,hPadding:$,wrapSpace:P-r.outerHeight(!0),skinSpace:r.height()-u}),!O&&c.autoHeight&&u>h&&v>u&&!a&&l.height("auto")},_getPosition:function(e){var t=o.current,i=o.getViewport(),n=t.margin,a=o.wrap.width()+n[1]+n[3],s=o.wrap.height()+n[0]+n[2],r={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&i.h>=s&&i.w>=a?r.position="fixed":t.locked||(r.top+=i.y,r.left+=i.x),r.top=_(Math.max(r.top,r.top+(i.h-s)*t.topRatio)),r.left=_(Math.max(r.left,r.left+(i.w-a)*t.leftRatio)),r},_afterZoomIn:function(){var e=o.current;e&&(o.isOpen=o.isOpened=!0,o.wrap.css("overflow","visible").addClass("fancybox-opened"),o.update(),(e.closeClick||e.nextClick&&o.group.length>1)&&o.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),o[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(o.skin).bind("click.fb",function(e){e.preventDefault(),o.close()}),e.arrows&&o.group.length>1&&((e.loop||e.index>0)&&i(e.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev),(e.loop||o.group.length-1>e.index)&&i(e.tpl.next).appendTo(o.outer).bind("click.fb",o.next)),o.trigger("afterShow"),e.loop||e.index!==e.group.length-1?o.opts.autoPlay&&!o.player.isActive&&(o.opts.autoPlay=!1,o.play()):o.play(!1))},_afterZoomOut:function(e){e=e||o.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),o.trigger("afterClose",e)}}),o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,i=e.orig,n={},a=50,s=50,r=e.hPadding,l=e.wPadding,c=o.getViewport();return!i&&e.isDom&&t.is(":visible")&&(i=t.find("img:first"),i.length||(i=t)),u(i)?(n=i.offset(),i.is("img")&&(a=i.outerWidth(),s=i.outerHeight())):(n.top=c.y+(c.h-s)*e.topRatio,n.left=c.x+(c.w-a)*e.leftRatio),("fixed"===o.wrap.css("position")||e.locked)&&(n.top-=c.y,n.left-=c.x),n={top:_(n.top-r*e.topRatio),left:_(n.left-l*e.leftRatio),width:_(a+l),height:_(s+r)}},step:function(e,t){var i,n,a,s=t.prop,r=o.current,l=r.wrapSpace,c=r.skinSpace;("width"===s||"height"===s)&&(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),o.isClosing&&(i=1-i),n="width"===s?r.wPadding:r.hPadding,a=e-n,o.skin[s](m("width"===s?a:a-l*i)),o.inner[s](m("width"===s?a:a-l*i-c*i)))},zoomIn:function(){var e=o.current,t=e.pos,n=e.openEffect,a="elastic"===n,s=i.extend({opacity:1},t);delete s.position,a?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),o.wrap.css(t).animate(s,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:a?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),o.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var r,e=o.current,t=e.nextEffect,i=e.pos,n={opacity:1},a=o.direction,s=200;i.opacity=.1,"elastic"===t&&(r="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(i[r]=_(m(i[r])-s),n[r]="+="+s+"px"):(i[r]=_(m(i[r])+s),n[r]="-="+s+"px")),"none"===t?o._afterZoomIn():o.wrap.css(i).animate(n,{duration:e.nextSpeed,easing:e.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var e=o.previous,t=e.prevEffect,n={opacity:.1},a=o.direction,s=200;"elastic"===t&&(n["down"===a||"up"===a?"top":"left"]=("up"===a||"left"===a?"-":"+")+"="+s+"px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},o.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){e=i.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(o.coming?o.coming.parent:e.parent),this.fixed=!1,e.fixed&&o.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(s.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){return i(e.target).hasClass("fancybox-overlay")?(o.isActive?o.close():t.close(),!1):void 0}),this.overlay.css(e.css).show()},close:function(){var e,t;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),e=s.scrollTop(),t=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(e).scrollLeft(t)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var i,e="100%";this.overlay.width(e).height("100%"),l?(i=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),r.width()>i&&(e=r.width())):r.width()>s.width()&&(e=r.width()),this.overlay.width(e).height(r.height())},onReady:function(e,t){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(n||(this.margin=r.height()>s.height()?i("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1),e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,a;t.locked&&(this.margin!==!1&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=s.scrollTop(),a=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(n).scrollLeft(a)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!o.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},o.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var s,r,t=o.current,n=t.title,a=e.type;if(i.isFunction(n)&&(n=n.call(t.element,t)),p(n)&&""!==i.trim(n)){switch(s=i('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+n+"</div>"),a){case"inside":r=o.skin;break;case"outside":r=o.wrap;break;case"over":r=o.inner;break;default:r=o.skin,s.appendTo("body"),l&&s.width(s.width()),s.wrapInner('<span class="child"></span>'),o.current.margin[2]+=Math.abs(m(s.css("margin-bottom")))}s["top"===e.position?"prependTo":"appendTo"](r)}}},i.fn.fancybox=function(e){var t,n=i(this),a=this.selector||"",s=function(s){var c,d,r=i(this).blur(),l=t;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||r.is(".fancybox-wrap")||(c=e.groupAttr||"data-fancybox-group",d=r.attr(c),d||(c="rel",d=r.get(0)[c]),d&&""!==d&&"nofollow"!==d&&(r=a.length?i(a):n,r=r.filter("["+c+'="'+d+'"]'),l=r.index(this)),e.index=l,o.open(r,e)!==!1&&s.preventDefault())};return e=e||{},t=e.index||0,a&&e.live!==!1?r.undelegate(a,"click.fb-start").delegate(a+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):n.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var t,s;i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n}),i.support.fixedPosition===n&&(i.support.fixedPosition=function(){var e=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=20===e[0].offsetTop||15===e[0].offsetTop;return e.remove(),t}()),i.extend(o.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),t=i(e).width(),a.addClass("fancybox-lock-test"),s=i(e).width(),a.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(s-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(e){var t=e.fancybox;t.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(e,t){return e.skipSingle&&2>t.group.length?(t.helpers.buttons=!1,t.closeBtn=!0,void 0):(t.margin["bottom"===e.position?2:0]+=30,void 0)},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(i,n){var a=this.buttons;a||(this.list=e(i.tpl).addClass(i.position).appendTo("body"),a={prev:this.list.find(".btnPrev").click(t.prev),next:this.list.find(".btnNext").click(t.next),play:this.list.find(".btnPlay").click(t.play),toggle:this.list.find(".btnToggle").click(t.toggle),close:this.list.find(".btnClose").click(t.close)}),n.index>0||n.loop?a.prev.removeClass("btnDisabled"):a.prev.addClass("btnDisabled"),n.loop||n.group.length-1>n.index?(a.next.removeClass("btnDisabled"),a.play.removeClass("btnDisabled")):(a.next.addClass("btnDisabled"),a.play.addClass("btnDisabled")),this.buttons=a,this.onUpdate(i,n)},onUpdate:function(e,t){var i;this.buttons&&(i=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),t.canShrink?i.addClass("btnToggleOn"):t.canExpand||i.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(e){var t=e.fancybox;t.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(t){var i;return t.element&&(i=e(t.element).find("img").attr("src")),!i&&"image"===t.type&&t.href&&(i=t.href),i}},wrap:null,list:null,width:0,init:function(t,i){var a,n=this,s=t.width,r=t.height,o=t.source;a="";for(var l=0;i.group.length>l;l++)a+='<li><a style="width:'+s+"px;height:"+r+'px;" href="javascript:jQuery.fancybox.jumpto('+l+');"></a></li>';this.wrap=e('<div id="fancybox-thumbs"></div>').addClass(t.position).appendTo("body"),this.list=e("<ul>"+a+"</ul>").appendTo(this.wrap),e.each(i.group,function(t){var a=o(i.group[t]);a&&e("<img />").load(function(){var o,l,c,i=this.width,a=this.height;n.list&&i&&a&&(o=i/s,l=a/r,c=n.list.children().eq(t).find("a"),o>=1&&l>=1&&(o>l?(i=Math.floor(i/l),a=r):(i=s,a=Math.floor(a/o))),e(this).css({width:i,height:a,top:Math.floor(r/2-a/2),left:Math.floor(s/2-i/2)}),c.width(s).height(r),e(this).hide().appendTo(c).fadeIn(300))}).attr("src",a)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(i.group.length+1)).css("left",Math.floor(.5*e(window).width()-(i.index*this.width+.5*this.width)))},beforeLoad:function(e,t){return 2>t.group.length?(t.helpers.thumbs=!1,void 0):(t.margin["top"===e.position?0:2]+=e.height+15,void 0)},afterShow:function(e,t){this.list?this.onUpdate(e,t):this.init(e,t),this.list.children().removeClass("active").eq(t.index).addClass("active")},onUpdate:function(t,i){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*e(window).width()-(i.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery),function(e){"use strict";var t=e.fancybox,i=function(t,i,n){return n=n||"","object"===e.type(n)&&(n=e.param(n,!0)),e.each(i,function(e,i){t=t.replace("$"+e,i||"")}),n.length&&(t+=(t.indexOf("?")>0?"&":"?")+n),t};t.helpers.media={defaults:{youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(t,i,n){return n.swf.flashVars="playerVars="+e.param(i,!0),"//www.metacafe.com/fplayer/"+t[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[1]+"/"+e[3]+""+e[4]+"&output="+(e[4].indexOf("layer=c")>0?"svembed":"embed")
}}},beforeLoad:function(t,n){var r,o,l,c,a=n.href||"",s=!1;for(r in t)if(t.hasOwnProperty(r)&&(o=t[r],l=a.match(o.matcher))){s=o.type,c=e.extend(!0,{},o.params,n[r]||(e.isPlainObject(t[r])?t[r].params:null)),a="function"===e.type(o.url)?o.url.call(this,l,c,n):i(o.url,l,c);break}s&&(n.href=a,n.type=s,n.autoHeight=!1)}}}(jQuery),function(e){function T(e,t){return function(i){return O(e.call(this,i),t)}}function z(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function M(){}function A(e){F(this,e)}function P(e){var t=this._data={},i=e.years||e.year||e.y||0,n=e.months||e.month||e.M||0,a=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,r=e.hours||e.hour||e.h||0,o=e.minutes||e.minute||e.m||0,l=e.seconds||e.second||e.s||0,c=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=c+1e3*l+6e4*o+36e5*r,this._days=s+7*a,this._months=n+12*i,t.milliseconds=c%1e3,l+=I(c/1e3),t.seconds=l%60,o+=I(l/60),t.minutes=o%60,r+=I(o/60),t.hours=r%24,s+=I(r/24),s+=7*a,t.days=s%30,n+=I(s/30),t.months=n%12,i+=I(n/12),t.years=i}function F(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function I(e){return 0>e?Math.ceil(e):Math.floor(e)}function O(e,t){for(var i=e+"";t>i.length;)i="0"+i;return i}function N(e,t,i){var r,n=t._milliseconds,a=t._days,s=t._months;n&&e._d.setTime(+e+n*i),a&&e.date(e.date()+a*i),s&&(r=e.date(),e.date(1).month(e.month()+s*i).date(Math.min(r,e.daysInMonth())))}function L(e){return"[object Array]"===Object.prototype.toString.call(e)}function H(e,t){var s,i=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),a=0;for(s=0;i>s;s++)~~e[s]!==~~t[s]&&a++;return a+n}function R(e,t){return t.abbr=e,s[e]||(s[e]=new M),s[e].set(t),s[e]}function q(e){return e?(!s[e]&&r&&require("./lang/"+e),s[e]):t.fn._lang}function W(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var i,n,t=e.match(l);for(i=0,n=t.length;n>i;i++)t[i]=E[t[i]]?E[t[i]]:W(t[i]);return function(a){var s="";for(i=0;n>i;i++)s+="function"==typeof t[i].call?t[i].call(a,e):t[i];return s}}function Y(e,t){function n(t){return e.lang().longDateFormat(t)||t}for(var i=5;i--&&c.test(t);)t=t.replace(c,n);return C[t]||(C[t]=B(t)),C[t](e)}function U(e){switch(e){case"DDDD":return f;case"YYYY":return h;case"YYYYY":return m;case"S":case"SS":case"SSS":case"DDD":return p;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return _;case"X":return b;case"Z":case"ZZ":return g;case"T":return v;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return u;default:return new RegExp(e.replace("\\",""))}}function V(e,t,i){var n,s=i._a;switch(e){case"M":case"MM":s[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":n=q(i._l).monthsParse(t),null!=n?s[1]=n:i._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(s[2]=~~t);break;case"YY":s[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~t;break;case"a":case"A":i._isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":s[3]=~~t;break;case"m":case"mm":s[4]=~~t;break;case"s":case"ss":s[5]=~~t;break;case"S":case"SS":case"SSS":s[6]=~~(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,n=(t+"").match(j),n&&n[1]&&(i._tzh=~~n[1]),n&&n[2]&&(i._tzm=~~n[2]),n&&"+"===n[0]&&(i._tzh=-i._tzh,i._tzm=-i._tzm)}null==t&&(i._isValid=!1)}function X(e){var t,i,n=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=n[t]=null==e._a[t]?2===t?1:0:e._a[t];n[3]+=e._tzh||0,n[4]+=e._tzm||0,i=new Date(0),e._useUTC?(i.setUTCFullYear(n[0],n[1],n[2]),i.setUTCHours(n[3],n[4],n[5],n[6])):(i.setFullYear(n[0],n[1],n[2]),i.setHours(n[3],n[4],n[5],n[6])),e._d=i}}function G(e){var n,a,t=e._f.match(l),i=e._i;for(e._a=[],n=0;t.length>n;n++)a=(U(t[n]).exec(i)||[])[0],a&&(i=i.slice(i.indexOf(a)+a.length)),E[t[n]]&&V(t[n],a,e);e._isPm&&12>e._a[3]&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),X(e)}function K(e){for(var t,i,n,o,a=99;e._f.length;){if(t=F({},e),t._f=e._f.pop(),G(t),i=new A(t),i.isValid()){n=i;break}o=H(t._a,i.toArray()),a>o&&(a=o,n=i)}F(e,n)}function Z(e){var t,i=e._i;if(y.exec(i)){for(e._f="YYYY-MM-DDT",t=0;4>t;t++)if(k[t][1].exec(i)){e._f+=k[t][0];break}g.exec(i)&&(e._f+=" Z"),G(e)}else e._d=new Date(i)}function Q(t){var i=t._i,n=o.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?Z(t):L(i)?(t._a=i.slice(0),X(t)):t._d=i instanceof Date?new Date(+i):new Date(i)}function J(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}function et(e,t,i){var a=n(Math.abs(e)/1e3),s=n(a/60),r=n(s/60),o=n(r/24),l=n(o/365),c=45>a&&["s",a]||1===s&&["m"]||45>s&&["mm",s]||1===r&&["h"]||22>r&&["hh",r]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",n(o/30)]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=e>0,c[4]=i,J.apply({},c)}function tt(e,i,n){var a=n-i,s=n-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),Math.ceil(t(e).add("d",s).dayOfYear()/7)}function it(e){var i=e._i,n=e._f;return null===i||""===i?null:("string"==typeof i&&(e._i=i=q().preparse(i)),t.isMoment(i)?(e=F({},i),e._d=new Date(+i._d)):n?L(n)?K(e):G(e):Q(e),new A(e))}function nt(e,i){t.fn[e]=t.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";return null!=e?(this._d["set"+t+i](e),this):this._d["get"+t+i]()}}function at(e){t.duration.fn[e]=function(){return this._data[e]}}function st(e,i){t.duration.fn["as"+e]=function(){return+this/i}}for(var t,a,i="2.0.0",n=Math.round,s={},r="undefined"!=typeof module&&module.exports,o=/^\/?Date\((\-?\d+)/i,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,u=/\d\d?/,p=/\d{1,3}/,f=/\d{3}/,h=/\d{1,4}/,m=/[+\-]?\d{1,6}/,_=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,g=/Z|[\+\-]\d\d:?\d\d/i,v=/T/i,b=/[\+\-]?\d+(\.\d{1,3})?/,y=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,w="YYYY-MM-DDTHH:mm:ssZ",k=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],j=/([\+\-]|\d\d)/gi,x="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),$={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={},S="DDD w W M D d".split(" "),D="M D H h m s w W".split(" "),E={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return O(this.year()%100,2)},YYYY:function(){return O(this.year(),4)},YYYYY:function(){return O(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return O(~~(this.milliseconds()/10),2)},SSS:function(){return O(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+O(~~(e/60),2)+":"+O(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+O(~~(10*e/6),4)},X:function(){return this.unix()}};S.length;)a=S.pop(),E[a+"o"]=z(E[a]);for(;D.length;)a=D.pop(),E[a+a]=T(E[a],2);for(E.DDDD=T(E.DDD,3),M.prototype={set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var i,n,a;for(this._monthsParse||(this._monthsParse=[]),i=0;12>i;i++)if(this._monthsParse[i]||(n=t([2e3,i]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),this._monthsParse[i].test(e))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var a=this._relativeTime[i];return"function"==typeof a?a(e,t,i,n):a.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return tt(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},t=function(e,t,i){return it({_i:e,_f:t,_l:i,_isUTC:!1})},t.utc=function(e,t,i){return it({_useUTC:!0,_isUTC:!0,_l:i,_i:e,_f:t})},t.unix=function(e){return t(1e3*e)},t.duration=function(e,i){var r,n=t.isDuration(e),a="number"==typeof e,s=n?e._data:a?{}:e;return a&&(i?s[i]=e:s.milliseconds=e),r=new P(s),n&&e.hasOwnProperty("_lang")&&(r._lang=e._lang),r},t.version=i,t.defaultFormat=w,t.lang=function(e,i){return e?(i?R(e,i):s[e]||q(e),t.duration.fn._lang=t.fn._lang=q(e),void 0):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),q(e)},t.isMoment=function(e){return e instanceof A},t.isDuration=function(e){return e instanceof P},t.fn=A.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return t.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!H(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var i=Y(this,e||t.defaultFormat);return this.lang().postformat(i)},add:function(e,i){var n;return n="string"==typeof e?t.duration(+i,e):t.duration(e,i),N(this,n,1),this},subtract:function(e,i){var n;return n="string"==typeof e?t.duration(+i,e):t.duration(e,i),N(this,n,-1),this},diff:function(e,i,n){var r,o,a=this._isUTC?t(e).utc():t(e).local(),s=6e4*(this.zone()-a.zone());return i&&(i=i.replace(/s$/,"")),"year"===i||"month"===i?(r=432e5*(this.daysInMonth()+a.daysInMonth()),o=12*(this.year()-a.year())+(this.month()-a.month()),o+=(this-t(this).startOf("month")-(a-t(a).startOf("month")))/r,"year"===i&&(o/=12)):(r=this-a-s,o="second"===i?r/1e3:"minute"===i?r/6e4:"hour"===i?r/36e5:"day"===i?r/864e5:"week"===i?r/6048e5:r),n?o:I(o)},from:function(e,i){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().startOf("day"),"days",!0),i=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return t([this.year()]).zone()>this.zone()||t([this.year(),5]).zone()>this.zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e=e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,i){return i=i!==void 0?i:"millisecond",+this.clone().startOf(i)>+t(e).startOf(i)},isBefore:function(e,i){return i=i!==void 0?i:"millisecond",+t(e).startOf(i)>+this.clone().startOf(i)},isSame:function(e,i){return i=i!==void 0?i:"millisecond",+this.clone().startOf(i)===+t(e).startOf(i)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var i=n((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return null==e?i:this.add("d",e-i)},isoWeek:function(e){var t=tt(this,1,4);return null==e?t:this.add("d",7*(e-t))},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},lang:function(t){return t===e?this._lang:(this._lang=q(t),this)}},a=0;x.length>a;a++)nt(x[a].toLowerCase().replace(/s$/,""),x[a]);nt("year","FullYear"),t.fn.days=t.fn.day,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.duration.fn=P.prototype={weeks:function(){return I(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,i=et(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},lang:t.fn.lang};for(a in $)$.hasOwnProperty(a)&&(st(a,$[a]),at(a.toLowerCase()));st("Weeks",6048e5),t.lang("en",{ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),r&&(module.exports=t),"undefined"==typeof ender&&(this.moment=t),"function"==typeof define&&define.amd&&define("moment",[],function(){return t})}.call(this),moment.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t){var n=100*e+t;return 600>n?"凌晨":900>n?"早上":1130>n?"上午":1230>n?"中午":1800>n?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"}}),Sanitize.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i,Sanitize.RELATIVE="__relative__",Sanitize.prototype.clean_node=function(e){function n(e,t){var i;for(i=0;t.length>i;i++)if(t[i]==e)return i;return-1}function a(){var i,n,e=[],t={};for(i=0;arguments.length>i;i++)if(arguments[i]&&arguments[i].length)for(n=0;arguments[i].length>n;n++)t[arguments[i][n]]||(t[arguments[i][n]]=!0,e.push(arguments[i][n]));return e}function s(e){var t;switch(e.nodeType){case 1:r.call(this,e);break;case 3:t=e.cloneNode(!1),this.current_element.appendChild(t);break;case 5:t=e.cloneNode(!1),this.current_element.appendChild(t);break;case 8:this.config.allow_comments&&(t=e.cloneNode(!1),this.current_element.appendChild(t));break;default:console&&console.log&&console.log("unknown node type",e.nodeType)}}function r(e){var t,l,c,d,u,p,f,h,m,_,g=o.call(this,e);if(e=g.node,c=e.nodeName.toLowerCase(),l=this.current_element,this.allowed_elements[c]||g.whitelist){this.current_element=this.dom.createElement(e.nodeName),l.appendChild(this.current_element);var v=this.config.attributes;for(d=a(v[c],v.__ALL__,g.attr_whitelist),t=0;d.length>t;t++)p=d[t],u=e.attributes[p],u&&(_=!0,this.config.protocols[c]&&this.config.protocols[c][p]&&(h=this.config.protocols[c][p],m=u.nodeValue.toLowerCase().match(Sanitize.REGEX_PROTOCOL),_=m?-1!=n(m[1],h):-1!=n(Sanitize.RELATIVE,h)),_&&(f=document.createAttribute(p),f.value=u.nodeValue,this.current_element.setAttributeNode(f)));if(this.config.add_attributes[c])for(p in this.config.add_attributes[c])f=document.createAttribute(p),f.value=this.config.add_attributes[c][p],this.current_element.setAttributeNode(f)}else if(-1!=n(e,this.whitelist_nodes)){for(this.current_element=e.cloneNode(!0);this.current_element.childNodes.length>0;)this.current_element.removeChild(this.current_element.firstChild);l.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[c])for(t=0;e.childNodes.length>t;t++)s.call(this,e.childNodes[t]);this.current_element.normalize&&this.current_element.normalize(),this.current_element=l}function o(e){var i,s,r,t={attr_whitelist:[],node:e,whitelist:!1};for(i=0;this.transformers.length>i;i++)if(r=this.transformers[i]({allowed_elements:this.allowed_elements,config:this.config,node:e,node_name:e.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=r){if("object"!=typeof r)throw new Error("transformer output must be an object or null");if(r.whitelist_nodes&&r.whitelist_nodes instanceof Array)for(s=0;r.whitelist_nodes.length>s;s++)-1==n(r.whitelist_nodes[s],this.whitelist_nodes)&&this.whitelist_nodes.push(r.whitelist_nodes[s]);t.whitelist=r.whitelist?!0:!1,r.attr_whitelist&&(t.attr_whitelist=a(t.attr_whitelist,r.attr_whitelist)),t.node=r.node?r.node:t.node}return t}var t=this.dom.createDocumentFragment();for(this.current_element=t,this.whitelist_nodes=[],i=0;e.childNodes.length>i;i++)s.call(this,e.childNodes[i]);return t.normalize&&t.normalize(),t},"function"==typeof define&&define("sanitize",[],function(){return Sanitize}),Sanitize.Config||(Sanitize.Config={}),Sanitize.Config.BASIC={elements:["a","b","blockquote","br","cite","code","dd","dl","dt","em","i","li","ol","p","pre","q","small","strike","strong","sub","sup","u","ul"],attributes:{a:["href"],blockquote:["cite"],q:["cite"]},add_attributes:{a:{rel:"nofollow"}},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RELAXED={elements:["a","b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div","span"],attributes:{a:["href","title"],blockquote:["cite"],col:["span","width"],colgroup:["span","width"],img:["align","alt","height","src","title","width","class"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width","align"],th:["abbr","axis","colspan","rowspan","scope","width","align"],ul:["type"],div:["class"],span:["class"],hr:[""]},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},img:{src:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RESTRICTED={elements:["b","em","i","strong","u"]},function e(t,i,n){function a(r,o){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return a(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;n.length>r;r++)a(n[r]);return a}({1:[function(e,t,i){function a(){}function s(){}function r(){}function o(){}function l(e){return e.replace(d,"&lt;").replace(u,"&gt;")}function c(e,t,i){if(i=E(i),"href"===t||"src"===t){if(i=i.trim(),"#"===i)return"#";if(i&&!g.test(i))return""}else if("background"===t){if(b.lastIndex=0,b.test(i))return""}else if("style"===t){if(v.lastIndex=0,v.test(i))return"";if(k.lastIndex=0,k.test(i))return"";if(j.lastIndex=0,j.test(i)&&(b.lastIndex=0,b.test(i)))return""}return i=T(i)}function x(e){return e.replace(p,"&quote;")}function $(e){return e.replace(f,'"')}function C(e){return e.replace(h,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function S(e){return e.replace(m,":").replace(_," ")}function D(e){for(var t="",i=0,n=e.length;n>i;i++)t+=32>e.charCodeAt(i)?" ":e.charAt(i);return t.trim()}function E(e){return e=$(e),e=C(e),e=S(e),e=D(e)}function T(e){return e=x(e),e=l(e)}function z(){return""}function M(e,t){function n(t){return i?!0:-1!==e.indexOf(t)}"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),a=[],s=!1;return{onIgnoreTag:function(e,i,r){if(n(e)){if(r.isClosing){var o="[/removed]",l=r.position+o.length;return a.push([s!==!1?s:r.position,l]),s=!1,o}return s||(s=r.position),"[removed]"}return t(e,i,r)},remove:function(e){var t="",i=0;return a.forEach(function(n){t+=e.slice(i,n[0]),i=n[1]}),t+=e.slice(i)}}}function A(e){return e.replace(P,"")}var n={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["class","src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:["class"],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},d=/</g,u=/>/g,p=/"/g,f=/&quot;/g,h=/&#([a-zA-Z0-9]*);?/gim,m=/&colon;?/gim,_=/&newline;?/gim,g=/^((https?:\/)?\/)/,v=/\/\*|\*\//gm,b=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,k=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,j=/u\s*r\s*l\s*\(.*/gi,P=/<!--(.|\s)*?-->/gm;i.whiteList=n,i.onTag=a,i.onIgnoreTag=s,i.onTagAttr=r,i.onIgnoreTagAttr=o,i.safeAttrValue=c,i.escapeHtml=l,i.escapeQuote=x,i.unescapeQuote=$,i.escapeHtmlEntities=C,i.escapeDangerHtml5Entities=S,i.clearNonPrintableCharacter=D,i.friendlyAttrValue=E,i.escapeAttrValue=T,i.onIgnoreTagStripAll=z,i.StripTagBody=M,i.stripCommentTag=A},{}],2:[function(e,t,i){function r(e,t){var i=new s(t);return i.process(e)}var n=e("./default"),a=e("./parser"),s=e("./xss");i=t.exports=r,i.FilterXSS=s;for(var o in n)i[o]=n[o];for(var o in a)i[o]=a[o];"undefined"!=typeof window&&(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;this.length>t;t++)if(this[t]==e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0;this.length>i;i++)e.call(t,this[i],i,this)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),window.filterXSS=t.exports)},{"./default":1,"./parser":3,"./xss":4}],3:[function(e,t,i){function n(e){var t=e.indexOf(" ");if(-1===t)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=i.trim().toLowerCase(),"/"===i[0]&&(i=i.slice(1)),"/"===i[i.length-1]&&(i=i.slice(0,-1)),i}function a(e){return"</"===e.slice(0,2)}function s(e,t,i){"user strict";var s="",r=0,o=!1,l=!1,c=0,d=e.length,u="",p="";for(c=0;d>c;c++){var f=e.charAt(c);if(o===!1){if("<"===f){o=c;continue}}else if(l===!1){if("<"===f){s+=i(e.slice(r,c)),o=c,r=c;continue}if(">"===f){s+=i(e.slice(r,o)),u=e.slice(o,c+1),p=n(u),s+=t(o,s.length,p,u,a(u)),r=c+1,o=!1;continue}if('"'===f||"'"===f){l=f;continue}}else if(f===l){l=!1;continue}}return e.length>r&&(s+=i(e.substr(r))),s}function o(e,t){"user strict";function o(e,i){e=e.trim(),e=e.replace(r,"").toLowerCase(),1>e.length||n.push(t(e,i||""))}for(var i=0,n=[],a=!1,s=e.length,l=0;s>l;l++){var d,c=e.charAt(l);if(a!==!1||"="!==c)if(a===!1||l!==i||'"'!==c&&"'"!==c)" "!==c||(d=e.slice(i,l).trim(),a===!1?o(d):o(a,d),a=!1,i=l+1);else{var u=e.indexOf(c,l+1);if(-1===u)break;d=e.slice(i+1,u).trim(),o(a,d),a=!1,l=u,i=l+1}else a=e.slice(i,l),i=l+1}return e.length>i&&(a===!1?o(e.slice(i)):o(a,e.slice(i))),n.join(" ").trim()}var r=/[^a-zA-Z0-9_:\.\-]/gim;i.parseTag=s,i.parseAttr=o},{}],4:[function(e,t){function o(e){return void 0===e||null===e}function l(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=e.slice(t+1,-1).trim();var i="/"===e[e.length-1];return i&&(e=e.slice(0,-1).trim()),{html:e,closing:i}}function c(e){e=e||{},e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=n.onIgnoreTagStripAll),e.whiteList=e.whiteList||n.whiteList,e.onTag=e.onTag||n.onTag,e.onTagAttr=e.onTagAttr||n.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||n.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||n.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||n.safeAttrValue,e.escapeHtml=e.escapeHtml||n.escapeHtml,this.options=e}var n=e("./default"),a=e("./parser"),s=a.parseTag,r=a.parseAttr;c.prototype.process=function(e){var t=this,i=t.options,a=i.whiteList,c=i.onTag,d=i.onIgnoreTag,u=i.onTagAttr,p=i.onIgnoreTagAttr,f=i.safeAttrValue,h=i.escapeHtml;if(i.allowCommentTag||(e=n.stripCommentTag(e)),i.stripIgnoreTagBody){var m=n.StripTagBody(i.stripIgnoreTagBody,d);d=m.onIgnoreTag}else m=!1;var _=s(e,function(e,t,i,n,s){var m={sourcePosition:e,position:t,isClosing:s,isWhite:i in a},_=c(i,n,m);if(!o(_))return _;if(m.isWhite){if(m.isClosing)return"</"+i+">";var g=l(n),v=a[i],b=r(g.html,function(e,t){var n=-1!==v.indexOf(e),a=u(i,e,t,n);if(!o(a))return a;if(n)return t=f(i,e,t),t?e+'="'+t+'"':e;var a=p(i,e,t,n);return o(a)?void 0:a}),n="<"+i;return b&&(n+=" "+b),g.closing&&(n+=" /"),n+=">"}var _=d(i,n,m);return o(_)?h(n):_},h);return m&&(_=m.remove(_)),_},t.exports=c},{"./default":1,"./parser":3}]},{},[2]);var Base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var n,a,s,r,o,l,c,i="",d=0;do n=t.charCodeAt(d++),a=t.charCodeAt(d++),s=t.charCodeAt(d++),r=n>>2,o=(3&n)<<4|a>>4,l=(15&a)<<2|s>>6,c=63&s,isNaN(a)?l=c=64:isNaN(s)&&(c=64),i=i+e.charAt(r)+e.charAt(o)+e.charAt(l)+e.charAt(c);while(t.length>d);return i},decode:function(t){var n,a,s,r,o,l,c,i="",d=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=e.indexOf(t.charAt(d++)),o=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),n=r<<2|o>>4,a=(15&o)<<4|l>>2,s=(3&l)<<6|c,i+=String.fromCharCode(n),64!=l&&(i+=String.fromCharCode(a)),64!=c&&(i+=String.fromCharCode(s));while(t.length>d);return i}};return t}(),MD5=function(){var e=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},t=function(e,t){return e<<t|e>>>32-t},i=function(e){for(var t=[],i=0;8*e.length>i;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},n=function(e){for(var t="",i=0;32*e.length>i;i+=8)t+=String.fromCharCode(255&e[i>>5]>>>i%32);return t},a=function(e){for(var t="0123456789abcdef",i="",n=0;4*e.length>n;n++)i+=t.charAt(15&e[n>>2]>>8*(n%4)+4)+t.charAt(15&e[n>>2]>>8*(n%4));return i},s=function(i,n,a,s,r,o){return e(t(e(e(n,i),e(s,o)),r),a)},r=function(e,t,i,n,a,r,o){return s(t&i|~t&n,e,t,a,r,o)},o=function(e,t,i,n,a,r,o){return s(t&n|i&~n,e,t,a,r,o)},l=function(e,t,i,n,a,r,o){return s(t^i^n,e,t,a,r,o)},c=function(e,t,i,n,a,r,o){return s(i^(t|~n),e,t,a,r,o)},d=function(t,i){t[i>>5]|=128<<i%32,t[(i+64>>>9<<4)+14]=i;for(var u,p,f,h,n=1732584193,a=-271733879,s=-1732584194,d=271733878,m=0;t.length>m;m+=16)u=n,p=a,f=s,h=d,n=r(n,a,s,d,t[m+0],7,-680876936),d=r(d,n,a,s,t[m+1],12,-389564586),s=r(s,d,n,a,t[m+2],17,606105819),a=r(a,s,d,n,t[m+3],22,-1044525330),n=r(n,a,s,d,t[m+4],7,-176418897),d=r(d,n,a,s,t[m+5],12,1200080426),s=r(s,d,n,a,t[m+6],17,-1473231341),a=r(a,s,d,n,t[m+7],22,-45705983),n=r(n,a,s,d,t[m+8],7,1770035416),d=r(d,n,a,s,t[m+9],12,-1958414417),s=r(s,d,n,a,t[m+10],17,-42063),a=r(a,s,d,n,t[m+11],22,-1990404162),n=r(n,a,s,d,t[m+12],7,1804603682),d=r(d,n,a,s,t[m+13],12,-40341101),s=r(s,d,n,a,t[m+14],17,-1502002290),a=r(a,s,d,n,t[m+15],22,1236535329),n=o(n,a,s,d,t[m+1],5,-165796510),d=o(d,n,a,s,t[m+6],9,-1069501632),s=o(s,d,n,a,t[m+11],14,643717713),a=o(a,s,d,n,t[m+0],20,-373897302),n=o(n,a,s,d,t[m+5],5,-701558691),d=o(d,n,a,s,t[m+10],9,38016083),s=o(s,d,n,a,t[m+15],14,-660478335),a=o(a,s,d,n,t[m+4],20,-405537848),n=o(n,a,s,d,t[m+9],5,568446438),d=o(d,n,a,s,t[m+14],9,-1019803690),s=o(s,d,n,a,t[m+3],14,-187363961),a=o(a,s,d,n,t[m+8],20,1163531501),n=o(n,a,s,d,t[m+13],5,-1444681467),d=o(d,n,a,s,t[m+2],9,-51403784),s=o(s,d,n,a,t[m+7],14,1735328473),a=o(a,s,d,n,t[m+12],20,-1926607734),n=l(n,a,s,d,t[m+5],4,-378558),d=l(d,n,a,s,t[m+8],11,-2022574463),s=l(s,d,n,a,t[m+11],16,1839030562),a=l(a,s,d,n,t[m+14],23,-35309556),n=l(n,a,s,d,t[m+1],4,-1530992060),d=l(d,n,a,s,t[m+4],11,1272893353),s=l(s,d,n,a,t[m+7],16,-155497632),a=l(a,s,d,n,t[m+10],23,-1094730640),n=l(n,a,s,d,t[m+13],4,681279174),d=l(d,n,a,s,t[m+0],11,-358537222),s=l(s,d,n,a,t[m+3],16,-722521979),a=l(a,s,d,n,t[m+6],23,76029189),n=l(n,a,s,d,t[m+9],4,-640364487),d=l(d,n,a,s,t[m+12],11,-421815835),s=l(s,d,n,a,t[m+15],16,530742520),a=l(a,s,d,n,t[m+2],23,-995338651),n=c(n,a,s,d,t[m+0],6,-198630844),d=c(d,n,a,s,t[m+7],10,1126891415),s=c(s,d,n,a,t[m+14],15,-1416354905),a=c(a,s,d,n,t[m+5],21,-57434055),n=c(n,a,s,d,t[m+12],6,1700485571),d=c(d,n,a,s,t[m+3],10,-1894986606),s=c(s,d,n,a,t[m+10],15,-1051523),a=c(a,s,d,n,t[m+1],21,-2054922799),n=c(n,a,s,d,t[m+8],6,1873313359),d=c(d,n,a,s,t[m+15],10,-30611744),s=c(s,d,n,a,t[m+6],15,-1560198380),a=c(a,s,d,n,t[m+13],21,1309151649),n=c(n,a,s,d,t[m+4],6,-145523070),d=c(d,n,a,s,t[m+11],10,-1120210379),s=c(s,d,n,a,t[m+2],15,718787259),a=c(a,s,d,n,t[m+9],21,-343485551),n=e(n,u),a=e(a,p),s=e(s,f),d=e(d,h);return[n,a,s,d]},u={hexdigest:function(e){return a(d(i(e),8*e.length))},hash:function(e){return n(d(i(e),8*e.length))}};return u}();Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice,n=Array.prototype.concat,a=i.call(arguments,1);return function(){return t.apply(e?e:this,n.call(a,i.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=t);t>i;i++)if(i in this&&this[i]===e)return i;return-1}),function(e){function i(e,i){return new t.Builder(e,i)}function n(e){return new t.Builder("message",e)}function a(e){return new t.Builder("iq",e)}function s(e){return new t.Builder("presence",e)}var t;t={VERSION:"1.1.3",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var i=0;t.XHTML.tags.length>i;i++)if(e==t.XHTML.tags[i])return!0;
return!1},validAttribute:function(e,i){if(t.XHTML.attributes[e]!==void 0&&t.XHTML.attributes[e].length>0)for(var n=0;t.XHTML.attributes[e].length>n;n++)if(i==t.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var i=0;t.XHTML.css.length>i;i++)if(e==t.XHTML.css[i])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,i){t.NS[e]=i},forEachChild:function(e,i,n){var a,s;for(a=0;e.childNodes.length>a;a++)s=e.childNodes[a],s.nodeType!=t.ElementType.NORMAL||i&&!this.isTagEqual(s,i)||n(s)},isTagEqual:function(e,t){return e.tagName.toLowerCase()==t.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&10>document.documentMode?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return t._xmlGenerator||(t._xmlGenerator=t._makeGenerator()),t._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],i=0;t.length>i&&null===e;i++)try{e=new ActiveXObject(t[i])}catch(n){e=null}return e},xmlElement:function(e){if(!e)return null;var n,a,s,i=t.xmlGenerator().createElement(e);for(n=1;arguments.length>n;n++)if(arguments[n])if("string"==typeof arguments[n]||"number"==typeof arguments[n])i.appendChild(t.xmlTextNode(arguments[n]));else if("object"==typeof arguments[n]&&"function"==typeof arguments[n].sort)for(a=0;arguments[n].length>a;a++)"object"==typeof arguments[n][a]&&"function"==typeof arguments[n][a].sort&&i.setAttribute(arguments[n][a][0],arguments[n][a][1]);else if("object"==typeof arguments[n])for(s in arguments[n])arguments[n].hasOwnProperty(s)&&i.setAttribute(s,arguments[n][s]);return i},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlTextNode:function(e){return t.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var i="";0===e.childNodes.length&&e.nodeType==t.ElementType.TEXT&&(i+=e.nodeValue);for(var n=0;e.childNodes.length>n;n++)e.childNodes[n].nodeType==t.ElementType.TEXT&&(i+=e.childNodes[n].nodeValue);return t.xmlescape(i)},copyElement:function(e){var i,n;if(e.nodeType==t.ElementType.NORMAL){for(n=t.xmlElement(e.tagName),i=0;e.attributes.length>i;i++)n.setAttribute(e.attributes[i].nodeName.toLowerCase(),e.attributes[i].value);for(i=0;e.childNodes.length>i;i++)n.appendChild(t.copyElement(e.childNodes[i]))}else e.nodeType==t.ElementType.TEXT&&(n=t.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var i,n,a,s,r,o,l,c,d,u,p;if(e.nodeType==t.ElementType.NORMAL)if(s=e.nodeName.toLowerCase(),t.XHTML.validTag(s))try{for(n=t.xmlElement(s),i=0;t.XHTML.attributes[s].length>i;i++)if(r=t.XHTML.attributes[s][i],o=e.getAttribute(r),void 0!==o&&null!==o&&""!==o&&o!==!1&&0!==o)if("style"==r&&"object"==typeof o&&o.cssText!==void 0&&(o=o.cssText),"style"==r){for(l=[],c=o.split(";"),a=0;c.length>a;a++)d=c[a].split(":"),u=d[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),t.XHTML.validCSS(u)&&(p=d[1].replace(/^\s*/,"").replace(/\s*$/,""),l.push(u+": "+p));l.length>0&&(o=l.join("; "),n.setAttribute(r,o))}else n.setAttribute(r,o);for(i=0;e.childNodes.length>i;i++)n.appendChild(t.createHtml(e.childNodes[i]))}catch(f){n=t.xmlTextNode("")}else for(n=t.xmlGenerator().createDocumentFragment(),i=0;e.childNodes.length>i;i++)n.appendChild(t.createHtml(e.childNodes[i]));else if(e.nodeType==t.ElementType.FRAGMENT)for(n=t.xmlGenerator().createDocumentFragment(),i=0;e.childNodes.length>i;i++)n.appendChild(t.createHtml(e.childNodes[i]));else e.nodeType==t.ElementType.TEXT&&(n=t.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return 0>e.indexOf("@")?null:e.split("@")[0]},getDomainFromJid:function(e){var i=t.getBareJidFromJid(e);if(0>i.indexOf("@"))return i;var n=i.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return 2>t.length?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},log:function(){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var i;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var a,s,n=e.nodeName;for(e.getAttribute("_realname")&&(n=e.getAttribute("_realname")),i="<"+n,a=0;e.attributes.length>a;a++)"_realname"!=e.attributes[a].nodeName&&(i+=" "+e.attributes[a].nodeName.toLowerCase()+"='"+e.attributes[a].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+"'");if(e.childNodes.length>0){for(i+=">",a=0;e.childNodes.length>a;a++)switch(s=e.childNodes[a],s.nodeType){case t.ElementType.NORMAL:i+=t.serialize(s);break;case t.ElementType.TEXT:i+=t.xmlescape(s.nodeValue);break;case t.ElementType.CDATA:i+="<![CDATA["+s.nodeValue+"]]>"}i+="</"+n+">"}else i+="/>";return i},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,i){t._connectionPlugins[e]=i}},t.Builder=function(e,i){("presence"==e||"message"==e||"iq"==e)&&(i&&!i.xmlns?i.xmlns=t.NS.CLIENT:i||(i={xmlns:t.NS.CLIENT})),this.nodeTree=t.xmlElement(e,i),this.node=this.nodeTree},t.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return t.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&this.node.setAttribute(t,e[t]);return this},c:function(e,i,n){var a=t.xmlElement(e,i,n);return this.node.appendChild(a),n||(this.node=a),this},cnode:function(e){var i,n=t.xmlGenerator();try{i=void 0!==n.importNode}catch(a){i=!1}var s=i?n.importNode(e,!0):t.copyElement(e);return this.node.appendChild(s),this.node=s,this},t:function(e){var i=t.xmlTextNode(e);return this.node.appendChild(i),this},h:function(e){var i=document.createElement("body");i.innerHTML=e;for(var n=t.createHtml(i);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},t.Handler=function(e,i,n,a,s,r,o){this.handler=e,this.ns=i,this.name=n,this.type=a,this.id=s,this.options=o||{matchBare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?r?t.getBareJidFromJid(r):null:r,this.user=!0},t.Handler.prototype={isMatch:function(e){var i,n=null;if(n=this.options.matchBare?t.getBareJidFromJid(e.getAttribute("from")):e.getAttribute("from"),i=!1,this.ns){var a=this;t.forEachChild(e,null,function(e){e.getAttribute("xmlns")==a.ns&&(i=!0)}),i=i||e.getAttribute("xmlns")==this.ns}else i=!0;return!i||this.name&&!t.isTagEqual(e,this.name)||this.type&&e.getAttribute("type")!=this.type||this.id&&e.getAttribute("id")!=this.id||this.from&&n!=this.from?!1:!0},run:function(e){var i=null;try{i=this.handler(e)}catch(n){throw n.sourceURL?t.fatal("error: "+this.handler+" "+n.sourceURL+":"+n.line+" - "+n.name+": "+n.message):n.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",n,n.message)),t.fatal("error: "+this.handler+" "+n.fileName+":"+n.lineNumber+" - "+n.name+": "+n.message)):t.fatal("error: "+n.message+"\n"+n.stack),n}return i},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},t.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},t.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},t.Connection=function(e,i){this.service=e,this.options=i||{};var n=this.options.protocol||"";this._proto=0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===n.indexOf("ws")?new t.Websocket(this):new t.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this._idleTimeout=null,this._disconnectTimeout=null,this.do_authentication=!0,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var a in t._connectionPlugins)if(t._connectionPlugins.hasOwnProperty(a)){var s=t._connectionPlugins[a],r=function(){};r.prototype=s,this[a]=new r,this[a].init(this)}},t.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){return"string"==typeof e||"number"==typeof e?++this._uniqueId+":"+e:++this._uniqueId+""},connect:function(e,i,n,a,s,r){this.jid=e,this.authzid=t.getBareJidFromJid(this.jid),this.authcid=t.getNodeFromJid(this.jid),this.pass=i,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.domain=t.getDomainFromJid(this.jid),this._changeConnectStatus(t.Status.CONNECTING,null),this._proto._connect(a,s,r)},attach:function(e,t,i,n,a,s,r){this._proto._attach(e,t,i,n,a,s,r)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;e.length>t;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(e,t,i,n){var a=null,s=this;"function"==typeof e.tree&&(e=e.tree());var r=e.getAttribute("id");r||(r=this.getUniqueId("sendIQ"),e.setAttribute("id",r));var o=this.addHandler(function(e){a&&s.deleteTimedHandler(a);var n=e.getAttribute("type");if("result"==n)t&&t(e);else{if("error"!=n)throw{name:"StropheError",message:"Got bad IQ type of "+n};i&&i(e)}},null,"iq",null,r);return n&&(a=this.addTimedHandler(n,function(){return s.deleteHandler(o),i&&i(null),!1})),this.send(e),r},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(e,i){var n=new t.TimedHandler(e,i);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,i,n,a,s,r,o){var l=new t.Handler(e,i,n,a,s,r,o);return this.addHandlers.push(l),l},deleteHandler:function(e){this.removeHandlers.push(e)},disconnect:function(e){if(this._changeConnectStatus(t.Status.DISCONNECTING,e),t.info("Disconnect was called because: "+e),this.connected){var i=!1;this.disconnecting=!0,this.authenticated&&(i=s({xmlns:t.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(i)}},_changeConnectStatus:function(e,i){for(var n in t._connectionPlugins)if(t._connectionPlugins.hasOwnProperty(n)){var a=this[n];if(a.statusChanged)try{a.statusChanged(e,i)}catch(s){t.error(""+n+" plugin caused an exception "+"changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(e,i)}catch(r){t.error("User connection callback caused an exception: "+r)}},_doDisconnect:function(){null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),t.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(t.Status.DISCONNECTED,null),this.connected=!1},_dataRecv:function(e,i){t.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){this.xmlInput!==t.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==t.Connection.prototype.rawInput&&(i?this.rawInput(i):this.rawInput(t.serialize(n)));for(var a,s;this.removeHandlers.length>0;)s=this.removeHandlers.pop(),a=this.handlers.indexOf(s),a>=0&&this.handlers.splice(a,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return this._doDisconnect(),void 0;var o,l,r=n.getAttribute("type");if(null!==r&&"terminate"==r){if(this.disconnecting)return;return o=n.getAttribute("condition"),l=n.getElementsByTagName("conflict"),null!==o?("remote-stream-error"==o&&l.length>0&&(o="conflict"),this._changeConnectStatus(t.Status.CONNFAIL,o)):this._changeConnectStatus(t.Status.CONNFAIL,"unknown"),this.disconnect("unknown stream-error"),void 0}var c=this;t.forEachChild(n,null,function(e){var i,n;for(n=c.handlers,c.handlers=[],i=0;n.length>i;i++){var a=n[i];try{!a.isMatch(e)||!c.authenticated&&a.user?c.handlers.push(a):a.run(e)&&c.handlers.push(a)}catch(s){t.warn("Removing Strophe handlers due to uncaught exception: "+s.message)}}})}},mechanisms:{},_connect_cb:function(e,i,n){t.info("_connect_cb was called"),this.connected=!0;var a=this._proto._reqToData(e);if(a){this.xmlInput!==t.Connection.prototype.xmlInput&&(a.nodeName===this._proto.strip&&a.childNodes.length?this.xmlInput(a.childNodes[0]):this.xmlInput(a)),this.rawInput!==t.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(t.serialize(a)));var s=this._proto._connect_cb(a);if(s!==t.Status.CONNFAIL){this._authentication.sasl_scram_sha1=!1,this._authentication.sasl_plain=!1,this._authentication.sasl_digest_md5=!1,this._authentication.sasl_anonymous=!1,this._authentication.legacy_auth=!1;var r=a.getElementsByTagName("stream:features").length>0;r||(r=a.getElementsByTagName("features").length>0);var c,d,o=a.getElementsByTagName("mechanism"),l=[],u=!1;if(!r)return this._proto._no_auth_received(i),void 0;if(o.length>0)for(c=0;o.length>c;c++)d=t.getText(o[c]),this.mechanisms[d]&&l.push(this.mechanisms[d]);return this._authentication.legacy_auth=a.getElementsByTagName("auth").length>0,(u=this._authentication.legacy_auth||l.length>0)?(this.do_authentication!==!1&&this.authenticate(l),void 0):(this._proto._no_auth_received(i),void 0)}}},authenticate:function(e){var n;for(n=0;e.length-1>n;++n){for(var s=n,r=n+1;e.length>r;++r)e[r].prototype.priority>e[s].prototype.priority&&(s=r);if(s!=n){var o=e[n];e[n]=e[s],e[s]=o}}var l=!1;for(n=0;e.length>n;++n)if(e[n].test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var c=i("auth",{xmlns:t.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var d=this._sasl_mechanism.onChallenge(this,null);c.t(Base64.encode(d))}this.send(c.tree()),l=!0;break}l||(null===t.getNodeFromJid(this.jid)?(this._changeConnectStatus(t.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(t.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(a({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:t.NS.AUTH}).c("username",{}).t(t.getNodeFromJid(this.jid)).tree())))},_sasl_challenge_cb:function(e){var n=Base64.decode(t.getText(e)),a=this._sasl_mechanism.onChallenge(this,n),s=i("response",{xmlns:t.NS.SASL});return""!==a&&s.t(Base64.encode(a)),this.send(s.tree()),!0},_auth1_cb:function(){var i=a({type:"set",id:"_auth_2"}).c("query",{xmlns:t.NS.AUTH}).c("username",{}).t(t.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return t.getResourceFromJid(this.jid)||(this.jid=t.getBareJidFromJid(this.jid)+"/strophe"),i.up().c("resource",{}).t(t.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(i.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var i,n=Base64.decode(t.getText(e)),a=/([a-z]+)=([^,]+)(,|$)/,s=n.match(a);if("v"==s[1]&&(i=s[2]),i!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}return t.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var i,n;for(i=0;e.childNodes.length>i;i++)n=e.childNodes[i],"bind"==n.nodeName&&(this.do_bind=!0),"session"==n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var s=t.getResourceFromJid(this.jid);return s?this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:t.NS.BIND}).c("resource",{}).t(s).tree()):this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:t.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"==e.getAttribute("type")){t.info("SASL binding failed.");var n,i=e.getElementsByTagName("conflict");return i.length>0&&(n="conflict"),this._changeConnectStatus(t.Status.AUTHFAIL,n),!1}var r,s=e.getElementsByTagName("bind");return s.length>0?(r=s[0].getElementsByTagName("jid"),r.length>0&&(this.jid=t.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(a({type:"set",id:"_session_auth_2"}).c("session",{xmlns:t.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null))),void 0):(t.info("SASL binding failed."),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(e){if("result"==e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null);else if("error"==e.getAttribute("type"))return t.info("Session creation failed."),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"==e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null)):"error"==e.getAttribute("type")&&(this._changeConnectStatus(t.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,i){var n=new t.TimedHandler(e,i);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,i,n,a,s){var r=new t.Handler(e,i,n,a,s);return r.user=!1,this.addHandlers.push(r),r},_onDisconnectTimeout:function(){return t.info("_onDisconnectTimeout was called"),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e,t,i,n;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var a=(new Date).getTime();for(n=[],e=0;this.timedHandlers.length>e;e++)t=this.timedHandlers[e],(this.authenticated||!t.user)&&(i=t.lastCalled+t.period,0>=i-a?t.run()&&n.push(t):n.push(t));this.timedHandlers=n,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},e&&e(t,i,n,a,s),t.SASLMechanism=function(e,t,i){this.name=e,this.isClientFirst=t,this.priority=i},t.SASLMechanism.prototype={test:function(){return!0},onStart:function(e){this._connection=e},onChallenge:function(){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},t.SASLAnonymous=function(){},t.SASLAnonymous.prototype=new t.SASLMechanism("ANONYMOUS",!1,10),t.SASLAnonymous.test=function(e){return null===e.authcid},t.Connection.prototype.mechanisms[t.SASLAnonymous.prototype.name]=t.SASLAnonymous,t.SASLPlain=function(){},t.SASLPlain.prototype=new t.SASLMechanism("PLAIN",!0,20),t.SASLPlain.test=function(e){return null!==e.authcid},t.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass},t.Connection.prototype.mechanisms[t.SASLPlain.prototype.name]=t.SASLPlain,t.SASLSHA1=function(){},t.SASLSHA1.prototype=new t.SASLMechanism("SCRAM-SHA-1",!0,40),t.SASLSHA1.test=function(e){return null!==e.authcid},t.SASLSHA1.prototype.onChallenge=function(e,t,i){var n=i||MD5.hexdigest(1234567890*Math.random()),a="n="+e.authcid;return a+=",r=",a+=n,e._sasl_data.cnonce=n,e._sasl_data["client-first-message-bare"]=a,a="n,,"+a,this.onChallenge=function(e,t){for(var i,n,a,s,r,o,l,c,d,u,p,f="c=biws,",h=e._sasl_data["client-first-message-bare"]+","+t+",",m=e._sasl_data.cnonce,_=/([a-z]+)=([^,]+)(,|$)/;t.match(_);){var g=t.match(_);switch(t=t.replace(g[0],""),g[1]){case"r":i=g[2];break;case"s":n=g[2];break;case"i":a=g[2]}}if(i.substr(0,m.length)!==m)return e._sasl_data={},e._sasl_failure_cb();for(f+="r="+i,h+=f,n=Base64.decode(n),n+="\0\0\0",s=o=core_hmac_sha1(e.pass,n),l=1;a>l;l++){for(r=core_hmac_sha1(e.pass,binb2str(o)),c=0;5>c;c++)s[c]^=r[c];o=r}for(s=binb2str(s),d=core_hmac_sha1(s,"Client Key"),u=str_hmac_sha1(s,"Server Key"),p=core_hmac_sha1(str_sha1(binb2str(d)),h),e._sasl_data["server-signature"]=b64_hmac_sha1(u,h),c=0;5>c;c++)d[c]^=p[c];return f+=",p="+Base64.encode(binb2str(d))}.bind(this),a},t.Connection.prototype.mechanisms[t.SASLSHA1.prototype.name]=t.SASLSHA1,t.SASLMD5=function(){},t.SASLMD5.prototype=new t.SASLMechanism("DIGEST-MD5",!1,30),t.SASLMD5.test=function(e){return null!==e.authcid},t.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},t.SASLMD5.prototype.onChallenge=function(e,t,i){for(var c,n=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,a=i||MD5.hexdigest(""+1234567890*Math.random()),s="",r=null,o="",l="";t.match(n);)switch(c=t.match(n),t=t.replace(c[0],""),c[2]=c[2].replace(/^"(.+)"$/,"$1"),c[1]){case"realm":s=c[2];break;case"nonce":o=c[2];break;case"qop":l=c[2];break;case"host":r=c[2]}var d=e.servtype+"/"+e.domain;null!==r&&(d=d+"/"+r);var u=MD5.hash(e.authcid+":"+s+":"+this._connection.pass)+":"+o+":"+a,p="AUTHENTICATE:"+d,f="";return f+="charset=utf-8,",f+="username="+this._quote(e.authcid)+",",f+="realm="+this._quote(s)+",",f+="nonce="+this._quote(o)+",",f+="nc=00000001,",f+="cnonce="+this._quote(a)+",",f+="digest-uri="+this._quote(d)+",",f+="response="+MD5.hexdigest(MD5.hexdigest(u)+":"+o+":00000001:"+a+":auth:"+MD5.hexdigest(p))+",",f+="qop=auth",this.onChallenge=function(){return""}.bind(this),f},t.Connection.prototype.mechanisms[t.SASLMD5.prototype.name]=t.SASLMD5}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]}),Strophe.Request=function(e,t,i,n){this.id=++Strophe._requestId,this.xmlData=e,this.data=Strophe.serialize(e),this.origFunc=t,this.func=t,this.rid=i,this.date=0/0,this.sends=n||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},Strophe.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"==e.tagName)throw Strophe.error("invalid response received"),Strophe.error("responseText: "+this.xhr.responseText),Strophe.error("responseXML: "+Strophe.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(Strophe.error("invalid response received"),Strophe.error("responseText: "+this.xhr.responseText),Strophe.error("responseXML: "+Strophe.serialize(this.xhr.responseXML)));return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},Strophe.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this._requests=[]},Strophe.Bosh.prototype={strip:null,_buildBody:function(){var e=$build("body",{rid:this.rid++,xmlns:Strophe.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),e},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null},_connect:function(e,t,i){this.wait=e||this.wait,this.hold=t||this.hold;var n=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":Strophe.NS.BOSH});i&&n.attrs({route:i});var a=this._conn._connect_cb;this._requests.push(new Strophe.Request(n.tree(),this._onRequestStateChange.bind(this,a.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,t,i,n,a,s,r){this._conn.jid=e,this.sid=t,this.rid=i,this._conn.connect_callback=n,this._conn.domain=Strophe.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=a||this.wait,this.hold=s||this.hold,this.window=r||this.window,this._conn._changeConnectStatus(Strophe.Status.ATTACHED,null)},_connect_cb:function(e){var i,n,t=e.getAttribute("type");if(null!==t&&"terminate"==t)return Strophe.error("BOSH-Connection failed: "+i),i=e.getAttribute("condition"),n=e.getElementsByTagName("conflict"),null!==i?("remote-stream-error"==i&&n.length>0&&(i="conflict"),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,i)):this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(),Strophe.Status.CONNFAIL;this.sid||(this.sid=e.getAttribute("sid"));var a=e.getAttribute("requests");a&&(this.window=parseInt(a,10));var s=e.getAttribute("hold");s&&(this.hold=parseInt(s,10));var r=e.getAttribute("wait");r&&(this.wait=parseInt(r,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random())},_emptyQueue:function(){return 0===this._requests.length},_hitError:function(e){this.errors++,Strophe.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_no_auth_received:function(e){e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var t=this._buildBody();this._requests.push(new Strophe.Request(t.tree(),this._onRequestStateChange.bind(this,e.bind(this._conn)),t.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(Strophe.info("no requests during idle cycle, sending blank request"),e.push(null)),2>this._requests.length&&e.length>0&&!this._conn.paused){for(var t=this._buildBody(),i=0;e.length>i;i++)null!==e[i]&&("restart"===e[i]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":Strophe.NS.BOSH}):t.cnode(e[i]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new Strophe.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}if(this._requests.length>0){var n=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),n>Math.floor(Strophe.TIMEOUT*this.wait)&&(Strophe.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(Strophe.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}},_onRequestStateChange:function(e,t){if(Strophe.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)return t.abort=!1,void 0;var i;if(4==t.xhr.readyState){i=0;try{i=t.xhr.status}catch(n){}if(i===void 0&&(i=0),this.disconnecting&&i>=400)return this._hitError(i),void 0;var a=this._requests[0]==t,s=this._requests[1]==t;(i>0&&500>i||t.sends>5)&&(this._removeRequest(t),Strophe.debug("request id "+t.id+" should now be removed")),200==i?((s||a&&this._requests.length>0&&this._requests[0].age()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),Strophe.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):(Strophe.error("request id "+t.id+"."+t.sends+" error "+i+" happened"),(0===i||i>=400&&600>i||i>=12e3)&&(this._hitError(i),i>=400&&500>i&&(this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING,null),this._conn._doDisconnect()))),i>0&&500>i||t.sends>5||this._throttledRequestHandler()}},_processRequest:function(e){var t=this,i=this._requests[e],n=-1;try{4==i.xhr.readyState&&(n=i.xhr.status)}catch(a){Strophe.error("caught an error in _requests["+e+"], reqStatus: "+n)}if(n===void 0&&(n=-1),i.sends>this.maxRetries)return this._onDisconnectTimeout(),void 0;var s=i.age(),r=!isNaN(s)&&s>Math.floor(Strophe.TIMEOUT*this.wait),o=null!==i.dead&&i.timeDead()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait),l=4==i.xhr.readyState&&(1>n||n>=500);if((r||o||l)&&(o&&Strophe.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),i.abort=!0,i.xhr.abort(),i.xhr.onreadystatechange=function(){},this._requests[e]=new Strophe.Request(i.xmlData,i.origFunc,i.rid,i.sends),i=this._requests[e]),0===i.xhr.readyState){Strophe.debug("request id "+i.id+"."+i.sends+" posting");
try{i.xhr.open("POST",this._conn.service,this._conn.options.sync?!1:!0)}catch(c){return Strophe.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"bad-service"),this._conn.disconnect(),void 0}var d=function(){if(i.date=new Date,t._conn.options.customHeaders){var e=t._conn.options.customHeaders;for(var n in e)e.hasOwnProperty(n)&&i.xhr.setRequestHeader(n,e[n])}i.sends++,i.xhr.send(i.data)};if(i.sends>1){var u=1e3*Math.min(Math.floor(Strophe.TIMEOUT*this.wait),Math.pow(i.sends,3));setTimeout(d,u)}else d();this._conn.xmlOutput!==Strophe.Connection.prototype.xmlOutput&&(i.xmlData.nodeName===this.strip&&i.xmlData.childNodes.length?this._conn.xmlOutput(i.xmlData.childNodes[0]):this._conn.xmlOutput(i.xmlData)),this._conn.rawOutput!==Strophe.Connection.prototype.rawOutput&&this._conn.rawOutput(i.data)}else Strophe.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+i.xhr.readyState)},_removeRequest:function(e){Strophe.debug("removing request");var t;for(t=this._requests.length-1;t>=0;t--)e==this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(t){if("parsererror"!=t)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){Strophe.info("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});e&&t.cnode(e.tree());var i=new Strophe.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"));this._requests.push(i),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(this._conn._onIdle.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?Strophe.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):Strophe.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&this.window>Math.abs(this._requests[0].rid-this._requests[1].rid)&&this._processRequest(1))}},Strophe.Websocket=function(e){this._conn=e,this.strip="stream:stream";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var i="";i+="ws"===e.options.protocol&&"https:"!==window.location.protocol?"ws":"wss",i+="://"+window.location.host,i+=0!==t.indexOf("/")?window.location.pathname+t:t,e.service=i}},Strophe.Websocket.prototype={_buildStream:function(){return $build("stream:stream",{to:this._conn.domain,xmlns:Strophe.NS.CLIENT,"xmlns:stream":Strophe.NS.STREAM,version:"1.0"})},_check_streamerror:function(e,t){var i=e.getElementsByTagName("stream:error");if(0===i.length)return!1;for(var n=i[0],a="",s="",r="urn:ietf:params:xml:ns:xmpp-streams",o=0;n.childNodes.length>o;o++){var l=n.childNodes[o];if(l.getAttribute("xmlns")!==r)break;"text"===l.nodeName?s=l.textContent:a=l.nodeName}var c="WebSocket stream error: ";return c+=a?a:"unknown",s&&(c+=" - "+a),Strophe.error(c),this._conn._changeConnectStatus(t,a),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){var t=this._check_streamerror(e,Strophe.Status.CONNFAIL);return t?Strophe.Status.CONNFAIL:void 0},_handleStreamStart:function(e){var t=!1,i=e.getAttribute("xmlns");"string"!=typeof i?t="Missing xmlns in stream:stream":i!==Strophe.NS.CLIENT&&(t="Wrong xmlns in stream:stream: "+i);var n=e.namespaceURI;"string"!=typeof n?t="Missing xmlns:stream in stream:stream":n!==Strophe.NS.STREAM&&(t="Wrong xmlns:stream in stream:stream: "+n);var a=e.getAttribute("version");return"string"!=typeof a?t="Missing version in stream:stream":"1.0"!==a&&(t="Wrong version in stream:stream: "+a),t?(this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,t),this._conn._doDisconnect(),!1):!0},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<stream:stream ")||0===e.data.indexOf("<?xml")){var t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;t=e.data.replace(/<stream:stream (.*[^\/])>/,"<stream:stream $1/>");var i=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(i),this._conn.rawInput(e.data),this._handleStreamStart(i)&&(this._connect_cb(i),this.streamStart=e.data.replace(/^<stream:(.*)\/>$/,"<stream:$1>"))}else{if("</stream:stream>"===e.data)return this._conn.rawInput(e.data),this._conn.xmlInput(document.createElement("stream:stream")),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect(),void 0;var n=this._streamWrap(e.data),a=(new DOMParser).parseFromString(n,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(a,null,e.data)}},_disconnect:function(e){if(this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);var t="</stream:stream>";this._conn.xmlOutput(document.createElement("stream:stream")),this._conn.rawOutput(t);try{this.socket.send(t)}catch(i){Strophe.info("Couldn't send closing stream tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){Strophe.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return this.streamStart+e+"</stream:stream>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(e){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(Strophe.error("Websocket closed unexcectedly"),this._conn._doDisconnect()):Strophe.info("Websocket closed")},_no_auth_received:function(e){Strophe.error("Server did not send any auth methods"),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"Server did not send any auth methods"),e&&(e=e.bind(this._conn),e()),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_onError:function(e){Strophe.error("Websocket error "+e),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"The WebSocket connection could not be established was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;e.length>t;t++)if(null!==e[t]){var i,n;"restart"===e[t]?(i=this._buildStream(),n=this._removeClosingTag(i),i=i.tree()):(i=e[t],n=Strophe.serialize(i)),this._conn.xmlOutput(i),this._conn.rawOutput(n),this.socket.send(n)}this._conn._data=[]}},_onMessage:function(e){var t,i;if("</stream:stream>"===e.data){var n="</stream:stream>";return this._conn.rawInput(n),this._conn.xmlInput(document.createElement("stream:stream")),this._conn.disconnecting||this._conn._doDisconnect(),void 0}if(0===e.data.search("<stream:stream ")){if(i=e.data.replace(/<stream:stream (.*[^\/])>/,"<stream:stream $1/>"),t=(new DOMParser).parseFromString(i,"text/xml").documentElement,!this._handleStreamStart(t))return}else i=this._streamWrap(e.data),t=(new DOMParser).parseFromString(i,"text/xml").documentElement;if(!this._check_streamerror(t,Strophe.Status.ERROR))return this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),this._conn.rawInput(Strophe.serialize(t)),void 0):(this._conn._dataRecv(t,e.data),void 0)},_onOpen:function(){Strophe.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=this._removeClosingTag(e);this._conn.rawOutput(t),this.socket.send(t)},_removeClosingTag:function(e){var t=Strophe.serialize(e);return t=t.replace(/<(stream:stream .*[^\/])\/>$/,"<$1>")},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},function(){"use strict";angular.module("sf.treeRepeat",[])}(),function(){"use strict";function t(e){var t=e.match(/^\s*([\$\w]+)\s+in\s+([\S\s]*)\s+of\s+([\S\s]*)$/);if(!t)throw new Error("Expected sfTreepeat in form of '_item_ in _collection_ of _root_' but got '"+e+"'.");return{value:t[1],collection:t[2],root:t[3]}}var e=angular.module("sf.treeRepeat");e.directive("sfTreepeat",["$log",function(){return{restrict:"A",scope:!0,controller:["$scope","$attrs",function(e,i){var n=this.ident=t(i.sfTreepeat);e.$watch(this.ident.root,function(t){e[n.value]=t})}],compile:function(e){var t=e.html();return{pre:function(e,i,n,a){a.template=t}}}}}]),e.directive("sfTreecurse",["$compile",function(e){return{require:"^sfTreepeat",link:function(t,i,n,a){var s=["<",i.context.tagName,' ng-repeat="',a.ident.value," in ",a.ident.value,".",a.ident.collection,'">',a.template,"</",i.context.tagName,">"],r=angular.element(s.join(""));i.replaceWith(r),e(r)(t)}}}])}(),function(e,t){"use strict";var i={};i.prototype=i,i.config={feed_turn_on:!0,wohoo_show_version:331,debug:function(){return"dev"!==wt.env||i.util.isIE()||"object"!=typeof e.console?!1:!0},prefixed:"wt",lang:"zh-cn",default_pos:65535,default_count:20,googleAnalytics:"UA-42366759-1",box_url:function(){return"dev"===wt.env?"https://wtinbox.worktile.com/":"https://box.worktile.com/"},feed_url:function(){return"dev"===wt.env?"http://42.121.64.136:5280/http-bind":"https://feed.worktile.com/http-bind"},box_url_regex:function(){return"dev"===wt.env?new RegExp("^https://wtinbox.worktile.com/(.*)$"):new RegExp("^https://box.worktile.com/(.*)$")},default_team_pic:"/img/logo.png",default_avatar:"/img/default_avatar.png",default_box:"",default_project_bg:"",default_nopic:"/img/bg/nopic.png",wtbox_url:"https://wt-thumb.oss.aliyuncs.com/",wtlogo_url:"https://wt-team.oss.aliyuncs.com/",wtavatar_url:"https://wt-avatars.oss.aliyuncs.com/",wtall_url:"https://wt-all.oss.aliyuncs.com/",wtprj_url:"https://wt-prj.oss.aliyuncs.com/",desk_notify_key:"my_desk_notice",root_url:"https://worktile.com",colors:{completed:"#88b244",uncompleted:"#f7af49",expired:"#f47a55",archived:"#9fc6e7",created:"#9fe1e7"}},i.calcHeight=function(){var e=t("#header").outerHeight(!0),n=t(".mod_navbar").outerHeight(!0);t(".height-full").height(i.util.winHeight()),t(".height-noheader").height(i.util.winHeight()-e),t(".height-nonav").height(i.util.winHeight()-e-n-1),t(".height-main-min").css("minHeight",i.util.winHeight()-e-n),t.each(t(".height-nonav"),function(e,i){t(i).hasClass("leftpanel")&&(t(i).children().height()>parseInt(t(i).css("height"),10)?t(i).addClass("height-scroll"):t(i).removeClass("height-scroll"))}),t("[data-minheight]").each(function(){var e=parseInt(i.util.winHeight()-t(this).data("minheight"),10);t(this).css("minHeight",e)}),t("[data-maxheight]").each(function(){var e=parseInt(i.util.winHeight()-t(this).data("maxheight"),10);t(this).css("maxHeight",e)}),t("[data-height]").each(function(){var e=parseInt(i.util.winHeight()-t(this).attr("data-height"),10);t(this).css("height",e)})},i.emojis=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","ok_woman","no_good","information_desk_person","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],Date.prototype.isSameDay=function(e){return this.getFullYear()===e.getFullYear()&&this.getMonth()===e.getMonth()&&this.getDate()===e.getDate()},Date.prototype.format=function(e){var t={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},i.util={isIE:function(){return!!e.ActiveXObject},isIE6:function(){return i.util.isIE()&&!e.XMLHttpRequest},isIE7:function(){return i.util.isIE()&&!i.util.isIE6()&&!i.util.isIE8()},isIE8:function(){return i.util.isIE()&&!!document.documentMode},winHeight:function(){return t(e).height()},docWidth:function(){return t(document).width()},docHeight:function(){return t(document).height()},docOuterWidth:function(){return t(document).outerWidth()},docOuterHeight:function(){return t(document).outerHeight()},headerNavHeight:function(){return t("#header").outerHeight(!0)},modNavHeight:function(){return t(".mod_navbar").outerHeight(!0)},heightNoHeader:function(){return i.util.winHeight()-i.util.headerNavHeight()},heightNoNav:function(){return i.util.winHeight()-i.util.headerNavHeight()-i.util.modNavHeight()},dateToTimestamp:function(e){return isNaN(e)?Date.parse(e):e},isDate:function(e){return"object"==typeof e&&e.constructor==Date},getWeekday:function(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];if(i.util.isDate(e))return t[e.getDay()];var n=new Date(e);return t[n.getDay()]},datetimeToDTW:function(e){var t=moment(),n=moment(e),a="";return t.isSame(n,"year")||(a=n.year()+"年 "),a+=t.isSame(n,"day")?n.format("今天 "):n.format("MM月DD日 "),a+=n.format("HH:mm "),a+=i.util.getWeekday(n)}},i.helper={build_file_icon:function(e){var t=kzi.constant.get_file_icon(e);return"-1"===t&&(t=e.path),t},get_query:function(t){var i=String(e.document.location.href),n=new RegExp("(^|)"+t+"=([^&]*)(&|$)","gi").exec(i);return n&&n.length>2?n[2]:""},substr:function(e,t){return e?t>=e.length?e:e.substring(0,t-1)+"...":""},padLeft:function(e,t){return e.length>=t?e:i.helper.padLeft("0"+e,t)},mouse_position:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}}},i.validator={isEmail:function(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)},isUrl:function(e){var t=/^(https?|s?ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/;return t.test(e)}},i.get_cookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;i.length>n;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},i.debug=function(){i.config.debug()},i.console={log:function(e){i.config.debug()&&console.log(e)},time:function(e){i.config.debug()&&console.time(e)},timeEnd:function(e){i.config.debug()&&console.timeEnd(e)},group:function(e){i.config.debug()&&console.groupCollapsed(e)},groupEnd:function(e){i.config.debug()&&console.groupEnd(e)},profile:function(e){i.config.debug()&&console.profile(e)},profileEnd:function(e){i.config.debug()&&console.profile(e)}};var n=function(e,i,n){t(".notifications").notify({type:e,message:{text:i},onClosed:n}).show()};i.msg={info:function(e,t){n("info",e,t)},error:function(e,t){n("danger",e,t)},success:function(e,t){n("success",e,t)},warn:function(e,t){n("warning",e,t)}},i.localData={hname:location.hostname?location.hostname:"localStatus",isLocalStorage:e.localStorage?!0:!1,dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var e=new Date;e=e.getDate()+30,this.dataDom.expires=e.toUTCString()}catch(t){return!1}return!0},set:function(t,i){this.isLocalStorage?e.localStorage.setItem(t,i):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.setAttribute(t,i),this.dataDom.save(this.hname))},get:function(t){return this.isLocalStorage?e.localStorage.getItem(t):this.initDom()?(this.dataDom.load(this.hname),this.dataDom.getAttribute(t)):void 0},remove:function(e){this.isLocalStorage?localStorage.removeItem(e):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.removeAttribute(e),this.dataDom.save(this.hname))}};var a={login_name:{required:"用户名或者邮箱不能为空"},login_password:{required:"登录密码不能为空",maxlength:"输入的密码长度必须小于{maxlength}",minlength:"输入的密码长度不能小于{minlength}"},user_name:{required:"输入的用户名不能为空",maxlength:"输入的用户名长度必须小于{maxlength}",romoteuniquecheck:"输入的用户名已经存在，请重新输入",regex:"用户名必须为3-30个字符, 可以是字母、数字、下划线,以字母开头"},signup_team_name:{required:"团队名称不能为空",maxlength:"团队名称长度不能大于{maxlength}"},signup_name:{required:"输入的用户名不能为空",maxlength:"输入的用户名长度必须小于{maxlength}",romoteuniquecheck:"输入的用户名已经存在，请重新输入",regex:"用户名必须为3-30个字符, 可以是字母、数字、下划线,以字母开头"},signup_password:{required:"输入的密码不能为空",maxlength:"输入的密码长度必须小于{maxlength}",minlength:"输入的密码长度不能小于{minlength}"},signup_email:{required:"输入的邮箱不能为空",romoteuniquecheck:"该邮箱地址已经被注册，请重新输入"},apply_email:{required:"输入的邮箱不能为空",romoteuniquecheck:"该邮箱地址已经被注册，请重新输入",maxlength:"输入的邮箱长度必须小于{maxlength}"},team_name:{required:"团队名称不能为空",maxlength:"团队名称必须小于{maxlength}"},forget_email:{required:"输入的邮箱不能为空",romoteuniquecheck:"该邮箱地址不存在，请重新输入",maxlength:"输入的邮箱长度必须小于{maxlength}"},feedback_username:{required:"反馈输入的姓名不能为空"},feedback_email:{required:"反馈输入的邮箱不能为空"},feedback_desc:{required:"反馈内容不能为空"},display_name:{required:"姓名不能为空",regex:"姓名输入不合法，重新输入"},password:{required:"输入的密码不能为空",minlength:"输入的密码长度不能小于{minlength}"},pwd_old:{required:"原密码不能为空",minlength:"原密码长度不能小于{minlength}"},pwd_new:{required:"新密码不能为空",minlength:"新密码长度不能小于{minlength}"},prj_name:{required:"项目名不能为空"},task_name:{required:"任务名不能为空"},entry_select:{required:"任务所在列表不能为空"},new_email:{required:"新邮箱地址不能空",romoteuniquecheck:"该邮箱地址已经存在，请重新输入"},share_email:{required:"邮箱地址不能空"},share_desc:{required:"分享描述信息不能不空"},selected_team:{required:"请选择团队"},apply_team_desc:{required:"请填写申请公益团队的描述"},confirm_password:{required:"确认密码不能为空"},factor:{required:"动态验证码不能为空"},recovery_code:{required:"安全码不能为空"},signup_display_name:{regex:"姓名输入不合法，重新输入"}},s=new function(){var e={required:"该选项不能为空",maxlength:"该选项输入值长度不能大于{maxlength}",minlength:"该选项输入值长度不能小于{minlength}",email:"输入邮件的格式不正确",repeat:"两次填写的密码不一致",regex:"该选项输入格式不正确",romoteuniquecheck:"该输入值已经存在，请重新输入"};return this.get_msg=function(i,n){var s=null;switch(_.isEmpty(a[n.name])||_.isEmpty(a[n.name][i])||(s=a[n.name][i]),i){case"maxlength":return null!==s?s.replace("{maxlength}",t(n).attr("ng-maxlength")):e.maxlength.replace("{maxlength}",t(n).attr("ng-maxlength"));case"minlength":return null!==s?s.replace("{minlength}",t(n).attr("ng-minlength")):e.minlength.replace("{minlength}",t(n).attr("ng-minlength"));default:if(null!==s)return s;if(null===e[i])throw new Error("该验证规则("+i+")默认错误信息没有设置！");return e[i]}},this};i.validation_rules=s,i.activity_icon={project_create:"ai-blue icon-folder-close",project_update:"ai-yellow icon-folder-close",project_archive:"ai-dark-blue icon-archive",project_unarchive:"ai-red icon-archive",project_delete:"ai-red icon-trash",member_add:"ai-green icon-user",member_remove:"ai-red icon-user",member_join:"ai-orange icon-user",entry_create:"ai-blue icon-columns",entry_update:"ai-yellow icon-columns",entry_archive:"ai-dark-blue icon-archive",entry_unarchive:"ai-red icon-archive",entry_delete:"ai-red icon-trash",entry_restore:"ai-yellow icon-reply-all",entry_move:"ai-orange icon-share-alt",task_create:"ai-blue icon-check",task_update:"ai-yellow icon-check",task_delete:"ai-red icon-trash",task_restore:"ai-yellow icon-reply-all",task_move:"ai-orange icon-share-alt",task_expire_set:"ai-yellow icon-time",task_expire_reset:"ai-yellow icon-time",task_complete:"ai-green icon-check-sign",task_uncomplete:"ai-red icon-check-empty",task_archive:"ai-dark-blue icon-archive",task_unarchive:"ai-red icon-archive",todo_add:"ai-blue icon-th-list",todo_remove:"ai-red icon-th-list",todo_check:"ai-green icon-check-sign",todo_uncheck:"ai-red icon-check-empty",todo_update:"ai-yellow icon-th-list",labels_add:"ai-green icon-tag",labels_remove:"ai-red icon-tag",folder_add:"ai-blue icon-folder-open-alt",folder_update:"ai-yellow icon-folder-open-alt",folder_del:"ai-red icon-folder-open-alt",file_move:"ai-orange icon-share-alt",file_attach:"ai-blue icon-paper-clip",file_detach:"ai-red icon-paper-clip",file_upload:"ai-blue icon-file",file_update:"ai-yellow icon-file",file_new_version:"ai-blue icon-upload-alt",file_delete:"ai-red icon-trash",file_restore:"ai-yellow icon-reply-all",comment_add:"ai-blue icon-comment",comment_remove:"ai-red icon-comment",watch_add:"ai-purple icon-eye-open",watch_remove:"ai-red icon-eye-open",post_create:"ai-blue icon-comments-alt",post_update:"ai-yellow icon-comments-alt",post_delete:"ai-red icon-trash",post_restore:"ai-yellow icon-reply-all",page_create:"ai-blue icon-file-text-alt",page_update:"ai-yellow icon-file-text-alt",page_new_version:"ai-blue icon-file-text-alt",page_delete:"ai-red icon-trash",page_restore:"ai-yellow icon-reply-all",event_create:"ai-blue icon-calendar",event_update:"ai-yellow icon-calendar",event_delete:"ai-red icon-trash",attendee_add:"ai-green icon-user",attendee_remove:"ai-red icon-user"},i.init_fancybox=function(){var e={padding:0,scrolling:"auto",maxWidth:"95%",wrapCSS:"fancybox-scroll",openEffect:"elastic",closeEffect:"elastic",closeBtn:!1,beforeLoad:function(){_.isString(this.title)&&(this.title=filterXSS(this.title),this.title=this.title.replace(/\n/g,"<br>"))
},helpers:{title:{type:"outside",position:"top"},buttons:{tpl:['<div id="fancybox-buttons"><ul>','<li><a class="btnPrev" title="上一个" href="javascript:;"></a></li>','<li><a class="btnPlay" title="开始幻灯播放" href="javascript:;"></a></li>','<li><a class="btnNext" title="下一个" href="javascript:;"></a></li>','<li><a class="btnToggle" title="切换大小" href="javascript:;"></a></li>','<li><a class="btnClose" title="关闭" href="javascript:;"></a></li>',"</ul></div>"].join("")},thumbs:{width:50,height:50},media:{}},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:['<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" '," webkitAllowFullScreen mozallowfullscreen allowFullScreen",i.util.isIE()?' allowtransparency="true"':"",,"></iframe>"].join(""),error:'<p class="fancybox-error">内容加载失败.<br/>请稍后重试.</p>',closeBtn:'<a title="关闭" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="下一个" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="上一个" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}};t(".fancybox-file").fancybox(e)};var r=function(){t(document).ready(function(){i.calcHeight(),i.init_fancybox()}),t(window).load(function(){i.calcHeight()}),setInterval(function(){kzi.calcHeight()},150);var e=_.debounce(function(){kzi.calcHeight()},50);t(window).on("resize",e)};r(),e.kzi=i}(window,jQuery);var Heyoffline,addEvent,destroy,extend,setStyles,__bind=function(e,t){return function(){return e.apply(t,arguments)}};extend=function(e,t){var i;if(t)for(i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},arguments.callee(e[i],t[i])):e[i]=t[i];return e},addEvent=function(e,t,i,n){return null==n&&(n=!1),e.addEventListener?e.addEventListener(t,i,n):void 0},setStyles=function(e,t){var i,n;n=[];for(i in t)n.push(e.style[i]=t[i]);return n},destroy=function(e){return e.parentNode.removeChild(e)},Heyoffline=function(){function e(e){this.hideMessage=__bind(this.hideMessage,this),this.offline=__bind(this.offline,this),this.online=__bind(this.online,this),extend(this.options,e),this.setup()}return e.prototype.version="1.1.1",e.prototype.options={text:{title:"You're currently offline",content:"Seems like you've gone offline,                you might want to wait until your network comes back before continuing.<br /><br />                This message will self-destruct once you're online again.",button:"Relax, I know what I'm doing"},monitorFields:!1,prefix:"heyoffline",noStyles:!1,disableDismiss:!1,elements:["input","select","textarea","*[contenteditable]"]},e.prototype.modified=!1,e.prototype.setup=function(){return this.events={element:["keyup","change"],network:["online","offline"]},this.elements={fields:document.querySelectorAll(this.options.elements.join(",")),overlay:document.createElement("div"),modal:document.createElement("div"),heading:document.createElement("h2"),content:document.createElement("p"),button:document.createElement("a")},this.defaultStyles={overlay:{position:"absolute",top:0,left:0,width:"100%",background:"rgba(0, 0, 0, 0.3)",zIndex:1300},modal:{padding:"15px",background:"#fff",boxShadow:"0 2px 30px rgba(0, 0, 0, 0.3)",width:"450px",margin:"0 auto",position:"relative",top:"30%",color:"#444",borderRadius:"2px",zIndex:600},heading:{fontSize:"1.7em",paddingBottom:"15px"},content:{paddingBottom:"15px"},button:{fontWeight:"bold",cursor:"pointer"}},this.attachEvents()},e.prototype.createElements=function(){return this.createElement(document.body,"overlay"),this.resizeOverlay(),this.createElement(this.elements.overlay,"modal"),this.createElement(this.elements.modal,"heading",this.options.text.title),this.createElement(this.elements.modal,"content",this.options.text.content),this.options.disableDismiss?void 0:(this.createElement(this.elements.modal,"button",this.options.text.button),addEvent(this.elements.button,"click",this.hideMessage))},e.prototype.createElement=function(e,t,i){return this.elements[t].setAttribute("class",""+this.options.prefix+"_"+t),this.elements[t]=e.appendChild(this.elements[t]),i&&(this.elements[t].innerHTML=i),this.options.noStyles?void 0:setStyles(this.elements[t],this.defaultStyles[t])},e.prototype.resizeOverlay=function(){return setStyles(this.elements.overlay,{height:""+window.innerHeight+"px"})},e.prototype.destroyElements=function(){return this.elements.overlay?destroy(this.elements.overlay):void 0},e.prototype.attachEvents=function(){var e,t,i,n,a,s,r,o,l=this;for(r=this.elements.fields,i=0,a=r.length;a>i;i++)t=r[i],this.elementEvents(t);for(o=this.events.network,n=0,s=o.length;s>n;n++)e=o[n],this.networkEvents(e);return addEvent(window,"resize",function(){return l.resizeOverlay()})},e.prototype.elementEvents=function(e){var t,i,n,a,s,r=this;for(a=this.events.element,s=[],i=0,n=a.length;n>i;i++)t=a[i],s.push(function(t){return addEvent(e,t,function(){return r.modified=!0})}(t));return s},e.prototype.networkEvents=function(e){return addEvent(window,e,this[e])},e.prototype.online=function(){return this.hideMessage()},e.prototype.offline=function(){return this.options.monitorFields?this.modified?this.showMessage():void 0:this.showMessage()},e.prototype.showMessage=function(){return this.createElements(),this.options.onOnline?this.options.onOnline.call(this):void 0},e.prototype.hideMessage=function(e){return e&&e.preventDefault(),this.destroyElements(),this.options.onOffline?this.options.onOffline.call(this):void 0},e}();var __whitespace={" ":!0,"	":!0,"\n":!0,"\f":!0,"\r":!0},difflib={defaultJunkFunction:function(e){return __whitespace.hasOwnProperty(e)},stripLinebreaks:function(e){return e.replace(/^[\n\r]*|[\n\r]*$/g,"")},stringAsLines:function(e){for(var t=e.indexOf("\n"),i=e.indexOf("\r"),n=t>-1&&i>-1||0>i?"\n":"\r",a=e.split(n),s=0;a.length>s;s++)a[s]=difflib.stripLinebreaks(a[s]);return a},__reduce:function(e,t,i){if(null!=i)var n=i,a=0;else{if(!t)return null;var n=t[0],a=1}for(;t.length>a;a++)n=e(n,t[a]);return n},__ntuplecomp:function(e,t){for(var i=Math.max(e.length,t.length),n=0;i>n;n++){if(t[n]>e[n])return-1;if(e[n]>t[n])return 1}return e.length==t.length?0:t.length>e.length?-1:1},__calculate_ratio:function(e,t){return t?2*e/t:1},__isindict:function(e){return function(t){return e.hasOwnProperty(t)}},__dictget:function(e,t,i){return e.hasOwnProperty(t)?e[t]:i},SequenceMatcher:function(e,t,i){this.set_seqs=function(e,t){this.set_seq1(e),this.set_seq2(t)},this.set_seq1=function(e){e!=this.a&&(this.a=e,this.matching_blocks=this.opcodes=null)},this.set_seq2=function(e){e!=this.b&&(this.b=e,this.matching_blocks=this.opcodes=this.fullbcount=null,this.__chain_b())},this.__chain_b=function(){for(var e=this.b,t=e.length,i=this.b2j={},n={},a=0;e.length>a;a++){var s=e[a];if(i.hasOwnProperty(s)){var r=i[s];t>=200&&100*r.length>t?(n[s]=1,delete i[s]):r.push(a)}else i[s]=[a]}for(var s in n)n.hasOwnProperty(s)&&delete i[s];var o=this.isjunk,l={};if(o){for(var s in n)n.hasOwnProperty(s)&&o(s)&&(l[s]=1,delete n[s]);for(var s in i)i.hasOwnProperty(s)&&o(s)&&(l[s]=1,delete i[s])}this.isbjunk=difflib.__isindict(l),this.isbpopular=difflib.__isindict(n)},this.find_longest_match=function(e,t,i,n){for(var p,a=this.a,s=this.b,r=this.b2j,o=this.isbjunk,l=e,c=i,d=0,u=null,f={},h=[],m=e;t>m;m++){var _={},g=difflib.__dictget(r,a[m],h);for(var v in g)if(g.hasOwnProperty(v)){if(u=g[v],i>u)continue;if(u>=n)break;_[u]=p=difflib.__dictget(f,u-1,0)+1,p>d&&(l=m-p+1,c=u-p+1,d=p)}f=_}for(;l>e&&c>i&&!o(s[c-1])&&a[l-1]==s[c-1];)l--,c--,d++;for(;t>l+d&&n>c+d&&!o(s[c+d])&&a[l+d]==s[c+d];)d++;for(;l>e&&c>i&&o(s[c-1])&&a[l-1]==s[c-1];)l--,c--,d++;for(;t>l+d&&n>c+d&&o(s[c+d])&&a[l+d]==s[c+d];)d++;return[l,c,d]},this.get_matching_blocks=function(){if(null!=this.matching_blocks)return this.matching_blocks;for(var a,s,r,o,l,c,d,u,p,e=this.a.length,t=this.b.length,i=[[0,e,0,t]],n=[];i.length;)l=i.pop(),a=l[0],s=l[1],r=l[2],o=l[3],p=this.find_longest_match(a,s,r,o),c=p[0],d=p[1],u=p[2],u&&(n.push(p),c>a&&d>r&&i.push([a,c,r,d]),s>c+u&&o>d+u&&i.push([c+u,s,d+u,o]));n.sort(difflib.__ntuplecomp);var g,v,b,f=0,h=0,m=0,_=0,y=[];for(var w in n)n.hasOwnProperty(w)&&(_=n[w],g=_[0],v=_[1],b=_[2],f+m==g&&h+m==v?m+=b:(m&&y.push([f,h,m]),f=g,h=v,m=b));return m&&y.push([f,h,m]),y.push([e,t,0]),this.matching_blocks=y,this.matching_blocks},this.get_opcodes=function(){if(null!=this.opcodes)return this.opcodes;var e=0,t=0,i=[];this.opcodes=i;var n,a,s,r,o,l=this.get_matching_blocks();for(var c in l)l.hasOwnProperty(c)&&(n=l[c],a=n[0],s=n[1],r=n[2],o="",a>e&&s>t?o="replace":a>e?o="delete":s>t&&(o="insert"),o&&i.push([o,e,a,t,s]),e=a+r,t=s+r,r&&i.push(["equal",a,e,s,t]));return i},this.get_grouped_opcodes=function(e){e||(e=3);var t=this.get_opcodes();t||(t=[["equal",0,1,0,1]]);var i,n,a,s,r,o;"equal"==t[0][0]&&(i=t[0],n=i[0],a=i[1],s=i[2],r=i[3],o=i[4],t[0]=[n,Math.max(a,s-e),s,Math.max(r,o-e),o]),"equal"==t[t.length-1][0]&&(i=t[t.length-1],n=i[0],a=i[1],s=i[2],r=i[3],o=i[4],t[t.length-1]=[n,a,Math.min(s,a+e),r,Math.min(o,r+e)]);var l=e+e,c=[],d=[];for(var u in t)t.hasOwnProperty(u)&&(i=t[u],n=i[0],a=i[1],s=i[2],r=i[3],o=i[4],"equal"==n&&s-a>l&&(c.push([n,a,Math.min(s,a+e),r,Math.min(o,r+e)]),d.push(c),c=[],a=Math.max(a,s-e),r=Math.max(r,o-e)),c.push([n,a,s,r,o]));return!c||1==c.length&&"equal"==c[0][0]||d.push(c),d},this.ratio=function(){return matches=difflib.__reduce(function(e,t){return e+t[t.length-1]},this.get_matching_blocks(),0),difflib.__calculate_ratio(matches,this.a.length+this.b.length)},this.quick_ratio=function(){var e,t;if(null==this.fullbcount){this.fullbcount=e={};for(var i=0;this.b.length>i;i++)t=this.b[i],e[t]=difflib.__dictget(e,t,0)+1}e=this.fullbcount;for(var n={},a=difflib.__isindict(n),s=numb=0,i=0;this.a.length>i;i++)t=this.a[i],numb=a(t)?n[t]:difflib.__dictget(e,t,0),n[t]=numb-1,numb>0&&s++;return difflib.__calculate_ratio(s,this.a.length+this.b.length)},this.real_quick_ratio=function(){var e=this.a.length,t=this.b.length;return _calculate_ratio(Math.min(e,t),e+t)},this.isjunk=i?i:difflib.defaultJunkFunction,this.a=this.b=null,this.set_seqs(e,t)}};diffview={buildView:function(e){function l(e,t){var i=document.createElement(e);return i.className=t,i}function c(e,t){var i=document.createElement(e);return i.appendChild(document.createTextNode(t)),i}function d(e,t,i){var n=document.createElement(e);return n.className=t,n.appendChild(document.createTextNode(i)),n}function m(e,t,i,n,a){return i>t?(e.appendChild(c("th",(t+1).toString())),e.appendChild(d("td",a,n[t].replace(/\t/g,"    "))),t+1):(e.appendChild(document.createElement("th")),e.appendChild(l("td","empty")),t)}function _(e,t,i,n,a){e.appendChild(c("th",null==t?"":(t+1).toString())),e.appendChild(c("th",null==i?"":(i+1).toString())),e.appendChild(d("td",a,n[null!=t?t:i].replace(/\t/g,"    ")))}var t=e.baseTextLines,i=e.newTextLines,n=e.opcodes,a=e.baseTextName?e.baseTextName:"Base Text",s=e.newTextName?e.newTextName:"New Text",r=e.contextSize,o=0==e.viewType||1==e.viewType?e.viewType:0;if(null==t)throw"Cannot build diff view; baseTextLines is not defined.";if(null==i)throw"Cannot build diff view; newTextLines is not defined.";if(!n)throw"Canno build diff view; opcodes is not defined.";var u=document.createElement("thead"),p=document.createElement("tr");u.appendChild(p),o?(p.appendChild(document.createElement("th")),p.appendChild(document.createElement("th")),p.appendChild(d("th","texttitle",a+" vs. "+s))):(p.appendChild(document.createElement("th")),p.appendChild(d("th","texttitle",a)),p.appendChild(document.createElement("th")),p.appendChild(d("th","texttitle",s))),u=[u];for(var h,f=[],g=0;n.length>g;g++){code=n[g],change=code[0];for(var v=code[1],b=code[2],y=code[3],w=code[4],k=Math.max(b-v,w-y),j=[],x=[],$=0;k>$;$++){if(r&&n.length>1&&(g>0&&$==r||0==g&&0==$)&&"equal"==change){var C=k-(0==g?1:2)*r;if(C>1){if(j.push(p=document.createElement("tr")),v+=C,y+=C,$+=C-1,p.appendChild(c("th","...")),o||p.appendChild(d("td","skip","")),p.appendChild(c("th","...")),p.appendChild(d("td","skip","")),g+1==n.length)break;continue}}j.push(p=document.createElement("tr")),o?"insert"==change?_(p,null,y++,i,change):"replace"==change?(x.push(h=document.createElement("tr")),b>v&&_(p,v++,null,t,"delete"),w>y&&_(h,null,y++,i,"insert")):"delete"==change?_(p,v++,null,t,change):_(p,v++,y++,t,change):(v=m(p,v,b,t,change),y=m(p,y,w,i,change))}for(var $=0;j.length>$;$++)f.push(j[$]);for(var $=0;x.length>$;$++)f.push(x[$])}f.push(p=d("th","author"," ")),p.setAttribute("colspan",o?3:4),u.push(p=document.createElement("tbody"));for(var g in f)f.hasOwnProperty(g)&&p.appendChild(f[g]);p=l("table","diff"+(o?" inlinediff":""));for(var g in u)u.hasOwnProperty(g)&&p.appendChild(u[g]);return p}},function(){"use strict";angular.module("ui.bootstrap.popbox",["ui.bootstrap.position"]).provider("$popbox",[function(){var e={placement:"top",align:null,animation:!0,popupDelay:0,arrow:!1,popboxClass:"popbox",transitionClass:"fade",triggerClass:"in",popboxOpenClass:"popbox-open",resolve:{},backdropFade:!1,popboxFade:!1,keyboard:!0,backdropClick:!0,autoAdapt:!1},t={},i=2,n=58;this.options=function(e){t=e},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$injector","$position","$timeout",function(a,s,r,o,l,c,d,u,p,f){function m(e){var t=angular.element("<div>");return t.addClass(e),t}function g(i){var n=this,a=this.options=angular.extend({},e,t,i);this._open=!1,this._target=$(n.options.target.target),$(this._target).hasClass("js-popbox")||$(this._target).parents(".js-popbox").length>0&&(this._target=$(this._target).parents(".js-popbox").eq(0)),this.modalEl=m(a.popboxClass),a.popboxFade&&(this.modalEl.addClass(a.transitionClass),this.modalEl.removeClass(a.triggerClass)),this.handledEscapeKey=function(e){27===e.which&&(n.close(),e.preventDefault(),n.$scope.$apply())},this.handledSortable=function(){n.close(),n.$scope.$apply()},this.handleBackDropClick=function(e){for(var t=e.target,i=!0;t;){if($(t).hasClass("popbox")||$(t).hasClass("popbox-step-li")||$(t).hasClass("openpop")){i=!1;break}t=t.parentNode}0===$(e.target).parents("body").length&&(i=!1),i&&h.hasClass("popbox-open")&&(n.close(),e.preventDefault(),n.$scope.$apply())},this.handleLocationChange=function(){n.close()}}var h=s.find("body");return g.prototype.isOpen=function(){return this._open},g.prototype.open=function(e,t){var a=this,s=this.options,c=a.options.popboxClass;if(h.hasClass("popbox-open")&&$("."+c).length>0){if(this._target[0]===$("."+c).scope().popbox._target[0])return $("."+c).scope().popbox.close(),void 0;$("."+a.options.popboxClass).each(function(){$(this).scope().popbox.close()})}if(e&&(s.templateUrl=e),t&&(s.controller=t),!s.template&&!s.templateUrl)throw new Error("Popbox.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(e){var t=e.$scope=a.$scope=e.$scope?e.$scope:o.$new();if(a.modalEl.html(e.$template),a.options.controller){var s=l(a.options.controller,e);a.modalEl.children().data("ngControllerController",s)}a._addElementsToDom(),r(a.modalEl)(t),f(function(){a.options.popboxFade&&a.modalEl.addClass(a.options.triggerClass)});var c=kzi.util.docWidth(),d=kzi.util.docHeight(),u=kzi.util.docOuterWidth();kzi.util.docOuterHeight();var _=null,g=function(){var e,t={};e=p.position(a._target),e.top=a.options.top||$(a._target).offset().top,e.left=a.options.left||$(a._target).offset().left,a.modalEl.css({display:"block"});var s=$(a.modalEl).outerWidth(!0),r=$(a.modalEl).outerHeight(!0);a.options.top&&(e.height=0),a.options.left&&(e.width=0);var o=$(a._target).data("placement");o||(o=a.options.placement);var l=$(a._target).data("align");l||(l=a.options.align);var f=$(a._target).data("offset");f=null==f?i:parseInt(f,10);var m={set_box_placement_auto_lf:function(){(null===o||"auto"===o)&&(o=c/2>e.left?"right":"left")},set_box_align_auto_tb:function(){"auto"===l&&(l=d/2>e.top?"top":"bottom")},set_top_position:function(){"top"===l?t.top=~~e.top:"bottom"===l?t.bottom=d-e.top-e.height:e.top>d/2?t.bottom=~~(d-e.top-e.height/2-r/2):t.top=~~(e.top+e.height/2-r/2),void 0!==t.top&&null!==t.top&&(t.top+r>d?t.top=d-r-i:n>t.top&&(t.top=n+i)),void 0!==t.bottom&&null!==t.bottom&&(0>t.bottom?t.bottom=i:t.bottom+r+n>d&&(t.bottom=d-r-n))},set_left_position:function(){"right"===l?t.right=c-e.left-e.width:t.left="left"===l?e.left:e.left+e.width/2-s/2,void 0!==t.left&&null!==t.left&&(0>=t.left?t.left=i:t.left+s>c&&(t.left="auto",t.right=i)),void 0!==t.right&&null!==t.right&&(0>t.right?t.right=i:t.right+s>c&&(t.right="auto",t.left=i))}};switch(m.set_box_placement_auto_lf(),o){case"right":m.set_top_position(),t.left=~~(e.left+e.width+i),t.left+s>u&&(t.left="auto",t.right=~~(u-e.left+i));break;case"left":m.set_top_position(),t.right=~~(c-e.left+i),t.right+s>u&&(t.right=~~(e.left+s+i));break;case"top":m.set_left_position(),t.bottom=~~(d-e.top+i),t.bottom+r>d-n&&(t.bottom=void 0,t.top=~~(e.top+e.height+i));break;case"bottom":m.set_left_position(),t.top=~~(e.top+e.height+f),t.top+r>d&&(t.top=void 0,t.bottom=~~(d-e.top+i),t.bottom+r>d-n&&(t.top=~~(d-n-r),t.bottom=void 0));break;default:t={top:~~(e.top+e.height)+2+"px",left:~~(e.left-e.width/2)+"px"},a.options.placement="bottom"}_=t,t=angular.extend({left:"auto",right:"auto"},t),a.modalEl.css(t),h.addClass(a.options.popboxOpenClass)},v=$(a._target).data("auto-adapt");v?a.$watcher=t.$watch(function(){return $(a.modalEl).outerWidth(!0)+","+$(a.modalEl).outerHeight(!0)},function(){f(function(){g()},100)}):f(function(){g()},100),a._bindEvents()}),this.deferred=d.defer(),this.deferred.promise},g.prototype.close=function(e,t){var i=this;this._getFadingElements(),_.isFunction(i.$watcher)&&i.$watcher(),h.removeClass(i.options.popboxOpenClass),this._onCloseComplete(e,t)},g.prototype._getFadingElements=function(){var e=[];return this.options.popboxFade&&e.push(this.modalEl),e},g.prototype._bindEvents=function(){this.options.keyboard&&h.bind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&(h.bind("mousedown.popbox",this.handleBackDropClick),h.bind("sortstart.popbox",this.handledSortable)),this.modalEl.bind("mousedown.popbox",function(){}),this.$scope.$on("$locationChangeSuccess",this.handleLocationChange)},g.prototype._unbindEvents=function(){this.options.keyboard&&h.unbind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&h.unbind("mousedown.popbox",this.handleBackDropClick),h.unbind("sortstart.popbox",this.handledSortable)},g.prototype._onCloseComplete=function(e,t){this._removeElementsFromDom(),t||this._unbindEvents(),this.deferred.resolve(e),angular.isFunction(this.options.onCloseComplete)&&this.options.onCloseComplete()},g.prototype._addElementsToDom=function(){$(this._target).addClass("openpop"),h.append(this.modalEl),this._open=!0},g.prototype._removeElementsFromDom=function(){this._target.removeClass("openpop"),this.modalEl.remove(),this._open=!1},g.prototype._loadResolves=function(){var i,e=[],t=[],n=this;return this.options.template?i=d.when(this.options.template):this.options.templateUrl&&(i=a.get(this.options.templateUrl,{cache:c}).then(function(e){return e.data})),angular.forEach(this.options.resolve||[],function(i,n){t.push(n),e.push(angular.isString(i)?u.get(i):u.invoke(i))}),t.push("$template"),e.push(i),d.all(e).then(function(e){var i={};return angular.forEach(e,function(e,n){i[t[n]]=e}),i.popbox=n,i})},{popbox:function(e){return new g(e)}}}]}])}(),wt.service=angular.module("wt.service",[]),angular.module("wt.service").factory("data",["$http",function(e){"use strict";var t={get:1,post:2,put:3,del:4},i=function(e){return e.indexOf("?")>-1?e+"&dt="+(new Date).getTime():e+"?dt="+(new Date).getTime()},n=function(n,a,s,r,o,l){var c=function(e,i,n,s){if(s.url===void 0&&angular.noop(),200===e.code)angular.isFunction(r)&&r(e);else{if($(document).scope().global.loading_done=!0,2005===e.code)return $(document).scope().returnToSignin(),void 0;if(angular.isFunction(o))o(e);else{if(e.code===kzi.statuses.error.permission_deny.code)return kzi.msg.error("没有权限操作"),void 0;if(!$(document).scope().global.show_msg){$(document).scope().global.show_msg=!0;var l="操作失败，请重新尝试";a===t.get&&(l="加载失败，请重新尝试"),kzi.msg.error(l,function(){$(document).scope().global.show_msg=!1})}}}},d=function(){if(!$(document).scope().global.show_msg){$(document).scope().global.show_msg=!0;var r="操作失败，请重新尝试";a===t.get&&(r="加载失败，请重新尝试"),kzi.msg.error(r,function(){$(document).scope().global.show_msg=!1})}u()},u=function(){angular.isFunction(l)&&l()},p=function(){kzi.console.timeEnd("Ajax："+n)},f=null;switch(a){case t.get:n=i(n),kzi.console.time("Ajax："+n),f=e.get(n).success(p).success(c).error(d)["finally"](u);break;case t.post:kzi.console.time("Ajax："+n),f=e.post(n,{data:s}).success(p).success(c).error(d)["finally"](u);break;case t.del:kzi.console.time("Ajax："+n),f=e({method:"delete",url:n}).success(p).success(c).error(d)["finally"](u);break;case t.put:kzi.console.time("Ajax："+n),f=e.put(n,{data:s}).success(p).success(c).error(d)["finally"](u);break;default:throw new Error("传入的方法类型不支持")}return f},a=function(e,i,a,s){return n(e,t.get,null,i,a,s)},s=function(e,i,a,s,r){return n(e,t.post,i,a,s,r)},r=function(e,i,a,s){return n(e,t.del,null,i,a,s)},o=function(e,i,a,s,r){return n(e,t.put,i,a,s,r)};return{error:function(){$(document).scope().global.show_msg||($(document).scope().global.show_msg=!0,kzi.msg.error("加载失败，请重新尝试",function(){$(document).scope().global.show_msg=!1}))},signin:function(e,t,i,n,a){var r={name:e,password:t};s("/api/user/signin",r,i,n,a)},signup:function(e,t,i,n,a,r,o,l){var c={name:e,email:t,password:i,display_name:n,utm_source:a};s("/api/user/signup",c,r,o,l)},signout:function(e,t,i){s("/api/user/signout",null,e,t,i)},auth:function(e,t,i){a("/api/me",e,t,i)},watch:function(e,t,i,n,a,r,o){s("/api/"+t+"/"+i+"/watcher?pid="+e,{uids:[n]},a,r,o)},watch_batch:function(e,t,i,n,a,r,o){s("/api/"+t+"/"+i+"/watcher?pid="+e,{uids:n},a,r,o)},unwatch:function(e,t,i,n,a,s,o){r("/api/"+t+"/"+i+"/watchers/"+n+"?pid="+e,a,s,o)},get_my_watchs:function(e,t,i,n,s,r,o){a("/api/watchs/forme?team_id="+e+"&type="+t+"&since_id="+i+"&count="+n,s,r,o)},search_all:function(e,t,i,n,s){a("/api/search?team_id="+e+"&keywords="+t+"&scopes=all",i,n,s)},user:{get:function(e,t,i){a("/api/account/basic",e,t,i)},update:function(e,t,i,n,a){o("/api/user",{display_name:e,desc:t,initials:""},i,n,a)},email_check:function(e,t,i,n){a("/api/user/email/check?email="+e,t,i,n)},name_check:function(e,t,i,n){a("/api/user/name/check?name="+e,t,i,n)},forgot_pwd:function(e,t,i,n){s("/api/user/password/forgot",{email:e},t,i,n)},change_pwd:function(e,t,i,n,a){o("/api/user/password/change",{oldpassword:e,password:t},i,n,a)},reset_pwd:function(e,t,i,n,a){o("/api/user/password/reset?token="+e,{password:t},i,n,a)},set_avatar:function(e,t,i,n){o("/api/user/avatar",{avatar:e},t,i,n)},search_user:function(e,t,i,n){a("/api/user/search?criteria="+e,t,i,n)},get_user_prefs:function(e,t,i,n){a("/api/users/"+e+"/prefs",t,i,n)},set_user_prefs:function(e,t,i,n,a,s){o("/api/users/"+e+"/prefs",{key:t,value:i},n,a,s)},apply:function(e,t,i,n,a,r){s("/api/apply",{email:e,team_name:t,team_desc:i},n,a,r)},get_apply:function(e,t,i,n){a("/api/apply?code="+e,t,i,n)},apply_signup:function(e,t,i,n,a,r,o,l){var c={name:t,email:i,password:n,team_name:a};s("/api/user/apply_signup?code="+e,c,r,o,l)},email_change_apply:function(e,t,i,n){s("/api/user/email/apply",{email:e},t,i,n)},reset_email:function(e,t,i,n){o("/api/user/email/reset?token="+e,null,t,i,n)},activate_email:function(e,t,i,n){o("/api/user/activate?code="+e,"",t,i,n)},resend_activation_email:function(e,t,i){o("/api/user/activation/resend","",e,t,i)},signin_twofactor:function(e,t,i,n,a,r){var o={name:t,password:i,factor:e};s("/api/user/twofactor",o,n,a,r)},signin_recovery:function(e,t,i,n,a,r){var o={name:t,password:i,factor:e};s("/api/user/recovery",o,n,a,r)},caltoken:function(e,t,i,n){a("/api/user/caltoken?uid="+e,t,i,n)},caltoken_reset:function(e,t,i,n){o("/api/user/caltoken/reset?uid="+e,{},t,i,n)}},account:{get_basic:function(e,t,i){a("/api/account/basic",e,t,i)},get_teams:function(e,t,i){a("/api/account/teams",e,t,i)},get_projects:function(e,t,i){a("/api/account/projects",e,t,i)},get_security:function(e,t,i,n){a("/api/account/security?page="+e,t,i,n)},conform_password:function(e,t,i,n){o("/api/account/sudo/confirm",{password:e},t,i,n)},get_recovery_codes:function(e,t,i){a("/api/account/twofactor/recovery",e,t,i)},get_twofactor_secret:function(e,t,i){a("/api/account/twofactor/secret",e,t,i)},enable_twofactor:function(e,t,i,n){o("/api/account/twofactor/enable",{factor:e},t,i,n)},disable_twofactor:function(e,t,i){o("/api/account/twofactor/disable",{},e,t,i)},get_apps:function(e,t,i){a("/api/account/apps",e,t,i)},decommissioning_app:function(e,t,i,n){r("/api/account/apps/"+e,t,i,n)}},team:{get:function(e,t,i,n){a("/api/teams/"+e,t,i,n)},get_list:function(e,t,i){a("/api/teams",e,t,i)},add:function(e,t,i,n,a){s("/api/team/",{name:e,desc:t},i,n,a)},update:function(e,t,i,n,a,s,r){o("/api/teams/"+e+"/account",{name:t,desc:i,url:n},a,s,r)},set_logo:function(e,t,i,n,a){o("/api/teams/"+e+"/account/logo",{pic:t},i,n,a)},transfer:function(e,t,i,n,a){o("/api/teams/"+e+"/account/transfer",{uid:t},i,n,a)},dismiss:function(e,t,i,n){r("/api/teams/"+e+"/account",t,i,n)},add_member:function(e,t,i,n,a){s("/api/teams/"+e+"/member",{uid:t},i,n,a)},del_member:function(e,t,i,n,a){r("/api/teams/"+e+"/members/"+t,i,n,a)},invite_member:function(e,t,i,n,a,r,o){s("/api/teams/"+e+"/member/invite",{members:t,message:i,project_ids:n},a,r,o)},uninvite_member:function(e,t,i,n,a){o("/api/teams/"+e+"/members/"+t+"/uninvite",null,i,n,a)},set_role:function(e,t,i,n,a,s){o("/api/teams/"+e+"/members/"+t+"/role",{role:i},n,a,s)},set_group:function(e,t,i,n,a,s){o("/api/teams/"+e+"/members/"+t+"/group",{group_id:i},n,a,s)},get_team_members:function(e,t,i,n){a("/api/teams/"+e+"/members",t,i,n)},add_team_member:function(e,t,i,n,a,r){s("/api/teams/"+e+"/member",{uid:t,role:i},n,a,r)},add_group:function(e,t,i,n,a){s("/api/teams/"+e+"/group",{name:t},i,n,a)},del_group:function(e,t,i,n,a){r("/api/teams/"+e+"/groups/"+t,i,n,a)},update_group:function(e,t,i,n,a,s){o("/api/teams/"+e+"/groups/"+t,{name:i},n,a,s)},get_groups:function(e,t,i,n){a("/api/teams/"+e+"/groups",t,i,n)},set_current:function(e,t,i,n){o("/api/teams/"+e+"/current",null,t,i,n)},get_member_projects:function(e,t,i,n,s){a("/api/teams/"+e+"/members/"+t+"/projects",i,n,s)},leave:function(e,t,i,n){o("/api/teams/"+e+"/leave",null,t,i,n)},commonweal_apply:function(e,t,i,n,a,r){s("/api/teams/"+e+"/commonweal/apply",{type:t,desc:i},n,a,r)},summary:function(e,t,i,n){a("/api/teams/"+e+"/account/summary",t,i,n)},upgrade:function(e,t,i,n,a){o("/api/teams/"+e+"/account/upgrade",{quota:t},i,n,a)},degrade:function(e,t,i,n){o("/api/teams/"+e+"/account/degrade",null,t,i,n)},payment:function(e,t,i,n){a("/api/teams/"+e+"/account/payment",t,i,n)},get_payments:function(e,t,i,n,s){a("/api/teams/"+e+"/account/payments?page="+t,i,n,s)},get_billings:function(e,t,i,n,s){a("/api/teams/"+e+"/account/billings",i,n,s)},redeem_coupon:function(e,t,i,n,a){s("/api/teams/"+e+"/account/redeem",{coupon_no:t},i,n,a)},cancel_payment:function(e,t,i,n,a){r("/api/teams/"+e+"/account/payment?pay_id="+t,i,n,a)},get_account_members:function(e,t,i,n){a("/api/teams/"+e+"/account/members",t,i,n)},get_account_projects:function(e,t,i,n){a("/api/teams/"+e+"/account/projects",t,i,n)},get_security_histories:function(e,t,i,n,s){a("/api/teams/"+e+"/account/security?page="+t,i,n,s)},change_subscription:function(e,t,i,n,a){o("/api/teams/"+e+"/account/subscription",{quota:t},i,n,a)},bulk_export:function(e,t,i,n){s("/api/teams/"+e+"/account/export",null,t,i,n)},get_bulk_export:function(e,t,i,n,s){a("/api/teams/"+e+"/account/export?page="+t,i,n,s)},set_visibility:function(e,t,i,n,a){o("/api/teams/"+e+"/account/visibility",{visibility:t},i,n,a)},get_tasks:function(e,t,i,n,s,r,o,l){a("/api/teams/"+e+"/tasks?page="+s+"&filter="+n+"&uid="+t+"&pid="+i,r,o,l)},get_tasks_overview:function(e,t,i,n){a("/api/teams/"+e+"/tasks/overview",t,i,n)},join_link_open:function(e,t,i,n){o("/api/teams/"+e+"/link/join/open",{},t,i,n)},join_link_close:function(e,t,i,n){o("/api/teams/"+e+"/link/join/close",{},t,i,n)},join_by_link:function(e,t,i,n,a){o("/api/teams/"+e+"/link/join?code="+t,{},i,n,a)},join_info:function(e,t,i,n){a("/api/link/join/"+e+"?type=team",t,i,n)}},project:{get_all:function(e,t,i,n){a("/api/projects/all?type="+e,t,i,n)},add_personal_project:function(e,t,i,n,a,r){s("/api/project",{name:e,desc:t,visibility:i},n,a,r)},add_team_project:function(e,t,i,n,a,r,o){s("/api/teams/"+e+"/project",{name:t,desc:i,visibility:n},a,r,o)},get:function(e,t,i,n){return a("/api/projects/"+e,t,i,n)},update:function(e,t,i,n,a,s,r){o("/api/projects/"+e,{name:t,desc:i,visibility:n},a,s,r)},del:function(e,t,i,n){r("/api/projects/"+e,t,i,n)},set_logo:function(e,t,i,n,a,s){o("/api/projects/"+e+"/logo",{bg:t,pic:i},n,a,s)},archive:function(e,t,i,n){o("/api/projects/"+e+"/archive",null,t,i,n)},unarchive:function(e,t,i,n){o("/api/projects/"+e+"/unarchive",null,t,i,n)},set_prefs:function(e,t,i,n,a,s){o("/api/projects/"+e+"/prefs",{key:t,value:i},n,a,s)},add_member:function(e,t,i,n,a,r){s("/api/projects/"+e+"/member",{uid:t,role:i},n,a,r)},invite_member:function(e,t,i,n,a){s("/api/projects/"+e+"/member/invite",{email:t},i,n,a)},get_members:function(e,t,i,n){a("/api/projects/"+e+"/members",t,i,n)},del_member:function(e,t,i,n,a){r("/api/projects/"+e+"/members/"+t,i,n,a)},set_member_role:function(e,t,i,n,a,s){o("/api/projects/"+e+"/members/role",{uid:t,role:i},n,a,s)},set_labels:function(e,t,i,n,a){o("/api/projects/"+e+"/labels",{labels:t},i,n,a)},get_labels:function(e,t,i,n){a("/api/projects/"+e+"/labels",t,i,n)},get_trash:function(e,t,i,n){a("/api/projects/"+e+"/recycle",t,i,n)},clear_trash:function(e,t,i,n){r("/api/projects/"+e+"/recycle",t,i,n)},member_leave:function(e,t,i,n){o("/api/projects/"+e+"/leave",null,t,i,n)},prj_position:function(e,t,i,n,a){o("/api/projects/"+e+"/position",{pos:t},i,n,a)},get_chat_list:function(e,t,i,n,s,r){var o="/api/projects/"+e+"/chat?page="+t;i&&(o+="&count="+i),a(o,n,s,r)},get_unique_admin_prjs:function(e,t,i,n,s){var r="/api/projects/users/"+t+"/unique/admin?team_id="+e;a(r,i,n,s)},set_favorite:function(e,t,i,n,a){o("/api/projects/"+e+"/favorite",{favorite:t?1:0},i,n,a)},get_favorite:function(e,t,i){var n="/api/projects/favorite";a(n,e,t,i)},transfer:function(e,t,i,n,a){o("/api/projects/"+e+"/shift",{team_id:t},i,n,a)},join_link_open:function(e,t,i,n){o("/api/projects/"+e+"/link/join/open",{},t,i,n)},join_link_close:function(e,t,i,n){o("/api/projects/"+e+"/link/join/close",{},t,i,n)},join_by_link:function(e,t,i,n,a){o("/api/projects/"+e+"/link/join?code="+t,{},i,n,a)},join_info:function(e,t,i,n){a("/api/link/join/"+e+"?type=project",t,i,n)},copy_project:function(e,t,i,n,a,s,r,l,c,d,u){o("/api/projects/"+e+"/copy",{name:i,team_id:t,keep_tasks:n,keep_files:a,keep_posts:s,keep_pages:r,visibility:l},c,d,u)},change_navs:function(e,t,i,n,a){o("/api/projects/"+e+"/navs",{navs:t},i,n,a)}},entry:{add:function(e,t,i,n,a,r){s("/api/entry?pid="+e,{name:t,pos:i},n,a,r)},get_list:function(e,t,i,n,s){a("/api/entries/?pid="+e+"&exclude_tasks="+t,i,n,s)},get_archived_list:function(e,t,i,n){a("/api/entries/archived?pid="+e,t,i,n)},update:function(e,t,i,n,a,s){o("/api/entries/"+t+"?pid="+e,{name:i},n,a,s)},trash:function(e,t,i,n,a){o("/api/entries/"+t+"/trash?pid="+e,null,i,n,a)},untrash:function(e,t,i,n,a){o("/api/entries/"+t+"/restore?pid="+e,null,i,n,a)},del:function(e,t,i,n,a){r("/api/entries/"+t+"?pid="+e,i,n,a)},change_pos:function(e,t,i,n,a,s){o("/api/entries/"+t+"/position?pid="+e,{pos:i},n,a,s)},archive:function(e,t,i,n,a){o("/api/entries/"+t+"/archive?pid="+e,null,i,n,a)},unarchive:function(e,t,i,n,a){o("/api/entries/"+t+"/unarchive?pid="+e,null,i,n,a)
},move:function(e,t,i,n,a,s){o("/api/entries/"+t+"/move?pid="+e,{to_pid:i},n,a,s)},copy:function(e,t,i,n,a){o("/api/entries/"+t+"/copy?pid="+e,null,i,n,a)},batch_assign:function(e,t,i,n,a,s){o("/api/entries/"+t+"/tasks/members?pid="+e,{uid:i},n,a,s)},batch_set_label:function(e,t,i,n,a,s){o("/api/entries/"+t+"/tasks/labels?pid="+e,{label:i},n,a,s)},batch_set_expire:function(e,t,i,n,a,s){o("/api/entries/"+t+"/tasks/expire?pid="+e,{expire:i},n,a,s)},batch_move:function(e,t,i,n,a,s){o("/api/entries/"+t+"/tasks/position?pid="+e,{to:i},n,a,s)},copy_entry:function(e,t,i,n,a,r,o){s("/api/entries/"+t+"/copy?pid="+e,{name:i,pos:n},a,r,o)},watch_entry:function(e,t,i,n,a){s("/api/entries/"+t+"/watcher?pid="+e,{},i,n,a)},unwatch_entry:function(e,t,i,n,a){r("/api/entries/"+t+"/watcher?pid="+e,i,n,a)}},task:{add:function(e,t,i,n,a,r,o){s("/api/task?pid="+e,{entry_id:t,name:i,pos:n},a,r,o)},add_full:function(e,t,i,n,a,r,o,l,c,d){s("/api/task?pid="+e,{entry_id:t,name:i,pos:n,labels:r,members:a,expire_date:o},l,c,d)},get:function(e,t,i,n,s){a("/api/tasks/"+t+"?pid="+e,i,n,s)},update:function(e,t,i,n,a,s,r){o("/api/tasks/"+t+"?pid="+e,{name:i,desc:n},a,s,r)},trash:function(e,t,i,n,a){o("/api/tasks/"+t+"/trash?pid="+e,null,i,n,a)},untrash:function(e,t,i,n,a,s){o("/api/tasks/"+i+"/restore?pid="+e,{entry_id:t},n,a,s)},del:function(e,t,i,n,a){r("/api/tasks/"+t+"?pid="+e,i,n,a)},change_entry:function(e,t,i,n,a,s,r,l){o("/api/tasks/"+t+"/position?pid="+e,{from:i,to:n,pos:a},s,r,l)},move:function(e,t,i,n,a,s,r){o("/api/tasks/"+t+"/move?pid="+e,{to_pid:i,to_entry_id:n},a,s,r)},set_expire:function(e,t,i,n,a,s){o("/api/tasks/"+t+"/expire?pid="+e,{expire:i},n,a,s)},assign:function(e,t,i,n,a,r){s("/api/tasks/"+t+"/member?pid="+e,{uid:i},n,a,r)},unassign:function(e,t,i,n,a,s){r("/api/tasks/"+t+"/members/"+i+"?pid="+e,n,a,s)},set_labels:function(e,t,i,n,a,s){o("/api/tasks/"+t+"/labels?pid="+e,{label:i},n,a,s)},del_labels:function(e,t,i,n,a,s){r("/api/tasks/"+t+"/labels?pid="+e+"&label="+i,n,a,s)},complete:function(e,t,i,n,a){o("/api/tasks/"+t+"/complete?pid="+e,null,i,n,a)},uncomplete:function(e,t,i,n,a){o("/api/tasks/"+t+"/uncomplete?pid="+e,null,i,n,a)},add_todo:function(e,t,i,n,a,r,o){s("/api/tasks/"+t+"/todo?pid="+e,{name:i,pos:n},a,r,o)},update_todo:function(e,t,i,n,a,s,r,l){o("/api/tasks/"+t+"/todos/"+i+"?pid="+e,{name:n},s,r,l)},del_todo:function(e,t,i,n,a,s){r("/api/tasks/"+t+"/todos/"+i+"?pid="+e,n,a,s)},update_todo_pos:function(e,t,i,n,a,s,r){var l="/api/tasks/"+t+"/todos/"+i+"/position?pid="+e;o(l,{pos:n},a,s,r)},complete_todo:function(e,t,i,n,a,s){o("/api/tasks/"+t+"/todos/"+i+"/checked?pid="+e,null,n,a,s)},uncomplete_todo:function(e,t,i,n,a,s){o("/api/tasks/"+t+"/todos/"+i+"/unchecked?pid="+e,null,n,a,s)},change_todo_pos:function(e,t,i,n,a,s,r){o("/api/tasks/"+t+"/todos/"+i+"/position?pid="+e,{pos:n},a,s,r)},search:function(e,t,i,n){a("/api/tasks/search?q="+e,t,i,n)},get_for_me:function(e,t,i,n,s){a("/api/tasks/forme?team_id="+e+"&complete="+t,i,n,s)},get_for_uncompleted:function(e,t,i){a("/api/tasks/uncompleted",e,t,i)},get_for_expired:function(e,t,i){a("/api/tasks/expired",e,t,i)},get_for_completed:function(e,t,i,n){a("/api/tasks/completed?page="+e,t,i,n)},get_archived_list:function(e,t,i,n,s,r){a("/api/tasks/archived?pid="+e+"&page="+t+"&count="+i,n,s,r)},get_for_graph:function(e,t,i,n,s){a("/api/graph/user?start="+e+"&end="+t,i,n,s)},get_for_user_overview:function(e,t,i){a("/api/tasks/user/overview",e,t,i)},archive:function(e,t,i,n,a){o("/api/tasks/"+t+"/archive?pid="+e,{},i,n,a)},unarchive:function(e,t,i,n,a,s){o("/api/tasks/"+t+"/unarchive?pid="+e,{entry_id:i},n,a,s)},archived_all:function(e,t,i,n,a){o("/api/tasks/archived?pid="+e,{entry_id:t},i,n,a)},copy_task:function(e,t,i,n,a,r,o,l,c,d,u,p,f){var h={name:i,pos:n,keep_comments:Number(a),keep_members:Number(r),keep_labels:Number(o),keep_attachments:Number(l),keep_watchers:Number(d),keep_todos:Number(c)};s("/api/tasks/"+t+"/copy?pid="+e,h,u,p,f)},get_all_list:function(e,t,i,n,s){a("/api/tasks/browse?type="+e+"&page="+t,i,n,s)},share:function(e,t,i,n,a,r){s("/api/tasks/"+t+"/share?pid="+e,{to:i},n,a,r)}},file:{new_upload:function(e,t,i,n,a){s("/api/file?pid="+e,t,i,n,a)},get_list:function(e,t,i,n,s,r,o,l){a("/api/files?pid="+e+"&folder_id="+t+"&page="+i+"&sort="+n+"&filter="+s,r,o,l)},get_image_list:function(e,t,i,n){a("/api/files/images?pid="+e,t,i,n)},get:function(e,t,i,n,s){a("/api/files/"+t+"?pid="+e,i,n,s)},update:function(e,t,i,n,a,s,r){o("/api/files/"+t+"?pid="+e,{name:i,desc:n},a,s,r)},update_ext:function(e,t,i,n,a,s){o("/api/files/"+t+"/ext?pid="+e,{ext:i},n,a,s)},trash:function(e,t,i,n,a){o("/api/files/"+t+"/trash?pid="+e,null,i,n,a)},untrash:function(e,t,i,n,a){o("/api/files/"+t+"/restore?pid="+e,null,i,n,a)},del:function(e,t,i,n,a){r("/api/files/"+t+"?pid="+e,i,n,a)},get_versions:function(e,t,i,n,s){a("/api/files/"+t+"/versions?pid="+e,i,n,s)},move:function(e,t,i,n,a,s,r){o("/api/files/"+t+"/move?pid="+e,{from:i,to:n},a,s,r)},get_target:function(e,t,i,n,s){a("/api/files/"+t+"/target?pid="+e,i,n,s)},attach:function(e,t,i,n,a,s,r){o("/api/"+t+"/"+i+"/attach?pid="+e,{fid:n},a,s,r)},detach:function(e,t,i,n,a,s,r){o("/api/"+t+"/"+i+"/detach?pid="+e,{fid:n},a,s,r)},upload_attach:function(e,t,i,n,a,r,o){s("/api/"+t+"/"+i+"/file?pid="+e,{files:n},a,r,o)},get_attach_list:function(e,t,i,n,s,r){a("/api/"+t+"/"+i+"/files?pid="+e,n,s,r)},add_folder:function(e,t,i,n,a,r){s("/api/folder?pid="+e,{name:t,parent_id:i},n,a,r)},get_folders:function(e,t,i,n){a("/api/folders?pid="+e,t,i,n)},get_all_list:function(e,t,i,n,s){a("/api/files/browse?type="+e+"&page="+t,i,n,s)},share:function(e,t,i,n,a,r){s("/api/files/"+t+"/share?pid="+e,{to:i},n,a,r)},uploadlink:function(e,t,i,n,a){s(e,t,i,n,a)}},comment:{publish:function(e,t,i,n,a,r,o,l){s("/api/"+t+"/"+i+"/comment?pid="+e,{message:n,fids:a},r,o,l)},get_list:function(e,t,i,n,s,r){a("/api/"+t+"/"+i+"/comments?pid="+e,n,s,r)},del:function(e,t,i,n,a,s,o){r("/api/"+i+"/"+n+"/comments/"+t+"?pid="+e,a,s,o)},update:function(e,t,i,n,a,s,r,l){o("/api/"+i+"/"+n+"/comments/"+t+"?pid="+e,{message:a},s,r,l)}},calendar:{get_tasks_forme:function(e,t,i,n,s,r){a("/api/calendar/tasks/forme?type="+e+"&start="+t+"&end="+i,n,s,r)},get_tasks:function(e,t,i,n,s,r,o,l){a("/api/calendar/tasks?team_id="+e+"&type="+t+"&uid="+i+"&start="+n+"&end="+s,r,o,l)},get_list:function(e,t,i,n,s,r,o){a("/api/calendar/events?pid="+e+"&showall="+t+"&start="+i+"&end="+n,s,r,o)}},event:{get:function(e,t,i,n,s){a("/api/events/"+t+"?pid="+e,i,n,s)},add:function(e,t,i,n,a,r,o,l,c,d,u,p){s("/api/event?pid="+e,{name:t,location:i,attendees:n,start_date:a,start_time:r,end_date:o,end_time:l,recurrence:c},d,u,p)},update:function(e,t,i,n,a,s,r,l,c,d,u,p,f){o("/api/events/"+t+"?pid="+e,{name:i,location:a,summary:n,start_date:s,start_time:r,end_date:l,end_time:c,type:d},u,p,f)},update_date:function(e,t,i,n,a,s,r,l,c){o("/api/events/"+t+"/date?pid="+e,{start_date:i,start_time:n,end_date:a,end_time:s},r,l,c)},trash:function(e,t,i,n,a,s){o("/api/events/"+t+"/trash?pid="+e,{type:i},n,a,s)},get_list:function(e,t,i,n,s,r){a("/api/events?pid="+e+"&start="+t+"&end="+i,n,s,r)},attendee_add:function(e,t,i,n,a,s){o("/api/events/"+t+"/attendee?pid="+e,{uid:i},n,a,s)},attendee_remove:function(e,t,i,n,a,s){r("/api/events/"+t+"/attendees/"+i+"?pid="+e,n,a,s)},untrash:function(e,t,i,n,a){o("/api/events/"+t+"/restore?pid="+e,null,i,n,a)},del:function(e,t,i,n,a){r("/api/events/"+t+"?pid="+e,i,n,a)},get_today_events:function(e,t,i){a("/api/events/today",e,t,i)},share:function(e,t,i,n,a,r){s("/api/events/"+t+"/share?pid="+e,{to:i},n,a,r)}},post:{add:function(e,t,i,n,a,r,o){var l="/api/post?pid="+e;s(l,{name:t,content:i,watchers:n},a,r,o)},get:function(e,t,i,n,s){a("/api/posts/"+t+"?pid="+e,i,n,s)},get_list:function(e,t,i,n,s,r,o,l,c){var d="/api/posts?pid="+e+"&since_id="+t+"&count="+i+"&sort="+n+"&desc="+s+"&type="+r;a(d,o,l,c)},update:function(e,t,i,n,a,s,r){var l="/api/posts/"+t+"?pid="+e;o(l,{name:i,content:n},a,s,r)},trash:function(e,t,i,n,a){o("/api/posts/"+t+"/trash?pid="+e,null,i,n,a)},untrash:function(e,t,i,n,a){o("/api/posts/"+t+"/restore?pid="+e,null,i,n,a)},del:function(e,t,i,n,a){r("/api/posts/"+t+"?pid="+e,i,n,a)},get_all_list:function(e,t,i,n,s){a("/api/posts/browse?type="+e+"&page="+t,i,n,s)},share:function(e,t,i,n,a,r){s("/api/posts/"+t+"/share?pid="+e,{to:i},n,a,r)}},page:{add:function(e,t,i,n,a,r,o,l){var c="/api/page?pid="+e;s(c,{name:t,content:i,message:n,parent_id:a},r,o,l)},get:function(e,t,i,n,s){a("/api/pages/"+t+"?pid="+e,i,n,s)},get_versions:function(e,t,i,n,s){var r="/api/pages/"+t+"/versions?pid="+e;a(r,i,n,s)},get_list:function(e,t,i,n,s,r,o,l){var c="/api/pages?pid="+e+"&since_id="+t+"&count="+i+"&sort="+n+"&desc="+s;a(c,r,o,l)},get_all:function(e,t,i,n){var s="/api/pages?pid="+e;a(s,t,i,n)},update:function(e,t,i,n,a,s,r,l,c,d,u){var p="/api/pages/"+t+"?pid="+e;o(p,{name:i,content:n,message:a,parent_id:s,is_notify:r,unloak:l},c,d,u)},trash:function(e,t,i,n,a){o("/api/pages/"+t+"/trash?pid="+e,null,i,n,a)},untrash:function(e,t,i,n,a){o("/api/pages/"+t+"/restore?pid="+e,null,i,n,a)},del:function(e,t,i,n,a){r("/api/pages/"+t+"?pid="+e,i,n,a)},locked:function(e,t,i,n,a){o("/api/pages/"+t+"/locked?pid="+e,null,i,n,a)},unlocked:function(e,t,i,n,a){o("/api/pages/"+t+"/unlocked?pid="+e,null,i,n,a)},get_all_list:function(e,t,i,n,s){a("/api/pages/browse?type="+e+"&page="+t,i,n,s)},share:function(e,t,i,n,a,r){s("/api/pages/"+t+"/share?pid="+e,{to:i},n,a,r)},get_version_page:function(e,t,i,n,s,r,o){a("/api/pages/"+t+"/versions/content?pid="+e+"&version_ids="+i+","+n,s,r,o)}},activity:{get_for_project:function(e,t,i,n,s,r,o){a("/api/activity/project?pid="+e+"&type="+t+"&since_id="+i+"&count="+n,s,r,o)},get_for_item:function(e,t,i,n,s,r,o){a("/api/activity/"+e+"/"+t+"?since_id="+i+"&count="+n,s,r,o)},get_feeds:function(e,t,i,n,s,r){a("/api/activity/feed?pid="+e+"&type="+t+"&page="+i,n,s,r)}},notice:{unread_count:function(e,t,i){a("/api/notice/unread/count",e,t,i)},set_allread:function(e,t,i,n){o("/api/notice/allread?type="+e,null,t,i,n)},set_read:function(e,t,i,n){o("/api/notices/"+e+"/read",null,t,i,n)},get_list:function(e,t,i,n,s,r,o){a("/api/notices?type="+e+"&since_id="+t+"&count="+i+"&is_read="+n,s,r,o)},get_pending_list:function(e,t,i){a("/api/notices/pending",e,t,i)},update_pending:function(e,t,i,n,a){o("/api/notices/"+e+"/pending",{is_pending:t},i,n,a)},set_allhandle:function(e,t,i){o("/api/notice/allhandle",null,e,t,i)}},invite:{accept:function(e,t,i,n){o("/api/invites/"+e+"/accept",null,t,i,n)},join:function(e,t,i,n,a,s,r){o("/api/invites/"+e+"/join",{name:t,display_name:i,password:n},a,s,r)},refuse:function(e,t,i,n){o("/api/invites/"+e+"/refuse",null,t,i,n)},get:function(e,t,i,n){a("/api/invites/"+e,t,i,n)},get_new:function(e,t,i){a("/api/invites/new",e,t,i)},get_invite_code:function(e,t,i,n,s){var r="/api/invite/code?member_id="+t+"&team_id="+e;a(r,i,n,s)}},feedback:{add:function(e,t,i,n,a,r,o,l){var c={name:e,email:t,category:i,desc:n,path:a};s("/api/feedback",c,r,o,l)}},graph:{overview:function(e,t,i,n){a("/api/graph/overview?pid="+e,t,i,n)},get_pulse:function(e,t,i,n,s,r){a("/api/graph/pulse?pid="+e+"&start="+t+"&end="+i,n,s,r)},get_daily:function(e,t,i,n,s,r){a("/api/graph/daily?pid="+e+"&start="+t+"&end="+i,n,s,r)},get_contribution:function(e,t,i,n,s,r){a("/api/graph/contribution?pid="+e+"&start="+t+"&end="+i,n,s,r)}},share:{recommand:function(e,t,i,n,a){s("/api/share/recommand",{email:e,message:t},i,n,a)},enable_share_link:function(e,t,i,n,a,s){o("/api/"+t+"/"+i+"/share/link/open?pid="+e,{},n,a,s)},disable_share_link:function(e,t,i,n,a,s){o("/api/"+t+"/"+i+"/share/link/close?pid="+e,{},n,a,s)},get_share_tasks:function(e,t,i,n){a("/api/tasks/share/"+e,t,i,n)},get_share_posts:function(e,t,i,n){a("/api/posts/share/"+e,t,i,n)},get_share_files:function(e,t,i,n){a("/api/files/share/"+e,t,i,n)},get_share_pages:function(e,t,i,n){a("/api/pages/share/"+e,t,i,n)},get_share_events:function(e,t,i,n){a("/api/events/share/"+e,t,i,n)}},mail:{get_list:function(e,t,i,n,s){a("/api/mails?page="+e+"&category=all&is_read="+t,i,n,s)},get:function(e,t,i,n){a("/api/mails/"+e,t,i,n)},trash:function(e,t,i,n){r("/api/mails/"+e,t,i,n)},convert:function(e,t,i,n,a,s,r){o("/api/mails/"+t+"/convert",{pid:e,watchers:n,type:i},a,s,r)},set_read:function(e,t,i,n){o("/api/mails/"+e+"/read",null,t,i,n)}},broadcast:{get_latest:function(e,t,i){a("/api/broadcast/show",e,t,i)}},webhook:{get_actions:function(e,t,i){a("/api/webhook/actions",e,t,i)},get_webhooks:function(e,t,i,n){a("/api/webhooks?pid="+e,t,i,n)},add_webhook:function(e,t,i,n,a){s("/api/webhook/?pid="+e,t,i,n,a)},change_webhook:function(e,t,i,n,a){o("/api/webhook/?pid="+e,t,i,n,a)},del_webhook:function(e,t,i,n,a){r("/api/webhook/"+t+"?pid="+e,i,n,a)}},timingtask:{get_timingtasks:function(e,t,i,n){a("/api/timingtask?pid="+e,t,i,n)},add_timingtask:function(e,t,i,n,a){s("/api/timingtask/?pid="+e,t,i,n,a)},del_timingtask:function(e,t,i,n,a){r("/api/timingtask/"+t+"?pid="+e,i,n,a)}},utils:{get_qrcode:function(t,i,n,a,s){var r="/api/qr/code?size="+i+"&text="+t;e.get(r).success(n).error(a)["finally"](s)}}}}]),angular.module("wt.service").factory("feed",[function(){"use strict";function r(e){n=e,e===Strophe.Status.CONNECTING||e===Strophe.Status.CONNFAIL||e===Strophe.Status.DISCONNECTING||e===Strophe.Status.DISCONNECTED||e===Strophe.Status.CONNECTED&&(t.addHandler(i,null,"message",null,null,null),t.addHandler(a,null,"presence",null,null,null),t.send($pres().c("priority").t(5).tree()))}var e=kzi.config.feed_url(),t=new Strophe.Connection(e),i=null,n=null,a=null,s="";return{onMessage:function(e){i=e},onPresence:function(e){a=e},getStatus:function(){return n},connect:function(e,n){if(!i)throw new Error("onMessageFn is not be null.");for(var a="@im.worktile.com/",o=0;8>o;o++){var l=parseInt(10*Math.random());a+=l}s=e+a,t.connect(s,n,r)},getConnection:function(){return t},getMyJid:function(){return s},online:function(){t.send($pres().c("priority").t(5).tree())},leave:function(){t.send($pres().c("show").t("away").tree())},close:function(){n=Strophe.Status.DISCONNECTED,t.disconnect(),t.reset()}}}]),function(){"use strict";angular.module("wt.bus",[]).factory("bus",["$http","$rootScope",function(e,t){return{user:{get:function(){}},team:{find_add_prj_teams:function(){var e=_.clone(t.teams);if(e=_.clone(t.teams),void 0===_.findWhere(e,{team_id:"-1"})){var i={name:"个人项目",team_id:"-1",curr_role:"1"};e.unshift(i)}return e=_.filter(e,function(e){return 1===e.curr_role||"-1"===e.team_id||e.permission&t.global.team_module.add_project})},init_team_data:function(e,t,i,n,a){var s=n.defer();return t.load_team_from_cache(i,function(n){e.current_team=n?n:{},e.part_loading_done=!1,t.global.loading_done=!1,t.load_team(i,function(t){e.current_team=t.info,e.team_projects=t.projects,e.members=t.members,s.resolve(t)},function(e){e.code===kzi.statuses.team_error.not_found.code?t.global.title="团队未找到":e.code===kzi.statuses.error.permission_deny.code?(t.global.title="不是当前团队成员",a.path("/teams/"+i)):wt.data.error(e),s.reject(e)},function(){t.global.loading_done=!0,e.part_loading_done=!0})}),s.promise}},project:{set_star_toggle:function(e,t,i,n){1!=e.archived&&(e.is_star=e.is_star?0:1,wt.data.project.set_prefs(e.pid,"is_star",e.is_star,function(e){_.isFunction(t)&&t(e)},function(){e.is_star=e.is_star?0:1},n))},calculate_prj_pos:function(e,t){var i=0;return i=_.isEmpty(e)&&!_.isEmpty(t)?t.pos/2+1:_.isEmpty(t)&&!_.isEmpty(e)?e.pos+kzi.config.default_pos+1:_.isEmpty(t)||_.isEmpty(e)?kzi.config.default_pos:(t.pos+e.pos)/2+1},label:{load:function(e,t){var i=_.filter(t,function(e){return""!==e.desc});return _.each(i,function(t){var i=_.findWhere(e.labels,{name:t.name});t.assigned=i?1:0}),i},set_labels:function(e,t,i,n,a,s,r,o,l,c){var d=[{name:"blue",desc:t},{name:"green",desc:i},{name:"orange",desc:n},{name:"purple",desc:a},{name:"red",desc:s},{name:"yellow",desc:r}];wt.data.project.set_labels(e,d,function(){o(d)},l,c)}},get_member_projects:function(e){var t=[];return _.each(e,function(e){kzi.constant.prj_module.crud&e.permission&&!_.isEmpty(e.team_id)&&t.push(e)}),t},get_navs:function(e){if(_.isEmpty(e))return _.clone(kzi.constant.prj_navigations);var t=[];return _.each(e,function(e){0>_.indexOf(_.pluck(t,"id"),e)&&t.push(_.findWhere(kzi.constant.prj_navigations,{id:parseInt(e,10)}))}),t},get_un_navs:function(e){if(_.isEmpty(e))return[];var t=[];return _.each(kzi.constant.prj_navigations,function(i){0>e.indexOf(i.id)&&t.push(i)}),t}},entry:{calculate_copy_entry_pos:function(e,t){for(var i=0;e.length>i;i++)if(e[i].entry_id===t.entry_id){if(e.length>i+1){var n=e[i+1].pos;return(n+t.pos)/2+1}return t.pos+kzi.config.default_pos+1}return t.pos+kzi.config.default_pos+1},calculate_entry_pos:function(e,t){var i=kzi.config.default_pos;if(!_.isEmpty(e))if(t){var n=_.min(e,function(e){return e.pos});_.isEmpty(n)||(i=n.pos/2+1)}else{var a=_.max(e,function(e){return e.pos});_.isEmpty(a)||(i=a.pos+kzi.config.default_pos+1)}return i},batch_assign_member:function(e,t,i,n,a,s){wt.data.entry.batch_assign(e,t.entry_id,i.uid,function(e){i.assigned_all=1,_.each(t.tasks,function(e){if(_.isEmpty(e.members))e.members=[i];else{var t=_.any(e.members,function(e){return e.uid==i.uid});t||e.members.push(i)}}),_.isFunction(n)&&n(e)},a,s)},batch_set_label:function(e,t,i,n,a,s){wt.data.entry.batch_set_label(e,t.entry_id,i.name,function(e){_.each(t.tasks,function(e){if(_.isEmpty(e.labels))e.labels=[i];else{var t=_.any(e.labels,function(e){return e.name==i.name});t||(e.labels.push(i),e.labels=_.sortBy(e.labels,function(e){return e.name}))}}),_.isFunction(n)&&n(e)},a,s)}},task:{calculate_task_pos:function(e,t){var i=kzi.config.default_pos;return t?_.isEmpty(e.tasks)||(i=_.min(e.tasks,function(e){return e.pos}).pos/2+1):_.isEmpty(e.tasks)||(i=_.max(e.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),i},calculate_copy_task_pos:function(e,t){for(var i=0;e.tasks.length>i;i++)if(e.tasks[i].tid===t.tid){if(e.tasks.length>i+1){var n=e.tasks[i+1].pos;return(n+t.pos)/2+1}return t.pos+kzi.config.default_pos+1}return t.pos+kzi.config.default_pos+1},set_toggle_label:function(e,t,i,n){var a=_.findWhere(t.labels,{name:i.name});i.assigned?(a&&(t.labels=_.reject(t.labels,function(e){return e.name===i.name}),t.labels=_.sortBy(t.labels,function(e){return e.name})),i.assigned=0,_.isEmpty(t.tid)||wt.data.task.del_labels(e,t.tid,i.name,n)):a||(t.labels.push(i),i.assigned=1,t.labels=_.sortBy(t.labels,function(e){return e.name}),_.isEmpty(t.tid)||wt.data.task.set_labels(e,t.tid,i.name,n))},get_copy_task:function(e){var t={name:e.name,tid:e.tid,entry_id:e.entry_id,pos:e.pos,comment_count:e.badges.comment_count,file_count:e.badges.file_count,todo_count:e.badges.todo_count,member_count:e.members.length,watcher_count:e.watchers.length,label_count:e.labels.length},i=!1;return t.comment_count>0?(t.keep_comments=!0,i=!0):t.keep_comments=!1,t.file_count>0?(t.keep_attachments=!0,i=!0):t.keep_attachments=!1,t.todo_count>0?(t.keep_todos=!0,i=!0):t.keep_todos=!1,t.member_count>0?(t.keep_members=!0,i=!0):t.keep_members=!1,t.watcher_count>0?(t.keep_watchers=!0,i=!0):t.keep_watchers=!1,t.label_count>0?(t.keep_labels=!0,i=!0):t.keep_labels=!1,t.show_keeps=i,t},set_is_show_data:function(e,t){return _.each(e,function(e){var i=moment(e.update_date).format("YYYY-MM-DD");i===t?e.is_show_date=!1:(e.is_show_date=!0,t=i)}),t}},file:{load_files_db:function(e,i,n,a,s,r,o,l,c){wt.data.file.get_list(e,i,n,a,s,function(e){t.folder={folder_id:e.data.folder.folder_id,name:e.data.folder.name},_.each(e.data.files,function(e){if(e.icon=kzi.helper.build_file_icon(e),r){var i=_.findWhere(t.project.files,{fid:e.fid});i||t.project.files.push(e)}}),r?o(t.project):o(e.data)},l,c)},load_one_page_files:function(e,i){_.isUndefined(i)&&(i=!1),e.files_controls.loading_done=!1;var n=function(n){var a=[];if(e.files_controls.folder_id){e.files_controls.is_folder=!0,a=_.where(n.files,{folder_id:e.files_controls.folder_id});var s=_.findWhere(e.files_controls.files,{fid:e.files_controls.folder_id});e.files_controls.folder_name=_.isEmpty(s)?e.folder.name:s.name}else a=_.where(n.files,{folder_id:""}),e.files_controls.is_folder=!1,e.files_controls.folder_name="文件";a.length>0&&(e.files_controls.files=i?a:e.files_controls.files.concat(a)),20>a.length?e.files_controls.has_more_files=!1:(e.files_controls.has_more_files=!0,e.files_controls.page++),e.files_controls.folders=n.folders,t.global.title="文件 | "+e.files_controls.folder_name,e.files_controls.loading_done=!0};wt.bus.file.load_files_db(e.files_controls.pid,e.files_controls.folder_id,e.files_controls.page,e.files_controls.sort_method_id,e.files_controls.filter,!1,n,function(){kzi.msg.error("加载文件失败")},function(){t.global.loading_done=!0})}},event:{event_to_calEvent:function(e,t){var i={id:e.event_id,title:e.name,allDay:0,start:e.start.date.toString().substring(0,10),end:e.end.date.toString().substring(0,10),url:"",editable:!0,textColor:"#fff",borderColor:"#fbfbfb",className:"cal_event slide-trigger",backgroundColor:t,extend:{xtype:kzi.constant.xtype.event,pid:e.pid,end:e.end.date,recurrence_id:e.recurrence_id}};return i}},mkEditor:{checkClose:function(){var e=$(".fullscreen-editing"),t=!1;return _.each(e,function(e){$(e).scope().isFullscreen===!0&&($(e).scope().cancelFullscreen(),t=!0)}),t}},comment:{},calendar:{},post:{},page:{},activity:{set_activities_show_date:function(e){var t=null;_.each(e,function(e){var i=moment(e.published).format("YYYY-MM-DD");i===t?e.is_show_date=!1:(e.is_show_date=!0,t=i)})}},notice:{},invite:{},feedback:{},watch:{get_scope_watcher_members:function(e,t){var i=[],n=_.pluck(t,"uid");return _.each(e,function(e){e.status===kzi.constant.status.ok&&(e.watched=_.contains(n,e.uid)?!0:!1,i.push(e))}),i},mail_convert_post_watch_toggle:function(e,t,i,n,a,s){if(!i.watched){var r=_.findWhere(t.watchers,{uid:i.uid});return i.watched=!0,r||t.watchers.push(i),_.isFunction(n)&&n(),_.isFunction(s)&&s(),void 0}var r=_.findWhere(t.watchers,{uid:i.uid});i.watched=!1,r&&(t.watchers=_.reject(t.watchers,function(e){return e.uid===i.uid})),_.isFunction(n)&&n(),_.isFunction(s)&&s()},unwatch:function(e,t,i,n,a,s,r,o){wt.data.unwatch(e,i,n,a.uid,function(e){var i=_.findWhere(t.watchers,{uid:a.uid});i&&(t.watchers=_.reject(t.watchers,function(e){return e.uid===a.uid})),a.watched=!1,_.isFunction(s)&&s(e)},r,o)},set_watcher_toggle:function(e,t,i,n,a,s,r,o){var l=null;if(a.watched){if(l=_.findWhere(t.watchers,{uid:a.uid}),l&&(t.watchers=_.reject(t.watchers,function(e){return e.uid===a.uid})),a.watched=!1,!n)return _.isFunction(s)&&s(),_.isFunction(o)&&o(),void 0;wt.data.unwatch(e,i,n,a.uid,s,r,o)}else if(l=_.findWhere(t.watchers,{uid:a.uid}),!l){if(t.watchers.push(a),a.watched=!0,!n)return _.isFunction(s)&&s(),_.isFunction(o)&&o(),void 0;wt.data.watch(e,i,n,a.uid,s,r,o)}},watch_all:function(e,t,i,n,a,s,r,o){if(t.watchers.length!==a.length){if(n){var l=_.pluck(a,"uid");wt.data.watch_batch(e,i,n,l,function(){t.watchers=a,_.isFunction(s)&&s()},r,o)}else t.watchers=a,_.isFunction(s)&&s(),_.isFunction(o)&&o();_.each(a,function(e){e.watched=!0})}}},member:{set_task_member_toggle:function(e,t,i,n,a,s){if(i.assigned){var r=_.findWhere(t.members,{uid:i.uid});if(_.isEmpty(t.tid))return i.assigned=0,r&&(t.members=_.reject(t.members,function(e){return e.uid===i.uid})),void 0;if(i.setting_toggle_member===!0)return;i.setting_toggle_member=!0,wt.data.task.unassign(e,t.tid,i.uid,function(e){r&&(t.members=_.reject(t.members,function(e){return e.uid===i.uid})),i.assigned=0,_.isFunction(n)&&n(e)},a,function(){i.setting_toggle_member=!1,_.isFunction(s)&&s()})}else{var r=_.findWhere(t.members,{uid:i.uid});if(_.isEmpty(t.tid))return i.assigned=1,r||t.members.push(i),void 0;if(!r){if(i.setting_toggle_member===!0)return;i.setting_toggle_member=!0,wt.data.task.assign(e,t.tid,i.uid,function(e){r=_.findWhere(t.members,{uid:i.uid}),r||(t.members.push(i),i.assigned=1,_.isFunction(n)&&n(e))},a,function(){i.setting_toggle_member=!1,_.isFunction(s)&&s()})}}},get_normal_members:function(e){var t=[];return _.each(e,function(e){e.status===kzi.constant.status.ok&&(e.role===kzi.constant.role.admin||e.role===kzi.constant.role.member)&&t.push(e)}),t},set_event_attendees_toggle:function(e,t,i,n,a,s){if(i.assigned){var r=_.findWhere(t.attendees,{uid:i.uid});if(_.isEmpty(t.event_id))return i.assigned=0,r&&(t.attendees=_.reject(t.attendees,function(e){return e.uid===i.uid})),_.isFunction(n)&&n(),_.isFunction(s)&&s(),void 0;wt.data.event.attendee_remove(e,t.event_id,i.uid,function(e){r&&(t.attendees=_.reject(t.attendees,function(e){return e.uid===i.uid})),i.assigned=0,_.isFunction(n)&&n(e)},a,s)}else{var r=_.findWhere(t.attendees,{uid:i.uid});if(_.isEmpty(t.event_id))return i.assigned=1,r||t.attendees.push(i),_.isFunction(n)&&n(),_.isFunction(s)&&s(),void 0;r||wt.data.event.attendee_add(e,t.event_id,i.uid,function(e){r=_.findWhere(t.attendees,{uid:i.uid}),r||(t.attendees.push(i),i.assigned=1,_.isFunction(n)&&n(e))},a,s)}},get_scope_members_for_assigned:function(e,t){var i=[],n=_.pluck(t,"uid");return _.each(e,function(e){e.status===kzi.constant.status.ok&&e.role!==kzi.constant.role.guest&&(e.assigned=_.contains(n,e.uid)?!0:!1,i.push(e))}),i},event_attend_all:function(e,t,i,n,a,s){var r=_.pluck(i,"uid");wt.data.event.attendee_add(e,t.event_id,r,function(e){_.each(i,function(e){e.assigned=1,_.findWhere(t.attendees,{uid:e.uid})||t.attendees.push(e)}),_.isFunction(n)&&n(e)},a,s)}},chat:{set_is_show_data:function(e){var t=null;_.each(e,function(e){var i=moment(e.create_date).format("YYYY-MM-DD日");i===t?e.is_show_date=!1:(e.is_show_date=!0,t=i)})},set_message_for_file:function(e,t){3==e.body.type&&(e.body.content.type=0,e.body.content.icon=kzi.helper.build_file_icon(e.body.content),e.body.content.pid=t,e.body.content.isImg=-1==kzi.constant.get_file_icon(e.body.content)?!0:!1)},set_messages_for_file:function(e,t){_.each(e,function(e){wt.bus.chat.set_message_for_file(e,t)})}}}}])}(),function(){"use strict";angular.module("wt.directive",[]).directive("wtScroll",["$timeout",function(){return function(e,t,i){var n={keyboard:{enable:!0},scrollInertia:50,theme:"dark-thick",advanced:{updateOnBrowserResize:!0,updateOnContentResize:!0,autoScrollOnFocus:!1}};if(i.wtScrollnoheight&&t.data("scrollnoheight",i.wtScrollnoheight),""!==i.wtScroll){var a=JSON.parse(i.wtScroll);$.isPlainObject(a)&&(n=$.extend(!0,n,a))}$(t).mCustomScrollbar(n)}}]).directive("wtExheight",["$window",function(e){return{link:function(t,i,n){var a=function(e){var t=parseInt(kzi.util.winHeight()-e,10);$(i).css("height",t)},s=_.debounce(function(){a(parseInt(n.wtExheight))},50);t.$watch(n.wtExheight,function(e){a(e)}),$(e).on("resize",s)}}}]).directive("wtFocus",["$timeout","$parse",function(e,t){return{link:function(i,n,a){a.wtFocus?(i.$watch(a.wtFocus,function(t){angular.isDefined(t)&&t===!0&&e(function(){n[0].focus()},200)},!0),n.bind("blur",function(){angular.isDefined(a.wtFocus)&&e(function(){t(a.wtFocus).assign(i,!1)},200)})):e(function(){n[0].focus()},200)}}}]).directive("wtClickSelect",[function(){return{link:function(e,t){t.bind("click",function(){t.select()})}}}]).directive("wtAutoClickSelect",["$timeout",function(e){return{link:function(t,i){i.bind("click",function(){i.select()}),e(function(){i.trigger("click")},200)}}}]).directive("wtShowEdit",["$timeout","$parse",function(e,t){return{link:function(i,n,a){i.$watch(a.wtShowEdit,function(s){if(!_.isUndefined(s))if(s===!0){e(function(){$(n).find(":text,textarea").eq(0).focus()},50);var o=t(a.wtShowEdit);o.assign,n.bind("mousedown.wtShowEdit",function(e){e.stopPropagation()}),e(function(){$(document).bind("mousedown.wtShowEdit",function(){t(a.wtShowEdit).assign(i,!1),i.$$phase||i.$apply()})},50)}else s===!1&&(n.unbind("click.wtShowEdit"),$(document).unbind("click.wtShowEdit"))})}}}]).directive("wtRepeatPassword",[function(){return{require:"ngModel",link:function(e,t,i,n){var a=t.inheritedData("$formController")[i.wtRepeatPassword];n.$parsers.push(function(e){return e===a.$viewValue?(n.$setValidity("repeat",!0),e):(n.$setValidity("repeat",!1),void 0)}),a.$parsers.push(function(e){return n.$setValidity("repeat",e===n.$viewValue),e})}}}]).directive("wtMultipleEmail",[function(){return{require:"ngModel",link:function(e,t,i,n){n.$parsers.push(function(e){var t=/^([a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*;?)+$/i.test(e);return n.$setValidity("multipleEmail",t),e})}}}]).directive("wtCompare",[function(){return{require:"ngModel",link:function(e,t,i,n){n.$parsers.push(function(t){return t===e.$eval(i.wtCompare)?(n.$setValidity("compare",!0),t):(n.$setValidity("compare",!1),void 0)}),e.$watch(i.wtCompare,function(t){t===e.$eval(i.ngModel)?n.$setValidity("compare",!0):n.$setValidity("compare",!1)})}}}]).directive("wtRegex",[function(){return{require:"ngModel",link:function(e,t,i,n){var a=new RegExp(i.wtRegex);n.$parsers.push(function(e){return n.$setValidity("regex",a.test(e)),e})}}}]).directive("wtForm",[function(){return{link:function(e,t){for(var a=["text","password","email",["textarea"],["select"]],s=t[0],r=s.name,o=0;s.length>o;o++){var l=o,c=s[l];if(a.toString().indexOf(c.type)>-1){if(""===c.name)continue;r+"."+c.name+".$dirty";var u=r+"."+c.name+".$valid",p=r+"."+c.name+".$viewValue";e.$watch("["+p+","+u+","+l+"]",function(t){var n=s[t[2]],a=e[r][n.name];if(void 0!==t[0])if(t[1]===!1&&a.$dirty){var o=[];for(var l in a.$error)a.$error[l]&&o.push(kzi.validation_rules.get_msg(l,n));$(n).tooltip("destroy"),$(n).tooltip({animation:!0,placement:"bottom",title:o.toString(),trigger:"focus"}),$(n).tooltip("show")}else $(n).tooltip("destroy")},!0)}}}}}]).directive("wtFormValidate",["$timeout",function(e){return{link:function(t,i,n){var s={blurTrig:!0,showMsg:!1},r=$.extend(s,t.$eval(n.wtFormValidate)),o={get_error_msg:function(e,i){var n=[],a=t[e][i.name];for(var s in a.$error)a.$error[s]&&n.push(kzi.validation_rules.get_msg(s,i));return n.toString()},show_error:function(e,t){e.removeClass("valid").addClass("error"),r.showMsg&&(e.tooltip("destroy"),e.tooltip({animation:!0,placement:"right",title:t,trigger:"hover"}))},remove_error:function(e){e.removeClass("error").addClass("valid"),r.showMsg&&e.tooltip("destroy")}},l=["text","password","email","number",["textarea"],["select"],["select-one"]],c=i[0],d=c.name;t[d].$errors=[];for(var u=0;c.length>u;u++){var p=u,f=c[p];if(l.toString().indexOf(f.type)>-1){if(""===f.name)continue;var h=d+"."+f.name+".$viewValue";d+"."+f.name+".$valid",d+"."+f.name+".$dirty",t.$watch("["+h+","+p+"]",function(e){var i=c[e[1]];t[d][i.name],t[d].$errors=[],o.remove_error($(i))},!0),r.blurTrig===!0&&$(f).bind("blur",function(){var i=$(this),n=this;e(function(){var e=d+"."+n.name+".$valid",a=t.$eval(e);a?o.remove_error(i):o.show_error(i,o.get_error_msg(d,n))})})}}var v=function(e,i){if(i.$name===c.name){for(var n=[],a=0;c.length>a;a++){var s=a,r=c[s];if(l.toString().indexOf(r.type)>-1){if(""===r.name)continue;if(d+"."+r.name+".$dirty",d+"."+r.name+".$valid",d+"."+r.name+".$viewValue",i[r.name].$valid)continue;var m=o.get_error_msg(d,r);n.push(m),o.show_error($(r),m)}}i.$errors=_.isEmpty(n)||n.length>0?n:[],t.$$phase||t.$apply(i.$errors)}};t[d].doValidate=v}}}]).directive("wtFormSubmit",["$parse",function(e){return{link:function(t,i,n){var s=n.wtFormSubmit.substring(n.wtFormSubmit.indexOf("(")+1,n.wtFormSubmit.length-1);s=s.split(",")[0];var r=t[s],o=e(n.wtFormSubmit),l=function(){!_.isEmpty(r.$errors)&&r.$errors.length>0||($("form[name="+r.$name+"]").find(":input").trigger("input"),$("form[name="+r.$name+"]").find(":input").trigger("change"),_.isFunction(r.doValidate)?r.doValidate(null,r):t.$broadcast("dovalidation",r),r.$invalid||t.$apply(function(){o(t)}))};i.parents("form").bind("keydown keypress",function(e){if(13===e.which&&!t.$eval(n.loadingStatus)){var i=document.activeElement;"textarea"!==i.type&&($(this).find("button").focus(),i.focus(),l(),e.preventDefault())}}),i.bind("click",function(){l()})}}}]).directive("wtRemoteUniqueCheck",["$timeout","$http",function(e,t){return{require:"ngModel",link:function(i,n,a,s){var r=function(){var e=i.$eval(a.wtRemoteUniqueCheck),n=e.url,r=e.isExists;
t.get(n).success(function(e){200===e.code?r===!1?s.$setValidity("romoteuniquecheck",e.data):s.$setValidity("romoteuniquecheck",!e.data):s.$setValidity("romoteuniquecheck",!1)})};i.$watch(a.ngModel,function(e){_.isEmpty(e)||i[n[0].form.name][n[0].name].$dirty||r()}),n.bind("blur",function(){e(function(){i[n[0].form.name][n[0].name].$invalid||r()})}),n.bind("focus",function(){e(function(){s.$setValidity("romoteuniquecheck",!0)})})}}}]).directive("wtDatepicker",["$parse",function(e){return function(t,i,n){i.addClass("wtdate");var a=e(n.select);i.datepicker({defaultDate:n.wtDatepicker,firstDay:0,onSelect:function(e){t.$apply(function(){t.$eval(n.wtDatepicker+"='"+e+"'",t),_.isFunction(a)&&a(t)})}}),t.$watch(n.wtDatepicker,function(e){i.datepicker("setDate",e)})}}]).directive("wtFullDatepicker",["$parse","$popbox",function(e){return{restrict:"AE",replace:!0,templateUrl:"/ycjs/tpl/directive/datepicker.html",link:function(t,i,n){var a=t.$eval(n.defaultDate),s=i.find(".wtdate"),r=e(n.setDate),o=t.$eval(n.minDate);t.js_set_date_inner=function(e){var i=null;switch(e){case"today":i=moment().format("YYYY-MM-DD");break;case"tomorrow":i=moment().add("days",1).format("YYYY-MM-DD");break;case"week":i=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":i=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":i=moment().endOf("month").format("YYYY-MM-DD");break;default:i=moment().format("YYYY-MM-DD")}_.isFunction(r)&&r(t,{date:i})};var l={defaultDate:a,firstDay:0,onSelect:function(e){t.$apply(function(){_.isFunction(r)&&r(t,{date:e})})}};o&&(l.minDate=o),s.datepicker(l),t.$watch(n.defaultDate,function(e){s.datepicker("setDate",e)})}}}]).directive("wtPopFullDatepicker",["$parse","$popbox",function(e,t){return{restrict:"A",replace:!0,link:function(e,i,n){i.bind("click",function(i){t.popbox({target:i,templateUrl:"/ycjs/tpl/directive/pop_datepicker.html",controller:["$scope","popbox",function(t,i){var a=e.$eval(n.wtPopFullDatepicker);t.popbox=i,t.default_date=a.default_date,t.min_date=a.min_date,t.js_set_date=function(e){a.set_date(e),i.close()},t.js_close=function(){i.close()}}]}).open()})}}}]).directive("wtInclude",["$compile","$http","$templateCache",function(e,t,i){return{restrict:"ECA",compile:function(n,a){var s=a.ngInclude||a.src,r=a.onload||"";return a.autoscroll,function(n,a){var l,o=0,c=function(){l&&(l.$destroy(),l=null),a.html("")};n.$watch(s,function(s){if(0>=$("#"+s).length)return a.html("<span class='tpl_none'>此模板"+s+"还未实现，请耐心等待...</span>"),void 0;var d=++o;s?t.get(s,{cache:i}).success(function(t){d===o&&(l&&l.$destroy(),l=n.$new(),a.html(t),e(a.contents())(l),l.$emit("$includeContentLoaded"),n.$eval(r))}).error(function(){d===o&&c()}):c()})}}}}]).directive("wtPopbox",["$popbox",function(e){return{link:function(t,i,n){i.bind("click",function(i){var a=t.$eval(n.wtPopbox);a.disabled!==!0&&t.$apply(function(){e.popbox({target:i,templateUrl:a.templateUrl,controller:a.controller,resolve:{pop_data:function(){return{$scope:t,parameters:a.parameters}}}}).open()})})}}}]).directive("draggable",[function(){return{restrict:"A",link:function(e,t,i){e.$watch(i.draggable,function(e){_.isEmpty(e)||t.draggable(e)})}}}]).directive("droppable",[function(){return{restrict:"A",link:function(e,t,i){e.$watch(i.droppable,function(e){_.isEmpty(e)||t.droppable(e)})}}}]).directive("sortable",[function(){return{link:function(e,t,i){e.$watch(i.sortable,function(e){null==e?t.sortable({disabled:!0}):t.sortable(e)})}}}]).directive("disableSelection",[function(){return{link:function(e,t){t.disableSelection()}}}]).directive("wtLoadingDone",[function(){return{link:function(e,t,i){e.$watch(i.wtLoadingDone,function(e){e===!0?t.css("display","none"):t.css("display","block")})}}}]).directive("wtTitle",[function(){return{link:function(e,t,i){var n=e.$eval(i.wtTitle);t.attr("title",n)}}}]).directive("wtAlt",[function(){return{link:function(e,t,i){var n=e.$eval(i.wtAlt);t.attr("alt",n)}}}]).directive("wtRule",[function(){return{link:function(e,t,i){e.$watch(i.wtRule,function(n){var n=e.$eval(i.wtRule);"hide"==n.type?0==n.rule&&t.css("visibility","hidden"):"disabled"==n.type&&0==n.rule&&(t.attr("disabled","disabled"),t.css("cursor","not-allowed"))})}}}]).directive("wtGoTo",["$location",function(e){return{link:function(t,i,n){i.bind("click",function(){e.path(n.wtGoTo),t.$$phase||t.$apply()})}}}]).directive("wtEnter",["$parse",function(e){return function(t,i,n){var a=e(n.wtEnter);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode;13===i&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("wtUpDownEnter",["$parse",function(e){return function(t,i,n){var a=e(n.wtUpDownEnter);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode;(38===i||40===i||13===i)&&(t.$apply(function(){a(t,{$event:e,keyCode:i})}),e.preventDefault())})}}]).directive("wtCtrlEnter",["$parse",function(e){return function(t,i,n){var a=e(n.wtCtrlEnter);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode;(e.ctrlKey||e.metaKey)&&13===i&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("wtShiftCutover",["$parse",function(e){return function(t,i,n){var a=e(n.wtShiftCutover);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode,n=e.target||e.srcElement;(null===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.shiftKey&&$.inArray(i,kzi.constant.shift_cutover_keys)>-1&&t.$apply(function(){a(t,{$event:e,$keyCode:i})})})}}]).directive("wtClick",["$parse",function(e){return function(t,i,n){var a=e(n.wtClick);i.bind("click",function(e){t.$$phase?a(t,{$event:e}):t.$apply(function(){a(t,{$event:e})})})}}]).directive("wtShortcutKey",["$parse",function(e){return function(t,i,n){var a=e(n.wtShortcutKey);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode;if((i!==kzi.constant.keyASCIIs.VK_SPACE||"keypress"!==e.type)&&($.inArray(i,kzi.constant.global_shortcut_keys)>-1||$.inArray(i,kzi.constant.entry_shortcut_keys)>-1)){if(i!==kzi.constant.keyASCIIs.ESC){var n=e.target||e.srcElement;if(null!==n&&("INPUT"===n.nodeName||"TEXTAREA"===n.nodeName))return}i===kzi.constant.keyASCIIs.ESC&&e.preventDefault(),t.$apply(function(){a(t,{$keyCode:i,event:e})})}})}}]).directive("wtKeyAt",["$parse",function(e){return function(t,i,n){var a=e(n.wtKeyAt);i.bind("keydown keypress",function(e){var i=e.which||e.keyCode;i===kzi.constant.keyASCIIs.At&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("loadingStatus",["$timeout",function(e){return function(t,i,n){t.$watch(n.loadingStatus,function(t){t===!0?i.button("loading"):t===!1&&e(function(){i.button("reset")})})}}]).directive("textareaAutoheight",[function(){return function(e,t,i){"TEXTAREA"===t[0].tagName&&(t.css({overflow:"hidden","word-wrap":"break-word",resize:"none","padding-right":"22px",height:"32px","line-height":"110%"}),t.height(t[0].scrollHeight-4),t.keyup(function(){var n=1;i.textareaAutoheight&&(n=i.textareaAutoheight),t.height(t[0].scrollHeight-4)}))}}]).directive("textareaInitheight",[function(){return function(e,t){"TEXTAREA"===t[0].tagName&&t.focus(function(){t[0].scrollHeight-4>150?t.height("150px"):t.height(t[0].scrollHeight-4)})}}]).directive("wtCopyBind",[function(){return function(){}}]).directive("wtScrollFixed",[function(){return function(e,t){$(t).css({position:"fixed",width:t.parent().width()}),t.parent().height(t.height()),$(window).resize(function(){$(t).css({width:t.parent().width()}),t.parent().height(t.height())})}}]).directive("wtDisableDrag",[function(){return function(e,t,i){i.wtDisableDrag?e.$watch(i.wtDisableDrag,function(e){e?t.on("dragstart.js_disable",function(e){return e.preventDefault(),!1}):t.unbind("dragstart.js_disable")}):t.on("dragstart.js_disable",function(e){return e.preventDefault(),!1})}}]).directive("wtSlideShow",["$parse",function(e){return function(t,i,n){var a=e(n.slideChange);t.$watch(n.wtSlideShow,function(e){a(t,{value:e}),e===!0?i.slideToggle("normal",function(){var e=i.find("input")[0];e&&e.focus()}):e===!1?i.slideToggle():n.defaultShow||i.css("display","none")})}}]).directive("wtSlidingShow",["$document","$timeout","$parse",function(){return function(e,t,i){var n=500,a=0,r=700;e.$watch(i.wtSlidingShow,function(i){i===!0?(t.animate({right:a+"px",width:r,overflow:"visible"},n,function(){$("html").addClass("js_wt_slideing_show")}),$(document).bind("mousedown.wtSlidingShow drag",function(t){$(t.target).hasClass("slide-content")||$(t.target).parents(".slide-content").length>0||$(t.target).hasClass("slide-trigger")||$(t.target).parents(".slide-trigger").length>0||$(t.target).hasClass("popbox")||$(t.target).parents(".popbox").length>0||$(t.target).parents(".notifications").length>0||$(t.target).hasClass("fancybox-overlay")||$(t.target).parents(".fancybox-overlay").length>0||$(t.target).hasClass("layout_right_sidebar")||$(t.target).parents(".layout_right_sidebar").length>0||"fancybox-buttons"===$(t.target).attr("id")||$(t.target).parents("#fancybox-buttons").length>0||$(t.target).hasClass("fancybox-overlay")||$(t.target).parents(".fancybox-overlay").length>0||"fancybox-thumbs"===$(t.target).attr("id")||$(t.target).parents("#fancybox-thumbs").length>0||$(t.target).hasClass("fancybox-wrap")||$(t.target).parents(".fancybox-wrap").length>0||e.$apply(function(){e.$root.locator.hide_slide()})})):i===!1&&(t.find("div:visible").first().width(r),t.animate({width:"0",right:"0"},n,function(){$("html").removeClass("js_wt_slideing_show")}),$(document).unbind("mousedown.wtSlidingShow drag"))})}}]).directive("wtLeftMenuToggle",["$timeout","$parse","$window","$rootScope",function(e,t,i,n){return function(e,t,a){var s=t.children(".leftpanel"),r=s.css("width"),o=200,l=60;e.$watch(a.wtLeftMenuToggle,function(e){var a=t.children(".centerpanel");e===!0?($(i.document).find("body").css("overflow","hidden"),s.clearQueue(),a.clearQueue(),s.stop(),a.stop(),s.animate({width:l},o),a.animate({"margin-left":l},o,null,function(){n.$broadcast("leftMenuToggleSuccess",{collapse:!0}),$("#calendar").fullCalendar("render")}),s.addClass("leftpanel_collapse")):e===!1&&(s.clearQueue(),a.clearQueue(),s.stop(),a.stop(),s.animate({width:r},o),a.animate({"margin-left":220},o,null,function(){s.removeClass("leftpanel_collapse"),n.$broadcast("leftMenuToggleSuccess",{collapse:!1}),$("#calendar").fullCalendar("render")}))})}}]).directive("wtSidebarToggle",["$timeout","$parse","$window","$rootScope",function(e,t,i,n){return function(e,t,i){var a=$(".layout_right_sidebar"),s=$(".layout_content_main"),r=239,o=200,l=86,c=!0;e.$eval(i.wtSidebarToggle)&&(a.width(l),a.addClass("sidebar_collapse"),s.css("marginRight",l)),e.$watch(i.wtSidebarToggle,function(e){return c?(c=!1,void 0):(e===!0?(a.addClass("sidebar_collapse"),a.animate({width:l},o),s.animate({"margin-right":l},o,null,function(){$("#calendar").fullCalendar("render"),n.$broadcast("sidebarToggleSuccess",{collapse:!0})})):e===!1&&(a.animate({width:r},o),s.animate({"margin-right":"240px"},o,null,function(){a.removeClass("sidebar_collapse"),$("#calendar").fullCalendar("render"),n.$broadcast("sidebarToggleSuccess",{collapse:!1})})),void 0)})}}]).directive("wtStopPropagation",[function(){return function(e,t,i){var n=i.wtStopPropagation;_.isEmpty(n)&&(n="mousedown"),t.bind(n,function(e){e.stopPropagation()})}}]).directive("wtPreventDefault",[function(){return function(e,t,i){var n=i.wtPreventDefault;t.bind(n,function(e){e.preventDefault()})}}]).directive("wtChart",[function(){return function(e,t,i){e.$watch(i.chartOptions,function(e){if(!_.isEmpty(e)){var t=null;if(null==t)switch(i.wtChart){case"ColumnStacked2D":t=new iChart.ColumnStacked2D(angular.copy(e)),t.draw();break;case"BarStacked2D":t=new iChart.BarStacked2D(angular.copy(e)),t.draw();case"Bar2D":t=new iChart.Bar2D(angular.copy(e)),t.draw();default:}}},!0)}}]).directive("wtFocusEvent",["$timeout","$parse",function(e,t){return{link:function(e,i,n){var s=t(n.wtFocusEvent);i.bind("focus",function(t){e.$$phase?s(e,{$event:t}):e.$apply(function(){s(e,{$event:t})})})}}}]).directive("wtModelChange",["$timeout","$parse",function(e,t){return{link:function(e,i,n){var s=t(n.wtModelChange);e.$watch(n.ngModel,function(){e.$$phase?s(e):e.$apply(function(){s(e)})})}}}]).directive("wtPagination",function(){return function(e,t,i){e.$watch(i.wtPagination,function(i){_.isEmpty(i)||t.pagination(i.totalCount,{current_page:0,items_per_page:kzi.config.default_count,num_display_entries:10,callback:function(t){e.$apply(function(){i.opts.callback(t)})},load_first_page:!1,prev_text:"上一页",next_text:"下一页"})})}}).directive("wtPopDelete",["$popbox","$parse",function(e,t){return{link:function(i,n,a){n.bind("click",function(n){var s=t(a.wtPopDelete),r=n;i.$apply(function(){e.popbox({target:r,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(e,t,i){t.popbox=i,t.js_close=function(){i.close()},t.delete_message="确认要删除此项吗？",t.delete_title="确认删除",t.js_sure_delete=function(){s(t,{$event:r,$popbox:i})}}]}).open()})})}}}]).directive("ngBindHtmlUnsafe",["$sce","sanitize",function(e,t){return{scope:{ngBindHtmlUnsafe:"="},template:"<span ng-bind-html='trustedHtml'></span>",link:function(i){i.updateView=function(){if(!_.isUndefined(i.ngBindHtmlUnsafe)){var n=t(i.ngBindHtmlUnsafe);i.trustedHtml=e.trustAsHtml(n)}},i.$watch("ngBindHtmlUnsafe",function(e){i.updateView(e)})}}}]).directive("wtAutofocus",["$timeout",function(e){return{link:function(t,i){e(function(){i[0].focus()},200)}}}]).directive("repeatDone",[function(){return function(e,t,i){e.$last&&e.$eval(i.repeatDone)}}]).directive("wtTrack",[function(){return function(e,t,i){window._hmt&&t.bind("click",function(){if(window._hmt&&i.wtTrack){var e=i.wtTrack.split("|");if(2>e.length)return;window._hmt.push(["_trackEvent",e[0],e[1],e.length>2?e[2]:null,e.length>3?e[3]:null])}})}}])}(),angular.module("wt.directive.avatar",[]).directive("wtAvatar",["$parse","sanitize",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/avatar.html",link:function(i,n,a){var s=function(s){var r=40;angular.isDefined(a.size)&&(r=parseInt(a.size,10)),n.addClass("avatar-"+r),45>r&&(r=40),r>=45&&(r=80),r>=100&&(r=180),angular.isDefined(a.avatar)&&(s.avatar=i.$eval(a.avatar)),n.attr("title",s.display_name),n.attr("member-id",s.uid);var o=n.children(".avatar-face");if(angular.isDefined(a.faceclass)&&o.addClass(a.faceclass),o.empty(),n.find("br").remove(),n.find(".avatar-name").remove(),n.find(".avatar-atname").remove(),n.find(".avatar-role").remove(),n.find(".avatar-append").remove(),"default_avatar.png"===s.avatar||_.isEmpty(s.avatar)){var l=s.display_name.substring(0,1).toLocaleUpperCase();o.append('<span class="avatar-text">'+l+"</span>")}else{var c=kzi.config.default_avatar;s.avatar&&(c=kzi.config.wtavatar_url+r+"/"+s.avatar),o.append('<img src="'+c+'" alt="'+s.display_name+'"/>')}if(angular.isDefined(a.status)||angular.isDefined(a.role)){var d=s.role?s.role:2,u="",p="",f=a.isTeam?"管理员":"负责人";if(1==d||3==d){var h="";1==d?(p=f,h="member-admin"):2==d?(p="成员",h="member-user"):3==d&&(p="访客",h="member-guest")}s.online==kzi.constant.state.online&&(u="online",p+="(在线)"),s.online==kzi.constant.state.leave&&(u="leave",p+="(离开)"),s.online==kzi.constant.state.offline&&(u="offline",p+="(离线)"),1==d?o.append('<i class="icon-user '+u+" "+h+'" title="'+p+'"></i>'):o.append('<i class="status-point '+u+'" title="'+p+'"></i>')}if(angular.isDefined(a.href)&&""!==a.href?n.attr("href",a.href):n.attr("href","javascript:;"),angular.isDefined(a.namebr)&&o.after("<br/>"),angular.isDefined(a.name)){var m=s.display_name;if("true"!=a.name&&(m=i.$eval(a.name)),n.append('<span class="avatar-name">'+t(m)+"</span>"),angular.isDefined(a.nameclass)){var g=n.find(".avatar-name");g.addClass(a.nameclass)}}if(angular.isDefined(a.atname)&&n.append('<span class="avatar-atname">('+s.name+")</span>"),angular.isDefined(a.append)&&n.append('<span class="avatar-append">'+a.append+"</span>"),n.unbind("dragstart.wt-avatar"),angular.isDefined(a.drag)){var v=i.$eval(a.drag);_.isEmpty(v)?n.bind("dragstart.wt-avatar",function(e){return e.preventDefault(),!1}):n.draggable(v)}else n.bind("dragstart.wt-avatar",function(e){return e.preventDefault(),!1});if(n.unbind("click.wt-avatar"),angular.isDefined(a.click)){var b=e(a.click);n.bind("click.wt-avatar",function(e){i.$apply(function(){b(i,{$event:e})})})}};if(i.$watch(a.member,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||s(e)},!0),!_.isUndefined(a.member)){var r=i.$eval(a.member);if(_.isUndefined(r)||_.isNull(r))return;s(r)}}}}]),angular.module("wt.directive.task",[]).directive("wtTask",["$parse","$popbox",function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/task.html",link:function(e,t,i){_.isEmpty(i.hideAction)||(e.hide_action=!!i.hideAction)}}}]).directive("wtTaskComposer",["$compile","$templateCache","$http","$parse","$timeout","$popbox",function(e,t,i,n){"use strict";return{restrict:"E",replace:!0,transclude:!0,link:function(a,s,r){var o=r.position,l="/ycjs/tpl/directive/task_composer.html",c=function(){$(document).bind("mousedown.wtTaskComposer",function(e){$(e.target).hasClass("entry-task-composer")||$(e.target).parents(".entry-task-composer").length>0||$(e.target).hasClass("popbox-avatar")||$(e.target).parents(".popbox-avatar").length>0||a.$apply(function(){n(r.composerShow).assign(a,!1)})})};a.focus_textarea=function(e){var t=null;t=$(e.target).hasClass("composer-body-focus")?$(e.target):$(e.target).parents(".composer-body-focus").eq(0),t.find("textarea").focus()},a.$watch(r.composerShow,function(n){if(n===!0)if(s.contents().length>0){if(s.css("display","block"),c(),s.find("textarea")[0].focus(),"bottom"===o){var d=s.parents(".entry").eq(0).find(".mCustomScrollbar");d.mCustomScrollbar("scrollTo","bottom"),setTimeout(function(){d.mCustomScrollbar("scrollTo","bottom")},300)}}else i.get(l,{cache:t}).success(function(t){if(s.html(t),e(s.contents())(a),s.css("display","block"),c(),s.find("textarea")[0].focus(),"bottom"===o){var i=s.parents(".entry").eq(0).find(".mCustomScrollbar");i.mCustomScrollbar("scrollTo","bottom"),setTimeout(function(){i.mCustomScrollbar("scrollTo","bottom")},300)}}).error(function(){angular.noop()});else n===!1&&(s.css("display","none"),$(document).unbind("mousedown.wtTaskComposer"))})}}}]).directive("wtMousedownMove",[function(){"use strict";return{link:function(e,t){var n=0;t.bind("mousedown",function(e){if(e=e||window.event,2!=e.button&&!($(e.target).parents(".entry").length>0||$(e.target).parents(".entry-new").length>0)){var t=e.pageX,i=$(".entries_panel_sortarea").parents(".mCustomScrollbar").find(".mCSB_container")[0].offsetLeft;i||(i=0),$(document.body).css("cursor","-moz-grabbing"),$(document.body).css("cursor","-webkit-grabbing"),$(document.body).css("cursor","grabbing"),$(document).bind("selectstart.wtMousedownMove",function(){return!1}),$(document).bind("mousemove.wtMousedownMove",function(e){n=t-e.pageX-i,$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo",n)})}}),$(document).bind("mouseup",function(){$(this).unbind("mousemove.wtMousedownMove"),$(this).unbind("selectstart.wtMousedownMove"),$(document.body).css("cursor","")})}}}]).directive("wtTeamName",["$timeout","$rootScope",function(e,t){"use strict";return{link:function(i,n){e(function(){var e=n.find("optgroup");e.each(function(e,i){var n=$(i).attr("label"),a="";a="-1"===n?"个人项目":_.findWhere(t.teams,{team_id:n}).name,$(i).attr("label",a)})},100)}}}]),angular.module("wt.directive.badges",[]).directive("wtBadges",["longTimeFormatFilter","shortTimeFormatFilter","$parse","$popbox",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/badges.html",link:function(i,n,a){var s=function(e){var t=0;if(e.completed)t=0;else{var i=moment().valueOf(),n=1e3*moment(e.expire_date).format("X");t=i>n?1:n>i&&moment().add("days",1).valueOf()>n?2:0}return t},r=function(r){var o="";if(n.children(".icon-time").remove(),0!=r.expire_date){var l=t(r.expire_date);new Date(r.expire_date).getFullYear()!==(new Date).getFullYear()&&(l=e(r.expire_date));var c="",d="",u=s(r);d="截止时间："+l,1===u&&(c="badge-expire-due",d="任务已经截止"),2===u&&(c="badge-expire-soon",d="任务即将截止");var p=['<span class="task-badge icon icon-time '+c+'"',' title="'+d+'">',l,"</span> "].join("");o+=p}if(n.children(".icon-list").remove(),r.badges.todo_count>0){var f=r.badges.todo_checked_count+"/"+r.badges.todo_count,h="";r.badges.todo_checked_count===r.badges.todo_count&&(h=" badge-todo-done");var m="";m=r.badges.todo_checked_count===r.badges.todo_count?r.badges.todo_checked_count+"个检查项已全部完成":"检查项："+r.badges.todo_checked_count+"/"+r.badges.todo_count;var _=['<span class="task-badge icon icon-list '+h+'"',' title="'+m+'">',f,"</span> "].join("");o+=_}if(n.children(".icon-paper-clip").remove(),r.badges.file_count>0){var g=r.badges.file_count,v="任务有"+r.badges.file_count+"个附件",b=['<span class="task-badge icon icon-paper-clip"',' title="'+v+'">',g,"</span> "].join("");o+=b}if(n.children(".icon-align-left").remove(),r.desc){var y="任务有描述",w=['<span class="task-badge icon icon-align-left"',' title="'+y+'">',"</span> "].join("");o+=w}if(n.children(".icon-comment-alt").remove(),r.badges.comment_count>0){var k=r.badges.comment_count,j="任务有"+r.badges.comment_count+"个评论",x=['<span class="task-badge icon icon-comment-alt"',' title="'+j+'">',k,"</span> "].join("");o+=x}if(i.$eval(a.showProject)){n.children(".icon-project-name").remove();var $=r.project.name,C=r.project.pic,S=['<span class="task-badge icon '+C+" icon-project-name"+'"',' title="'+$+'">',$,"</span> "].join("");o+=S}n.append(o)};if(i.$watch(a.task,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,{})||_.isUndefined(e.badges)||_.isNull(e.badges)||null!==t&&moment(e.expire_date).format("YYYY-MM-DD")===moment(t.expire_date).format("YYYY-MM-DD")&&_.isEqual(e.badges,t.badges)&&_.isEqual(e.desc,t.desc)&&e.completed==t.completed||r(e)},!0),!_.isUndefined(a.task)){var o=i.$eval(a.task);if(_.isUndefined(o)||_.isEmpty(o))return;if(_.isEqual(o,{}))return;if(_.isUndefined(o.badges)||_.isNull(o.badges))return;r(o)}}}}]),angular.module("wt.directive.attachment",[]).directive("wtAttachment",["$parse","isPreviewFileFilter",function(e){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/attachment.html",link:function(t,i,n){var a=function(){var s=i.children(".file-action");i.attr("title",t.file.name),s.children(".file-del").remove();var r=!0;if(_.isEmpty(n.delPermission)||(r=t.$eval(n.delPermission)),!_.isEmpty(n.fancygroup)){var o=i.children(".file-picfile").eq(0);o.data("fancybox-group",n.fancygroup),o.attr("data-fancybox-group",n.fancygroup)}if(r&&!_.isEmpty(n.del)){var l=e(n.del),c=['<a class="file-del" href="javascript:;">',"删除","</a>"].join("");s.append(c),s.children(".file-del").bind("click.wt-del-attachment",function(e){t.$apply(function(){l(t,{$event:e})})})}};_.isObject(i.scope().file)&&a()}}}]),angular.module("wt.directive.notice",[]).directive("wtNotice",["$parse","$popbox","$location","$rootScope",function(e,t,i,n){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/notice.html",link:function(t,a,s){var r=e(s.noticeClick),o=t.notice.template;switch(o){case"task_assign":t.action="给你分配了新的任务",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"task_complete":t.action="完成了任务",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"event_attend":t.action="邀请你参与日程",t.type_icon=kzi.constant.notice_type_icon.event,t.display_entity=t.notice.data.entity;break;case"task_watch":t.action="提醒你关注任务",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"file_watch":t.action="提醒你关注文件",t.type_icon=kzi.constant.notice_type_icon.file,t.display_entity=t.notice.data.entity;break;case"post_watch":t.action="提醒你关注话题",t.type_icon=kzi.constant.notice_type_icon.post,t.display_entity=t.notice.data.entity;break;case"page_watch":t.action="提醒你关注文档",t.type_icon=kzi.constant.notice_type_icon.page,t.display_entity=t.notice.data.entity;break;case"task_comment":t.action="评论了任务："+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"event_comment":t.action="评论了日程："+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"file_comment":t.action="评论了文件："+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"post_comment":t.action="评论了话题："+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"page_comment":t.action="评论了文档："+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"file_version":t.action="上传了文件新版本",t.type_icon=kzi.constant.notice_type_icon.file,t.display_entity=t.notice.data.entity;break;case"page_version":t.action="提交了文档新版本",t.type_icon=kzi.constant.notice_type_icon.page,t.display_entity=t.notice.data.entity;break;case"metion_at_comment":t.action="在评论中提到了你",t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"project_archive":t.action="归档了项目",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_delete":t.action="删除了项目",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_add":t.action="把你加入了项目",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_remove":t.action="把你移出了项目",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_admin":t.action="设置你为项目的负责人",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"add_task_to_entry":t.action="在列表 "+t.notice.data.target.name+" 上添加了任务",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"move_task_to_entry":t.action="移动任务到了列表 "+t.notice.data.target.name+" 上",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"team_member_add":t.action="把你加入了团队",t.type_icon=kzi.constant.notice_type_icon.team,t.display_entity=t.notice.data.entity;break;case"team_member_remove":t.action="把你移除了团队",t.type_icon=kzi.constant.notice_type_icon.team,t.display_entity=t.notice.data.entity;break;default:t.action=o+"未实现"}t.js_click_notice=function(){var e=t.type_icon.name,a=t.display_entity;if(_.isEmpty(t.send_entity)||(e=t.send_entity.etype,a=t.send_entity),r(t,{$eType:e,$entity:a}),"team_member_remove"!==t.notice.template&&"project_member_remove"!==t.notice.template){if("project"===e)return i.path("/project/"+t.notice.filter.prj),void 0;if("team"===e)return i.path("/teams/"+t.notice.filter.team),void 0;if(null!==e){n.locator.type=e,n.locator.show_slide=!0;var s=["task_comment","event_comment","file_comment","page_comment","post_comment","metion_at_comment"];s.indexOf(t.notice.template)>=0?n.locator.to_entity(t.notice.filter.prj,a,!0,t.notice.data.entity.eid):n.locator.to_entity(t.notice.filter.prj,a,!0)}}}}}}]).directive("wtInboxTrigger",["$rootScope","$timeout",function(e){"use strict";return{restrict:"A",link:function(t,i){function s(){var t=kzi.util.winHeight()-58;a=e.global.title,e.global.title="消息中心",$("#inbox").animate({height:t},100,"",function(){e.$broadcast("wtInboxTriggerSuccess",!0),$(window).bind("resize.show_inbox",function(){var t=kzi.util.winHeight()-58;$("#inbox").height(t)}),$(document).bind("click.show_inbox",function(t){0==$(t.target).parents("#inbox").length&&0==$(t.target).parents(".slide-content").length&&0==$(t.target).parents(".popbox").length&&0!=$(document).find(t.target).length&&0==$(t.target).parents("#fancybox-buttons").length&&(e.global.show_inbox=!1,e.$apply())}),$(document).bind("keydown.show_inbox keypress.show_inbox",function(t){var i=t.which||t.keyCode;(i!==kzi.constant.keyASCIIs.VK_SPACE||"keypress"!==event.type)&&"0px"==$(".slide-content").css("width")&&i===kzi.constant.keyASCIIs.ESC&&(e.global.show_inbox=!1,e.$apply(),event.preventDefault())})})}function r(){e.$broadcast("wtInboxTriggerSuccess",!1),_.isEmpty(a)||(e.global.title=a),$("#inbox").animate({height:0},100,"",function(){$(window).unbind("resize.show_inbox"),$(document).unbind("click.show_inbox"),$(document).unbind("keydown.show_inbox keypress.show_inbox")})}var a="";t.$watch("global.show_inbox",function(e){e?s():r()}),i.bind("click",function(t){t.stopPropagation(),e.$apply(function(){e.global.show_inbox=!e.global.show_inbox})})}}}]).directive("wtInboxView",[function(){"use strict";return{restrict:"E",controller:"inbox_ctrl",replace:!0,scope:!0,templateUrl:"/ycjs/tpl/dashboard/inbox.html",link:function(){}}}]),angular.module("wt.directive.feed",[]).directive("wtFeed",["$parse","$rootScope",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/feed.html",link:function(e){var a=e.feed.template;switch(a){case"task_create":e.action="新建了任务",e.type_icon=kzi.constant.feed_type_icon.task,e.display_entity=e.feed.data.entity;break;case"task_complete":e.action="完成了任务",e.type_icon=kzi.constant.feed_type_icon.completed,e.display_entity=e.feed.data.entity;break;case"task_comment_add":e.action="评论了任务："+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"task_attach_file":e.action="在任务上添加了附件："+e.feed.data.entity.name,e.type_icon=kzi.constant.feed_type_icon.task,e.display_entity=e.feed.data.target,e.send_entity=e.feed.data.target;break;case"file_upload":e.action="上传了文件",e.type_icon=kzi.constant.feed_type_icon.file,e.display_entity=e.feed.data.entity;break;case"file_new_version":e.action="上传了文件新版本",e.type_icon=kzi.constant.feed_type_icon.file,e.display_entity=e.feed.data.entity;break;case"file_comment_add":e.action="评论了文件："+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"post_create":e.action="发起了新话题",e.type_icon=kzi.constant.feed_type_icon.post,e.display_entity=e.feed.data.entity;break;case"post_comment_add":e.action="评论了话题："+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"event_create":e.action="新建了日程",e.type_icon=kzi.constant.feed_type_icon.event,e.display_entity=e.feed.data.entity;break;case"event_comment_add":e.action="评论了日程："+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"page_create":e.action="新建了文档",e.type_icon=kzi.constant.feed_type_icon.page,e.display_entity=e.feed.data.entity;break;case"page_comment_add":e.action="评论了文档："+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;default:}e.js_click_feed=function(){if(!_.isEmpty(e.send_entity)){var i=["task_comment_add","event_comment_add","file_comment_add","page_comment_add","post_comment_add"];return i.indexOf(e.feed.template)>=0?t.locator.to_entity(e.feed.filter.prj,e.send_entity,!0,e.feed.data.entity.eid):t.locator.to_entity(e.feed.filter.prj,e.send_entity,!0),void 0}t.locator.to_entity(e.feed.filter.prj,e.display_entity,!0,e.feed.data.entity.eid)}}}}]),angular.module("wt.directive.markdown",[]).factory("MdParse",[function(){"use strict";return function(e){return"string"!=typeof e?"":marked(e,{breaks:!0})
}}]).factory("sanitize",[function(){"use strict";var e=new Sanitize({}),t=new Sanitize(Sanitize.Config.RESTRICTED),i=new Sanitize(Sanitize.Config.BASIC),n=new Sanitize(Sanitize.Config.RELAXED);return function(a,s){var r=n;switch(s){case 0:r=e;break;case 1:r=t;break;case 2:r=i;break;case 3:r=n;break;default:r=n}var o=document.createElement("div"),l=document.createElement("div");return o.innerHTML=filterXSS(a),l.appendChild(r.clean_node(o)),l.innerHTML}}]).directive("wtMarkdown",["MdParse","sanitize",function(e,t){"use strict";return function(e,i,n){i.addClass("ng-binding markdown").data("$binding",n.genParseMarkdown);var a=i.html()||"",s=new Markdown.Converter;Markdown.Extra.init(s);var r=s.makeHtml(a),o=t(r);i.html(o),e.$watch(n.wtMarkdown,function(e){if(e=e||"",""!==e){var n=s.makeHtml(e),a=t(n);i.html(a)}else i.html("");i.find("a").attr("target",function(){if(this.host!==location.host)return"_blank";var e=["share/","club","videos","blog","plan","tour","mobile","security","uservoice","customers","press","help","guide","feedback","about","contact","privacy","terms"].join(")|(/");return e=new RegExp("^(/"+e+")"),e.test(this.pathname)?"_blank":void 0})})}}]),angular.module("wt.directive.activity",[]).directive("wtActivity",["$parse","$popbox",function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/activity.html",link:function(e){var n=e.$parent.tpl_prefix,a=e.activity.template,s="project_",r="item_";switch(a){case"task_create":n===s?(e.verb="在列表 <strong>"+e.activity.data.target.name+"</strong> 上添加新任务",e.display_entity=e.activity.data.entity):e.verb=n===r?"添加任务":"tpl_prefix为空";break;case"task_update_name":n===s?(e.verb="修改任务",e.display_entity=e.activity.data.entity):e.verb=n===r?"修改任务为 <strong>"+e.activity.data.entity.name+"</strong>":"tpl_prefix为空";break;default:e.verb=a+"模板尚未实现"}}}}]),angular.module("wt.directive.uploadfile",[]).directive("wtUploadfile",[function(){"use strict";return{restrict:"A",link:function(e,t,i){var n=function(e){t.unbind("change.call_global_fileupload"),t.bind("change.call_global_fileupload",function(){e.previewMaxWidth&&$("#global_file_upload").fileupload({previewMaxWidth:e.previewMaxWidth}),e.previewMaxHeight&&$("#global_file_upload").fileupload({previewMaxHeight:e.previewMaxHeight});var t={url:e.url,formData:e.formData,fileInput:$(this)};_.isFunction(e.successCallback)&&(t.formData.successCallback=e.successCallback),$("#global_file_upload").fileupload("add",t),_.isFunction(e.addCallback)&&e.addCallback(),$(this).val("")})};if(e.$watch(i.wtUploadfile,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||n(e)},!0),!_.isUndefined(i.wtUploadfile)||_.isNull(i.wtUploadfile)||_.isEmpty(i.wtUploadfile)){if(_.isUndefined(e.$eval(i.wtUploadfile)))return;n(e.$eval(i.wtUploadfile))}}}}]),angular.module("wt.directive").directive("wtConfirmPassword",["$parse","$window",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/confirm_password.html",link:function(i,n,a){var s=e(a.confirmSuccess),r=e(a.confirmCancel);i.js_cancel_option=function(){_.isFunction(r)&&r(i)},i.js_forgot_password=function(){t.location.href="/forgot"},i.js_confirm_password=function(e){i.confirming=!0,wt.data.account.conform_password(i.confirm_password,function(){_.isFunction(s)&&s(i)},function(t){t.code===kzi.statuses.user_error.invalid_pwd_error.code?e.$errors.unshift("输入密码输入错误"):e.$errors.unshift("服务器发生错误")},function(){i.confirming=!1})}}}}]),angular.module("wt.directive.dragfile",[]).directive("wtDragfile",["$parse","$window",function(){"use strict";return{link:function(e,t,i){var n=void 0,a=function(){$(t).unbind("dragover.wt_dragfile"),$(t).unbind("drop.wt_dragfile"),$(t).unbind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit")},s=function(){$(t).unbind("dragover.wt_dragfile"),$(t).unbind("drop.wt_dragfile"),$(t).unbind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit"),$(t).bind("dragover.wt_dragfile",function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=e.dataTransfer;return i&&-1!==$.inArray("Files",i.types)?(i.dropEffect="copy",$(t).addClass("dragfile-hover"),!1):void 0}),$(t).bind("drop.wt_dragfile",function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=e.dataTransfer;if(t&&t.files&&t.files.length){n.upload_option.formData.size=t.files[0].size;var i=[],a=!1;if(console.info("dataTransfer.types",t.types),_.each(t.files,function(e){console.info("file in dataTransfer.files",e);var t={type:2,ext:kzi.constant.get_ext(e.name.substring(e.name.lastIndexOf(".")+1))};e.icon=kzi.constant.get_file_icon(t),("application/x-iwork-pages-sffpages"===e.type||"application/x-iwork-keynote-sffkey"===e.type||"application/x-iwork-numbers-sffnumbers"===e.type)&&(a=!0),a!==!0&&t.ext>0&&i.push(e)}),t.files.length>i.length&&(a?kzi.msg.info("文件上传失败，iWork 系列文件实际上是一个文件夹，请压缩成 zip 文件后上传。"):kzi.msg.info("不支持上传此文件类型")),0===i.length)return void 0;$("#global_file_upload").fileupload("add",{url:n.upload_option.url,formData:n.upload_option.formData,files:i})}}),$(t).bind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit",function(e){var i=!0,n=$(t).offset().left,a=$(t).width(),s=$(t).offset().top,r=$(t).height(),o=!1;e.originalEvent.pageX>n&n+a>e.originalEvent.pageX&&(o=!0);var l=!1;return e.originalEvent.pageY>s&s+r>e.originalEvent.pageY&&(l=!0),o&&l&&"drop"!==e.type&&(i=!1),i&&$(t).removeClass("dragfile-hover"),!1})};if(e.$watch(i.wtDragfile,function(t,r){if(!_.isUndefined(t)&&!_.isNull(t)&&!_.isEqual(t,r)){if(i.wtDragfileEnable&&0==e.$eval(i.wtDragfileEnable))return a(),void 0;n=t,s()}},!0),e.$watch(i.wtDragfileEnable,function(e){e?s(e):a()},!0),!_.isUndefined(i.wtDragfile)){if(n=e.$eval(i.wtDragfile),_.isUndefined(n)||_.isEmpty(n))return;if(_.isEqual(n,{}))return;if(!_.isObject(n))return;s()}}}}]),angular.module("wt.directive.pastefile",[]).directive("wtPastefile",["$parse","$window",function(){"use strict";return{link:function(e,t,i){var n=function(){$(t).unbind("paste.wt_pastefile"),$(t).bind("paste.wt_pastefile",function(t){t.stopPropagation();var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,a={files:[]};n&&n.length&&_.each(n,function(n){if("file"===n.kind&&n.type.match(/^image\//i)){var s=n.getAsFile&&n.getAsFile(),r=e.$eval("$parent.$parent");if(r=r[i.wtPastefile],s&&!_.isUndefined(r)){var o={type:2,ext:2};n.icon=kzi.constant.get_file_icon(o),s.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",a.files.push(s),t.preventDefault(),$("#global_file_upload").fileupload("add",{url:r.upload_option.url,formData:r.upload_option.formData,files:s})}}})})};if(e.$watch(i.wtPastefile,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||n(e)},!0),!_.isUndefined(i.wtPastefile)){var a=i.wtPastefile;if(_.isUndefined(a)||_.isEmpty(a))return;if(_.isEqual(a,{}))return;n(a)}}}}]),angular.module("wt.directive.event",[]).directive("wtNewEvent",["$rootScope","$routeParams","$parse","$popbox",function(e,t,i,n){"use strict";return{restrict:"A",replace:!0,link:function(e,t,a){var s=i(a.wtNewEvent);t.bind("click",function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_add_event.html",controller:"pop_new_event_ctrl",resolve:{pop_data:function(){return{save_success:s,scope:e}}}}).open()})}}}]),angular.module("wt.directive").directive("wtComment",["$parse","$rootScope","$popbox","$timeout",function(e,t,i,n){"use strict";return{restrict:"E",replace:!1,templateUrl:"/ycjs/tpl/directive/new_comment.html",link:function(t,a,s){var r=e(s.saveComment),o=a.find("textarea")[0],l=function(e){var t=a.find("textarea")[0];n(function(){t.focus(),t.select(),t.selectionStart=t.selectionEnd=e})},c=function(e,t,i){if("number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var a=t.selectionStart,s=t.selectionEnd,r=a+i.length;_.isUndefined(e.message)&&(e.message=""),n(function(){e.message=e.message.substring(0,a)+i+e.message.substring(s)}),l(r)}else $timout(function(){e.message=e.message+i,o.focus()})};t.$js_metion_member=function(e){var n=a.find("textarea")[0];i.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_comment_metion.html",controller:["$scope","popbox","pop_data",function(e,i){e.popbox=i,e.metion_members=t.atwho_members,e.js_metion_member=function(e,a){t.comment.message||(t.comment.message=""),c(t.comment,n," @"+a.name+" "),i.close()},e.js_metion_all=function(){t.comment.message||(t.comment.message="");var s="";_.each(e.metion_members,function(e){s+=" @"+e.name+" "}),c(t.comment,n,s),i.close()},e.js_close=function(){i.close()},e.js_mousedown=function(e){e.stopPropagation()}}],resolve:{pop_data:function(){return{scope:t,members:t.members}}}}).open()},t.$js_save_comment=function(){r(t)},t.checkFilePid=function(){return function(e){return e.pid===t.pid}},t.js_del_attachment_comment=function(e,i){var n=_.findWhere(t.comment.files,{fid:i.fid});n&&(t.comment.files=_.reject(t.comment.files,function(e){return e.fid==i.fid}))},t.$js_pop_emojis=function(e){i.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_emojis.html",controller:["$scope","popbox",function(e,i){e.popbox=i,e.emojis=[];var n=72,s=[],r=[];$.each(kzi.emojis,function(e){0!==e&&0===e%n&&(r.push(s),s=[]),s.push(this)}),r.push(s),e.emoji_groups=r,e.emojis=r[0],e.current=0,e.js_to_page=function(t){e.current=t,e.emojis=r[t]},e.js_insert_emoji=function(e){var n=a.find("textarea")[0];c(t.comment,n," :"+e+": "),i.close()},e.js_close=function(){i.close()},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){})}}}}]),angular.module("wt.directive").directive("wtEntityShare",["$parse","$popbox",function(e,t){"use strict";return{restrict:"A",link:function(e,i,n){i.bind("click",function(i){var a=e.$eval(n.wtEntityShare);_.isEmpty(a)&&4!==a.length||t.popbox({target:i,templateUrl:"/ycjs/tpl/common/pop_share_entity.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.share={},e.share.email_address="";var i=a[1],n=a[2],s=a[3],r="",o="";n===kzi.constant.xtype.task?(e.entity="任务",r=s.tid,o="tasks"):n===kzi.constant.xtype.post?(e.entity="话题",r=s.post_id,o="posts"):n===kzi.constant.xtype.page?(e.entity="文档",r=s.page_id,o="pages"):n===kzi.constant.xtype.event?(e.entity="日程",r=s.event_id,o="events"):n===kzi.constant.xtype.file&&(e.entity="文件",r=s.fid,o="files"),e.step="select_share_method",s.share_id?(e.showing_link=!0,e.share_link=window.location.origin+"/share/"+o+"/"+s.share_id,e.input_link_focus=!0):e.showing_link=!1;var l=function(){wt.data.task.share(i,r,e.share.email_address,function(){e.send_success=!0},null,function(){e.is_sharing=!1})},c=function(){wt.data.file.share(i,r,e.share.email_address,function(){e.send_success=!0},null,function(){e.is_sharing=!1})},d=function(){wt.data.post.share(i,r,e.share.email_address,function(){e.send_success=!0},null,function(){e.is_sharing=!1})},u=function(){wt.data.page.share(i,r,e.share.email_address,function(){e.send_success=!0},null,function(){e.is_sharing=!1})},p=function(){wt.data.event.share(i,r,e.share.email_address,function(){e.send_success=!0},null,function(){e.is_sharing=!1})};e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_share_entity=function(){switch(e.is_sharing=!0,n){case kzi.constant.xtype.task:l();break;case kzi.constant.xtype.file:c();break;case kzi.constant.xtype.page:u();break;case kzi.constant.xtype.post:d();break;case kzi.constant.xtype.event:p();break;default:}},e.toggle_share_link=function(){e.showing_link?wt.data.share.disable_share_link(i,o,r,function(){e.showing_link=!e.showing_link,s.share_id="",e.share_link=""},function(){kzi.msg.error("关闭共享链接失败")},function(){}):wt.data.share.enable_share_link(i,o,r,function(t){e.share_link=window.location.protocol+"//"+window.location.host+"/share/"+o+"/"+t.data,e.showing_link=!e.showing_link,s.share_id=t.data,e.input_link_focus=!0},function(){kzi.msg.error("打开共享链接失败")},function(){})}}]}).open()})}}}]).directive("wtEntityPrint",[function(){"use strict";return{restrict:"A",link:function(e,t){t.click(function(){$(this).parents("ul.dropdown-menu").parent("li").removeClass("open");var t=$(".slide-content >div:visible").html(),i=document.getElementById("printFrame");$(i.contentWindow.document).find(".ng-scope").html(t),setTimeout(function(){i.contentWindow.do_print()},200),setTimeout(function(){$(i.contentWindow.document).find(".ng-scope").html("")},500)})}}}]).directive("wtDetailPrint",[function(){"use strict";return{restrict:"A",link:function(e,t){t.click(function(){$(this).parents("ul.dropdown-menu").parent("li").removeClass("open");var t=$("[class$='-detail']").html(),i=document.getElementById("printFrame");$(i.contentWindow.document).find(".ng-scope").html(t),setTimeout(function(){i.contentWindow.do_print()},200),setTimeout(function(){$(i.contentWindow.document).find(".ng-scope").html("")},500)})}}}]).directive("wtPopMember",["$parse","$popbox",function(e,t){"use strict";return{restrict:"A",link:function(e,i,n){i.bind("click",function(i){var a=e.$eval(n.popMember),s=e.$eval(n.wtPopMember);_.isEmpty(s)||("true"===n.stopPropagation&&i.stopPropagation(),t.popbox({target:i,templateUrl:"/ycjs/tpl/directive/pop_member.html",controller:["$scope","popbox",function(t,i){t.popbox=i,t.member=a,t.action_name=s[0].name,t.ongoing=s[0].ongoing,t.js_action_member=function(a){if(!t.pop_member_actioning){var r=e.$eval(n.popExtendedAttr);t.pop_member_actioning=!0,s[0].click(t,i,a,function(){t.pop_member_actioning=!1,i.close()},r)}},t.js_close=function(){i.close()}}]}).open())})}}}]).directive("wtPopToggleMembers",["$parse","$popbox",function(e,t){"use strict";return{restrict:"A",link:function(i,n,a){var s=e(a.wtPopToggleMembers),r=e(a.allMemberClick);n.bind("click",function(e){var n=i.$eval(a.pid),o=i.$eval(a.entity),l=a.type;t.popbox({target:e,templateUrl:"/ycjs/tpl/directive/toggle_members.html",controller:["$rootScope","$scope","popbox",function(e,t,a){t.popbox=a,t.js_close=function(){a.close()},t.type=l,t.xEntity=o,t.search_user_input="",t.title="","member"===l?t.title="分配任务":"watch"===l?t.title="添加关注":"attendee"===l&&(t.title="参与人"),e.load_project_members(n,function(e){var i=null;"member"===l?i=wt.bus.member.get_scope_members_for_assigned(e.members,o.members):"watch"===l?i=wt.bus.watch.get_scope_watcher_members(e.members,o.watchers):"attendee"===l&&(i=wt.bus.member.get_scope_members_for_assigned(e.members,o.attendees)),t.members=i}),t.js_toggle_member_inner=function(e,n){_.isFunction(s)&&s(i,{$event:e,member:n,xEntity:t.xEntity})},t.js_watch_all_member_inner=function(e,n){r(i,{$event:e,members:n,xEntity:t.xEntity}),a.close()},t.js_all_member_inner=function(e,n){r(i,{$event:e,members:n,xEntity:t.xEntity}),a.close()}}]}).open()})}}}]).directive("wtToggleMembers",["$parse","$rootScope",function(e,t){"use strict";return{restrict:"E",templateUrl:"/ycjs/tpl/directive/toggle_members.html",link:function(i,n,a){var s=e(a.toggleClick),r=e(a.allMemberClick),o=i.$eval(a.pid),l=i.$eval(a.entity),c=a.type;i.type=c,i.xEntity=l,i.search_user_input="",i.title="",i.show_to_step=!0,"member"===c?i.title="分配任务":"watch"===c?i.title="添加关注":"attendee"===c&&(i.title="参与人"),t.load_project_members(o,function(e){var t=null;"member"===c?t=wt.bus.member.get_scope_members_for_assigned(e.members,l.members):"watch"===c?t=wt.bus.watch.get_scope_watcher_members(e.members,l.watchers):"attendee"===c&&(t=wt.bus.member.get_scope_members_for_assigned(e.members,l.attendees)),i.members=t}),i.js_toggle_member_inner=function(e,t){_.isFunction(s)&&s(i,{$event:e,member:t,xEntity:i.xEntity})},i.js_watch_all_member_inner=function(e,t){_.isFunction(r)&&r(i,{$event:e,members:t,xEntity:i.xEntity})}}}}]).directive("wtItemCommentActivity",["$parse","$rootScope",function(){"use strict";return{restrict:"E",templateUrl:"/ycjs/tpl/directive/item_comment_activity.html",link:function(e){var n="",a="";e.tab_active={},e.select_tab_comment=function(){e.tab_active.tab_activity_active=!1,e.tab_active.tab_comment_active=!0,e.$broadcast(kzi.constant.event_names.clear_item_activities)},e.select_tab_activity=function(){e.tab_active.tab_activity_active=!0,e.tab_active.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:n,xid:a})},e.$on(kzi.constant.event_names.select_comment_tab,function(t,i){n=i.xtype,a=i.xid,e.select_tab_comment(),e.$broadcast(kzi.constant.event_names.load_comments,i)}),e.$on(kzi.constant.event_names.clear_comment_activity,function(){e.$broadcast(kzi.constant.event_names.clear_item_activities),e.$broadcast(kzi.constant.event_names.clear_comments)})}}}]).directive("wtEntityDeny",[function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/entity_item_deny.html"}}]),angular.module("directive.master_new_dialog",[]).directive("masterNewDialog",["$popbox","$rootScope",function(e,t){"use strict";return{restrict:"A",controller:[function(){}],link:function(i,n,a){i.js_pop_new_menu=function(i){e.popbox({target:i,templateUrl:"/ycjs/tpl/directive/master_new.html",controller:["$scope","popbox","$location","$routeParams",function(e,i,n,s){e.projectNameInputFocus=!1,e.teamNameInputFocus=!1,e.is_saving_team=!1,e.is_saving_project=!1;var r=s.team_id;if(e.team_id=r,e.data={},e.sepeartorAdded=!1,e.data.stepHistory=[],e.data.prjName="",e.data.current_team="",e.popbox=i,e.dialogEntryStep=e.currentStep=a.step,e.visibilityArr=[{visibility:kzi.constant.prj_visibility.private,desc:"私有项目",icon:"icon-private",intro:"只有加入项目的成员才能看到该项目内容"},{visibility:kzi.constant.prj_visibility.protected,desc:"团队可见",icon:"icon-protected",intro:"项目所属的团队成员都可以访问该项目内容"},{visibility:kzi.constant.prj_visibility.public,desc:"公开项目",icon:"icon-public",intro:"所有注册用户都可以访问该项目内容"}],e.data.visibility=e.visibilityArr[0],e.owner_teams=wt.bus.team.find_add_prj_teams(),r){var o=_.find(e.owner_teams,function(e){return e.team_id===r});e.data.current_team=o?o:e.owner_teams[0]}else e.data.current_team=e.owner_teams[0];e.js_close=function(){i.close()},e.show_new_project_dialog=function(t){t.preventDefault(),e.data.stepHistory.push(e.currentStep),e.currentStep=2,e.projectNameInputFocus=!0},e.show_new_team_dialog=function(t){t.preventDefault(),e.data.stepHistory.push(e.currentStep),e.currentStep=3,e.teamNameInputFocus=!0},e.back=function(){e.currentStep=e.data.stepHistory.pop()},e.show_visibility_dialog=function(t){t.preventDefault(),e.data.stepHistory.push(e.currentStep),e.currentStep=4},e.set_private=function(t){t.preventDefault(),e.data.visibility=e.visibilityArr[0],e.currentStep=2,e.data.stepHistory.pop()},e.set_protected=function(t){t.preventDefault(),e.data.visibility=e.visibilityArr[1],e.currentStep=2,e.data.stepHistory.pop()},e.set_public=function(t){t.preventDefault(),e.data.visibility=e.visibilityArr[2],e.currentStep=2,e.data.stepHistory.pop()},e.js_add_prj=function(i,a,s,r,o){function l(i){i.data.curr_role=1,i.data.is_star=0;var a=_.findWhere(t.projects,{pid:i.data.pid});a||(i.data.permission=31,t.projects.push(i.data)),e.js_close(),n.path("/project/"+i.data.pid)}function c(){e.is_saving_project=!1}e.is_saving_project=!0,"-1"===a?wt.data.project.add_personal_project(s,r,o,l,null,c):wt.data.project.add_team_project(a,s,r,o,l,null,c)},e.js_add_team=function(i,a,s){e.is_saving_team!==!0&&(e.is_saving_team=!0,wt.data.team.add(a,s,function(e){t.teams.push(e.data),n.path("/teams/"+e.data.team_id)},null,function(){e.is_saving_team=!1}))},e.show_select_team_dialog=function(t){t.preventDefault(),e.data.stepHistory.push(e.currentStep),e.currentStep=5},e.select_team=function(t,i){t.preventDefault(),e.data.current_team=i,"-1"===e.data.current_team.team_id&&(e.data.visibility=e.visibilityArr[0]),e.back()}}]}).open()}}}}]),angular.module("wt.directive").directive("wtProjectGridItem",["$parse","$popbox",function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/project_grid_item.html"}}]).directive("showProjectVisibilityOptions",["$popbox",function(e){"use strict";return{restrict:"A",replace:!1,controller:[function(){}],link:function(t){t.show=function(t){e.popbox({target:t,templateUrl:"/ycjs/tpl/directive/project_visibility_options.html",controller:["$scope","popbox",function(e,t){e.visibilityArr=[{visibility:kzi.constant.prj_visibility.private,desc:"私有项目",icon:"icon-private",intro:"只有加入项目的成员才能看到该项目内容"},{visibility:kzi.constant.prj_visibility.protected,desc:"团队可见",icon:"icon-protected",intro:"项目所属的团队成员都可以访问该项目内容"},{visibility:kzi.constant.prj_visibility.public,desc:"公开项目",icon:"icon-public",intro:"所有注册用户都可以访问该项目内容"}],e.js_close=function(){t.close()}}]}).open()}}}}]),angular.module("wt.directive").directive("showTeamVisibilityOptions",["$popbox",function(e){"use strict";return{restrict:"A",replace:!1,controller:[function(){}],link:function(t){t.show=function(t){e.popbox({target:t,templateUrl:"/ycjs/tpl/directive/team_visibility_options.html",controller:["$scope","popbox",function(e,t){e.visibilityArr=[{visibility:kzi.constant.team_visibility.private,desc:"私有团队",icon:"icon-private",intro:"只有成员可以访问团队主页和团队可见项目"},{visibility:kzi.constant.team_visibility.public,desc:"公开团队",icon:"icon-public",intro:"注册用户可以访问团队主页和公开项目"}],e.js_close=function(){t.close()}}]}).open()}}}}]).directive("widgetAddTeamMemberByLink",["$rootScope",function(){"use strict";return{restrict:"E",replace:!0,scope:{current_team:"=currentTeam"},templateUrl:"/ycjs/tpl/directive/widget-add-team-member-by-link.html",link:function(e){e.$watch("current_team.link_join_code",function(t){_.isUndefined(t)||(e.join_team_link=window.location.origin+"/team/link/join?code="+e.current_team.link_join_code)}),e.toggle_join_team_link=function(){e.current_team.link_join_code?wt.data.team.join_link_close(e.current_team.team_id,function(){e.current_team.link_join_code="",e.join_team_link=""},function(){}):wt.data.team.join_link_open(e.current_team.team_id,function(t){e.current_team.link_join_code=t.data;var i=window.location.origin;e.join_team_link=i+"/team/link/join?code="+e.current_team.link_join_code},function(){kzi.msg.error("生成加入团队链接错误")})}}}}]),angular.module("wt.directive").directive("wtCommentEditor",["$timeout","$parse","$popbox",function(e,t,i){"use strict";return{restrict:"A",require:"ngModel",link:function(e,n,a){n.addClass("help-block form-control gollum-editor-body"),n.wrap('<div class="gollum-editor-wrap" />'),n.wrap('<div class="gollum-editor" />');var s=['<div class="gollum-editor-function-bar">','<div class="gollum-editor-function-buttons">','<div class="btn-group mr_10">','<a class="btn btn-min function-button function-bold" title="粗体"><span>粗体</span></a>','<a class="btn btn-min function-button function-italic" title="斜体"><span>斜体</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button function-ul" title="无序列表"><span>无序列表</span></a>','<a class="btn btn-min function-button function-ol" title="有序列表"><span>有序列表</span></a>','<a class="btn btn-min function-button function-blockquote" title="引用"><span>引用</span></a>','<a class="btn btn-min function-button function-hr" title="水平分割线"><span>水平分割线</span></a>',"</div>",'<div class="btn-group">','<a class="btn btn-min function-button js-popbox function-emoji" data-placement="bottom" title="插入表情"><i class="icon-smile"></i></a>',"</div>","</div>","</div>"].join("");['<div class="gollum-editor-help" class="jaws">','<ul class="gollum-editor-help-parent">','<li><a href="javascript:;" class="selected">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>',"</ul>",'<ul class="gollum-editor-help-list">','<li><a href="javascript:;">Help 2</a></li>','<li><a href="javascript:;">Help 3</a></li>','<li><a href="javascript:;">Help 4</a></li>','<li><a href="javascript:;">Help 5</a></li>','<li><a href="javascript:;">Help 6</a></li>','<li><a href="javascript:;">Help 7</a></li>','<li><a href="javascript:;">Help 8</a></li>',"</ul>",'<div class="gollum-editor-help-wrapper">','<div class="gollum-editor-help-content">',"<p>","</p>","</div>","</div>","</div>"].join(""),n.before(s);var o=function(i){e.$apply(function(){t(a.ngModel).assign(e,i)})};n.parents(".gollum-editor-wrap").eq(0).GollumEditor({AfterClickFunBar:o});var l=n.parents(".gollum-editor").find(".function-emoji"),c=null;n.parents(".editor-wrap").bind("click",function(){null!==c&&(c.close(),c=null)}),l.bind("click",function(s){s.stopPropagation(),s.preventDefault(),e.$apply(function(){return null!=c?(c.close(),c=null,void 0):(i.popbox({target:s,templateUrl:"/ycjs/tpl/common/pop_emojis.html",controller:["$scope","popbox",function(i,s){i.popbox=s,i.emojis=[];var r=72,o=[],l=[];$.each(kzi.emojis,function(e){0!==e&&0===e%r&&(l.push(o),o=[]),o.push(this)}),l.push(o),i.emoji_groups=l,i.emojis=l[0],i.current=0,i.js_to_page=function(e){i.current=e,i.emojis=l[e]},c=s,i.js_insert_emoji=function(i){var r=n.val()+" :"+i+": ";t(a.ngModel).assign(e,r),s.close()},i.js_close=function(){s.close()},i.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){c=null}),void 0)})})}}}]).directive("wtEditor",["$timeout","$parse","MdParse","sanitize","$popbox",function(e,t,i,n,a){"use strict";return{restrict:"AE",transclude:!0,replace:!0,templateUrl:"/ycjs/tpl/directive/editor.html",link:function(e,i){var o=i.find("textarea");o.addClass("help-block form-control gollum-editor-body");var l=function(i){e.$$phase?t(o.attr("ng-model")).assign(e,i):e.$apply(function(){t(o.attr("ng-model")).assign(e,i)})};i.GollumEditor({AfterClickFunBar:function(e){l(e)}});var c=i.find(".function-link"),d=null;i.find(".editor-wrap").bind("click",function(){null!==d&&(d.close(),d=null)}),c.bind("click",function(t){t.stopPropagation(),t.preventDefault(),e.$apply(function(){return null!=d?(d.close(),d=null,void 0):(a.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_add_link.html",controller:["$scope","popbox",function(e,t){e.popbox=t,d=t,e.js_close=function(){t.close()};var i=$.GollumEditor.FunctionBar.getFieldSelection(o);_.isEmpty(i)||(i=$.trim(i),1==/^\[.+\]\(.+\)$/gi.test(i)?(e.link_text=i.substring(1,i.indexOf("](")),e.link_address=i.substring(i.indexOf("](")+2,i.length-1)):(e.link_text=i,e.link_address="")),e.js_insert_link=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(o,"["+e.link_text+"]("+e.link_address+")"),t.close(),l(o.val())},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){d=null}),void 0)})});var u=i.find(".function-image"),p=null;i.find(".editor-wrap").bind("click",function(){p&&(p.close(),p=null)}),u.bind("click",function(t){t.stopPropagation(),t.preventDefault();var i=e.pid;e.$apply(function(){return p?(p.close(),p=null,void 0):(a.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_add_image.html",controller:["$rootScope","$scope","$filter","$routeParams","popbox","$sce",function(e,t,n,a,s,r){t.popbox=s,p=s,t.step=0,t.js_step=function(e){t.step=e},t.js_close=function(){s.close()},t.pid=i,t.js_show_images=function(){t.step=1,_.isEmpty(t.images)&&(t.images_loading_done=!1,t.images=null,wt.data.file.get_image_list(i,function(e){t.images=e.data},null,function(){t.images_loading_done=!0}))},t.js_select_image=function(e){t.step=0,t.image_address=kzi.config.wtprj_url+e.path,t.js_insert_image(null)},t.js_insert_image=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(o,"![]("+t.image_address+")"),s.close(),l(o.val())},t.js_upload_image=function(){t.uploading_done!==!0&&$("#file_upload").click()},t.token=kzi.get_cookie("sid"),t.action_url=e.global.config.box_url()+"?pid="+i+"&token="+t.token,r.trustAsUrl(t.action_url),t.file_upload_option={processstart:function(){t.uploading_done=!1,t.error_msg=null},process:function(e,t){var i=0;_.isEmpty(t.files)||(i=t.files[0].size),s.modalEl.find("form").fileupload({formData:{size:i,target:"prj"}})},processfail:function(){t.error_msg="上传失败,此处只支持图片格式的文件",t.uploading_done=!0},done:function(n,a){if(_.isEmpty(a.result.files))t.uploading_done=!0;else{var s={type:"entity",file:{name:a.result.files[0].fname,size:a.result.files[0].size,ext:kzi.constant.get_ext(a.result.files[0].ext),path:a.result.files[0].url},ext:{folder_id:""}};wt.data.file.new_upload(i,s,function(i){200===i.code&&(i.data.icon=kzi.helper.build_file_icon(i.data),_.isEmpty(t.images)||t.images.push(i.data),e.refresh_cache.file.add(i.data),t.image_address=kzi.config.wtprj_url+i.data.path,t.js_insert_image(null),t.uploading_done=!0)})}},acceptFileTypes:/(\.|\/)(jpe?g|png|gif|bmp)$/i}}]}).open().then(function(){p=null}),void 0)})}),e.$on("$destroy",function(){})}}}]).directive("wtFullEditor",["$compile","$timeout","$parse","$popbox","MdParse","sanitize",function(e,t,i,n,a,s){"use strict";return{restrict:"A",require:"ngModel",link:function(t,r,o){r.addClass("help-block form-control gollum-editor-body gollum-editor-full"),r.wrap('<div class="gollum-editor-wrap" />'),r.wrap('<div class="gollum-editor"  />');var l=['<div class="gollum-editor-function-bar">','<div class="gollum-editor-function-buttons">','<div class="btn-group mr_10">','<a class="btn btn-min function-button function-h1" title="标题1"><span>标题1</span></a>','<a class="btn btn-min function-button function-h2" title="标题2"><span>标题2</span></a>','<a class="btn btn-min function-button function-h3" title="标题3"><span>标题3</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button js-popbox function-link" data-placement="bottom" title="链接"><span>插入链接</span></a>','<a class="btn btn-min function-button js-popbox function-image" data-placement="bottom" title="图片"><span>插入图片</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button function-bold" title="粗体"><span>粗体</span></a>','<a class="btn btn-min function-button function-italic" title="斜体"><span>斜体</span></a>','<a class="btn btn-min function-button function-code" title="代码"><span>代码</span></a>',"</div>",'<div class="btn-group">','<a class="btn btn-min function-button function-ul" title="无序列表"><span>无序列表</span></a>','<a class="btn btn-min function-button function-ol" title="有序列表"><span>有序列表</span></a>','<a class="btn btn-min function-button function-blockquote" title="引用"><span>引用</span></a>','<a class="btn btn-min function-button function-hr" title="水平分割线"><span>水平分割线</span></a>',"</div>","</div>",'<div class="gollum-editor-function-buttons pull-right">','<div class="btn-group">','<a class="btn btn-min function-button function-preview" title="预览"><i class="icon-eye-open"></i></a>',"</div>","</div>","</div>"].join("");r.before(l);var c=function(e){t.$apply(function(){i(o.ngModel).assign(t,e)})};r.parents(".gollum-editor-wrap").eq(0).GollumEditor({AfterClickFunBar:c});var d=r.parents(".gollum-editor").find(".function-preview"),u=e('<div class="markdown-preview-scroll pt_15" wt-scroll wt-exheight="260" style="display:none;"><div class="markdown-preview markdown"></div></div>')(t),p=u.find(".markdown-preview");r.after(u),d.bind("click",function(){var i=t.$eval(o.ngModel),n=r.css("display");"none"==n?(r.css("display","block"),u.css("display","none"),d.html('<i class="icon-eye-open"></i>'),d.attr("title","预览"),p.html("")):(""!==i&&(i=a(i),i=s(i)),r.css("display","none"),u.css("display","block"),d.html('<i class="icon-eye-close"></i>'),d.attr("title","取消预览"),p.html(i),p.find("a").attr("target",function(){return this.host!==location.host?"_blank":void 0}))});var f=r.parents(".gollum-editor").find(".function-link"),h=null;r.parents(".editor-wrap").bind("click",function(){null!==h&&(h.close(),h=null)}),f.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t.$apply(function(){return null!=h?(h.close(),h=null,void 0):(n.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_add_link.html",controller:["$scope","popbox",function(e,n){e.popbox=n,h=n,e.js_close=function(){n.close()};var a=$.GollumEditor.FunctionBar.getFieldSelection(r);_.isEmpty(a)||(a=$.trim(a),1==/^\[.+\]\(.+\)$/gi.test(a)?(e.link_text=a.substring(1,a.indexOf("](")),e.link_address=a.substring(a.indexOf("](")+2,a.length-1)):(e.link_text=a,e.link_address="")),e.js_insert_link=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(r,"["+e.link_text+"]("+e.link_address+")"),n.close(),i(o.ngModel).assign(t,r.val())
},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){h=null}),void 0)})});var m=r.parents(".gollum-editor").find(".function-image"),g=null;r.parents(".editor-wrap").bind("click",function(){null!==g&&(g.close(),g=null)}),m.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t.$apply(function(){return null!=g?(g.close(),g=null,void 0):(n.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_add_image.html",controller:["$rootScope","$scope","$filter","$routeParams","popbox","$sce",function(e,n,a,s,l,c){n.popbox=l,g=l,n.step=0,n.js_step=function(e){n.step=e},n.js_close=function(){l.close()};var d=s.pid;n.pid=d,n.js_show_images=function(){n.step=1,_.isEmpty(n.images)&&(n.images_loading_done=!1,n.images=null,wt.data.file.get_image_list(d,function(e){n.images=e.data},null,function(){n.images_loading_done=!0}))},n.js_select_image=function(e){n.step=0,n.image_address=kzi.config.wtprj_url+e.path,n.js_insert_image(null)},n.js_insert_image=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(r,"![]("+n.image_address+")"),l.close(),i(o.ngModel).assign(t,r.val())},n.js_upload_image=function(){n.uploading_done!==!0&&$("#file_upload").click()},n.token=kzi.get_cookie("sid"),n.action_url=e.global.config.box_url()+"?pid="+d+"&token="+n.token,c.trustAsUrl(n.action_url),n.file_upload_option={processstart:function(){n.uploading_done=!1,n.error_msg=null},process:function(e,t){var i=0;_.isEmpty(t.files)||(i=t.files[0].size),l.modalEl.find("form").fileupload({formData:{size:i,target:"prj"}})},processfail:function(){n.error_msg="上传失败,此处只支持图片格式的文件",n.uploading_done=!0},done:function(t,i){if(_.isEmpty(i.result.files))n.uploading_done=!0;else{var a={type:"page",file:{name:i.result.files[0].fname,size:i.result.files[0].size,ext:kzi.constant.get_ext(i.result.files[0].ext),path:i.result.files[0].url},ext:{folder_id:""}};wt.data.file.new_upload(d,a,function(t){200===t.code&&(t.data.icon=kzi.helper.build_file_icon(t.data),_.isEmpty(n.images)||n.images.push(t.data),e.refresh_cache.file.add(t.data),n.image_address=kzi.config.wtprj_url+t.data.path,n.js_insert_image(null),n.uploading_done=!0)})}},acceptFileTypes:/(\.|\/)(jpe?g|png|gif|bmp)$/i}}]}).open().then(function(){g=null}),void 0)})})}}}]),angular.module("wt.directive").directive("wtAtwho",["$parse","$filter",function(e,t){"use strict";return{require:"^ngModel",scope:!0,link:function(i,n,a){var s=e(a.atwhoKeydown),r={emojis:!0,member:!0};a.wtAtwho&&(r=$.extend(r,i.$eval(a.wtAtwho))),r.emojis&&n.atwho({at:":",data:kzi.emojis,show_the_at:!0,tpl:"<li data-value=':${name}:'><img src='/img/emoji/${name}.png' class='emoji' /> ${name}</li>",callbacks:{}}),a.atwhoMembers&&r.member&&i.$watch(a.atwhoMembers,function(e){if(_.isEmpty(e))return n.atwho({at:"@",data:[]}),void 0;var r="<li data-value='@${name}'><a href title='${display_name}' class='avatar avatar-30'><span class='avatar-face'><span class='avatar-text'>${firstText}</span></span></a>&nbsp; <span class='avatar-name'>${display_name}</span></span> <small>(${name})</small></li>";n.atwho({at:"@",limit:5,show_the_at:!0,data:e,tpl:["<li data-value='@${name}'><a href title='${display_name}'"," class='avatar avatar-30'><span class='avatar-face'>","<img src='"+kzi.config.wtavatar_url+"40/${avatar}'/></a>&nbsp; ","<span class='avatar-name'>${display_name}</span></span> <small>(${name})</small>","</li>"].join(""),search_key:"display_name",callbacks:{keydown:function(e,t){s&&!t&&i.$apply(function(){s(i,{$event:e})})},filter:function(e,t){return _.isEmpty(e)?t:_.isEmpty(t)?t:_.filter(t,function(t){return t.display_name.toLowerCase().indexOf(e.toLowerCase())>-1||t.name.toLowerCase().indexOf(e.toLowerCase())>-1})},sorter:function(e,t){return t},tpl_eval:function(e,i){var n=null;if(null==i.avatar||"default_avatar.png"==i.avatar){var a=t("firstText")(i.display_name);i.firstText=a,n=r.replace(/\$\{([^\}]*)\}/g,function(e,t){return i[t]})}else n=e.replace(/\$\{([^\}]*)\}/g,function(e,t){return i[t]});return n}}})})}}}]),angular.module("wt.directive.file",[]).directive("wtPopAddAttachmentFromFile",["$popbox","$rootScope",function(e,t){"use strict";return{restrict:"A",priority:500,link:function(i,n,a){n.on("click",function(n){var s=i.$eval(a.wtPopAddAttachmentFromFile),r={target:n,templateUrl:"/ycjs/tpl/directive/add_pop_attachment_from_file.html",controller:["$scope","popbox",function(e,i){e.popbox=i,e.folder_ids=[],e.files_controls={},e.files_controls.sort_method_id=0,e.files_controls.filter=0,e.files_controls.pid=s.pid,e.files_controls.folder_id="",e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e),e.js_attach=function(i){if(1===i.type)e.files_controls.loading_done=!1,e.folder_ids.push(e.files_controls.folder_id),e.files_controls.folder_id=i.fid,e.files_controls.files=[],e.files_controls.page=1,wt.bus.file.load_one_page_files(e);else{s.files=s.files||[];var n=_.findWhere(s.files,{fid:i.fid});if(!n){s.files.push(i);var a=s.event_id?kzi.constant.xtype.event:s.post_id?kzi.constant.xtype.post:s.tid?kzi.constant.xtype.task:s.page_id?kzi.constant.xtype.page:void 0;if(void 0===a)return kzi.msg.error("对象类型未知");var r=s.event_id||s.post_id||s.tid||s.page_id||void 0;if(void 0===r)return kzi.msg.error("对象id未知");var o=function(){a===kzi.constant.xtype.task&&(s.file_count+=1,t.$broadcast(kzi.constant.event_names.on_task_update,s))};wt.data.file.attach(s.pid,a,r,i.fid,o)}}},e.go_back=function(){e.files_controls.folder_id=e.folder_ids.pop(),e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e)},e.load_more=function(){wt.bus.file.load_one_page_files(e)},e.js_close=function(){i.close()}}]};e.popbox(r).open()})}}}]).directive("wtAddAttachmentFromFile",["$rootScope","$parse",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/add_pop_attachment_from_file.html",link:function(i,n,a){var s=i.$eval(a.entity),r=t(a.goBackFurther);i.has_go_further_back=_.isEmpty(r)?!1:!0,i.folder_ids=[],i.files_controls={},i.files_controls.sort_method_id=0,i.files_controls.filter=0,i.files_controls.pid=s.pid,i.files_controls.folder_id="",i.files_controls.page=1,i.files_controls.files=[],wt.bus.file.load_one_page_files(i),i.go_back_further=function(){r(i)},i.js_attach=function(t){if(1===t.type)i.files_controls.loading_done=!1,i.folder_ids.push(i.files_controls.folder_id),i.files_controls.folder_id=t.fid,i.files_controls.files=[],i.files_controls.page=1,wt.bus.file.load_one_page_files(i);else{s.files=s.files||[];var n=_.findWhere(s.files,{fid:t.fid});if(!n){s.files.push(t);var a=s.event_id?kzi.constant.xtype.event:s.post_id?kzi.constant.xtype.post:s.tid?kzi.constant.xtype.task:s.page_id?kzi.constant.xtype.page:void 0;if(void 0===a)return kzi.msg.error("对象类型未知");var r=s.event_id||s.post_id||s.tid||s.page_id||void 0;if(void 0===r)return kzi.msg.error("对象id未知");var o=function(){a===kzi.constant.xtype.task&&(s.badges.file_count++,e.$broadcast(kzi.constant.event_names.on_task_update,s))};wt.data.file.attach(s.pid,a,r,t.fid,o)}}},i.go_back=function(){i.files_controls.folder_id=i.folder_ids.pop(),i.files_controls.page=1,i.files_controls.files=[],wt.bus.file.load_one_page_files(i)},i.load_more=function(){wt.bus.file.load_one_page_files(i)}}}}]).directive("wtBreadcrumb",["$location",function(e){"use strict";return{restrict:"A",templateUrl:"/ycjs/tpl/directive/wt-breadcrumb.html",link:function(t,i,n){t.$watch(n.wtBreadcrumb,function(){t.folders=t.$eval(n.wtBreadcrumb),t.folders.unshift({id:"",name:"文件"})}),t.goto_folder=function(t){var i=e.path(),n=$(t.target).attr("folder-id");_.isEmpty(n)?i=i.replace(/\/folder\/\w+$/,"/file"):(i=i.replace(/\/\w+$/,""),i=i+"/"+n),e.path(i)}}}}]).directive("zippy",[function(){"use strict";return{restrict:"E",transclude:!0,templateUrl:"/ycjs/tpl/directive/zippy.html",link:function(e){e.isSubFolderVisible=!1,void 0===e.node&&(e.isSubFolderVisible=!0),e.toggleContent=function(){e.isSubFolderVisible===!0&&e.data.selected_move_to_node!==e.node?e.data.selected_move_to_node=e.node:(e.isSubFolderVisible=!e.isSubFolderVisible,e.data.selected_move_to_node=e.node)}}}}]).directive("wtFolderTree",[function(){"use strict";return{restrict:"E",templateUrl:"/ycjs/tpl/directive/wt-folder-tree.html",link:function(){}}}]).directive("addFileFromProject",["$popbox",function(e){"use strict";return{restrict:"A",link:function(t,i,n){i.on("click",function(i){var a=t.$eval(n.addFileFromProject);console.info("pid",a);var s={target:i,templateUrl:"/ycjs/tpl/directive/add_pop_attachment_from_file.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.folder_ids=[],e.files_controls={},e.files_controls.sort_method_id=0,e.files_controls.filter=0,e.files_controls.pid=a,e.files_controls.folder_id="",e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e),e.js_attach=function(t){if(1===t.type)e.files_controls.loading_done=!1,e.folder_ids.push(e.files_controls.folder_id),e.files_controls.folder_id=t.fid,e.files_controls.files=[],e.files_controls.page=1,wt.bus.file.load_one_page_files(e);else{var i=angular.element(".comment-list:visible").scope().comment;_.isEmpty(i.files)&&(i.files=[]),i.files.push(_.omit(t,"watchers"))}},e.go_back=function(){e.files_controls.folder_id=e.folder_ids.pop(),e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e)},e.load_more=function(){wt.bus.file.load_one_page_files(e)},e.js_close=function(){t.close()}}]};e.popbox(s).open()})}}}]),angular.module("wt.directive.post_item",[]).directive("wtPostItem",[function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/post_item.html",link:function(){}}}]),angular.module("wt.directive.page_item",[]).directive("wtPageItem",["$rootScope","$parse",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/page_item.html",link:function(i,n,a){_.isEmpty(a.viewType)||(i.item_view_type="list",i.$watch(a.viewType,function(e){_.isEmpty(e)||(i.item_view_type="tree"==e?"tree":"list")})),i.js_item_click=function(n,s){if(a.itemClick){var r=t(a.itemClick);_.isFunction(r)&&r(i,{$event:n,page:s})}n.isDefaultPrevented()||e.locator.to_page(s.pid,s.page_id,!1)},i.js_subitem_click=function(n,s){if(a.subitemClick){var r=t(a.subitemClick);_.isFunction(r)&&r(i,{$event:n,sub_page:s})}n.isDefaultPrevented()||e.locator.to_page(s.pid,s.page_id,!1)}}}}]),angular.module("wt.directive.page_detail",[]).directive("wtPageDetail",[function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/page_detail.html",link:function(){}}}]),angular.module("wt.directive.file_item",[]).directive("wtFileItem",["$rootScope","$location","$parse",function(e,t,i){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/file_item.html",link:function(n,a,s){n.item_view_type="list",n.$watch(s.viewType,function(e){_.isEmpty(e)||(n.item_view_type="icon"==e?"icon":"list")}),n.js_navigate=function(a,r){if(!($(a.target).hasClass("fancybox-file")||$(a.target).parents(".fancybox-file").length>0)){if(s.itemClick){var o=i(s.itemClick);_.isFunction(o)&&o(n,{file:r})}0===r.type?e.locator.to_file(r.pid,r.fid,!1):(e.folder={folder_id:r.fid,name:r.name},t.path("/project/"+r.pid+"/folder/"+r.fid))}}}}}]),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(e){var t,i={get:function(e){return n[t].get.apply(this,[e])},set:function(e,i){var r,a=parseInt(e),s=parseInt(i);return e===void 0?a=0:0>e&&(a=this.val().length+a),r=i===void 0?this.val().length:i>=0?a+s:this.val().length+s,n[t].set.apply(this,[a,r]),this},setcursor:function(e){return this.textrange("set",e,0)},replace:function(e){return n[t].replace.apply(this,[String(e)]),this},insert:function(e){return this.textrange("replace",e)}},n={xul:{get:function(e){var t={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return e===void 0?t:t[e]},set:function(e,t){this[0].selectionStart=e,this[0].selectionEnd=t},replace:function(e){var t=this[0].selectionStart,i=this[0].selectionEnd,n=this.val();this.val(n.substring(0,t)+e+n.substring(i,n.length)),this[0].selectionStart=t,this[0].selectionEnd=t+e.length}},msie:{get:function(e){var t=document.selection.createRange();if(t===void 0){var i={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()};return e===void 0?i:i[e]}var n=this[0].createTextRange(),a=n.duplicate();n.moveToBookmark(t.getBookmark()),a.setEndPoint("EndToStart",n);var i={position:a.text.length,start:a.text.length,end:a.text.length+t.text.length,length:t.text.length,text:t.text};return e===void 0?i:i[e]},set:function(e,t){var i=this[0].createTextRange();return i===void 0?this:(e!==void 0&&(i.moveStart("character",e),i.collapse()),t!==void 0&&i.moveEnd("character",t-e),i.select(),void 0)},replace:function(e){document.selection.createRange().text=e}}};e.fn.textrange=function(n){return this[0]===void 0?this:(t===void 0&&(t="selectionStart"in this[0]?"xul":document.selection?"msie":"unknown"),"unknown"===t?this:(document.activeElement!==this[0]&&this[0].focus(),n===void 0||"string"!=typeof n?i.get.apply(this):"function"==typeof i[n]?i[n].apply(this,Array.prototype.slice.call(arguments,1)):(e.error("Method "+n+" does not exist in jQuery.textrange"),void 0)))}});var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function e(e){return e}function t(){return!1}function i(){}function n(){}i.prototype={chain:function(t,i){var n=this[t];if(!n)throw new Error("unknown hook "+t);this[t]=n===e?i:function(){var t=Array.prototype.slice.call(arguments,0);return t[0]=n.apply(null,t),i.apply(null,t)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(t){this[t]=e},addFalse:function(e){this[e]=t}},Markdown.HookCollection=i,n.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},Markdown.Converter=function(t){function u(e){return e=e.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,t,i,n,a,o){return t=t.toLowerCase(),s.set(t,P(i)),a?n:(o&&r.set(t,o.replace(/"/g,"&quot;")),"")})}function p(e){return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h),e=e.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h),e=e.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,h),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h)}function f(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(o.push(e)-1)+"K\n\n"}function h(e,t){return f(t)}function _(e,t){e=a.preBlockGamut(e,m),e=x(e);var i="<hr />\n";return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i),e=e.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,i),e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,i),e=$(e),e=D(e),e=M(e),e=a.postBlockGamut(e,m),e=p(e),e=A(e,t)}function g(e){return e=a.preSpanGamut(e),e=E(e),e=v(e),e=F(e),e=w(e),e=b(e),e=R(e),e=e.replace(/~P/g,"://"),e=P(e),e=z(e),e=e.replace(/  +\n/g," <br>\n"),e=a.postSpanGamut(e)}function v(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=V(t,"!"==e.charAt(1)?"\\`*_/":"\\`*_")})}function b(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,y)}function y(e,t,i,n,a,o,l,c){void 0==c&&(c="");var d=t,u=i.replace(/:\/\//g,"~P"),p=n.toLowerCase(),f=a,h=c;if(""==f)if(""==p&&(p=u.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,void 0!=s.get(p))f=s.get(p),void 0!=r.get(p)&&(h=r.get(p));else{if(!(d.search(/\(\s*\)$/m)>-1))return d;f=""}f=U(f),f=V(f,"*_");var m='<a href="'+f+'"';return""!=h&&(h=k(h),h=V(h,"*_"),m+=' title="'+h+'"'),m+=">"+u+"</a>"}function w(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j)}function k(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function j(e,t,i,n,a,o,l,c){var d=t,u=i,p=n.toLowerCase(),f=a,h=c;if(h||(h=""),""==f){if(""==p&&(p=u.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,void 0==s.get(p))return d;f=s.get(p),void 0!=r.get(p)&&(h=r.get(p))}u=V(k(u),"*_[]()"),f=V(f,"*_");var m='<img src="'+f+'" alt="'+u+'"';return h=k(h),h=V(h,"*_"),m+=' title="'+h+'"',m+=" />"}function x(e){return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,t){return"<h1>"+g(t)+"</h1>\n\n"}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,t){return"<h2>"+g(t)+"</h2>\n\n"}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,t,i){var n=t.length;return"<h"+n+">"+g(i)+"</h"+n+">\n\n"})}function $(e,t){e+="~0";var i=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return l?e=e.replace(i,function(e,i,n){var a=i,s=n.search(/[*+-]/g)>-1?"ul":"ol",r=S(a,s,t);return r=r.replace(/\s+$/,""),r="<"+s+">"+r+"</"+s+">\n"}):(i=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(i,function(e,t,i,n){var a=t,s=i,r=n.search(/[*+-]/g)>-1?"ul":"ol",o=S(s,r);return o=a+"<"+r+">\n"+o+"</"+r+">\n"})),e=e.replace(/~0/,"")}function S(e,t,i){l++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var n=C[t],a=new RegExp("(^[ \\t]*)("+n+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+n+")[ \\t]+))","gm"),s=!1;return e=e.replace(a,function(e,t,n,a){var r=a,l=/\n\n$/.test(r),c=l||r.search(/\n{2,}/)>-1;return c||s?r=_(W(r),!0):(r=$(W(r),!0),r=r.replace(/\n$/,""),i||(r=g(r))),s=l,"<li>"+r+"</li>\n"}),e=e.replace(/~0/g,""),l--,e}function D(e){return e+="~0",e=e.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,i){var n=t,a=i;return n=T(W(n)),n=B(n),n=n.replace(/^\n+/g,""),n=n.replace(/\n+$/g,""),n="<pre><code>"+n+"\n</code></pre>","\n\n"+n+"\n\n"+a}),e=e.replace(/~0/,"")}function E(e){return e=e.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(e,t,i,n){var s=n;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=T(s),s=s.replace(/:\/\//g,"~P"),t+"<code>"+s+"</code>"})}function T(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=V(e,"*_{}[]\\",!1)}function z(e){return e=c(e),e=e.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>"),e=e.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),d(e)}function M(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var i=t;return i=i.replace(/^[ \t]*>[ \t]?/gm,"~0"),i=i.replace(/~0/g,""),i=i.replace(/^[ \t]+$/gm,""),i=_(i),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var i=t;return i=i.replace(/^  /gm,"~0"),i=i.replace(/~0/g,"")}),f("<blockquote>\n"+i+"\n</blockquote>")})}function A(e,t){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var i=e.split(/\n{2,}/g),n=[],a=/~K(\d+)K/,s=i.length,r=0;s>r;r++){var l=i[r];a.test(l)?n.push(l):/\S/.test(l)&&(l=g(l),l=l.replace(/^([ \t]*)/g,"<p>"),l+="</p>",n.push(l))}if(!t){s=n.length;for(var r=0;s>r;r++)for(var c=!0;c;)c=!1,n[r]=n[r].replace(/~K(\d+)K/g,function(e,t){return c=!0,o[t]})}return n.join("\n\n")}function P(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function F(e){return e=e.replace(/\\(\\)/g,X),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,X)}function H(e,t,i,n){if(t)return e;if(")"!==n.charAt(n.length-1))return"<"+i+n+">";for(var a=n.match(/[()]/g),s=0,r=0;a.length>r;r++)"("===a[r]?0>=s?s=1:s++:s--;var o="";if(0>s){var l=new RegExp("\\){1,"+-s+"}$");n=n.replace(l,function(e){return o=e,""})}if(o){var c=n.charAt(n.length-1);L.test(c)||(o=c+o,n=n.substr(0,n.length-1))}return"<"+i+n+">"+o}function R(e){e=e.replace(N,H);var t=function(e,t){var i=U(t);return i=V(i,"*_"),'<a href="'+i+'">'+a.plainLinkText(t)+"</a>"};return e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,t)}function q(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var i=parseInt(t);return String.fromCharCode(i)})}function W(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")}function B(e){if(!/\t/.test(e))return e;var n,t=["    ","   ","  "," "],i=0;return e.replace(/[\n\t]/g,function(e,a){return"\n"===e?(i=a+1,e):(n=(a-i)%4,i=a+1,t[n])})}function U(e){if(!e)return"";var t=e.length;return e.replace(Y,function(i,n){return"~D"==i?"%24":":"!=i||n!=t-1&&!/[0-9\/]/.test(e.charAt(n+1))?"%"+i.charCodeAt(0).toString(16):":"})}function V(e,t,i){var n="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(n="\\\\"+n);var a=new RegExp(n,"g");return e=e.replace(a,X)}function X(e,t){var i=t.charCodeAt(0);return"~E"+i+"E"}var a=this.hooks=new i;a.addNoop("plainLinkText"),a.addNoop("preConversion"),a.addNoop("postNormalization"),a.addNoop("preBlockGamut"),a.addNoop("postBlockGamut"),a.addNoop("preSpanGamut"),a.addNoop("postSpanGamut"),a.addNoop("postConversion");var s,r,o,l;t=t||{};var c=e,d=e;t.nonAsciiLetters&&function(){var e=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,t="Q".charCodeAt(0),i="A".charCodeAt(0),n="Z".charCodeAt(0),a="a".charCodeAt(0)-n-1;c=function(s){return s.replace(e,function(e){for(var o,s=e.charCodeAt(0),r="";s>0;)o=s%51+i,o>=t&&o++,o>n&&(o+=a),r=String.fromCharCode(o)+r,s=0|s/51;return"Q"+r+"Q"})},d=function(e){return e.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(e,s){for(var o,r=0,l=0;s.length>l;l++)o=s.charCodeAt(l),o>n&&(o-=a),o>t&&o--,o-=i,r=51*r+o;return String.fromCharCode(r)})}}(),this.makeHtml=function(e){if(s)throw new Error("Recursive call to converter.makeHtml");return s=new n,r=new n,o=[],l=0,e=a.preConversion(e),e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=B(e),e=e.replace(/^[ \t]+$/gm,""),e=a.postNormalization(e),e=p(e),e=u(e),e=_(e),e=q(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),e=a.postConversion(e),o=r=s=null,e};var m=function(e){return _(e)},C={ol:"\\d+[.]",ul:"[*+-]"},I="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",O="[-A-Z0-9+&@#/%=~_|[\\])]",N=new RegExp('(="|<)?\\b(https?|ftp)(://'+I+"*"+O+")(?=$|\\W)","gi"),L=new RegExp(O,"i"),Y=/(?:["'*()[\]:]|~D)/g}}(),function(){function i(e){return e.replace(/<[^>]*>?/gi,r)}function r(e){return e.match(n)||e.match(a)||e.match(s)?e:""}function o(e){if(""==e)return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,i=e.toLowerCase().match(t),n=(i||[]).length;if(0==n)return e;for(var a,s,o,r="<p><img><br><li><hr>",l=[],c=[],d=!1,u=0;n>u;u++)if(a=i[u].replace(/<\/?(\w+).*/,"$1"),!(l[u]||r.search("<"+a+">")>-1)){if(s=i[u],o=-1,!/^<\//.test(s))for(var p=u+1;n>p;p++)if(!l[p]&&i[p]=="</"+a+">"){o=p;break}-1==o?d=c[u]=!0:l[o]=!0}if(!d)return e;var u=0;return e=e.replace(t,function(e){var t=c[u]?"":e;return u++,t})}var e,t;"object"==typeof exports&&"function"==typeof require?(e=exports,t=require("./Markdown.Converter.js").Converter):(e=window.Markdown,t=e.Converter),e.getSanitizingConverter=function(){var e=new t;return e.hooks.chain("postConversion",i),e.hooks.chain("postConversion",o),e};var n=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,a=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,s=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}(),function(){function t(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.replace(/\s+$/g,"")}function n(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function a(e,t){return-1!=e.indexOf(t)}function s(e,t){return e.replace(/<[^>]*>?/gi,function(e){return e.match(t)?e:""})}function r(e,t){for(var i={},n=0;e.length>n;n++)i[e[n]]=e[n];for(n=0;t.length>n;n++)i[t[n]]=t[n];var a=[];for(var s in i)i.hasOwnProperty(s)&&a.push(i[s]);return a}function o(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function l(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function c(t,i){return s(d(t,i),e)}function d(e,t){var i=t.blockGamutHookCallback(e);return i=f(i),i=i.replace(/~D/g,"$$").replace(/~T/g,"~"),i=t.previousPostConversion(i)}function u(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function p(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}function f(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var i=parseInt(t);return String.fromCharCode(i)})}function h(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function b(e,t){var i=t;return i=i.replace(/&\#8220;/g,'"'),i=i.replace(/&\#8221;/g,'"'),i=i.replace(/&\#8216;/g,"'"),i=i.replace(/&\#8217;/g,"'"),i=i.replace(/&\#8212;/g,"---"),i=i.replace(/&\#8211;/g,"--"),i=i.replace(/&\#8230;/g,"...")}var e=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;this.length>t;t++)if(this[t]==e)return t;return-1}),Markdown.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},Markdown.Extra.init=function(e,t){var i=new Markdown.Extra,n=[],s=[],r=[],o=["unHashExtraBlocks"];return t=t||{},t.extensions=t.extensions||["all"],a(t.extensions,"all")&&(t.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),s.push("wrapHeaders"),a(t.extensions,"attr_list")&&(n.push("hashFcbAttributeBlocks"),s.push("hashHeaderAttributeBlocks"),o.push("applyAttributeBlocks"),i.attributeBlocks=!0),a(t.extensions,"fenced_code_gfm")&&(s.push("fencedCodeBlocks"),n.push("fencedCodeBlocks")),a(t.extensions,"tables")&&s.push("tables"),a(t.extensions,"def_list")&&s.push("definitionLists"),a(t.extensions,"footnotes")&&(n.push("stripFootnoteDefinitions"),s.push("doFootnotes"),o.push("printFootnotes")),a(t.extensions,"smartypants")&&o.push("runSmartyPants"),a(t.extensions,"strikethrough")&&r.push("strikethrough"),a(t.extensions,"newlines")&&r.push("newlines"),e.hooks.chain("postNormalization",function(e){return i.doTransform(n,e)+"\n"}),e.hooks.chain("preBlockGamut",function(e,t){return i.blockGamutHookCallback=t,e=u(e),e=i.doTransform(s,e)+"\n",e=p(e)}),e.hooks.chain("postSpanGamut",function(e){return i.doTransform(r,e)}),i.previousPostConversion=e.hooks.postConversion,e.hooks.chain("postConversion",function(e){return e=i.doTransform(o,e),i.hashBlocks=[],i.footnotes={},i.usedFootnotes=[],e}),"highlighter"in t&&(i.googleCodePrettify="prettify"===t.highlighter,i.highlightJs="highlight"===t.highlighter),"table_class"in t&&(i.tableClass=t.table_class),i.converter=e,i},Markdown.Extra.prototype.doTransform=function(e,t){for(var i=0;e.length>i;i++)t=this[e[i]](t);return t},Markdown.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},Markdown.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"
},Markdown.Extra.prototype.unHashExtraBlocks=function(e){function i(){var n=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(e,i){n=!0;var a=parseInt(i,10);return t.hashBlocks[a]}),n===!0&&i()}var t=this;return i(),e},Markdown.Extra.prototype.wrapHeaders=function(e){function t(e){return"\n"+e+"\n"}return e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,t),e=e.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,t),e=e.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,t)};var m="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",_=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+m+"[ \\t]*(?:\\n|0x03)","gm"),g=new RegExp("^(.*)[ \\t]+"+m+"[ \\t]*\\n"+"(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),v=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+m+"[ \\t]*\\n"+"(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(e){function i(e,i,n){return"<p>~XX"+(t.hashBlocks.push(n)-1)+"XX</p>\n"+i+"\n"}var t=this;return e=e.replace(_,i),e=e.replace(g,i)},Markdown.Extra.prototype.hashFcbAttributeBlocks=function(e){function i(e,i,n){return"<p>~XX"+(t.hashBlocks.push(n)-1)+"XX</p>\n"+i+"\n"}var t=this;return e.replace(v,i)},Markdown.Extra.prototype.applyAttributeBlocks=function(e){var t=this,i=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(i,function(e,i,n,a,s){if(!n)return"";for(var o=parseInt(i,10),l=t.hashBlocks[o],c=l.match(/#[^\s#.]+/g)||[],d=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",u=l.match(/\.[^\s#.]+/g)||[],p=0;u.length>p;p++)u[p]=u[p].substr(1,u[p].length-1);var f="";return a&&(u=r(u,[a])),u.length>0&&(f=' class="'+u.join(" ")+'"'),"<"+n+d+f+s})},Markdown.Extra.prototype.tables=function(e){function s(e,n,a,s){n=n.replace(/^ *[|]/m,""),a=a.replace(/^ *[|]/m,""),s=s.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),a=a.replace(/[|] *$/m,""),s=s.replace(/[|] *$/gm,""),alignspecs=a.split(/ *[|] */),align=[];for(var l=0;alignspecs.length>l;l++){var d=alignspecs[l];align[l]=d.match(/^ *-+: *$/m)?' align="right"':d.match(/^ *:-+: *$/m)?' align="center"':d.match(/^ *:-+ *$/m)?' align="left"':""}var u=n.split(/ *[|] */),p=u.length,f=i.tableClass?' class="'+i.tableClass+'"':"",h=["<table",f,">\n","<thead>\n","<tr>\n"].join("");for(l=0;p>l;l++){var m=c(t(u[l]),i);h+=["  <th",align[l],">",m,"</th>\n"].join("")}h+="</tr>\n</thead>\n";var _=s.split("\n");for(l=0;_.length>l;l++)if(!_[l].match(/^\s*$/)){for(var g=_[l].split(/ *[|] */),v=p-g.length,b=0;v>b;b++)g.push("");for(h+="<tr>\n",b=0;p>b;b++){var y=c(t(g[b]),i);h+=["  <td",align[b],">",y,"</td>\n"].join("")}h+="</tr>\n"}return h+="</table>\n",i.hashExtraBlock(h)}var i=this,n=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),a=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return e=e.replace(n,s),e=e.replace(a,s)},Markdown.Extra.prototype.stripFootnoteDefinitions=function(e){var t=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(e,i,n){return i=h(i),n+="\n",n=n.replace(/^[ ]{0,3}/g,""),t.footnotes[i]=n,"\n"})},Markdown.Extra.prototype.doFootnotes=function(e){var t=this;if(t.isConvertingFootnote===!0)return e;var i=0;return e=e.replace(/\[\^(.+?)\]/g,function(e,n){var a=h(n),s=t.footnotes[a];if(void 0===s)return e;i++,t.usedFootnotes.push(a);var r='<a href="#fn:'+a+'" id="fnref:'+a+'" title="See footnote" class="footnote">'+i+"</a>";return t.hashExtraInline(r)})},Markdown.Extra.prototype.printFootnotes=function(e){var t=this;if(0===t.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var i=0;t.usedFootnotes.length>i;i++){var n=t.usedFootnotes[i],a=t.footnotes[n];t.isConvertingFootnote=!0;var s=c(a,t);delete t.isConvertingFootnote,e+='<li id="fn:'+n+'">'+s+' <a href="#fnref:'+n+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},Markdown.Extra.prototype.fencedCodeBlocks=function(e){function t(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~")}var i=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,n,a){var s=n,r=a,o=i.googleCodePrettify?' class="prettyprint"':"",l="";s&&(l=i.googleCodePrettify||i.highlightJs?' class="language-'+s+'"':' class="'+s+'"');var c=["<pre",o,"><code",l,">",t(r),"</code></pre>"].join("");return i.hashExtraBlock(c)})},Markdown.Extra.prototype.educatePants=function(e){var t=this,i="",n=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(a,s,r,o,l,c,d){var u=e.substring(n,d);return i+=t.applyPants(u),t.smartyPantsLastChar=i.substring(i.length-1),n=d+a.length,s?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(r)?t.smartyPantsLastChar=l.substring(l.length-1):l=t.educatePants(l),i+=s+r+o+l+c,void 0):(i+=a,void 0)});var a=e.substring(n);return i+=t.applyPants(a),t.smartyPantsLastChar=i.substring(i.length-1),i},Markdown.Extra.prototype.applyPants=function(e){return e=e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),e=e.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),e=e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(e=e.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),e=e.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),e=e.replace(/"'(?=\w)/g,"&#8220;&#8216;"),e=e.replace(/'"(?=\w)/g,"&#8216;&#8220;"),e=e.replace(/'(?=\d{2}s)/g,"&#8217;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),e=e.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),e=e.replace(/'(?=\s|s\b)/g,"&#8217;"),e=e.replace(/'/g,"&#8216;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),e=e.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),e=e.replace(/"(?=\s)/g,"&#8221;"),e=e.replace(/"/gi,"&#8220;"))},Markdown.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=this.educatePants(e),e=e.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,b)},Markdown.Extra.prototype.definitionLists=function(e){var i=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),n=this;return e=o(e),e=e.replace(i,function(e,i,a){var s=t(n.processDefListItems(a));return s="<dl>\n"+s+"\n</dl>",i+n.hashExtraBlock(s)+"\n\n"}),l(e)},Markdown.Extra.prototype.processDefListItems=function(e){var a=this,s=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),r=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return e=o(e),e=e.replace(/\n{2,}(?=\\x03)/,"\n"),e=e.replace(s,function(e,i,n){for(var s=t(n).split("\n"),r="",o=0;s.length>o;o++){var l=s[o];l=c(t(l),a),r+="\n<dt>"+l+"</dt>"}return r+"\n"}),e=e.replace(r,function(e,t,s,r){return t||r.match(/\n{2,}/)?(r=Array(s.length+1).join(" ")+r,r=n(r)+"\n\n",r="\n"+d(r,a)+"\n"):(r=i(r),r=c(n(r),a)),"\n<dd>"+r+"</dd>\n"}),l(e)},Markdown.Extra.prototype.strikethrough=function(e){return e.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},Markdown.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,function(e,t){return t?e:" <br>\n"})}}(),angular.module("wt.new.editor",[]).directive("wtNewEditor",["$timeout","$rootScope","$popbox","sanitize",function(e,t,i,n){"use strict";return{restrict:"E",replace:!0,scope:{title:"=editTitle",content:"=editContent",pid:"=pid",mode:"@mode",entity_id:"=entityId",entity_type:"@entityType",watchers:"=watchers",page_message:"=message",page_parent_id:"=parentId",page_is_notify:"=pageIsNotify"},transclude:!0,templateUrl:"/ycjs/tpl/directive/wt_new_editor.html",link:function(a,s){function u(e){var o,l,t="1m1m1m1m1m1m",i=a.content,s=i.substr(0,e.start-1),r=i.substr(e.start,i.length-e.start-1);i=s+"\n\n"+"1. "+t+r,o=d.makeHtml(i),l=n(o);var c=$("<div>"+l+"</div>"),u=c.find('li:contains("'+t+'")');return 0===u.length&&(u=c.find('p:contains("'+t+'")').closest("li")),u.index()+1}function h(){e(function(){if(a.content){var e=d.makeHtml(a.content),t=n(e);a.html=t}_.isEmpty(a.content)&&(a.html="")}),f=void 0}function m(){f?(clearTimeout(f),f=setTimeout(h,500)):f=setTimeout(h,500)}a.hideMini=!1,a.inPreview=!1,a.isFullscreen=!1;var r=!1,o=!1;a.isMini="mini"===a.mode?!0:!1,s.find(".fullscreen-mk-content-textarea").on("scroll",function(){if(!o){r=!0;var t=s.find(".right-side"),i=s.find(".fullscreen-mk-content-textarea"),n=i.scrollTop(),a=t.prop("scrollHeight")-t.prop("clientHeight"),l=i.prop("scrollHeight")-i.prop("clientHeight"),c=n/l*a;t.scrollTop(c),e(function(){r=!1},200)}}),s.find(".right-side").on("scroll",function(){if(!r){o=!0;var t=s.find(".right-side"),i=s.find(".fullscreen-mk-content-textarea"),n=t.scrollTop(),a=t.prop("scrollHeight")-t.prop("clientHeight"),l=i.prop("scrollHeight")-i.prop("clientHeight"),c=n/a*l;i.scrollTop(c),e(function(){o=!1},200)}});var l=s.find(".wnd-content-textarea"),c=s.find(".fullscreen-mk-content-textarea");$(".wne-toolbar").draggable();var d=new Markdown.Converter;Markdown.Extra.init(d),Markdown.Extra.init(d);var p={"cmd-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2",defaultText:"加粗的文字",select:{leftOmit:2,rightOmit:2}},"cmd-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2",defaultText:"倾斜的文字",select:{leftOmit:1,rightOmit:1}},"cmd-code":{search:/([^\n]+)([\n\s]*)/g,replace:"\n```\n$1\n```$2",defaultText:"代码放这里",select:{leftOmit:5,rightOmit:4}},"cmd-horizontal-line":{append:"\n***\n",select:{leftOmit:5,rightOmit:0}},"cmd-unorder-list":{search:/(.+)([\n]?)/g,replace:"\n* $1",defaultText:"无序列表",select:{leftOmit:3,rightOmit:0}},"cmd-order-list":{search:/(.+)([\n]?)/g,replace:"\n1. $1",defaultText:"有序列表",select:{leftOmit:4,rightOmit:0}},"cmd-blockquote":{search:/(.+)([\n]?)/g,replace:"\n> $1\n",defaultText:"引用的文字",select:{leftOmit:3,rightOmit:1}},"cmd-h1":{search:/(.+)([\n]?)/g,replace:"\n# $1$2",defaultText:"一级标题",select:{leftOmit:3,rightOmit:0}},"cmd-h2":{search:/(.+)([\n]?)/g,replace:"\n## $1$2",defaultText:"二级标题",select:{leftOmit:4,rightOmit:0}},"cmd-h3":{search:/(.+)([\n]?)/g,replace:"\n### $1$2",defaultText:"三级标题",select:{leftOmit:5,rightOmit:0}},"cmd-insert-link":{exec:function(t,n){i.popbox({target:t,placement:"bottom",templateUrl:"/ycjs/tpl/common/pop_add_link_2.html",controller:["$scope","popbox",function(t,i){t.popbox=i,t.link_address="http://",t.insert=function(){var s=n.textrange("get");0===s.length&&(s.text="输入超链接描述",s.length=s.text.length);var r="["+s.text+"]("+t.link_address+")";n.textrange("replace",r);var o=s.start+1,l=s.text.length;e(function(){n.textrange("set",o,l)}),a.content=n.val(),i.close()}}]}).open()}},"cmd-insert-image":{exec:function(t,n){i.popbox({target:t,placement:"bottom",templateUrl:"/ycjs/tpl/common/pop_add_image2.html",controller:["$rootScope","$scope","$filter","$routeParams","popbox","$sce",function(t,i,s,r,o,l){i.popbox=o,i.step=0,i.pid=a.pid,i.js_step=function(e){i.step=e},i.js_close=function(){o.close()},i.js_show_images=function(){i.step=1,_.isEmpty(i.images)&&(i.images_loading_done=!1,i.images=null,wt.data.file.get_image_list(i.pid,function(e){i.images=e.data},null,function(){i.images_loading_done=!0}))},i.js_select_image=function(e){i.step=0,i.image_address=kzi.config.wtprj_url+e.path,i.js_insert_image(null)},i.js_insert_image=function(){var t=n.textrange("get");n.textrange("replace","![替代文字]("+i.image_address+")"),e(function(){n.textrange("set",t.start+2,4)}),a.content=n.val(),o.close()},i.js_upload_image=function(){i.uploading_done!==!0&&$("#file_upload").click()},i.token=kzi.get_cookie("sid"),i.action_url=t.global.config.box_url()+"?pid="+i.pid+"&token="+i.token,l.trustAsUrl(i.action_url),i.file_upload_option={processstart:function(){i.uploading_done=!1,i.error_msg=null},process:function(e,t){var i=0;_.isEmpty(t.files)||(i=t.files[0].size),o.modalEl.find("form").fileupload({formData:{size:i,target:"prj"}})},processfail:function(){i.error_msg="上传失败,此处只支持图片格式的文件",i.uploading_done=!0},done:function(e,t){if(_.isEmpty(t.result.files))i.uploading_done=!0;else{var n={type:"entity",file:{name:t.result.files[0].fname,size:t.result.files[0].size,ext:kzi.constant.get_ext(t.result.files[0].ext),path:t.result.files[0].url},ext:{folder_id:""}};wt.data.file.new_upload(i.pid,n,function(e){200===e.code&&(e.data.icon=kzi.helper.build_file_icon(e.data),_.isEmpty(i.images)||i.images.push(e.data),i.image_address=kzi.config.wtprj_url+e.data.path,i.js_insert_image(),i.uploading_done=!0)})}},acceptFileTypes:/(\.|\/)(jpe?g|png|gif|bmp)$/i}}]}).open()}},"cmd-save":{exec:function(){switch(a.entity_type){case"post":if(_.isEmpty(a.title))return kzi.msg.error("标题不能为空"),void 0;if(_.isEmpty(a.entity_id)){var r=_.pluck(a.watchers,"uid");a.is_saving=!0,wt.data.post.add(a.pid,a.title,a.content,r,function(e){t.$broadcast(kzi.constant.event_names.post_created_by_editor,e.data),a.entity_id=e.data.post_id,kzi.msg.success("保存新话题成功")},function(){kzi.msg.error("保存新话题失败")},function(){a.is_saving=!1,e(function(){s.closest("[wt-scroll]").mCustomScrollbar("disable")},200)})}else a.is_saving=!0,wt.data.post.update(a.pid,a.entity_id,a.title,a.content,function(){kzi.msg.success("更新话题成功"),t.$broadcast(kzi.constant.event_names.post_updated_by_editor,{name:a.title,content:a.content,pid:a.pid,post_id:a.entity_id})},function(){kzi.msg.error("更新话题失败")},function(){a.is_saving=!1});break;case"page":if(_.isEmpty(a.title))return kzi.msg.error("标题不能为空"),void 0;_.isEmpty(a.entity_id)?(a.is_saving=!0,wt.data.page.add(a.pid,a.title,a.content,a.page_message,a.page_parent_id,function(e){kzi.msg.success("添加文档成功!"),a.entity_id=e.data.page_id,t.$broadcast(kzi.constant.event_names.page_created_by_editor,e.data)},null,function(){a.is_saving=!1})):(a.is_saving=!0,wt.data.page.update(a.pid,a.entity_id,a.title,a.content,a.page_message,a.page_parent_id,a.page_is_notify,0,function(){kzi.msg.success("更新文档成功!"),t.$broadcast(kzi.constant.event_names.page_updated_by_editor,{name:a.title,content:a.content,message:a.page_message})},null,function(){a.is_saving=!1}));break;default:alert("entity type error")}}},"cmd-preview":{}},f=void 0;a.$watch("content",function(e,t){e!==t&&m()}),a.execEditorCmd=function(t,i){var n;if(n=a.isFullscreen?c:a.isMini?s.find(".mini-content-textarea"):l,p[i].search&&p[i].replace){var r=n.textrange("get"),o=null;"cmd-order-list"===i&&(o=u(r)),0===r.length&&(p[i].defaultText&&(r.text=p[i].defaultText),r.length=r.text.length);var d="";if(o>0&&"cmd-order-list"===i){var f=r.text.split("\n");_.each(f,function(e,t){e.length>0&&(f[t]=e.replace(p[i].search,"\n"+o++ +". $1")),d=f.join("")})}else d=r.text.replace(p[i].search,p[i].replace);n.textrange("replace",d),a.content=n.val(),e(function(){if(p[i].select){var e=r.start;e+=p[i].select.leftOmit;var t=d.length;t=t-p[i].select.rightOmit-p[i].select.leftOmit,n.textrange("set",e,t)}})}if(p[i].append&&(n.textrange("replace",p[i].append),a.content=n.val(),p[i].select)){var h=n.textrange("get"),m=h.start;m+=p[i].select.leftOmit,n.textrange("set",m,0)}p[i].exec&&p[i].exec(t,n)},a.flipPreview=function(){h();var e=l.closest(".flip-container");if(a.inPreview===!1){var t=e.find(".wnd-content-textarea"),i=t.prop("scrollHeight")-t.prop("clientHeight"),n=t.scrollTop();a.inPreview=!a.inPreview,e.addClass("flipped");var s=e.find(".wnd-content-html"),r=s.prop("scrollHeight")-s.prop("clientHeight"),o=n/i*r;s.scrollTop(o),e.find(".front").css("z-index",1),e.find(".back").css("z-index",2)}else e.removeClass("flipped"),a.inPreview=!a.inPreview,e.find(".front").css("z-index",2),e.find(".back").css("z-index",1)},a.goFullscreen=function(){h(),a.isFullscreen=!0,a.isMini===!0&&(a.hideMini=!0);var e=s.closest(".slide-content");e.css("overflow","visible"),a.isMini&&s.find(".left-right-container").css("top","48px");var t=s.closest("[wt-scroll]");t.mCustomScrollbar("disable")},a.cancelFullscreen=function(){a.isFullscreen=!1,a.isMini===!0&&(a.hideMini=!1);var e=s.closest(".slide-content");e.css("overflow","hidden");var t=s.closest("[wt-scroll]");t.mCustomScrollbar("update")}}}}]),function(){"use strict";wt.filter=angular.module("wt.filter",[]).filter("role",[function(){return function(e){switch(e){case kzi.constant.role.admin:return"管理员";case kzi.constant.role.member:return"成员";case kzi.constant.role.guest:return"访客";default:return e}}}]).filter("prj_role",[function(){return function(e){switch(e){case kzi.constant.role.admin:return"负责人";case kzi.constant.role.member:return"成员";case kzi.constant.role.guest:return"访客";default:return e}}}]).filter("wt_entity_type",[function(){return function(e){switch(e){case kzi.constant.atypes.task:return"任务";case kzi.constant.atypes.file:return"文件";case kzi.constant.atypes.post:return"话题";case kzi.constant.atypes.page:return"文档";case kzi.constant.atypes.event:return"事件";default:return""}}}]).filter("is_admin",[function(){return function(e){return e==kzi.constant.role.admin?!0:!1}}]).filter("is_member",[function(){return function(e){return e===kzi.constant.role.member?!0:!1}}]).filter("is_guest",[function(){return function(e){return e===kzi.constant.role.guest?!0:!1}}]).filter("is_pending",[function(){return function(e){return e==kzi.constant.status.pending?!0:!1}}]).filter("sex",[function(){return function(e){switch(e){case"male":return"男性";case"female":return"女性";default:return e}}}]).filter("follow",[function(){return function(e){return e?"已关注":"关注"}}]).filter("mark",[function(){return function(e){return e?"已标记":"标记"}}]).filter("name_rule",[function(){return function(e){if(e){var t=/^[(\u4e00-\u9fa5)a-z][(\u4e00-\u9fa5)a-zA-Z0-9_]{1,15}$/,i=utf8.stringToBytes(e).length;return t.test(e)?i>0&&5>i?"长度必须大于5字节，一个汉字3字节":i>15?"长度必须小于15字节，一个汉字3字节":!1:"支持汉字、小写字母a-z、数字0-9、或下划线_"}}}]).filter("sanitize",["sanitize",function(e){return function(t){return _.isString(t)?e(t):void 0}}]).filter("length",[function(){return function(e){return e?utf8.stringToBytes(e).length:0}}]).filter("firstText",[function(){return function(e){return e?e.substring(0,1).toLocaleUpperCase():""}}]).filter("cutstr",[function(){return function(e){if(_.isArray(e)){var t=e[0],i=e[1];if(_.isEmpty(t))return"";if(i>=2*t.length)return t;for(var n=0,a="",s=0;t.length>s;s++)if(a+=t.charAt(s),t.charCodeAt(s)>128){if(n+=2,n>i)return a.substring(0,~~(i/2))+"..."}else if(n+=1,n>i)return a.substring(0,a.length)+"...";return a}}}]).filter("arrReverse",[function(){return function(e){return e.slice().reverse()}}]).filter("fromNow",["$filter",function(){return function(e){if(void 0!==e&&null!==e){var t=new moment,i=moment(e);return t.isSame(i,"day")?"今天 "+i.format("HH:mm"):t.add("days",1).isSame(i,"day")?"明天 "+i.format("HH:mm"):t.add("days",-1).isSame(i,"day")?"昨天 "+i.format("HH:mm"):t.isSame(i,"year")?i.format("MM-DD HH:mm"):i.format("YYYY-MM-DD HH:mm")}}}]).filter("momentFormat",["$filter",function(){return function(e){return moment.lang(kzi.config.lang),moment(e[0]).format(e[1])}}]).filter("dateFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYY-MM-DD")):void 0}}]).filter("timeFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("HH:mm")):void 0}}]).filter("timeFullFormat",["$filter",function(){return function(e){return moment.lang(kzi.config.lang),moment(e).format("YYYY-MM-DD HH:mm")}}]).filter("dateFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),_.isObject(e)?e.format("YYYY年MM月DD日"):_.isString(e)?moment(parseFloat(e)).format("YYYY年MM月DD日"):moment(e).format("YYYY年MM月DD日")):void 0}}]).filter("timeFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYY年MM月DD日 HH:mm")):void 0}}]).filter("timeFullFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYY年MM月DD日 HH:mm")):void 0}}]).filter("longTimeFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYY-MM-DD")):void 0}}]).filter("shortTimeFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("MM-DD")):void 0}}]).filter("datetimeToDTW",[function(){return function(e){return void 0!==e&&null!==e?kzi.util.datetimeToDTW(e):void 0}}]).filter("isNotUndefined",["$filter",function(){return function(e){return!_.isUndefined(e)}}]).filter("isNullOrEmpty",["$filter",function(){return function(e){return angular.isUndefined(e)||null===e||""===e||""===$.trim(e)?!0:!1}}]).filter("isNotNullOrEmpty",["$filter",function(){return function(e){return angular.isUndefined(e)||null===e||""===e||""===$.trim(e)?!1:!0}}]).filter("watch",[function(){return function(e){return e?"取消关注":"关注"}}]).filter("indexOf",["$filter",function(){return function(e){return angular.isArray(e)?-1!==_.indexOf(e[0],e[1])?!0:!1:void 0}}]).filter("activityIcon",["$filter",function(){return function(e){var t=e;return _.isUndefined(kzi.activity_icon[e])||(t=kzi.activity_icon[e]),t}}]).filter("badgaExpire",["$filter",function(){return function(e){return e.completed||e.badges.todo_checked_count==e.badges.todo_count?"":"badge-expire-soon"}}]).filter("fullPath",["$filter",function(){return function(e){return e?0==e.indexOf("/img")?e:0==e.indexOf("http://wt-avatars")?e:0==e.indexOf("http://wt-prj")?e:kzi.config.box_url+e:void 0}}]).filter("wtBox",["$filter",function(){return function(e){return e?kzi.config.wtbox_url+e:kzi.config.default_box}}]).filter("wtBoxDownload",["$filter",function(){return function(e){if(_.isEmpty(e))return kzi.config.default_box;var t=kzi.get_cookie("sid"),i=e.pid,n=e.version?e.version:"";return kzi.config.box_url()+"download/"+e.fid+"?pid="+i+"&token="+t+"&vid="+n}}]).filter("wtBoxView",["$filter",function(){return function(e){if(_.isEmpty(e))return kzi.config.default_box;if(kzi.constant.image_exts.indexOf(e.ext)>-1){var t=kzi.get_cookie("sid"),i=e.pid;return kzi.config.box_url()+"view/"+e.fid+"?pid="+i+"&token="+t+"&dt="+(e.dt||"")}return _.isUndefined(e.icon)?void 0:kzi.config.wtbox_url+e.icon}}]).filter("getFileIcon",[function(){return function(e){return _.isEmpty(e)?"":kzi.helper.build_file_icon(e)}}]).filter("filterMembers",["$filter",function(){return function(e,t){if(_.isEmpty(t))return e;var i=t.toLowerCase().trim();return _.filter(e,function(e){return e.name.toLowerCase().indexOf(i)>-1||e.display_name.toLowerCase().indexOf(i)>-1})}}]).filter("fileSize",[function(){return function(e){if(!_.isUndefined(e)&&_.isNumber(parseInt(e,10))){var t="K",i=e/1024;return i>1024&&(t="M",i/=1024),i.toFixed(2)+t}return""}}]).filter("isFile",[function(){return function(e){return e===kzi.constant.file_type.file?!0:!1}}]).filter("isFolder",[function(){return function(e){return e===kzi.constant.file_type.folder?!0:!1}}]).filter("isPreviewFile",[function(){return function(e){return _.isEmpty(e)?null:e.type&&e.type==kzi.constant.file_type.folder?1:_.contains(kzi.constant.img_exts,e.ext)?0:_.contains(kzi.constant.text_exts,e.ext)||_.contains(kzi.constant.preview_exts,e.ext)?2:void 0}}]).filter("teamEdition",[function(){return function(e){switch(e){case kzi.constant.team.edition.business:return"商业";case kzi.constant.team.edition.free:return"免费";case kzi.constant.team.edition.nonprofit:return"公益";default:}}}]).filter("payType",[function(){return function(e){switch(e){case kzi.constant.payment.type.alipay:return"支付宝";case kzi.constant.payment.type.bank:return"网银";case kzi.constant.payment.type.credit:return"信用卡";case kzi.constant.payment.type.cash:return"现金支付";case kzi.constant.payment.type.coupon:return"优惠劵";default:}}}]).filter("payStatus",[function(){return function(e){switch(e){case kzi.constant.payment.status.unpaid:return"未支付";case kzi.constant.payment.status.failed:return"支付失败";case kzi.constant.payment.status.cancel:return"支付取消";case kzi.constant.payment.status.successed:return"支付成功";default:}}}]).filter("payStatusIsSuccess",[function(){return function(e){return kzi.constant.payment.status.successed===e}}]).filter("memberStatus",[function(){return function(e){switch(e){case kzi.constant.status.pending:return"已邀请";case kzi.constant.status.ok:return"正常";default:}}}]).filter("projectStatus",[function(){return function(e){switch(e){case kzi.constant.archived.yes:return"已归档";case kzi.constant.archived.no:return"正常";default:}}}]).filter("exportStatus",[function(){return function(e){switch(e){case 1:return"准备中";case 2:return"就绪";case 3:return"已下载";default:}}}]).filter("fileuploadErrorInfo",[function(){return function(e){switch(e){case"error":return"上传失败";default:return e}}}]).filter("ifImgExtSetClass",[function(){return function(e){var t=e[0],i=e[1];return kzi.constant.image_exts.indexOf(t)>-1?i:""}}]).filter("getExtIcon",[function(){return function(e){var t={type:2,ext:kzi.constant.get_ext(e.substring(e.lastIndexOf(".")+1))};return kzi.config.wtbox_url+kzi.constant.get_file_icon(t)}}]).filter("GetClientName",[function(){return function(e){switch(e){case kzi.constant.client.android:return"Worktile Android版";case kzi.constant.client.iphone:return"Worktile iPhone版";default:return""}}}]).filter("projectVisibility",[function(){return function(e){switch(e){case kzi.constant.prj_visibility.private:return"私有项目";case kzi.constant.prj_visibility.protected:return"团队可见";case kzi.constant.prj_visibility.public:return"公开项目";default:return""}}}]).filter("permission",[function(){return function(e,t){return e&&t?e&t:!1}}]).filter("teamVisibility",[function(){return function(e){switch(e){case kzi.constant.team_visibility.private:return"私有团队";case kzi.constant.team_visibility.public:return"公开团队";default:return""}}}]).filter("clientName",[function(){return function(e){switch(e){case kzi.constant.client_name.web:return"Web端";case kzi.constant.client_name.iphone:return"iPhone客户端";case kzi.constant.client_name.android:return"Android客户端";default:return"未知"}}}]).filter("encodeURIComponent",[function(){return function(e){return encodeURIComponent(e)}}])}(),function(e){"use strict";void function(){var t=null,i=-1,n={show:1,error:1,close:1,click:1},a=navigator.userAgent,s=/Firefox\/(\d+)/.exec(a),r=s&&s[1],o=+r>=22?!0:!1,l=/node\-webkit/.exec(a);l=l?!0:!1;var c=/Chrome\/(\d+)/.exec(a),d=c&&c[1],u=+d>=32?!0:!1;o&&(u=!0);var p={isSupport:function(){return"Notification"in window||"webkitNotifications"in window},show:function(e,i,n){t=this.create(e,i,n),u||t.show()},showHTML:function(e){u||(t=this.createHTML(e),t.show())},hide:function(e){t&&t.close(),e&&e()},destroy:function(){t=null,i=-1},checkPermission:function(){return u?"granted"===Notification.permission?(i=0,0):Notification.permission:i=webkitNotifications.checkPermission()},isPermitted:function(){return 0===this.checkPermission()},requestPermission:function(e){this.isPermitted()?e&&e():u?Notification.requestPermission(e):webkitNotifications.requestPermission(e)},create:function(e,t,i){return l?this.createByNodeWebKit(e,t,i):u?new Notification(t,{icon:e,body:i}):webkitNotifications.createNotification(e,t,i)},createHTML:function(e){return u?void 0:webkitNotifications.createHTMLNotification(e)},on:function(e,i){n[e]&&t&&t.addEventListener(e,i,!1)},un:function(e,i){n[e]&&t&&t.removeEventListener(e,i,!1)},createByNodeWebKit:function(e,t,i){window.LOCAL_NW.desktopNotifications.notify(e,t,i,function(){$("#status").text("Clicked on "+t),$("#status").fadeIn("fast",function(){setTimeout(function(){$("#status").fadeOut("fast")},1800)})})}};e||(e={}),e.DesktopNotify=p}(),e.DesktopNotify.wt_show=function(t,i,n,a){return this.isSupport()?(this.requestPermission(function(){e.DesktopNotify.show(t,i,n),"undefined"!==a&&"function"==typeof a&&(e.DesktopNotify.on("click",a),e.DesktopNotify.on("click",function(){e.DesktopNotify.hide()})),setTimeout(function(){e.DesktopNotify.hide()},1e4)}),void 0):(alert("你的浏览器不支持桌面通知！"),void 0)}}(window),function(){"use strict";angular.module("wt.header_controller",[]).controller("search_ctrl",["$rootScope","$scope","$routeParams","$location","$element","$popbox","$timeout",function(e,t,i,n,a,s,r){var o=null,l=!1;t.$watch("keywords",function(t){return o&&_.isEmpty(t)?(o.close(),void 0):(null!==t&&(o?e.$broadcast("change_search_keywords",t):r(function(){l=!0,a.find(".icon-search").click()},50)),void 0)}),t.js_keydown_search=function(){_.isEmpty(t.keywords)||(n.path("/search").search({keywords:t.keywords}),t.keywords="")},t.js_up_down_enter=function(i,n){o||t.js_keydown_search(),e.$broadcast("search_key_up_down_enter",n)},t.js_show_pop_search_result=function(i){if(!_.isEmpty(t.keywords)){if(!l)return t.js_keydown_search(),void 0;l=!1,s.popbox({target:i,templateUrl:"/ycjs/tpl/header/pop_search.html",controller:["$scope","popbox","pop_data","$filter",function(t,i,a,s){o=i,t.keywords=a.scope.keywords,t.popbox=i,t.current_index=-1,t.js_close=function(){i.close()};var l=function(){t.filter_projects=_.isEmpty(t.keywords)?[]:s("filter")(e.projects,{name:t.keywords})};r(function(){l()}),t.filter_projects=[],e.$on("change_search_keywords",function(e,i){t.keywords=i,l()}),t.$on("search_key_up_down_enter",function(e,i){return 0>=t.filter_projects.length?(a.scope.js_keydown_search(),void 0):(i===kzi.constant.keyASCIIs.VK_UP?(t.current_index=t.current_index-1,-2>=t.current_index&&(t.current_index=t.filter_projects.length-1)):i===kzi.constant.keyASCIIs.VK_DOWN?(t.current_index=t.current_index+1,t.current_index>=t.filter_projects.length&&(t.current_index=-1)):i===kzi.constant.keyASCIIs.ENTER&&(t.current_index>-1&&t.filter_projects.length>t.current_index?(n.path("/project/"+t.filter_projects[t.current_index].pid).search({}),t.current_index=-1):a.scope.js_keydown_search()),void 0)}),t.js_to_search_result=function(){n.path("/search").search({keywords:t.keywords}),t.keywords="",a.scope.keywords=""}}],resolve:{pop_data:function(){return{scope:t}}}}).open().then(function(){o=null})}}}]).controller("new_feature_ctrl",["$rootScope","$scope","$routeParams","$location","$element","$popbox","$timeout",function(e,t,i,n,a,s){e.js_show_new_feature=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_new_feature.html",controller:["$scope","popbox",function(e,t){kzi.localData.set("wohoo_show_version",kzi.config.wohoo_show_version),e.popbox=t,e.js_close=function(){t.close()}}],onCloseComplete:function(){e.global.wohoo_show=!1}}).open()}}]).controller("header_ctrl",["$scope",function(e){e.show_header=!0,e.$on(kzi.constant.event_names.header_hide,function(){}),e.$on(kzi.constant.event_names.header_show,function(){e.show_header=!0})}])}(),function(){"use strict";angular.module("wt.index_controller",[]).controller("index_ctrl",["$rootScope",function(e){e.global.title="Worktile 让工作更简单"}]).controller("index_carousel_ctrl",["$rootScope","$scope",function(e,t){t.myInterval=5e3}]).controller("index_say_ctrl",["$rootScope","$scope",function(e,t){t.myInterval=5e3,t.slides=[{image:"https://dn-wtbox.qbox.me/img/uservoice/maning.png",name:"马宁",title:"OpenXLive创始人",text:["游戏开发需要高效的沟通和配合，在Worktile，一切任务都在拖拖拽拽中搞定，","一切通知和提醒都及时送达，没有学习成本，只有高效协作。","简单方便，是我们选择Worktile最重要的理由。"].join("")},{image:"https://dn-wtbox.qbox.me/img/uservoice/ziyan.png",name:"徐子岩",title:"微软MVP",text:["我一直在寻找一款适合我们团队使用的协同工具，但因为各种原因最后都放弃了，","直到用上Worktile，才感觉找到了我的真爱，","我愿意把它推荐给我们身边每一位有团队协同需求的朋友。"].join("")},{image:"https://dn-wtbox.qbox.me/img/uservoice/liuyi.png",name:"刘佚",title:"设计行业",text:["及时快捷的通知，无处不在的关注，还有简单易用的话题，让团队沟通畅通无阻。","例如，一个小细节是，通过邮件直接回复即可参与评论和话题，也可以通过邮件创建任务，","这简直太爽了。赶紧上线移动端吧，等不急了。"].join("")},{image:"https://dn-wtbox.qbox.me/img/uservoice/emma.png",name:"Emma",title:"不会编码的IT人士",text:["作为一名ProjectManager，我用过各种项目管理工具，要么太复杂，要么体验太差。","Worktile足够简单，完全满足我对于项目管理的需求，而且体验也超级棒，","最喜欢Worktile中的拖拽操作，太酷了。"].join("")}]
}])}(),function(){"use strict";var e=kzi.config.box_url;angular.module("wt.fileupload_controller",["blueimp.fileupload"]).controller("WtFileUploadController",["$scope","$http",function(t,i){t.loadingFiles=!0,t.options={url:e},i.get(e).then(function(e){t.loadingFiles=!1,t.queue=e.data.files},function(){t.loadingFiles=!1})}]).controller("FileDestroyController",["$scope","$http",function(e,t){var n,i=e.file;i.url&&(i.$state=function(){return n},i.$destroy=function(){return n="pending",t({url:kzi.config.box_url+i.delete_url,method:i.delete_type}).then(function(){n="resolved",e.clear(i)},function(){n="rejected"})})}])}(),function(){"use strict";wt.user=angular.module("wt.user_controller",[]).controller("user_login_ctrl",["$rootScope","$scope","$window",function(e,t,i){e.global.title="登录";var n=kzi.helper.get_query("name"),a=kzi.helper.get_query("return_url");t.status={message:"",code:0},t.signin_user={},t.is_login_ing=!1,a&&""!==a?t.return_path=a:null!==e.global.return_path&&(t.return_path=e.global.return_path,e.global.return_path=null);var s=function(){_.isEmpty(t.return_path)||0===t.return_path.indexOf("http")?i.location.href="/dashboard":(0!==t.return_path.indexOf("/")&&(t.return_path="/"+t.return_path),i.location.href=t.return_path)};e.global.is_login&&s(),n&&(t.login_name=n),t.signin=function(i){t.signin_user.is_login_ing=!0,t.status={message:"",code:0},e.login(t.signin_user.name,t.signin_user.password,null,function(e){e.data.session.twofactor_enabled?t.status.code=1:s()},function(e){2004===e.code?i.$errors.unshift("用户名或密码错误"):2034===e.code?i.$errors.unshift("用户名或密码输入次数过多，请确认用户名密码是否正确。"):i.$errors.unshift("登录失败，请重新再试!")},function(){t.signin_user.is_login_ing=!1}),t.js_signin_twofactor=function(e){t.signin_user.is_signfactoing=!0,wt.data.user.signin_twofactor(t.signin_user.factor,t.signin_user.name,t.signin_user.password,function(){s()},function(){e.$errors.unshift("输入的动态验证码不正确，请重新输入。")},function(){t.signin_user.is_signfactoing=!1})},t.js_signin_recovery=function(e){t.signin_user.is_signrecoverying=!0,wt.data.user.signin_recovery(t.signin_user.recovery_code,t.signin_user.name,t.signin_user.password,function(){s()},function(){e.$errors.unshift("输入的安全码不正确或者已经使用，请重新输入。")},function(){t.signin_user.is_signrecoverying=!1})}}}]).controller("user_signup_ctrl",["$rootScope","$scope","$location","$window",function(e,t,i,n){e.global.title="注册",t.show_signup=!0,t.user={};var a=kzi.helper.get_query("return_url");a&&""!==a&&(t.return_path=a),e.global.is_login&&(n.location.href=_.isEmpty(t.return_path)?"/dashboard":t.return_path);var s=kzi.helper.get_query("utm_source");t.js_submit=function(e){t.is_registering=!0;var i=t.user.display_name,a=t.user.name,r=t.user.email,o=t.user.password;wt.data.signup(a,r,o,i,s,function(e){t.team_id=e.data.team_id,t.signup_success=!0,t.show_signup=!1,_.isEmpty(t.return_path)||0===t.return_path.indexOf("http")||(n.location.href=t.return_path),kzi.localData.set("wohoo_show_version",kzi.config.wohoo_show_version)},function(i){i.code===kzi.statuses.user_error.invalid_name_error.code?e.$errors.unshift("用户名已经存在或者无效"):e.$errors.unshift("注册错误，请重新再试"),t.is_registering=!1})},t.js_goto_team=function(){n.location.href="/teams/"+t.team_id}}]).controller("user_ctrl",["$rootScope","$scope","$popbox",function(e,t,i){t.js_pop_user_setting=function(e){i.popbox({target:e,templateUrl:"/ycjs/tpl/user/pop_user_setting.html",controller:["$scope","popbox","pop_data","$window","$rootScope",function(e,t,i,n,a){e.popbox=t,e.step=0,e.js_step=function(t){3===t&&a.load_teams(function(t){e.teams=t}),e.step=t},e.js_close=function(){t.close()},e.goto_shortcuts=function(){a.js_shortcut_key_dialog(),t.close()},e.js_user_logout=function(){a.logout(),t.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()}}]).controller("user_forgot_ctrl",["$rootScope","$scope",function(e,t){e.global.title="忘记密码",t.send_success=!1,t.js_forget_password=function(e){t.is_sending=!1,wt.data.user.email_check(t.forget_email,function(i){return i.data===!1?(e.$errors.unshift("该邮箱地址不存在，请重新输入"),$('input[name="forget_email"]').addClass("error"),void 0):(e.$invalid||(t.is_sending=!0,wt.data.user.forgot_pwd(t.forget_email,function(){t.send_success=!0},function(){t.send_fault=!0},function(){t.is_sending=!1})),void 0)})}}]).controller("user_password_reset_ctrl",["$rootScope","$scope","$http","$location","$window",function(e,t,i,n,a){t.send_success=!1;var s=a.location.search.substring(a.location.search.indexOf("token=")+6);_.isEmpty(s)&&(t.invalid_input=!0),t.js_reset_password=function(e){t.invalid_input||e.$invalid||(t.is_resetting=!0,wt.data.user.reset_pwd(s,t.reset_password,function(){t.reset_success=!0},function(){e.$errors.unshift("重置失败，请重新再试")},function(){t.is_resetting=!1}))},t.js_go_to_team=function(){t.reset_success&&e.login(t.signup_name,t.signup_password,null,function(e){n.path("/teams/"+e.data.team_id)},null)}}]).controller("user_email_reset_ctrl",["$rootScope","$scope","$window",function(e,t,i){var n=i.location.search.substring(i.location.search.indexOf("token=")+6);_.isEmpty(n)?t.invalid_input=!0:(t.is_resetting=!0,wt.data.user.reset_email(n,function(i){t.reset_success=!0,t.new_email=i.data,e.logout(!0)},function(){t.invalid_input=!0},function(){t.is_resetting=!1}))}]).controller("user_email_activation_ctrl",["$rootScope","$scope",function(e,t){t.is_activating=!0,t.active_success=!1,t.invalid_input=!0;var i=function(){t.active_success=!0,t.invalid_input=!1},n=function(){t.invalid_input=!0};t.activate=function(){var e=kzi.helper.get_query("code");e?wt.data.user.activate_email(e,i,n,function(){t.is_activating=!1}):t.invalid_input=!0},t.activate()}])}(),function(){"use strict";angular.module("wt.team_controller",["ui.utils"]).controller("team_ctrl",["$rootScope","$scope","$routeParams","$location","$popbox","$q",function(e,t,i,n,a,s){e.global.title=/teams\/.*\/projects/.test(n.$$path)?"项目 | ":"成员 | ";var r=i.team_id;t.team_id=r,t.current_visibility=kzi.constant.prj_visibility.private,t.active_team_admin_nav_tab="member",t.member_current_tab="member",/projects$/.test(window.document.location.href)&&(t.active_team_admin_nav_tab="projects"),t.loading_overview_done=!1,wt.data.team.get_tasks_overview(r,function(e){t.team_tasks_overview=e.data},function(){},function(){t.loading_overview_done=!0}),t.delete_member=function(i,n,a,s){wt.data.team.del_member(r,i.uid,function(a){t.members=_.reject(t.members,function(e){return e.uid===i.uid}),e.refresh_cache.user.remove(i.uid),_.isFunction(n)&&n(a)},a,s)},t.uninvite_member=function(i,n,a,s){wt.data.team.uninvite_member(r,i.uid,function(a){t.members=_.reject(t.members,function(e){return e.uid===i.uid}),e.refresh_cache.user.remove(i.uid),_.isFunction(n)&&n(a)},a,s)},t.js_show_member_menu=function(e,i){a.popbox({target:e,templateUrl:"/ycjs/tpl/team/pop_member_menu.html",controller:"team_member_pop_menu_ctrl",resolve:{pop_data:function(){return{$scope:t,parameters:i,team:t.current_team}}}}).open()},t.js_star_toggle=function(t,i){wt.bus.project.set_star_toggle(i,function(){var t=_.findWhere(e.projects,{pid:i.pid});t.is_star=i.is_star}),t.preventDefault(),t.stopPropagation()},t.js_set_current_visibility=function(e){t.current_visibility=e},wt.bus.team.init_team_data(t,e,r,s,n).then(function(i){e.global.title=e.global.title+i.info.name,t.current_team.permission===kzi.constant.team_permission.guest&&(t.current_visibility=3)}),t.$on("socket_message_team_projects",function(i,a){a.team_id===r&&wt.bus.team.init_team_data(t,e,r,s,n)}),t.teamProjectsFilter=function(e){return function(t){return 1===e?t.visibility===kzi.constant.prj_visibility.private||-1!=t.curr_role:2===e?t.visibility!==kzi.constant.prj_visibility.private&&-1==t.curr_role:3===e?t.visibility===kzi.constant.prj_visibility.public:void 0}},t.isStatusPendingFilter=function(){return function(e){return e.status===kzi.constant.status.pending}},t.isStatusOkFilter=function(){return function(e){return e.status===kzi.constant.status.ok}},t.teamMembersFilter=function(){return function(e){return e.role!==kzi.constant.role.guest}},t.member_set_tab=function(e){t.member_current_tab=e},t.go_to_team_task_sub_tab=function(t){e.team_admin_task_sub_tab=t,n.path("/teams/"+r+"/tasks")},t.$on(kzi.constant.event_names.member_state_change,function(e,i){var n=_.findWhere(t.members,{uid:i.uid});n&&(n.online=i.state)}),t.$on(kzi.constant.event_names.team_member_role_change,function(e,i){t.current_team&&t.current_team.team_id===i.team_id&&(t.current_team.permission=i.team_permission,kzi.constant.team_module.view_base&i.team_permission||n.path("/projects"))})}]).controller("team_member_invite_ctrl",["$rootScope","$scope","$routeParams","$location","$q",function(e,t,i,n,a){e.global.loading_done=!0;var s=i.team_id;t.team_id=s,t.active_team_admin_nav_tab="member",wt.bus.team.init_team_data(t,e,s,a,n).then(function(e){t.setting_url=e.info.is_owner?"/teams/"+s+"/admin":"/teams/"+s+"/setting",1===e.info.permission&&n.path("/teams/"+s)}),e.global.title="邀请团队成员",t.current_menu=s,t.invite_members=[],t.invite_member_roles=kzi.constant.get_member_roles();var r={role:kzi.constant.role.member,email:""};_.each([1,2,3],function(e){var i=angular.copy(r);i.input_name="member_email"+e,t.invite_members.push(i)}),t.js_add_invite_member=function(){var e=angular.copy(r);e.input_name="member_email"+(t.invite_members.length+1),t.invite_members.push(e)},t.js_delete_member=function(e,i){e.preventDefault(),t.invite_members=_.reject(t.invite_members,function(e){return e.index===i.index})},t.js_email_focus=function(e){e.$errors=[]},t.js_invite_members=function(i){if(_.findWhere(t.invite_members,{email:void 0}))return i.$errors.unshift("邮箱格式输入不正确"),void 0;var a=_.filter(t.invite_members,function(e){return e.email&&""!==e.email}),r="",o=0;if(_.each(a,function(e){var t=e.email.toLowerCase()+",";r.indexOf(t)>=0?(i.$errors.unshift("邀请邮箱地址不能重复"),o=1):r+=t}),!o){if(_.isEmpty(a))return i.$errors.unshift("请至少输入一个邀请成员"),void 0;var l=!1;if(_.each(a,function(e){return kzi.validator.isEmail(e.email)?void 0:(i.$errors.unshift("邮箱格式输入不正确"),l=!0,void 0)}),!l){t.is_sending=!0;var c=t.invite_message,d=[];wt.data.team.invite_member(s,a,c,d,function(){e.global.loading_done=!1,e.reload_team_members(s,function(){n.path("/teams/"+s)},null,function(){e.global.loading_done=!0})},function(){i.$errors.unshift("邀请失败，请重新再试")},function(){t.is_sending=!1})}}},t.js_invite_enter=function(e,i){t.js_invite_members(i)},t.js_cancel_invite=function(){n.path("/teams/"+s)},wt.bus.team.init_team_data(t,e,s,a,n).then(function(i){e.global.title=e.global.title+i.info.name,t.current_team.permission===kzi.constant.team_permission.guest&&(t.current_visibility=3)})}]).controller("team_member_pop_menu_ctrl",["$rootScope","$scope","$routeParams","$location","$timeout","popbox","pop_data",function(e,t,i,n,a,s,r){var o=i.team_id;t.current_team=r.team,t.popbox=s,t.selected_member=r.parameters,t.js_close=function(){s.close()},t.step=0,t.js_step=function(e){2===e&&(t.loading_unique_admin_prjs_done=!1,wt.data.project.get_unique_admin_prjs(o,t.selected_member.uid,function(e){t.unique_admin_prjs=e.data},null,function(){t.loading_unique_admin_prjs_done=!0})),t.step=e},t.js_set_group=function(){},t.js_delete_member=function(i){e.is_deleting_member=!0,r.$scope.delete_member(i,function(){t.js_close()},function(){kzi.msg.error("删除成员出错，请重新再试！")},function(){e.is_deleting_member=!1})},t.js_cancel_invite=function(i){e.is_canceling_invite=!0,r.$scope.uninvite_member(i,function(){t.js_close()},function(){kzi.msg.error("取消成员邀请出错，请重新再试！")},function(){e.is_canceling_invite=!1})},t.js_view_member_auth=function(){e.global.loading_done=!1,wt.data.team.get_member_projects(o,t.selected_member.uid,function(i){t.member_projects_auth=i.data,e.global.loading_done=!0},function(){e.global.loading_done=!0})};var l=function(i){wt.data.team.set_role(o,t.selected_member.uid,i,function(){t.selected_member.role=i,t.selected_member.uid===e.global.me.uid&&(t.current_team.curr_role=i)},function(){},function(){t.js_close()})};if(t.js_set_user_as_admin=function(){l(kzi.constant.role.admin)},t.js_set_user_as_member=function(){l(kzi.constant.role.member)},t.js_set_user_as_guest=function(){l(kzi.constant.role.guest)},t.selected_member.status===kzi.constant.status.pending&&_.isEmpty(t.selected_member.invite_url)&&r.team.curr_role===kzi.constant.role.admin){var c=kzi.config.root_url+"/join?code=";wt.data.invite.get_invite_code(o,t.selected_member.uid,function(e){t.selected_member.invite_url=c+e.data.invite_id})}t.js_view_invite_code=function(){t.js_step(6)}}]).controller("team_setting_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location","$q",function(e,t,i,n,a,s){i.global.loading_done=!0,e.part_loading_done=!1;var r=t.team_id;e.team_id=r,e.active_team_admin_nav_tab="admin",e.quit_team_step=1,wt.bus.team.init_team_data(e,i,r,s,a).then(function(t){e.setting_url=t.info.is_owner?"/teams/"+r+"/admin":"/teams/"+r+"/setting",t.info.is_owner&&a.path(e.setting_url),1===t.info.permission&&a.path("/teams/"+r),wt.data.project.get_unique_admin_prjs(r,i.global.me.uid,function(t){e.unique_admin_prjs=t.data},null,function(){e.part_loading_done=!0}),i.global.title="团队设置 | "+t.info.name}),e.js_set_current_menu=function(t){e.current_menu=t},e.js_quit_team_step=function(t){e.quit_team_step=t},e.js_quit_team=function(){e.is_quiting!==!0&&(e.is_quiting=!0,wt.data.team.leave(e.current_team.team_id,function(){kzi.msg.success("退出团队成功！"),i.refresh_cache.team.leave(e.current_team.team_id),a.path("/dashboard")},null,function(){}))}}]).controller("free_apply_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.title="申请公益版",e.team_type=1,e.team_desc="",i.load_teams(function(t){e.owner_teams=_.filter(t,function(e){return e.is_owner}),i.global.loading_done=!0}),e.js_free_apply=function(){e.is_applying!==!0&&(e.apply_success=!0,e.is_applying=!0,wt.data.team.commonweal_apply(e.selected_team.team_id,e.team_type,e.team_desc,function(){e.apply_success=!0},null,function(){e.is_saving_team=!1}))}}]).controller("team_task_ctrl",["$rootScope","$scope","$routeParams","$location","$popbox","$q",function(e,t,i,n,a,s){function o(e,t){var i;_.each(e,function(e){var n=moment(e[t]).format("YYYY-MM-DD");n===i?e.is_show_date=!1:(e.is_show_date=!0,i=n)})}function l(e,i,n,a,s){t.part_loading_done=!1,s?(t[n+"_tasks"]=[],t.switching_sub_tab_loading_done=!1):t.switching_sub_tab_loading_done=!0,wt.data.team.get_tasks(r,e,i,n,a,function(e){_.isEmpty(e.data)?t[n+"_tasks"]=t[n+"_tasks"]||[]:(t.page[n]++,t[n+"_tasks"]=_.isEmpty(t[n+"_tasks"])?e.data:t[n+"_tasks"].concat(e.data)),t.more_page[n]=kzi.config.default_count>e.data.length?!1:!0},function(){kzi.msg.error("获取团队任务信息失败")},function(){t.part_loading_done=!0,t.initial_loading_done=!0,"completed"===n&&o(t[n+"_tasks"],"completed_date"),"expired"===n&&o(t[n+"_tasks"],"expire_date"),"uncompleted"===n&&o(t[n+"_tasks"],"create_date"),t.switching_sub_tab_loading_done=!0})}t.active_team_admin_nav_tab="tasks",t.filter_tab="tab_filter_member",t.task_in_filter={pid:"",uid:""},t.page_title="团队任务",t.task_tab=e.team_admin_task_sub_tab||"uncompleted",e.team_admin_task_sub_tab="uncompleted";var r=i.team_id;t.team_id=r,t.part_loading_done=!0,t.initial_loading_done=!1,t.page={},t.page.completed=1,t.page.expired=1,t.page.uncompleted=1,t.more_page={},t.more_page.completed=!0,t.more_page.expired=!0,t.more_page.uncompleted=!0,wt.bus.team.init_team_data(t,e,r,s,n).then(function(t){e.global.loading_done=!0,e.global.title="任务 | "+t.info.name}),t.filter_uid="all",t.filter_pid="all",l(t.filter_uid,t.filter_pid,t.task_tab,t.page.completed,!0),t.change_task_tab=function(e){t.task_tab!==e&&(t.page.uncompleted=1,t.page.expired=1,t.page.completed=1,t.task_tab=e,l(t.filter_uid,t.filter_pid,t.task_tab,t.page[t.task_tab],!0))},t.js_filter_member=function(e,i){t.page.uncompleted=1,t.page.expired=1,t.page.completed=1,t.filter_uid===e?(t.page_title="团队任务",t.filter_uid="all"):(t.page_title=i.display_name+"的任务",t.filter_uid=e),l(t.filter_uid,t.filter_pid,t.task_tab,t.page[t.task_tab],!0)},t.isMemberFilter=function(){return function(e){return e.status===kzi.constant.status.ok&&(e.role===kzi.constant.role.admin||e.role===kzi.constant.role.member)}},t.load_more=function(e){l(t.filter_uid,t.filter_pid,e,t.page[e],!1)}}])}(),function(){"use strict";angular.module("wt.team_admin_controller",["ui.utils"]).controller("team_admin_summary_ctrl",["$rootScope","$scope","$routeParams","$location","$q",function(e,t,i,n,a){e.global.loading_done=!0,t.active_team_admin_nav_tab="admin";var s=i.team_id;t.team_id=s,t.current_menu="summary",t.current_team="",t.part_loading_done=!1,wt.bus.team.init_team_data(t,e,s,a,n).then(function(){wt.data.team.summary(s,function(i){t.part_loading_done=!0,e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.current_team=i.data.info,t.name=t.team.name,t.desc=t.team.desc;var n=100*t.team.member_count/(t.team.member_count+t.team.invite_count),a=100*t.team.invite_count/(t.team.member_count+t.team.invite_count);t.member_stacked=[{value:n.toPrecision(2),type:"success"},{value:a.toPrecision(2),type:"warning"}];var s=100*t.team.active_count/t.team.project_count,r=100*t.team.archived_count/t.team.project_count;t.project_stacked=[{value:s.toPrecision(2),type:"success"},{value:r.toPrecision(2),type:"info"}],t.part_loading_done=!0},function(){n.path("/teams/"+s)})})}]).controller("team_admin_basic_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$q",function(e,t,i,n,a,s,r){e.global.loading_done=!0,t.active_team_admin_nav_tab="admin";var o=i.team_id;t.team_id=o,t.current_menu="basic",t.dismiss_step=1,t.transfer_step=1,t.visibility_step=1,t.teamVisibilityArray=[{value:kzi.constant.team_visibility.public,description:"公开团队"},{value:kzi.constant.team_visibility.private,description:"私有团队"}],wt.bus.team.init_team_data(t,e,o,r,n).then(function(){wt.data.team.summary(o,function(i){e.global.loading_done=!0,e.global.title="团队设置 | "+i.data.info.name,t.data={},t.data.visibilityValue=function(){for(var e=0;t.teamVisibilityArray.length>e;e++)if(t.teamVisibilityArray[e].value===i.data.info.visibility)return t.teamVisibilityArray[e]}(),t.originalValue=t.data.visibilityValue,t.current_team=i.data.info,t.team=i.data.info,t.name=t.team.name,t.desc=t.team.desc,t.sub=i.data.sub,t.part_loading_done=!0},function(){n.path("/teams/"+o)})}),t.js_set_team=function(i,n,a,s){a||(a=""),s||(s=""),(t.team.name!==n||t.team.desc!==a||t.team.url!==s)&&(t.is_team_saveing=!0,wt.data.team.update(o,n,a,s,function(i){t.team.name=i.data.name,t.team.desc=i.data.desc,t.team.url=i.data.url,e.refresh_cache.team.update_base(o,n,a,s),kzi.msg.success("修改团队基本信息成功！")},function(){kzi.msg.error("修改团队基本信息失败！")},function(){t.is_team_saveing=!1}))},t.js_transfer_pop=function(i){s.popbox({target:i,placement:"bottom",templateUrl:"/ycjs/tpl/team/pop_transfer_team.html",controller:["$scope","popbox","pop_data",function(t,i,n){t.popbox=i,t.step=0,t.js_step=function(e){t.step=e},t.members_loading_done=!1,t.team_members=null,e.load_team_members(o,function(i){t.team_members=_.reject(i.members,function(t){return t.uid===e.global.me.uid||t.status===kzi.constant.status.pending||t.role==kzi.constant.role.guest})},function(){t.members_loading_done=!0},function(){t.members_loading_done=!0}),t.js_to_transfer=function(){t.members_loading_done=!1,t.team_members=null,e.load_team_members(o,function(i){t.team_members=_.reject(i.members,function(t){return t.uid===e.global.me.uid||t.status===kzi.constant.status.pending})},function(){t.members_loading_done=!0},function(){t.members_loading_done=!0})},t.js_to_transfer_confirm=function(e){t.selected_member=e,n.scope.selected_member=e,n.scope.js_transfer_step(2),i.close()},t.js_close=function(){i.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_dismiss_step=function(e){t.dismiss_step=e},t.js_transfer_step=function(e){t.transfer_step=e},t.js_dismiss=function(i,a){t.is_dismissing!==!0&&a===i&&(t.is_dismissing=!0,wt.data.team.dismiss(o,function(){e.refresh_cache.team.dismiss(o),t.current_team=void 0,n.path("/dashboard")},null,function(){t.is_dismissing=!1}))},t.js_transfer=function(){t.is_transferring=!0,wt.data.team.transfer(o,t.selected_member.uid,function(){t.team.is_owner=0,t.team.owner=t.selected_member,n.path("/teams/"+o)},null,function(){t.is_transferring=!1})},t.js_visibility_step=function(e){t.visibility_step=e},t.js_update_visibility=function(){function i(){t.originalValue=t.data.visibilityValue,t.team.visibility=t.data.visibilityValue.value,t.current_team.visibility=t.data.visibilityValue.value,e.refresh_cache.team.update_visibility(t.team.team_id,t.data.visibilityValue.value),t.visibility_step=1}function a(){kzi.msg.error("setting team visibility error"),n.path("/teams/"+o)}function s(){t.is_visibility_saving=!1}t.is_visibility_saving=!0,wt.data.team.set_visibility(o,t.data.visibilityValue.value,i,a,s)},t.js_visibility_cancel=function(){t.data.visibilityValue=t.originalValue}}]).controller("team_admin_billing_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="billing";var a=i.team_id;t.team_id=a,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,e.global.loading_done=!0,wt.data.team.get_billings(a,1,function(e){t.billings=e.data.billings})},function(){n.path("/teams/"+a)})}]).controller("team_admin_payment_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="payment";var a=i.team_id;t.team_id=a;var s=function(e){t.payments=null,wt.data.team.get_payments(a,e,function(i){t.payments=i.data.payments,(1===e||"1"===e)&&(t.payments_pagination_opts={totalCount:i.data.total_count,opts:{callback:function(e){s(e+1)}}})})};wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,e.global.loading_done=!0,s(1)},function(){n.path("/teams/"+a)}),t.js_cancel_payment=function(e){t.payments=_.reject(t.payments,function(t){return t.pay_id===e.pay_id}),wt.data.team.cancel_payment(a,e.pay_id,function(){})}}]).controller("team_admin_members_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$q",function(e,t,i,n,a,s,r){t.active_team_admin_nav_tab="admin",t.current_menu="members";var o=i.team_id;t.team_id=o,e.global.loading_done=!0,wt.bus.team.init_team_data(t,e,o,r,n).then(function(){wt.data.team.summary(o,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub;var n=100*t.team.member_count/(t.team.member_count+t.team.invite_count),a=100*t.team.invite_count/(t.team.member_count+t.team.invite_count);t.stacked=[{value:n,type:"success"},{value:a,type:"warning"}],t.current_team=i.data.info,wt.data.team.get_account_members(o,function(e){t.account_members=e.data},null,function(){t.part_loading_done=!0})},function(){n.path("/teams/"+o)})}),t.delete_member=function(i,n,a,s){wt.data.team.del_member(o,i.uid,function(a){t.account_members=_.reject(t.account_members,function(e){return e.uid===i.uid}),e.refresh_cache.user.remove(i.uid),_.isFunction(n)&&n(a)},a,s)},t.uninvite_member=function(i,n,a,s){wt.data.team.uninvite_member(o,i.uid,function(a){t.account_members=_.reject(t.account_members,function(e){return e.uid===i.uid}),e.refresh_cache.user.remove(i.uid),_.isFunction(n)&&n(a)},a,s)},t.js_show_member_menu=function(e,i,n){s.popbox({target:e,templateUrl:"/ycjs/tpl/team/pop_member_menu.html",controller:"team_member_pop_menu_ctrl",resolve:{pop_data:function(){return{$scope:t,parameters:i,team:n}}}}).open()}}]).controller("team_admin_change_quota_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="members";var a=i.team_id;t.team_id=a,e.global.loading_done=!0,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,t.team_quota=i.data.sub.quota,t.part_loading_done=!0},function(){n.path("/teams/"+a)}),t.js_change_team_quota=function(){return null==t.team_quota||isNaN(t.team_quota)?(t.change_quota_error="团队成员配额必须为数字",void 0):t.team.member_count+t.team.invite_count>t.team_quota?(t.change_quota_error="团队成员配额必须大于或者等于当前团队成员数",void 0):(t.is_changing=!0,wt.data.team.change_subscription(a,t.team_quota,function(e){e.data===kzi.constant.subscription.step.pay_online?n.path("/teams/"+a+"/pay"):n.path("/teams/"+a+"/admin/summary")},null,function(){t.is_changing=!1}),void 0)},t.js_team_quota_focus=function(){t.change_quota_error=null}}]).controller("team_admin_projects_ctrl",["$rootScope","$scope","$routeParams","$location","$q",function(e,t,i,n,a){e.global.loading_done=!0,t.active_team_admin_nav_tab="admin",t.current_menu="projects";var s=i.team_id;t.team_id=s,wt.bus.team.init_team_data(t,e,s,a,n).then(function(){wt.data.team.summary(s,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub;var n=100*t.team.active_count/t.team.project_count,a=100*t.team.archived_count/t.team.project_count;t.stacked=[{value:n,type:"success"},{value:a,type:"info"}],t.current_team=i.data.info,wt.data.team.get_account_projects(s,function(e){t.account_projects=e.data},null,function(){t.part_loading_done=!0})},function(){n.path("/teams/"+s)})})}]).controller("team_admin_security_ctrl",["$rootScope","$scope","$routeParams","$location","$q",function(e,t,i,n,a){e.global.loading_done=!0,t.active_team_admin_nav_tab="admin",t.current_menu="security";var s=i.team_id;t.team_id=s;var r=function(e){_.isEmpty(e)||_.each(e,function(e){switch(e.template){case"team_member_add":e.verb_display="添加团队成员 ( "+e.member.display_name+" )";break;case"team_member_remove":e.verb_display="移除团队成员 ( "+e.member.display_name+" )";break;case"team_upgrade":e.verb_display="升级团队到商业版";break;case"team_degrade":e.verb_display="降级团队到免费版";break;case"project_member_add":e.verb_display="添加项目成员 ( "+e.project.name+" | "+e.member.display_name+" )";break;case"project_member_remove":e.verb_display="移除项目成员 ( "+e.project.name+" | "+e.member.display_name+" )";break;case"project_add":e.verb_display="添加项目 ("+e.project.name+" )";break;case"project_delete":e.verb_display="删除项目 ("+e.project.name+" )"}})},o=function(e){t.security_histories=null,t.loading_histories_done=!1,wt.data.team.get_security_histories(s,e,function(i){r(i.data.histories),t.histories=i.data.histories,(1===e||"1"===e)&&(t.totalCount=i.data.totalCount,t.security_pagination_opts={totalCount:i.data.total_count,opts:{callback:function(e){o(e+1)}}})},null,function(){t.loading_histories_done=!0,t.part_loading_done=!0})};wt.bus.team.init_team_data(t,e,s,a,n).then(function(){wt.data.team.summary(s,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.current_team=i.data.info,t.sub=i.data.sub,o(1)},function(){n.path("/teams/"+s)})})}]).controller("team_admin_export_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="export";var a=i.team_id;t.team_id=a,e.global.loading_done=!0;var s=function(e){t.bulkexports=null,t.part_loading_done=!1,wt.data.team.get_bulk_export(a,e,function(i){t.bulkexports=i.data.bulkexports,(1===e||"1"===e)&&(t.totalCount=i.data.totalCount,t.exports_pagination_opts={totalCount:i.data.total_count,opts:{callback:function(e){s(e+1)}}})},null,function(){t.part_loading_done=!0})};wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,s(1)},function(){n.path("/teams/"+a)},function(){}),t.js_export_data=function(){t.bulk_exporting=!0,wt.data.team.bulk_export(a,function(){t.bulk_export_success=!0,s(1)},null,function(){t.bulk_exporting=!1})}}]).controller("team_admin_consultant_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="consultant";var a=i.team_id;t.team_id=a,e.global.loading_done=!0,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,t.part_loading_done=!0},function(){n.path("/teams/"+a)})}]).controller("team_admin_pay_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$timeout","$modal",function(e,t,i,n,a,s,r,o){e.global.title="团队设置",t.current_menu="payment";var l=i.team_id;t.team_id=l,e.global.loading_done=!0,wt.data.team.summary(l,function(e){t.team=e.data.info,t.sub=e.data.sub,wt.data.team.payment(l,function(e){t.payment_no=e.data,t.part_loading_done=!0}),t.pay_amounts=[{amount:12*10*t.sub.quota,month_count:12,display_time:"一年",presentation:0},{amount:6*10*t.sub.quota,month_count:6,display_time:"半年",presentation:0},{amount:3*10*t.sub.quota,month_count:3,display_time:"3个月",presentation:0},{amount:10*t.sub.quota,month_count:1,display_time:"1个月",presentation:0}]},function(){n.path("/teams/"+l)}),t.js_selected_amount=function(e,i){t.selected_amount=e,i.$errors=[]},t.js_pay=function(e){if(_.isEmpty(t.selected_amount))return e.$errors=["请选择充值金额！"],void 0;var i=o.open({backdrop:!0,keyboard:!0,backdropClick:!1,templateUrl:"/ycjs/tpl/common/pay_dialog.html",controller:["$scope",function(e){e.js_pay_complete=function(){i.close(),n.path("teams/"+l+"/admin/payment")},e.js_pay_exception=function(){i.close(),n.path("teams/"+l+"/admin/payment")}}]})}}]).controller("team_admin_pay_coupon_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){e.global.loading_done=!0,t.current_menu="payment";var a=i.team_id;t.team_id=a,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,t.part_loading_done=!0},function(){n.path("/teams/"+a)}),t.js_redeem_coupon_focus=function(){t.redeem_coupon_error=null},t.js_redeem_coupon=function(){return _.isEmpty(t.coupon_code)?(t.redeem_coupon_error="请输入代金券序列号",void 0):(t.is_redeeming=!0,wt.data.team.redeem_coupon(a,t.coupon_code,function(){n.path("/teams/"+a+"/admin/payment")},function(){t.redeem_coupon_error="代金券已经使用或者不存在，请重新输入！"},function(){t.is_redeeming=!1}),void 0)}}]).controller("team_admin_upgrade_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="summary";var a=i.team_id;t.team_id=a,e.global.loading_done=!0,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,t.part_loading_done=!0},function(){n.path("/teams/"+a)}),t.js_upgrade_team=function(){return null==t.team_quota||isNaN(t.team_quota)?(t.upgrade_error="团队成员配额必须为数字",void 0):t.team.member_count+t.team.invite_count>t.team_quota?(t.upgrade_error="团队成员配额必须大于或者等于当前团队成员数",void 0):(t.is_upgrading=!0,wt.data.team.upgrade(a,t.team_quota,function(e){e.data===kzi.constant.subscription.step.pay_online?n.path("/teams/"+a+"/pay"):n.path("/teams/"+a+"/admin/summary")},null,function(){t.is_upgrading=!1}),void 0)},t.js_team_quota_focus=function(){t.upgrade_error=null}}]).controller("team_admin_degrade_ctrl",["$rootScope","$scope","$routeParams","$location",function(e,t,i,n){t.current_menu="summary",e.global.loading_done=!0;var a=i.team_id;t.team_id=a,wt.data.team.summary(a,function(i){e.global.title="团队设置 | "+i.data.info.name,t.team=i.data.info,t.sub=i.data.sub,t.team_quota=i.data.quota,t.team.member_count+t.team.invite_count>10&&(t.degrade_disabled=!0,t.degrade_error="您当前团队的成员人数已经大于免费版的最高配额10人，删除成员后后才能降级成免费版"),t.part_loading_done=!0},function(){n.path("/teams/"+a)}),t.js_degrade_team=function(){t.is_degrading=!0,wt.data.team.degrade(a,function(){n.path("/teams/"+a+"/admin/summary")},function(){t.degrade_error="降级失败，请重新再试"},function(){t.is_degrading=!1})}}])}(),function(){"use strict";wt.project=angular.module("wt.project_controller",["ui.bootstrap","ui.utils","blueimp.fileupload","ui.calendar"]).controller("project_center",["$scope","$routeParams","$rootScope","$location",function(e,t,i,n){var a=t.pid,s=function(e){if(_.isEmpty(e.navs))n.path("/project/"+a+"/task").replace();else{var t=parseInt(e.navs[0],10),i=_.findWhere(kzi.constant.prj_navigations,{id:t});i?n.path("/project/"+a+"/"+i.name).replace():n.path("/project/"+a+"/task").replace()}};i.load_project_from_cache(a,function(e){return e?s(e):(i.load_project(a,!0,function(e){return s(e.info)},function(e){e.code===kzi.statuses.prj_error.not_found.code?n.path("/project/"+a+"/notfound"):e.code===kzi.statuses.error.permission_deny.code?n.path("/project/"+a+"/notfound"):wt.data.error(e)
}),void 0)})}]).controller("projects_ctrl",["$scope","$routeParams","$rootScope","$location",function(e,t,i,n){i.global.loading_done=!0,e.part_loading_done=!1,i.global.title="项目",e.current_menu="all",e.view_type="grid",e.top_tab=" ";var a=kzi.localData.get("project_list_type");e.view_type=a?a:"grid",e.set_top_tab=function(e){n.path("/projects/"+e)},e.js_view_toggle=function(t){e.view_type=t,kzi.localData.set("project_list_type",t)},e.js_star_toggle=function(e,t){wt.bus.project.set_star_toggle(t,function(){i.refresh_cache.project.set_star(t.pid,t.is_star)}),e.preventDefault(),e.stopPropagation()};var s=function(){e.projects=_.sortBy(e.projects,function(e){return e.pos}),i.sort_projects()};e.set_project_sort_options=function(){e.project_sort_options={containment:".projects-panel",placeholder:"project-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,accept:".project-item",start:function(e,t){t.item.addClass("project-picked-up"),$(".project-placeholder").css({height:t.item.css("height"),width:t.item.css("width")})},stop:function(t,i){i.item.removeClass("project-picked-up");var n=i.item.attr("pid"),a=i.item.prev().attr("pid"),r=i.item.next().attr("pid"),o=null,l=null;if(_.isEmpty(r)||(o=_.findWhere(e.projects,{pid:r})),_.isEmpty(a)||(l=_.findWhere(e.projects,{pid:a})),o||l){var c=wt.bus.project.calculate_prj_pos(l,o),d=_.findWhere(e.projects,{pid:n});d.pos=c,wt.data.project.prj_position(n,c,function(){s()})}}}};var r=function(){i.load_common_data_in(function(t){e.teams=t.teams,e.projects=t.projects,e.set_project_sort_options(),e.part_loading_done=!0},angular.noop,function(){})};r(),e.js_goto_project=function(e,t){n.path("/project/"+t.pid)},e.$on("socket_message_project_list",function(){r()}),e.$on(kzi.constant.event_names.project_sort_change,function(){r()})}]).controller("projects_archive_ctrl",["$scope","$routeParams","$rootScope","$location",function(e,t,i,n){i.global.loading_done=!0,e.part_loading_done=!1,i.global.title="我的归档项目",e.top_tab="archive",e.view_type="grid",i.load_common_data_in(function(t){e.teams=t.teams,wt.data.project.get_all("archive",function(t){e.archived_projects=t.data},angular.noop,function(){e.part_loading_done=!0})},angular.noop,function(){}),e.js_goto_project=function(e,t){n.path("/project/"+t.pid)}}]).controller("project_archive_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$location",function(e,t,i,n,a,s){var r=t.pid,o=1;e.pid=r,e.archived_view="task";var l=function(){_.isEmpty(e.entries)&&(i.global.loading_done=!1,wt.data.entry.get_archived_list(r,function(t){e.entries=t.data,i.global.loading_done=!0}))},c=function(){i.loading_tasks=!0,wt.data.task.get_archived_list(r,o,kzi.config.default_count,function(t){e.last_date=wt.bus.task.set_is_show_data(t.data,e.last_date),_.isEmpty(t.data)?e.tasks=[]:(o+=1,e.tasks=_.isEmpty(e.tasks)?t.data:e.tasks.concat(t.data)),kzi.config.default_count>t.data.length&&(e.has_no_more=!0)},null,function(){i.loading_tasks=!1})},d=function(){"task"!==e.archived_view&&l()};e.js_archive_view_toggle=function(t){e.archived_view=t,d()},e.load_archived_tasks_more=function(){c()},e.$on(kzi.constant.event_names.on_task_unarchived,function(t,i){var n=_.findWhere(e.tasks,{tid:i.tid});e.tasks=_.reject(e.tasks,function(e){return e.tid===n.tid}),n.is_show_date&&(e.last_date=wt.bus.task.set_is_show_data(e.tasks,e.last_date))}),e.js_unarchive_entry=function(t,n){wt.data.entry.unarchive(r,n,function(){e.entries=_.reject(e.entries,function(e){return e.entry_id===n}),i.project.entries=[],i.project.tasks=[]})},e.js_show_entry_menu=function(t,a){t.stopPropagation(),n.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_unarchive_task.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.js_close=function(){t.close()},i.load_tasks(r,function(t){e.entries=t.entries,_.each(e.entries,function(e){e.selected=0})}),e.js_unarchive_task=function(s){_.each(e.entries,function(e){e.selected=0}),s.selected=1,wt.data.task.unarchive(r,a.tid,s.entry_id,function(){i.project.entries=[],i.project.tasks=[],n.scope.tasks=_.reject(n.scope.tasks,function(e){return e.tid===a.tid}),a.is_show_date&&(n.scope.last_date=wt.bus.task.set_is_show_data(n.scope.tasks,e.last_date))}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},i.load_project(r,!0,function(t){i.global.title="归档任务 | "+t.info.name,e.project=t,i.global.loading_done=!0,c()},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+r+"/notfound"):wt.data.error(e)})}]).controller("prj_info_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,i,n){e.js_view_prj_info=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/pop_project_info.html",controller:["$rootScope","$scope","popbox","pop_data","$location",function(e,t,i){t.popbox=i,t.js_close=function(){i.close()},t.js_goto_prj_setting=function(){e.project.info.curr_role!==kzi.constant.role.visitor&&(e.$broadcast(kzi.constant.event_names.show_project_setting),i.close())}}],resolve:{pop_data:function(){return{$scope:e}}}}).open()},e.js_star_toggle=function(e,t){wt.bus.project.set_star_toggle(t,function(){i.refresh_cache.project.set_star(t.pid,t.is_star)})},e.js_favorite_toggle=function(e,t){var i=t.is_favorite?0:1;t.is_favorite=i,wt.data.project.set_favorite(t.pid,i,function(){},function(){t.is_favorite=i?0:1})},e.js_show_project_setting_identify=function(){i.$broadcast(kzi.constant.event_names.show_project_setting_identify)}}]).controller("projects_fav_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.loading_done=!0,e.part_loading_done=!1,e.top_tab="fav",i.global.title="我收藏的项目",wt.data.project.get_favorite(function(t){e.favorite_projects=t.data},angular.noop,function(){e.part_loading_done=!0}),e.js_favorite_toggle=function(e,t){var i=t.is_favorite?0:1;t.is_favorite=i,wt.data.project.set_favorite(t.pid,i,function(){},function(){t.is_favorite=i?0:1})}}]).controller("project_notfound_ctrl",["$rootScope",function(e){e.global.title="项目不存在"}])}(),function(){"use strict";var e=function(e,t,i,n,a,s,r){function w(t){var i=null;return _.isEmpty(e.entries)?null:(_.each(e.entries,function(e){e.entry_id===t&&(i=e)}),i)}function k(e){if(0==e.length)return null;var t=e.attr("entry-id");return null==t||""==t?null:w(t)}function j(e,t,i,n){e.pos=n,t.entry_id!==i.entry_id&&(e.entry_id=i.entry_id,e.entry_name=i.name,_.isEmpty(i.tasks)?i.tasks=[e]:i.tasks.push(e),t.tasks=_.reject(t.tasks,function(t){return t.tid===e.tid}),t.tasks=_.sortBy(t.tasks,function(e){return e.pos})),i.tasks=_.sortBy(i.tasks,function(e){return e.pos})}function x(e,t,i,n,a,s){j(t,i,n,a),wt.data.task.change_entry(e,t.tid,i.entry_id,n.entry_id,a,function(){_.isFunction(s)&&s()})}function B(){e.pop_member_options=[{name:"从任务移除",ongoing:"移除中...",click:function(t,n,a,s,r){r&&(a.assigned=!0,wt.bus.member.set_task_member_toggle(o,r,a,function(){a.setting_toggle_member=!1,i.$broadcast(kzi.constant.event_names.on_task_update,e.task),a.assigned=!1},null,s))}}]}function Y(e){var i=e.pageX,n=$(".entries_panel_sortarea").parents(".mCustomScrollbar").width(),a=$(".entries_panel_sortarea").parents(".mCustomScrollbar").offset().left,s=$(".entries_panel_sortarea").parents(".mCustomScrollbar").find(".mCSB_container").eq(0).width();$(document).bind("mousemove.wtTaskEntryMove",function(e){var t=$(".entries_panel_sortarea").parents(".mCustomScrollbar").find(".mCSB_container")[0].offsetLeft;if(i>e.pageX&&a+190>e.pageX&&$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo",-t-(s/296+8)),e.pageX+200>a+n){var t=$(".entries_panel_sortarea").parents(".mCustomScrollbar").find(".mCSB_container")[0].offsetLeft;$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo",-t+(s/296+8))}})}function U(){e.entries_sort_options={appendTo:".layout_content_main",containment:".layout_content_main",placeholder:"wt-entry-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",handle:".entry_header",disabled:!1,accept:".entry",over:function(){},start:function(e,t){t.item.addClass("picked-up"),$(".wt-entry-placeholder").css({height:t.item.css("height"),width:t.item.outerWidth()}),Y(e,t)},stop:function(e,t){t.item.removeClass("picked-up"),$(document).unbind("mousemove.wtTaskEntryMove");var i=k(t.item),n=t.item.attr("entry-id"),a=k(t.item.prev()),s=k(t.item.next()),r=0;r=null==a?s.pos/2+1:null==s?a.pos+kzi.config.default_pos+1:(s.pos+a.pos)/2+1,i.pos!==r&&(i.pos=r,wt.data.entry.change_pos(o,n,r,function(){h()}))}}}function V(){e.tasks_sort_options={appendTo:".layout_content_main:last",helper:"clone",revert:10,containment:".layout_content_main",connectWith:".entry-tasks",placeholder:"wt-task-placeholder",tolerance:"pointer",dropOnEmpty:!0,delay:"75",over:function(e,t){t.placeholder.parents(".mCSB_container").not(".mCS_no_scrollbar")&&$.each(t.placeholder.parents(".mCustomScrollbar"),function(){var t=$(this).offset().top;$(this).offset().left;var n=$(this).height();$(this).width();var s=$(this).find(".wt-task-placeholder").position().top,r=$(this).find(".wt-task-placeholder").height();$(this).find(".wt-task-placeholder").width(),$(this).data("horizontalScroll")||(r>e.pageY-t&&$(this).mCustomScrollbar("scrollTo",s-20),r>t+n-e.pageY&&$(this).mCustomScrollbar("scrollTo",s+20))})},start:function(e,t){Y(e,t),$(".wt-task-placeholder").css({height:t.item.outerHeight()}),t.item.addClass("picked-up")},stop:function(e,t){t.item.removeClass("picked-up"),$(document).unbind("mousemove.wtTaskEntryMove")},update:function(t,i){e.$apply(function(){var t=i.item.attr("task-id"),n=_.findWhere(e.project.tasks,{tid:t}),a=0,s=i.item.prev().attr("task-id"),r=i.item.next().attr("task-id");if(_.isEmpty(s)&&_.isEmpty(r))a=kzi.config.default_pos;else if(_.isEmpty(s)){var l=_.findWhere(e.project.tasks,{tid:r});a=parseInt(l.pos)/2+1}else if(_.isEmpty(r)){var c=_.findWhere(e.project.tasks,{tid:s});a=c.pos+kzi.config.default_pos+1}else{var l=_.findWhere(e.project.tasks,{tid:r}),c=_.findWhere(e.project.tasks,{tid:s});a=(l.pos+c.pos)/2+1}var d=i.item.parents(".entry").attr("entry-id"),u=_.findWhere(e.entries,{entry_id:d}),p=_.findWhere(e.entries,{entry_id:n.entry_id});(d!==p.entry_id||a!==n.pos)&&u&&(d!==p.entry_id&&i.item.remove(),x(o,n,p,u,a))})}}}function X(){e.member_drop_options={accept:".avatar",over:function(){},out:function(){},hoverClass:"task-state-member-over",drop:function(t,n){var a=t.pageX;if(!(a>$(".slide-content").offset().left||a>$(".layout_right_sidebar").offset().left)){var s=$(t.target).attr("task-id");e.$apply(function(){_.each(e.entries,function(e){_.each(e.tasks,function(e){if(e.tid==s){n.helper.context.title;var a=$(n.helper.context).attr("member-id");if(null==e.members)e.members=[];else{var r=_.findWhere(e.members,{uid:a});if(null!=r)return}i.load_project_members(o,function(t){var i=_.findWhere(t.members,{uid:a});e.members.push(i),wt.data.task.assign(o,e.tid,a,function(){})})}})})})}}}}var o=t.pid,l=t.tid,c=0,d=!1,u=null,p=null,f=!1;e.pid=o,e.filter_turn_on=!1,e.new_task={members:[],expire_date:null,labels:[]},e.is_show_add_entry=!1,e.task_filters={texts:[],labels:[],members:[],date:""};var h=function(){_.isEmpty(e.entries)||(e.entries=_.sortBy(e.entries,function(e){return e.pos}),i.project.entries=e.entries)},m=function(e){r(function(){var t="#task_main_"+e;$(t).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",t)})},g=function(e){r(function(){var t="#entry_main_"+e;$(t).parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",t)})},v=function(){r(function(){$(".task-selected").parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",".task-selected")})},b=function(){r(function(){$(".entry-selected").parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",".entry-selected")})},y=function(){$(".entries_panel_sortarea").parents(".mCustomScrollbar").length>0&&$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("update")},C=function(e,t){var i=!0;if(t&&t.texts.length>0&&(i=!1,_.each(t.texts,function(t){t.length>0&&e.name.toLowerCase().indexOf(t.trim())>-1&&(i=!0)})),i&&t.labels.length>0&&(_.isEmpty(e.labels)?i=!1:(i=!1,_.each(t.labels,function(t){var n=_.any(e.labels,function(e){return e.name===t.name});n&&(i=!0)}))),i&&t.members.length>0&&(_.isEmpty(e.members)?i=!1:(i=!1,_.each(t.members,function(t){var n=_.any(e.members,function(e){return e.uid==t.uid});n&&(i=!0)}))),i){var n=moment(),a=moment(e.expire_date);if("today"===t.date){var s=a.isSame(n,"day");i=s?!0:!1}else if("tomorrow"===t.date){var r=a.isSame(n.add("days",1),"day");i=r?!0:!1}else if("week"===t.date){var o=moment().endOf("week").add("days",1),l=moment().startOf("week").add("days",1);i=a>=l&&o>=a?!0:!1}else if("nextweek"==t.date){var o=moment().endOf("week").add("days",8),l=moment().startOf("week").add("days",8);i=a>=l&&o>=a?!0:!1}else if("month"==t.date){var c=moment().endOf("month"),d=moment().startOf("month");i=a>=d&&c>=a?!0:!1}else if("due"==t.date){var s=a.isSame(n,"day");i=!s&&e.expire_date&&n>a&&a>0?!0:!1}}e.is_filter=i?!1:!0},S=function(){_.isEmpty(e.entries)||(e.filter_turn_on=e.task_filters.texts.length>0||e.task_filters.labels.length>0||e.task_filters.members.length>0||e.task_filters.date.length>0?!0:!1,_.each(e.entries,function(t){_.isEmpty(t.tasks)||_.each(t.tasks,function(t){C(t,e.task_filters)})}))};e.$on(kzi.constant.event_names.on_project_tasks_filter,function(t,i){_.extend(e.task_filters,i),S()}),e.$on(kzi.constant.event_names.project_clear_task_filter,function(){M(),e.current_filter_type=""});var D=function(t,i){if(_.isEmpty(e.filter_turn_on)){var n=!0;if("assign_me"===e.current_filter_type)n=_.any(t.members,function(e){return e.uid===i.uid});else if("my_watch"===e.current_filter_type)n=_.any(t.watchers,function(e){return e.uid===i.uid});else if("my_create"===e.current_filter_type)n=i.uid===t.uid;else if(e.task_filters.texts.length>0||e.task_filters.labels.length>0||e.task_filters.members.length>0||e.task_filters.date.length>0)return C(t,e.task_filters),void 0;t.is_filter=n?!1:!0}},E=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var i=!0;_.isEmpty(t)||(i=_.any(e.members,function(e){return e.uid==t.uid})),e.is_filter=i?!1:!0})})},T=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var i=!0;_.isEmpty(t)||(i=_.any(e.watchers,function(e){return e.uid==t.uid})),e.is_filter=i?!1:!0})})},z=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var i=!0;_.isEmpty(t)||(i=t.uid===e.uid),e.is_filter=i?!1:!0})})},M=function(){e.task_filters.texts=[],e.task_filters.labels=[],e.task_filters.members=[],e.task_filters.date="",S()},A=function(t){var n=null;_.each(t.tasks,function(e){e.is_filter=!1,e.selected=!1,l===e.tid&&(n=e)}),_.each(t.entries,function(e){var i=_.where(t.tasks,{entry_id:e.entry_id});i&&(e.tasks||(e.tasks=[]),e.tasks=i)}),e.entries=t.entries,_.each(e.entries,function(e){e.tasks=_.sortBy(e.tasks,function(e){return e.pos})}),i.global.loading_done=!0,n&&r(function(){i.locator.to_task(o,n.tid,!1)}),_.isEmpty(e.filter_turn_on)&&("assign_me"===e.current_filter_type?E(i.global.me):"my_watch"===e.current_filter_type?T(i.global.me):"my_create"===e.current_filter_type?z(i.global.me):(e.task_filters.texts.length>0||e.task_filters.labels.length>0||e.task_filters.members.length>0||e.task_filters.date.length>0)&&S())},P=function(){e.new_task.temp_name="",e.new_task.members=[],e.new_task.labels=[],e.new_task.expire_date=null},F=function(t,n,a,s){if(!_.isUndefined(t)&&!_.isUndefined(t.temp_name)&&!_.isEmpty(t.temp_name)){e.is_task_adding=!0;var l=n.entry_id,c=wt.bus.task.calculate_task_pos(n,a),d=[],u=[];_.isEmpty(t.members)||(d=_.pluck(t.members,"uid")),_.isEmpty(t.labels)||(u=_.pluck(t.labels,"name")),wt.data.task.add_full(o,l,t.temp_name,c,d,u,t.expire_date,function(e){n.tasks||(n.tasks=[]),a?n.task_top_focus=!0:n.task_bottom_focus=!0,e.data.entry_name=n.name,a?n.tasks.unshift(e.data):n.tasks.push(e.data);var t=_.findWhere(i.project.tasks,{tid:e.data.tid});t||i.project.tasks.push(e.data)},null,function(){_.isFunction(s)&&s(),e.is_task_adding=!1,0==a&&r(function(){var e=$("#entry_main_"+n.entry_id).eq(0).find(".mCustomScrollbar");e.mCustomScrollbar("scrollTo","bottom")})}),P()}};e.$on("socket_message_entry_list",function(){A(i.project)}),e.$on("socket_message_task_move",function(){A(i.project)}),e.$on("socket_message_task_add",function(t,n){var a=_.findWhere(e.entries,{entry_id:n.task.entry_id});if(a){var s=_.findWhere(a.tasks,{tid:n.task.tid});s||(D(n.task,i.global.me),a.tasks.push(n.task),a.tasks=_.sortBy(a.tasks,function(e){return e.pos}))}}),e.$on("socket_message_task_delete",function(t,i){_.each(e.entries,function(e){var t=_.findWhere(e.tasks,{tid:i.tid});t&&(e.tasks=_.reject(e.tasks,function(e){return e.tid===i.tid}))})}),e.$on("socket_message_project_member_remove",function(t,i){_.each(e.entries,function(e){e.tasks&&e.tasks.length>0&&_.each(e.tasks,function(e){e.members&&e.members.length>0&&(e.members=_.reject(e.members,function(e){return e.uid==i.uid}))})})});var I=function(){if(!_.isEmpty(e.entries)){i.project.entryIndex=0;for(var t=0;e.entries.length>t;t++)if(!_.isEmpty(e.entries[t].tasks)){i.project.entryIndex=t,i.project.currentEntry=e.entries[t],i.project.currentTask=i.project.currentEntry.tasks[0],i.project.taskIndex=0,i.project.currentTask.selected=!0;break}}},O=function(e){_.isEmpty(i.project.currentEntry)||(i.project.currentEntry.selected=!1),i.project.currentEntry=e,i.project.currentEntry.selected=!0},N=function(e){_.isEmpty(i.project.currentTask)||(i.project.currentTask.selected=!1),i.project.currentTask=e,i.project.currentTask.selected=!0},L=function(){_.isEmpty(i.project.currentEntry)||(i.project.currentEntry.selected=!1,i.project.entryIndex=0,i.project.currentEntry=null),_.isEmpty(i.project.currentTask)||(i.project.currentTask.selected=!1,i.project.taskIndex=0,i.project.currentTask=null)},H=function(t){if(e.entries.length>t+1){var n=e.entries[t+1];_.isEmpty(n.tasks)?H(t+1):(i.project.entryIndex=t+1,O(n),i.project.taskIndex=0,N(n.tasks[0]),b(),v())}},R=function(t,n){if(t>0){var a=e.entries[t-1];_.isEmpty(a.tasks)?R(t-1):(i.project.entryIndex=t-1,O(a),i.project.taskIndex=n===!0?a.tasks.length-1:0,N(a.tasks[i.project.taskIndex]),b(),v())}},q=function(t){var n=0;i.project.currentEntry&&i.project.currentEntry.entry_id===t.entry_id||_.each(e.entries,function(e){e.entry_id===t.entry_id&&(O(e),i.project.entryIndex=n),n++}),n=0,_.each(i.project.currentEntry.tasks,function(e){e.tid===t.tid&&(N(e),i.project.taskIndex=n),n++})};e.$on(kzi.constant.event_names.shortcut_key_to_task,function(t,n){if(i.global.prj_module.crud&e.project.info.permission){f=!0;var a=[kzi.constant.keyASCIIs.A,kzi.constant.keyASCIIs.L,kzi.constant.keyASCIIs.D,kzi.constant.keyASCIIs.W,kzi.constant.keyASCIIs.M];if(!(d===!0&&0>$.inArray(n,a)))switch(n){case kzi.constant.keyASCIIs.VK_DOWN:case kzi.constant.keyASCIIs.J:_.isEmpty(i.project.currentTask)?I():i.project.currentEntry.tasks.length>i.project.taskIndex+1?(i.project.taskIndex++,N(i.project.currentEntry.tasks[i.project.taskIndex]),v()):_.isEmpty(i.project.currentEntry)?I():H(i.project.entryIndex);break;case kzi.constant.keyASCIIs.VK_UP:case kzi.constant.keyASCIIs.K:_.isEmpty(i.project.currentTask)?I():i.project.taskIndex>0?(i.project.taskIndex--,N(i.project.currentEntry.tasks[i.project.taskIndex]),v()):_.isEmpty(i.project.currentEntry)?I():R(i.project.entryIndex,!0);break;case kzi.constant.keyASCIIs.VK_LEFT:_.isEmpty(i.project.currentEntry)?I():R(i.project.entryIndex,!1);break;case kzi.constant.keyASCIIs.VK_RIGHT:_.isEmpty(i.project.currentEntry)?I():H(i.project.entryIndex);break;case kzi.constant.keyASCIIs.ENTER:_.isEmpty(i.project.currentTask)||(i.global.show_slide_menu&&(i.global.show_slide_menu=!1),i.locator.to_task(o,i.project.currentTask.tid,!1));break;case kzi.constant.keyASCIIs.I:$("#btn_new_task").click();break;case kzi.constant.keyASCIIs.N:$("#btn_new_entry").click();break;case kzi.constant.keyASCIIs.M:if(!_.isEmpty(i.project.currentTask)){var s="icon_action_task_"+i.project.currentTask.tid;c=1,$("#"+s).click()}break;case kzi.constant.keyASCIIs.L:if(!_.isEmpty(i.project.currentTask)){var s="icon_action_task_"+i.project.currentTask.tid;c=2,$("#"+s).click()}break;case kzi.constant.keyASCIIs.D:if(!_.isEmpty(i.project.currentTask)){var s="icon_action_task_"+i.project.currentTask.tid;c=3,$("#"+s).click()}break;case kzi.constant.keyASCIIs.W:if(!_.isEmpty(i.project.currentTask)){var s="icon_action_task_"+i.project.currentTask.tid;c=4,$("#"+s).click()}break;case kzi.constant.keyASCIIs.A:if(!_.isEmpty(i.project.currentTask)){var s="icon_action_task_"+i.project.currentTask.tid;c=40,$("#"+s).click()}break;case kzi.constant.keyASCIIs.C:if(!_.isEmpty(i.project.currentTask)){var s="task_check_"+i.project.currentTask.tid;$("#"+s).click()}break;case kzi.constant.keyASCIIs.VK_SPACE:if(!_.isEmpty(i.project.currentTask)){var r=_.findWhere(i.project.currentTask.members,{uid:i.global.me.uid});r?(r.assigned=1,wt.bus.member.set_task_member_toggle(o,i.project.currentTask,r)):wt.bus.member.set_task_member_toggle(o,i.project.currentTask,i.global.me)}break;case kzi.constant.keyASCIIs.VK_LessThan:if(!_.isEmpty(i.project.currentEntry)&&!_.isEmpty(i.project.currentTask)&&i.project.entryIndex>0){var l=e.entries[i.project.entryIndex-1],u=kzi.config.default_pos;_.isEmpty(l.tasks)||(u=_.max(l.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),delete i.project.currentTask.$$hashKey,x(o,i.project.currentTask,i.project.currentEntry,l,u,function(){i.project.entryIndex=i.project.entryIndex-1,O(l),i.project.taskIndex=l.tasks.length-1,b(),v()})}break;case kzi.constant.keyASCIIs.VK_GreaterThan:if(!_.isEmpty(i.project.currentEntry)&&!_.isEmpty(i.project.currentTask)&&e.entries.length>i.project.entryIndex+1){var l=e.entries[i.project.entryIndex+1],u=kzi.config.default_pos;_.isEmpty(l.tasks)||(u=_.max(l.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),delete i.project.currentTask.$$hashKey,x(o,i.project.currentTask,i.project.currentEntry,l,u,function(){i.project.entryIndex=i.project.entryIndex+1,O(l),i.project.taskIndex=l.tasks.length-1,b(),v()})}break;default:}}}),e.js_mouseover_entries_panel=function(e){if(f!==!0&&!d){var t=$(e.target),n="";if(t.length>0&&(n=t.attr("task-id"),_.isEmpty(n)&&(t=t.parents(".task_style"),n=t.attr("task-id")),!_.isEmpty(n))){var a=_.findWhere(i.project.tasks,{tid:n});q(a)}}},e.js_mousemove_entries_panel=function(){f===!0&&(f=!1)},e.js_mouseleave_task=function(e,t){if(!_.isEmpty(i.project.currentTask)&&i.project.currentTask.tid===t.tid){if(d)return;L()}};var W=function(){i.load_project_from_cache(o,function(t){t&&(e.project={info:t},i.global.title="任务 | "+e.project.name),i.load_tasks(o,function(t){t.info.pid===o&&(i.global.title="任务 | "+t.info.name,e.project=t,A(t),i.global.prj_module.crud&e.project.info.permission?(U(),V(),X(),B()):(e.entries_sort_options=e.tasks_sort_options={disabled:!0},e.member_drop_options=null,e.pop_member_options=null),L())},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+o+"/notfound"):e.code===kzi.statuses.error.permission_deny.code?s.path("/project/"+o+"/notfound"):wt.data.error(e)})})};W(),e.js_add_task_pop=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_task.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.new_task={},e.entries=n.entries,_.isEmpty(e.entries)||(e.new_task.entry=e.entries[0]),e.js_to_add_entry_pop=function(){e.js_close(),$("#btn_new_entry").click()},e.js_add_task=function(t,n){if(e.is_save_ing!==!0&&!_.isEmpty(n.temp_name)){e.is_save_ing=!0;var a=wt.bus.task.calculate_task_pos(n.entry,!1);wt.data.task.add(o,n.entry.entry_id,n.temp_name,a,function(t){n.entry.tasks||(n.entry.tasks=[]),t.data.entry_name=n.entry.name,n.entry.tasks.push(t.data);var a=_.findWhere(i.project.tasks,{tid:t.data.tid});a||i.project.tasks.push(t.data),e.js_close(),m(t.data.tid),g(n.entry.entry_id)},null,function(){e.is_save_ing=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries}}}}).open()},e.js_add_entry_pop=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_entry.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_add_entry=function(n,a){if(e.is_save_ing!==!0){e.is_save_ing=!0;var s=wt.bus.entry.calculate_entry_pos(i.scope.entries,!0);wt.data.entry.add(o,a,s,function(e){e.data.tasks=[],i.entries.unshift(e.data),t.close(),r(function(){g(e.data.entry_id)},100)},null,function(){e.is_save_ing=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries}}}}).open()},e.js_add_entry=function(t){if(!_.isEmpty(t)&&e.is_adding_entry!==!0){e.is_adding_entry=!0;var i=wt.bus.entry.calculate_entry_pos(e.entries,!1);wt.data.entry.add(o,t,i,function(t){_.isEmpty(e.entries)&&(e.entries=[]),t.data.tasks=[],e.entries.push(t.data),e.entry_name=""},null,function(){e.is_adding_entry=!1,e.entry_input_focus=!0})}},e.js_add_task=function(e,t,i){var a=$(e.target).parents("wt-task-composer").attr("position");F(t,i,"top"===a,function(){})},e.js_show_entry_menu=function(t,i,a,s){var r=i.entry_id;n.popbox({target:t,top:a,left:s,templateUrl:"/ycjs/tpl/project/task/pop_entry_menu.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,n,a){t.popbox=n,t.entry_name=i.name,t.entry=i,t.step=0,t.entry_move={},t.entry_move.dest_project={},t.js_step=function(e){t.step=e},t.js_close=function(){n.close()},t.js_change_name=function(e,i){t.is_save_ing=!0,wt.data.entry.update(o,r,i,function(){a.entry.name=i},null,function(){t.is_save_ing=!1,n.close()})},t.js_archive_entry=function(){a.scope.entries=_.reject(a.scope.entries,function(e){return e.entry_id===i.entry_id}),wt.data.entry.archive(o,r,function(){e.refresh_cache.entry.del(i.entry_id)}),n.close()},t.js_del_entry=function(){a.scope.entries=_.reject(a.scope.entries,function(e){return e.entry_id===i.entry_id}),wt.data.entry.trash(o,r,function(){e.refresh_cache.entry.del(i.entry_id)}),n.close()},t.js_archived_all=function(){wt.data.task.archived_all(o,r,function(){a.entry.tasks=_.reject(a.entry.tasks,function(e){return 1==e.completed}),e.project.tasks=_.reject(e.project.tasks,function(e){return 1==e.completed&&e.entry_id==r})}),n.close()},t.js_top_open_add_task_composer=function(){i.task_top_enabled=!0,i.task_top_focus=!0;var t=$($(".popbox").scope().popbox._target).parents(".entry").children(".mCustomScrollbar");t.mCustomScrollbar("scrollTo",0),n.close()};var s=function(){e.load_project_members(o,function(e){var n=wt.bus.member.get_normal_members(e.members);_.each(n,function(e){var t=!1,n=!1;_.each(i.tasks,function(i){var a=_.pluck(i.members,"uid");_.contains(a,e.uid)?t=!0:n=!0}),e.assigned_all=t&&!n?1:0}),t.members=n})};t.js_to_move=function(){t.js_step(7),t.entries=_.reject(a.scope.entries,function(e){return e.entry_id===i.entry_id})},t.js_to_assign=function(){t.js_step(8),s()},t.js_to_set_label=function(){t.js_step(9),t.labels=_.filter(a.scope.project.info.labels,function(e){return""!==e.desc})},t.js_to_set_labels=function(){_.each(kzi.constant.labels,function(e){var i=_.findWhere(a.scope.project.info.labels,{name:e.name});i&&(t[e.name]=i.desc)}),t.step=9.1},t.js_move_to=function(e){wt.data.entry.batch_move(o,i.entry_id,e.entry_id,function(){var n=0;_.isEmpty(e.tasks)||(n=_.max(e.tasks,function(e){return e.pos})),_.each(i.tasks,function(t){n=n+kzi.config.default_pos+1,t.pos=n,t.entry_id=e.entry_id}),e.tasks=e.tasks.concat(i.tasks),i.tasks=[]},null,function(){}),n.close()},t.js_toggle_member=function(e){e.assigned_all||(wt.bus.entry.batch_assign_member(o,i,e),t.step=6)},t.js_watcher_entry_toggle=function(){i.watched?wt.data.entry.unwatch_entry(o,i.entry_id,function(){}):wt.data.entry.watch_entry(o,i.entry_id,function(){}),i.watched=!i.watched},t.js_toggle_label=function(e){wt.bus.entry.batch_set_label(o,i,e,null,null,function(){}),t.step=6},t.js_set_expire=function(e){var n=moment(e).endOf("day").valueOf();wt.data.entry.batch_set_expire(o,i.entry_id,n,function(){_.each(i.tasks,function(e){e.expire_date=n})}),t.step=6},t.js_set_expire_date=function(e){switch(e){case"today":t.expire_date=moment().format("YYYY-MM-DD");break;case"tomorrow":t.expire_date=moment().add("days",1).format("YYYY-MM-DD");break;case"week":t.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":t.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":t.expire_date=moment().endOf("month").format("YYYY-MM-DD")}t.js_set_expire(t.expire_date)},t.js_set_lables=function(e,i,n,s,r,l){t.is_save_ing=!0,wt.bus.project.label.set_labels(o,e,i,n,s,r,l,function(e){a.scope.project.info.labels=e,t.labels=_.filter(a.scope.project.info.labels,function(e){return""!==e.desc}),t.step=9},null,function(){t.is_save_ing=!1})},t.js_to_copy_entry=function(){t.new_entry={name:i.name,entry_id:i.entry_id,pos:i.pos},t.js_step(12)},t.js_to_move_entry=function(){e.projects=_.filter(e.projects,function(e){return!_.isEmpty(e.team_id)});for(var i=0;e.projects.length>i;i++){var n=_.findWhere(e.teams,{team_id:e.projects[i].team_id});_.isEmpty(n)||(e.projects[i].yes_time=-1==n.team_id?1e4:n.create_date,e.projects[i].team_name=n.name)}t.entry_move_to_prjs=_.filter(e.projects,function(t){return t.permission&e.global.prj_module.crud}),t.entry_move_to_prjs=_.sortBy(t.entry_move_to_prjs,function(e){return e.yes_time}),t.entry_move.dest_project=_.find(t.entry_move_to_prjs,function(e){return e.pid===o}),t.js_step(13)},t.move_entry=function(){return o===t.entry_move.dest_project.pid?(t.js_close(),void 0):(wt.data.entry.move(o,i.entry_id,t.entry_move.dest_project.pid,function(){e.project.entries=_.reject(e.project.entries,function(e){return e.entry_id===i.entry_id}),a.scope.entries=_.reject(a.scope.entries,function(e){return e.entry_id===i.entry_id})},function(){kzi.msg.error("移动列表失败")},function(){t.js_close()}),void 0)},t.move_entry_cancel=function(){t.js_close()},t.js_copy_entry=function(i){if(!_.isEmpty(i.name)){var n=wt.bus.entry.calculate_copy_entry_pos(a.entries,i);t.is_copying=!0,wt.data.entry.copy_entry(o,i.entry_id,i.name,n,function(i){a.entries.push(i.data),h(),e.reload_entries(o),t.js_close()},null,function(){t.is_copying=!1})}}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries,entry:i}}}}).open()},e.js_show_task_menu=function(t,i,a,s,r){return t.stopPropagation(),d&&a.tid===u?(p.close(),void 0):(a.tid&&q(a),p=n.popbox({target:t,top:s,left:r,autoAdapt:!0,templateUrl:"/ycjs/tpl/project/task/pop_task_menu.html",controller:["$scope","popbox","pop_data","$rootScope",function(e,t,n,s){e.popbox=t,e.pid=o,d=!0,u=a.tid,e.step=c,e.prj_files_loading=!1,e.task_move={},e.task_move.move_to_prj="",e.js_step=function(t){e.step=t},e.js_close=function(){t.close()};var r=!1;_.isEmpty(a.tid)&&(r=!0),s.global.me.watched=_.pluck(a.watchers,"uid").indexOf(s.global.me.uid)>=0,e.is_add_task=r,e.js_toggle_member=function(e,t,i){wt.bus.member.set_task_member_toggle(o,i,t,function(){s.$broadcast(kzi.constant.event_names.on_task_update,i)})},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(o,i,kzi.constant.xtype.task,i.tid,t)},e.js_watch_all=function(e,i,n,a){wt.bus.watch.watch_all(o,n,kzi.constant.xtype.task,n.tid,i,null,null,a),t.close()},e.labels=wt.bus.project.label.load(a,n.scope.project.info.labels),e.js_toggle_label=function(e){wt.bus.task.set_toggle_label(o,a,e)},e.js_goto_set_labels=function(){_.each(kzi.constant.labels,function(t){var i=_.findWhere(n.scope.project.info.labels,{name:t.name});i&&(e[t.name]=i.desc)}),e.step=21},e.js_set_lables=function(t,i,s,r,l,c){var d=[{name:"blue",desc:t},{name:"green",desc:i},{name:"orange",desc:s},{name:"purple",desc:r},{name:"red",desc:l},{name:"yellow",desc:c}];e.is_save_ing=!0,wt.data.project.set_labels(o,d,function(){n.scope.project.info.labels=d,e.labels=wt.bus.project.label.load(a,d),e.step=2
},null,function(){e.is_save_ing=!1})},a.expire_date_temp=a.expire_date?moment(a.expire_date).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),e.task=a,e.js_close=function(){t.close()},e.js_today=function(){a.expire_date=moment().format("YYYY-MM-DD"),e.set_expire(a.expire_date)},e.js_tomorrow=function(){a.expire_date=moment().add("days",1).format("YYYY-MM-DD"),e.set_expire(a.expire_date)},e.js_week=function(){a.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD"),e.set_expire(a.expire_date)},e.js_next_week=function(){a.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD"),e.set_expire(a.expire_date)},e.js_month=function(){a.expire_date=moment().endOf("month").format("YYYY-MM-DD"),e.set_expire(a.expire_date)},e.js_set_expire=function(t){e.set_expire(t)},e.js_cancel_expire=function(){r?(a.expire_date=null,a.expire_date_temp=null):(a.expire_date_temp=null,a.expire_date=0,a.badges.expire_date=0,wt.data.task.set_expire(o,a.tid,0,function(){})),t.close()},e.set_expire=function(i){var n=moment(i).endOf("day").valueOf();r?(a.expire_date=n,e.js_step(0)):(wt.data.task.set_expire(o,a.tid,n,function(){}),a.badges.expire_date=n,a.expire_date=n,0!==c?t.close():e.js_step(0))},e.entries=n.scope.entries,_.each(e.entries,function(e){e.move_selected=e.entry_id===a.entry_id?1:0}),e.js_move_to=function(n){if(_.each(e.entries,function(e){e.move_selected=0}),n.move_selected=1,n){var s=kzi.config.default_pos;_.isEmpty(n.tasks)||(s=_.max(n.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),x(o,a,i,n,s),t.close()}},e.js_del_task=function(){i.tasks=_.reject(i.tasks,function(e){return e.tid==a.tid}),s.project.tasks=_.reject(s.project.tasks,function(e){return e.tid==a.tid}),wt.data.task.trash(o,a.tid,function(){}),t.close()},e.js_archive_task=function(){i.tasks=_.reject(i.tasks,function(e){return e.tid==a.tid}),s.project.tasks=_.reject(s.project.tasks,function(e){return e.tid==a.tid}),wt.data.task.archive(o,a.tid,function(){}),t.close()},e.js_to_copy_task=function(){e.new_task=wt.bus.task.get_copy_task(e.task),e.js_step(31)},e.js_copy_task=function(t,i){if(!_.isEmpty(i.name)){e.is_copying=!0;var n=w(i.entry_id),a=wt.bus.task.calculate_copy_task_pos(n,i);wt.data.task.copy_task(o,i.tid,i.name,a,i.keep_comments,i.keep_members,i.keep_labels,i.keep_attachments,i.keep_todos,i.keep_watchers,function(t){e.js_close(),s.refresh_cache.task.add(t.data),n.tasks.push(t.data),n.tasks=_.sortBy(n.tasks,function(e){return e.pos})},null,function(){e.is_copying=!1})}},e.file_upload_option={url:[kzi.config.box_url(),"?pid="+a.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"task",pid:a.pid,tid:a.tid},addCallback:function(){e.js_close()}},e.uploadlink_option={url:[kzi.config.box_url(),"uploadbylink","?pid="+a.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:e.file_upload_option.formData},e.js_uploadbylink_uploading=!1,e.js_uploadbylink=function(t){if(_.isEmpty(e.uploadlink_url)||!kzi.validator.isUrl(e.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),$(t.target).prev().focus(),void 0;e.js_uploadbylink_uploading=!0;var i=_.extend({link:escape(e.uploadlink_url)},e.uploadlink_option.formData);wt.data.file.uploadlink(e.uploadlink_option.url,i,function(t){8100==t.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200==t.code&&s.file_new_upload(t,function(){kzi.msg.info("链接文件上传成功"),e.uploadlink_url="",e.js_uploadbylink_uploading=!1,e.js_close()})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){e.js_uploadbylink_uploading=!1})},e.js_to_upload_files=function(e){$(e.target).next("input[type=file]").click()},e.js_show_task_move=function(){e.is_task_moving=!1,s.projects=_.filter(s.projects,function(e){return!_.isEmpty(e.team_id)}),e.task_move.projects=_.filter(s.projects,function(e){return e.permission&s.global.prj_module.crud}),e.task_move.projects.forEach(function(e){var i=_.find(s.teams,function(t){return t.team_id===e.team_id});i&&(e.create_time="-1"===i.team_id?1e4:i.create_date,e.team_name=i.name)}),e.task_move.projects=_.sortBy(e.task_move.projects,function(e){return e.create_time}),e.task_move.move_to_prj=_.find(e.task_move.projects,function(e){return e.pid===o});var t=!0;e.$watch("task_move.move_to_prj",function(n){n&&wt.data.entry.get_list(n.pid,!0,function(n){e.task_move.entries=n.data.entries,t?(t=!1,e.task_move.move_to_entry=_.find(e.task_move.entries,function(e){return e.entry_id===i.entry_id})):e.task_move.move_to_entry=e.task_move.entries[0]})}),e.js_step(5)},e.move_task=function(){if(e.task_move.move_to_prj.pid===o){var t=kzi.config.default_pos;e.task_move.move_to_entry.tasks&&(t=_.max(e.task_move.move_to_entry.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1);var n=_.find(e.entries,function(t){return t.entry_id===e.task_move.move_to_entry.entry_id});x(o,a,i,n,t,function(){e.js_close()})}else e.is_task_moving=!0,wt.data.task.move(o,a.tid,e.task_move.move_to_prj.pid,e.task_move.move_to_entry.entry_id,function(){s.$broadcast(kzi.constant.event_names.on_task_trash,a),s.refresh_cache.task.trash(a.tid)},function(){kzi.msg.error("移动任务失败")},function(){e.is_task_moving=!1,e.js_close()})},e.timingtask={name:"循环创建任务 "+e.task.name},e.js_timingtask_add=function(){e.timingtask.recurrence=parseInt(e.timingtask.recurrence),e.timingtask.tid=e.task.tid,wt.data.timingtask.add_timingtask(o,e.timingtask,function(){kzi.msg.info("循环任务添加成功"),s.$broadcast(kzi.constant.event_names.show_project_timingtask_list),e.js_close()})}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries,entry:i}}}}),p.open().then(function(){c=0,d=!1,u=null}),void 0)},e.js_open_task_detail=function(e,t){i.locator.to_task(t.pid,t.tid,!1)},e.js_show_assign_me_tasks=function(){M(),"assign_me"==e.current_filter_type?(E(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="assign_me",e.filter_turn_on=!0,E(i.global.me))},e.js_show_my_watch_tasks=function(){M(),"my_watch"===e.current_filter_type?(T(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="my_watch",e.filter_turn_on=!0,T(i.global.me))},e.js_show_my_create_tasks=function(){M(),"my_create"===e.current_filter_type?(z(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="my_create",e.filter_turn_on=!0,z(i.global.me))},e.js_show_project_tasks_filter=function(){e.filter_turn_on||e.$broadcast(kzi.constant.event_names.show_project_tasks_filter),M(),e.current_filter_type=""},e.js_open_add_task_composer=function(e,t){this.task_name="",t.task_bottom_enabled=!0,t.task_bottom_focus=!0,$(e.target).parents(".entry").eq(0).find(".mCustomScrollbar")},e.js_cancel=function(e,t){e.task_bottom_enabled=!1,e.task_top_enabled=!1,t&&P()},e.js_complete_task=function(t,n,a){if(i.global.prj_module.crud&e.project.info.permission){t.stopPropagation();var s=a.tid;if(a.completed)a.completed=0,wt.data.task.uncomplete(o,s,function(){});else if(1==i.project.info.auto_archived){var r=0==$(t.target).children("i").length?$(t.target):$(t.target).children("i");r.removeClass("icon-check-empty").addClass("icon-check-sign");var l=$(t.target).parents(".task").eq(0);l.css("overflow","hidden"),l.animate({opacity:0,height:0,"min-height":0,"padding-top":0,"padding-bottom":0,border:0},600,function(){l.addClass("task-hidden"),l.attr("style",""),a.completed=1,n.tasks=_.reject(n.tasks,function(e){return e.tid==s}),i.project.tasks=_.reject(i.project.tasks,function(e){return e.tid==s}),wt.data.task.complete(o,s,function(){})})}else a.completed=1,wt.data.task.complete(o,s,function(){})}},e.js_show_member=function(t,a,s){i.global.prj_module.crud&e.project.info.permission&&(t.stopPropagation(),n.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_member.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.member=s,e.js_close=function(){t.close()},e.js_remove_member=function(){var e=_.findWhere(a.members,{uid:s.uid});e&&(a.members=_.reject(a.members,function(e){return e.uid===s.uid})),s.assigned=0,_.isEmpty(a.tid)||wt.data.task.unassign(o,a.tid,s.uid,function(){}),t.close()}}]}).open())},e.$on(kzi.constant.event_names.on_task_trash,function(t,i){if(i){var n=_.findWhere(e.entries,{entry_id:i.entry_id});n&&(n.tasks=_.reject(n.tasks,function(e){return e.tid==i.tid}))}}),e.$on(kzi.constant.event_names.on_task_move,function(t,i,n){if(i){var a=_.findWhere(e.entries,{entry_id:n});a&&(a.tasks=_.reject(a.tasks,function(e){return e.tid==i.tid}));var s=_.findWhere(e.entries,{entry_id:i.entry_id});s&&s.tasks.push(i)}}),e.$on(kzi.constant.event_names.on_right_menu,function(t,n){if(i.global.prj_module.watch&e.project.info.permission){var a=kzi.helper.mouse_position(n),s=null,r=null;if($(n.target).hasClass("task")?s=$(n.target).attr("task-id"):$(n.target).parents(".task").length>0?s=$(n.target).parents(".task").attr("task-id"):$(n.target).parents(".entry").length>0&&(r=$(n.target).parents(".entry").attr("entry-id")),s){var o=_.findWhere(e.project.tasks,{tid:s}),r=o.entry_id,l=_.findWhere(e.entries,{entry_id:r});e.js_show_task_menu(n,l,o,a.y,a.x)}else{var l=_.findWhere(e.entries,{entry_id:r});e.js_show_entry_menu(n,l,a.y,a.x)}}}),e.$on(kzi.constant.event_names.project_permission_change,function(e,t){t.pid===o&&W()}),e.$on("leftMenuToggleSuccess",function(e,t){t.collapse&&y()}),e.$on("sidebarToggleSuccess",function(e,t){t.collapse&&y()})};wt.project.controller("task_list_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$location","$timeout",e])}(),function(){"use strict";wt.project.controller("project_event_ctrl",["$scope","$routeParams","$rootScope","$popbox","$document","$timeout","$location",function(e,t,i,n,a,s,r){function g(){var t=e.myCalendar.fullCalendar("getView");$("#calendar_title").html(t.title);var i=new Date(t.start).getTime(),n=new Date(t.end).getTime(),a=(new Date).getTime();i>a||a>n?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}var o=t.pid;e.member_id="all",e.calendar_view="month",e.is_show_add=!1;var d,u,l="",c=null,p=function(){e.myCalendar.fullCalendar("refetchEvents")},f=function(){e.myCalendar.fullCalendar("removeEvents",[]),e.is_show_add=!1,l=""},h=function(e,t,i,n,a){_.isEmpty(c)||d!==e||u!==t?wt.data.event.get_list(o,e,t,function(n){d=e,u=t,c=n.data,_.isFunction(i)&&i(n.data)},n,a):(_.isFunction(i)&&i(c),_.isFunction(a)&&a())};i.load_project(o,!0,function(t){i.global.title="日历 | "+t.info.name,e.project=t},function(e){e.code==kzi.statuses.prj_error.not_found.code?r.path("/project/"+o+"/notfound"):wt.data.error(e)}),e.calendarEventSources=[{events:function(t,n,a){var t=Math.round(t.getTime()),n=Math.round(n.getTime());i.load_tasks(o,function(i){var s=_.filter(i.tasks,function(e){return e.expire_date=kzi.util.dateToTimestamp(e.expire_date),e.expire_date>=t&&n>=e.expire_date}),r=[],o=!1;_.each(s,function(t){if("all"!=e.member_id){var i=_.findWhere(t.members,{uid:e.member_id});o=i?!0:!1}else o=!0;if(o){var n={id:t.tid,title:t.name,allDay:!1,start:(t.expire_date+"").substring(0,10),url:"",editable:!0,textColor:"#333",extend:{expire_date:t.expire_date,badges:t.badges,pid:t.pid,xtype:kzi.constant.xtype.task}};1==t.completed?(n.className="cal_task_completed slide-trigger",1==e.project.info.show_completed&&r.push(n)):(n.className="cal_task_uncompleted slide-trigger",r.push(n))}}),h(t,n,function(t){r=r.concat(t),e.is_show_add&&e.project.info.curr_role!==kzi.constant.role.guest&&r.unshift({id:"-1",title:"  + 新建任务",allDay:!0,start:(l+"").substring(0,10),url:"",editable:!1,className:"cal_task_add",textColor:"#aaa"}),a(r)})})}}],e.calendarConfig={header:!1,height:kzi.util.heightNoHeader()-95,editiable:!0,droppable:!0,titleFormat:{month:"yyyy年MM月",week:"yyyy年MM月d日 {&#8212; [ yyyy年][ MM月]d日}",day:"yyyy年MM月d日 dddd"},firstDay:0,weekMode:"liquid",allDayText:"全天",axisFormat:"HH:mm",timeFormat:"✓",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],buttonText:{today:"今天",month:"月",agendaWeek:"周",agendaDay:"日"},defaultView:e.calendar_view,dayClick:function(t,i,n,a){kzi.constant.prj_module.crud&e.project.info.permission&&e.onDayClick(t,i,n,a)},loading:function(e){g(),i.global.loading_done=e?!1:!0},eventClick:function(t,i,n){e.onEventClick(t,i,n)},eventDrop:function(e,t){if(0!==t){var c=e.extend.pid;if(e.extend.xtype===kzi.constant.xtype.task){var d=e.id,u=e.extend.expire_date,p=moment(u).add("days",t).endOf("day").valueOf();wt.data.task.set_expire(c,d,p,function(){if(e.extend.expire_date=p,e.extend.badges.expire_date=p,i.project.info&&i.project.info.pid==c){var n=_.findWhere(i.project.tasks,{tid:d});n&&(n.expire_date=p,n.badges.expire_date=p)}})}else{var f=moment(e.start),h=moment(e.extend.end).add("days",t);wt.data.event.update_date(c,e.id,f.format("YYYY-MM-DD"),f.format("HH:mm"),h.format("YYYY-MM-DD"),h.format("HH:mm"),function(){e.extend.end=h.valueOf()})}}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.heightNoHeader()-95)}};var m=function(){s(function(){$("#calendar").fullCalendar("option","height",kzi.util.heightNoHeader()-95)},25)};m(),e.$watch("$root.global.right_isfold",function(){a.find(".prj_sidebar_panel").length>0&&m()}),e.onEventClick=function(t,n){if(n.preventDefault(),n.stopPropagation(),"-1"===t.id){var r=new Date(t.start).getTime();$(n.target).hasClass("fc-event-title")?$(n.target).addClass("js-popbox").attr("data-placement","right").attr("data-align","middle"):$(n.target).child(".fc-event-title").eq(0).addClass("js-popbox").attr("data-placement","right").attr("data-align","middle"),s(function(){e.js_show_task_pop(n,r)})}else t.extend.xtype===kzi.constant.xtype.task?i.locator.to_task(t.extend.pid,t.id,!1):t.extend.xtype===kzi.constant.xtype.event&&s(function(){i.locator.to_event(t.extend.pid,t.id,!1)})},e.onDayClick=function(t,a,s){if(i.global.loading_done){var o=kzi.helper.mouse_position(s);$(s.currentTarget).attr("data-placement","right"),$(s.currentTarget).attr("data-align","top"),$(s.currentTarget).addClass("js-popbox"),$(s.currentTarget).attr("data-auto-adapt","true"),n.popbox({target:s,templateUrl:"/ycjs/tpl/project/event/pop_add_event.html",controller:"pop_new_event_ctrl",top:o.y,left:o.x,resolve:{pop_data:function(){return{save_success:function(t,i){e.js_new_event_success(i.event)},scope:e,start_date:t}}}}).open()}},e.changeView=function(t){t!==e.calendar_view&&(e.myCalendar.fullCalendar("changeView",t),e.calendar_view=t,g(),f(),p())},e.prev=function(){e.myCalendar.fullCalendar("prev"),g()},e.next=function(){e.myCalendar.fullCalendar("next"),g()},e.today=function(){e.myCalendar.fullCalendar("today"),g()},e.$on(kzi.constant.event_names.on_task_update,function(e,t){f(),p(),i.locator.show_prj&&i.refresh_cache.task.update_full(t)}),e.$on(kzi.constant.event_names.on_task_trash,function(){f(),p()}),e.$on(kzi.constant.event_names.on_task_complete,function(){f(),p()}),e.$on(kzi.constant.event_names.shortcut_key_to_task,function(t,n){if(i.global.prj_module.crud&e.project.info.permission)switch(n){case kzi.constant.keyASCIIs.I:case kzi.constant.keyASCIIs.N:$("#btn_new_event").click();break;default:}}),e.$on(kzi.constant.event_names.on_event_update,function(e,t,i,n){if(c){var a=_.findWhere(c,{id:t.event_id});if(i===kzi.constant.event_update_type.one&&a&&(a.title=t.name,a.start=moment(t.start.date).valueOf().toString().substring(0,10),a.end=moment(t.end.date).valueOf().toString().substring(0,10),f(),p()),i===kzi.constant.event_update_type.follow_up){var s=new Date(t.start.date)-new Date(a.start),r=new Date(t.end.date)-new Date(t.start.date),o=new Date(a.start);s>0?(c.forEach(function(e){var i=new Date(e.start);e.extend.recurrence_id===t.recurrence_id&&i>=o&&(e.start=moment(e.start).add("milliseconds",s),e.end=moment(e.start).add("milliseconds",r),e.start=e.start.valueOf().toString().substring(0,10),e.end=e.end.valueOf().toString().substring(0,10),n&&(e.extend.recurrence_id=n))}),f(),p()):(c=[],h(d,u,function(){f(),p()},null,function(){}))}}}),e.$on(kzi.constant.event_names.on_event_trash,function(e,t,i){if(c){var n=parseInt(i);switch(n){case kzi.constant.event_trash_type.one:c=_.reject(c,function(e){return e.id===t.event_id});break;case kzi.constant.event_trash_type.follow_up:c=_.reject(c,function(e){var i=new Date(e.start).getTime();return i>=t.start.date&&e.extend.recurrence_id===t.recurrence_id});break;case kzi.constant.event_trash_type.all:c=_.reject(c,function(e){return e.extend.recurrence_id===t.recurrence_id})}}f(),p()}),e.js_new_event_success=function(e){e.forEach(function(e){if(e.end.date>=d&&u>=e.start.date){var t=_.findWhere(i.projects,{pid:e.pid});if(t){var n=wt.bus.event.event_to_calEvent(e,t.bg);c&&(c.push(n),f(),p()),t.is_calendar||(t.is_calendar=1)}else c=null,f(),p()}})},e.js_show_task_pop=function(t,a){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_task_entry.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.new_task={expire_date:moment().format("YYYY-MM-DD")},null!=a&&(e.new_task.expire_date=moment(a).format("YYYY-MM-DD")),e.loading_entries=!0,i.load_tasks(o,function(t){e.entries=t.entries,_.isEmpty(e.entries)||(e.new_task.entry=e.entries[0])},null,function(){e.loading_entries=!1}),e.js_set_expire_date=function(t){switch(t){case"today":e.new_task.expire_date=moment().format("YYYY-MM-DD");break;case"tomorrow":e.new_task.expire_date=moment().add("days",1).format("YYYY-MM-DD");break;case"week":e.new_task.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":e.new_task.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":e.new_task.expire_date=moment().endOf("month").format("YYYY-MM-DD")}e.js_step(0)},e.js_open_add_entry=function(t){e.is_from_task=t,e.step=1},e.js_add_task=function(t,n){if(e.is_saving_task!==!0&&!_.isEmpty(n.name)&&!_.isEmpty(n.entry)){e.is_saving_task=!0;var a=wt.bus.task.calculate_task_pos(n.entry,!1),s=moment(n.expire_date).endOf("day").valueOf();wt.data.task.add_full(o,n.entry.entry_id,n.name,a,[],[],s,function(t){n.entry.tasks||(n.entry.tasks=[]),n.entry.tasks.push(t.data),i.refresh_cache.task.add(t.data),e.js_close(),f(),p()},null,function(){e.is_saving_task=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_more_menu=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_event_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.member_id=n.scope.member_id,i.load_project_members(o,function(t){var n=[],a={};_.each(wt.bus.member.get_normal_members(t.members),function(e){e.uid!==i.global.me.uid?n.push(e):a=e}),e.members=n,e.self=a}),e.js_change_member=function(t){f(),n.scope.member_id=t,e.member_id=t,p()},e.js_prefs_show_completed=function(){var t=1;t=1==i.project.info.show_completed?0:1,i.project.info.show_completed=t,wt.data.project.set_prefs(o,"show_completed",t),e.step=0,f(),p()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}]).controller("pop_new_event_ctrl",["$rootScope","$scope","popbox","$routeParams","pop_data",function(e,t,i,n,a){var s=n.pid,r=a.save_success,o=a.scope;t.popbox=i,t.step=0,t.repeat_intervals=kzi.constant.event_repeat_intervals;var l=moment().format("HH"),c=moment().format("mm"),d=kzi.constant.all_hour_sections,u=kzi.constant.all_minute_sections,p=function(){t.start_hour_sections=d,t.start_minute_sections=u;var e=c.substring(0,1)+"0";t.new_event.start_minute=e,t.new_event.end_minute=e,t.new_event.repeat_interval=t.repeat_intervals[0]},f=function(){var e=t.new_event.start_date,i=t.new_event.start_hour,n=t.new_event.start_minute,a=t.new_event.end_date;e>=a?(t.new_event.end_date=e,i>=t.new_event.end_hour?(t.new_event.end_hour=i,n>=t.new_event.end_minute&&(t.new_event.end_minute=n),t.end_minute_sections=_.filter(u,function(e){return e>=n?!0:void 0})):t.end_minute_sections=u,t.end_hour_sections=_.filter(d,function(e){return e>=i?!0:void 0})):(t.end_hour_sections=d,t.end_minute_sections=u)},h=moment();a.start_date&&(h=moment(a.start_date),l="09",c="00"),t.new_event={start_date:h.format("YYYY-MM-DD"),end_date:h.format("YYYY-MM-DD"),start_hour:l,start_minute:c,end_hour:h.format("HH"),end_minute:c,attendees:[e.global.me]},s?(t.new_event.pid=s,t.show_project_select=!1):(e.load_projects(function(e){t.selected_projects=wt.bus.project.get_member_projects(e);var i=wt.bus.team.find_add_prj_teams();t.selected_projects.forEach(function(e){var n=_.find(i,function(t){return t.team_id===e.team_id});n&&(e.create_time="-1"===n.team_id?1e4:n.create_date,e.team_name=n.name)}),t.selected_projects=_.sortBy(t.selected_projects,function(e){return e.create_time}),_.isEmpty(t.selected_projects)||(t.new_event.pid=t.selected_projects[0].pid,t.new_event.original_pid=t.new_event.pid)}),t.show_project_select=!0),p(),t.$watch("[new_event.start_date,new_event.start_hour,new_event.start_minute]",function(){f()},!0),f(),t.js_to_set_date=function(e){t.current_date_type=e,"start_date"===e?(t.current_date=t.new_event.start_date,t.min_date=null,t.set_date_title="设置开始时间"):(t.current_date=t.new_event.end_date,t.min_date=t.new_event.start_date,t.set_date_title="设置结束时间"),t.js_step(1)},t.js_set_date=function(e){e=moment(e).format("YYYY-MM-DD"),"start_date"===t.current_date_type?(t.new_event.start_date=e,p(moment(e))):(t.new_event.end_date=e,f()),t.js_step(0)},t.js_change_end_hour=function(){f()},t.js_change_project=function(){t.new_event.pid!==t.new_event.original_pid&&(t.new_event.original_pid=t.new_event.pid,t.new_event.attendees=[e.global.me])},t.js_to_attendee=function(){t.members=[],t.loading_members=!0,e.load_project_members(t.new_event.pid,function(e){var i=[];_.each(e.members,function(e){if(1===e.status&&e.role!==kzi.constant.role.guest){var n=_.findWhere(t.new_event.attendees,{uid:e.uid});e.assigned=n?1:0,i.push(e)}}),t.members=i,t.loading_members=!1},function(){t.loading_members=!1}),t.js_step(2)},t.js_toggle_member=function(e){e.setting_toggle_member!==!0&&(e.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(s,t.new_event,e,function(){},null,function(){e.setting_toggle_member=!1}))},t.js_save_event=function(){if(!_.isEmpty(t.new_event.name)){t.new_event.is_saving=!0;var n=_.pluck(t.new_event.attendees,"uid"),a=t.new_event.end_date,s=t.new_event.end_hour+":"+t.new_event.end_minute,l=t.new_event.location,c=t.new_event.start_hour+":"+t.new_event.start_minute;wt.data.event.add(t.new_event.pid,t.new_event.name,l,n,t.new_event.start_date,c,a,s,t.new_event.repeat_interval.key,function(e){t.js_close(),_.isFunction(r)&&r(o,{event:e.data,popbox:i})},function(){},function(){t.new_event.is_saving=!1})}},t.js_add_all=function(){_.each(t.members,function(e){e.assigned=1,_.findWhere(t.new_event.attendees,{uid:e.uid})||t.new_event.attendees.push(e)}),t.js_step(0)},t.js_close=function(){i.close()},t.js_step=function(e){t.step=e}}])}(),function(){"use strict";wt.project.controller("project_graph_ctrl",["$scope","$routeParams","$rootScope","$popbox","$document","$timeout","$location","$q",function(e,t,i,n,a,s,r,o){function c(){function e(){$(window).trigger("resize")}setTimeout(e,50)}function d(e){var t=400,i=50,n=e.length;return Math.max((n+3)*i,t)}var l=t.pid;moment.lang(kzi.config.lang);var u=function(t){var i=[],n=[],a=[];t=_.sortBy(t,function(e){return e.completed+e.uncompleted}),t=Array.prototype.slice.call(t).reverse(),e.height=d(t).toString()+"px";for(var s=0;t.length>s;s++)i.push(t[s].display_name),n.push(parseInt(t[s].completed)),a.push(parseInt(t[s].uncompleted));var r="#e1e1e1",o="#fbfbfb";o=_.max(n)>0||_.max(a)>0?"#e1e1e1":"#fbfbfb";var l={chart:{renderTo:"members_task_graph",type:"column",backgroundColor:"#fbfbfb",inverted:!0},credits:{enabled:!1},title:{text:""},scrollbar:{enabled:!0},xAxis:[{title:{text:""},tickInterval:1,tickColor:r,categories:i,lineColor:r},{title:{text:""},opposite:!0,tickInterval:1,tickColor:r,categories:i,lineColor:r}],yAxis:[{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:r,gridLineColor:o,min:0,floor:0,minRange:4},{title:{text:""},lineWidth:1,opposite:!0,lineColor:r,gridLineColor:o,min:0,floor:0,minRange:4}],series:[{data:a,name:"未完成",animation:!1,stacking:"normal"},{data:n,name:"已完成",animation:!1,stacking:"normal"}],colors:["#f7af49","#88b244"],tooltip:{backgroundColor:"#FCFFC5"}};new Highcharts.Chart(l),c()},p=function(e){var t=[],i=[],n=[];e=_.sortBy(e,function(e){return e.completed+e.uncompleted}),e=Array.prototype.slice.call(e).reverse(),e.forEach(function(e){t.push(e.name),i.push(e.completed),n.push(e.uncompleted)});var a="#e1e1e1",s="#fbfbfb";s=_.max(i)>0||_.max(n)>0?"#e1e1e1":"#fbfbfb";var r={chart:{animation:!1,renderTo:"entry_task_graph",type:"column",backgroundColor:"#fbfbfb"},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},tickInterval:1,categories:t,lineColor:a,tickColor:a},{title:{text:""},tickInterval:1,opposite:!0,categories:t,lineColor:a,tickColor:a}],yAxis:[{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:1,minTickInterval:1,opposite:!0,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0}],series:[{data:n,name:"未完成",stacking:"normal"},{data:i,name:"已完成",stacking:"normal"}],colors:["#f7af49","#88b244"]};new Highcharts.Chart(r),c()},f=function(e){var t=[],i=[],n=[];e=_.sortBy(e,function(e){return e.completed+e.uncompleted}),e=Array.prototype.slice.call(e).reverse(),e.forEach(function(e){t.push(e.label_desc),i.push(e.completed),n.push(e.uncompleted)});var a="#e1e1e1",s="#fbfbfb";_.max(i)>0||_.max(n)>0?s="#e1e1e1":(s="#fbfbfb",0===t.length&&(t.push("没有定义标签"),i.push(0),n.push(0)));var r={chart:{animation:!1,renderTo:"labels_task_graph",type:"column",backgroundColor:"#fbfbfb"},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},tickInterval:1,categories:t,tickColor:a,lineColor:a},{title:{text:""},tickInterval:1,opposite:!0,categories:t,tickColor:a,lineColor:a}],yAxis:[{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:1,minTickInterval:1,opposite:!0,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0}],series:[{data:n,name:"未完成",stacking:"normal"},{data:i,name:"已完成",stacking:"normal"}],colors:["#f7af49","#88b244"]};new Highcharts.Chart(r),c()},h=function(t){var i=[],n=[],a=[];t=_.sortBy(t,function(e){return e.completed+e.expired}),t=Array.prototype.slice.call(t).reverse(),t.forEach(function(e){i.push(e.display_name),n.push(e.completed),a.push(e.expired)}),e.height=d(t).toString()+"px";var s="#e1e1e1",r="#fbfbfb";r=_.max(n)>0||_.max(a)>0?"#e1e1e1":"#fbfbfb";var l={chart:{animation:!1,renderTo:"pulse_member_graph",type:"column",backgroundColor:"#fbfbfb",inverted:!0},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},categories:i,lineColor:s,tickColor:s},{title:{text:""},categories:i,opposite:!0,lineColor:s,tickColor:s}],yAxis:[{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:s,gridLineColor:r,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:1,minTickInterval:1,opposite:!0,lineColor:s,gridLineColor:r,minRange:4,min:0,floor:0}],series:[{data:a,name:"已过期",stacking:"normal",animation:!1},{data:n,name:"已完成",stacking:"normal",animation:!1}],colors:["#f7af49","#88b244"]};window.$q=o,o.defer(),new Highcharts.Chart(l),c()},m=function(e){var t=["周日","周一","周二","周三","周四","周五","周六"],i=[],n=[];e.forEach(function(e){i.push(e.completed),n.push(e.created)});var a="#e1e1e1",s="#fbfbfb";s=_.max(i)>0||_.max(n)>0?"#e1e1e1":"#fbfbfb";var r={chart:{renderTo:"pulse_weekly_graph",type:"line",backgroundColor:"#fbfbfb"},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},categories:t,lineColor:a,tickColor:a},{title:{text:""},opposite:!0,categories:t,lineColor:a,tickColor:a}],plotOptions:{line:{enabled:!0}},yAxis:[{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:1,minTickInterval:1,opposite:!0,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0}],series:[{data:i,name:"完成",animation:!1},{data:n,name:"新增",animation:!1}],colors:["#88b244","#f7af49"]};window.$q=o,o.defer(),new Highcharts.Chart(r),c()},g=function(t){var i=[],n=[];t=_.sortBy(t,function(e){return e.completed}),t=Array.prototype.slice.call(t).reverse(),t.forEach(function(e){i.push(e.display_name),n.push(e.completed)}),e.height=d(t).toString()+"px";var a="#e1e1e1",s="#fbfbfb";s=_.max(n)>0?"#e1e1e1":"#fbfbfb";var r={chart:{animation:!1,renderTo:"daily_task_graph",type:"column",backgroundColor:"#fbfbfb",inverted:!0},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},tickInterval:1,categories:i,lineColor:a,gridLineColor:s},{title:{text:""},tickInterval:1,opposite:!0,categories:i,lineColor:a,gridLineColor:s}],yAxis:[{title:{text:""},minTickInterval:1,lineWidth:1,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0},{title:{text:""},minTickInterval:1,lineWidth:1,opposite:!0,lineColor:a,gridLineColor:s,minRange:4,min:0,floor:0}],series:[{data:n,name:"已完成",animation:!1}],colors:["#88b244","#f7af49"]};new Highcharts.Chart(r),c()},v=function(){e.tab_index=1,e.part_loading_done=!1,wt.data.graph.overview(l,function(t){t.data.overview.percentage=parseInt(100*(t.data.overview.completed/(t.data.overview.completed+t.data.overview.uncompleted))),e.overview=t.data.overview,u(t.data.members),f(t.data.labels),e.hide_overview_labels_task_graph=!1,_.isEmpty(t.data.entries)?e.hide_overview_entry_task_graph=!0:(p(t.data.entries),e.hide_overview_entry_task_graph=!1)},null,function(){e.part_loading_done=!0})},b=function(){e.tab_index=4,e.disable_pulse_next=e.pulse_end>moment()?!0:!1,e.pulse_graph_date=e.pulse_start.format("YYYY年MM月DD日")+" - "+e.pulse_end.format("MM月DD日"),e.part_loading_done=!1,wt.data.graph.get_pulse(l,e.pulse_start.valueOf(),e.pulse_end.valueOf(),function(t){e.weekly_overview=t.data.overview,h(t.data.members),m(t.data.weekly)},null,function(){e.part_loading_done=!0})},y=function(){e.tab_index=8,e.part_loading_done=!1;var t=e.daily_start,n=e.daily_end;e.disable_daily_next=n>moment()?!0:!1,wt.data.graph.get_daily(l,t.valueOf(),n.valueOf(),function(t){e.daily_overview=t.data.overview,g(t.data.members),e.daily_members=t.data.members,e.daily_completed_tasks=t.data.completed,e.daily_created_tasks=t.data.created},null,function(){i.global.loading_done=!0,e.part_loading_done=!0})};e.js_change_tab=function(t){e.tab_index=t,c()},e.js_to_overview=function(){e.graph_type="overview",kzi.localData.set("prj_graph_view_type",e.graph_type),v()},e.js_to_pulse=function(){e.graph_type="pulse",kzi.localData.set("prj_graph_view_type",e.graph_type),e.pulse_start=moment().startOf("week").add("days"),e.pulse_end=moment().endOf("week").add("days"),b()},e.to_pulse_next_week=function(){e.pulse_end>moment()||e.part_loading_done&&(e.pulse_start=e.pulse_start.add("days",7),e.pulse_end=e.pulse_end.add("days",7),b())},e.to_pulse_prev_week=function(){e.part_loading_done&&(e.pulse_start=e.pulse_start.add("days",-7),e.pulse_end=e.pulse_end.add("days",-7),b())},e.js_to_daily=function(){e.graph_type="daily",kzi.localData.set("prj_graph_view_type",e.graph_type),e.daily_start=moment().startOf("day"),e.daily_end=moment().endOf("day"),y()},e.js_to_next_daily=function(){e.daily_end>moment()||e.part_loading_done&&(e.daily_start=e.daily_start.add("days",1),e.daily_end=e.daily_end.add("days",1),y())},e.js_to_prev_daily=function(){e.part_loading_done&&(e.daily_start=e.daily_start.add("days",-1),e.daily_end=e.daily_end.add("days",-1),y())};var w=function(){var t=kzi.localData.get("prj_graph_view_type");switch(_.isEmpty(t)&&(t="overview"),t){case"overview":e.js_to_overview();break;case"pulse":e.js_to_pulse();break;case"daily":e.js_to_daily();break;default:}};i.load_project(l,!0,function(t){i.global.title="简报 | "+t.info.name,i.global.loading_done=!0,e.project=t,w(),"-1"!==e.project.info.team_id?1===parseInt(e.project.info.archived)?e.permission=kzi.constant.permission.project_archived:2===parseInt(e.project.info.team.status)&&(e.permission=kzi.constant.permission.ok):e.permission=1===parseInt(e.project.info.archived)?kzi.constant.permission.project_archived:kzi.constant.permission.ok
},function(e){e.code==kzi.statuses.prj_error.not_found.code?r.path("/project/"+l+"/notfound"):wt.data.error(e)});var k=function(t){var i=null;return _.isEmpty(e.daily_completed_tasks)||(i=_.findWhere(e.daily_completed_tasks,{tid:t})),i},j=function(t){var i=null;return _.isEmpty(e.daily_created_tasks)||(i=_.findWhere(e.daily_created_tasks,{tid:t})),i},C=function(){if(!_.isEmpty(e.daily_members)&&(_.each(e.daily_members,function(e){e.completed=0}),!_.isEmpty(e.daily_completed_tasks))){var t=[];_.each(e.daily_completed_tasks,function(e){var i=_.pluck(e.members,"uid");t=t.concat(i)}),_.each(e.daily_members,function(e){_.each(t,function(t){t===e.uid&&(e.completed=e.completed+1)})}),g(e.daily_members)}},S=function(t,i){if("completed"===t){if(!_.isEmpty(i.members)){var n=_.pluck(i.members,"uid");_.each(e.daily_members,function(e){_.contains(n,e.uid)&&(e.completed=e.completed+1)})}}else if("uncompleted"===t&&!_.isEmpty(i.members)){var n=_.pluck(i.members,"uid");_.each(e.daily_members,function(e){_.contains(n,e.uid)&&(e.completed=e.completed-1)})}g(e.daily_members)};e.$on(kzi.constant.event_names.on_task_update,function(e,t){if(t){var n=k(t.tid),a=j(t.tid);_.isEmpty(n)||(n.name=t.name,n.desc=t.desc,n.pos=t.pos,n.completed=t.completed,n.expire_date=t.expire_date,n.badges=t.badges,n.labels=t.labels,n.members.length!=t.members.length&&(n.members=t.members,C()),n.watchers=t.watchers,n.todos=t.todos),_.isEmpty(a)||(a.name=t.name,a.desc=t.desc,a.pos=t.pos,a.completed=t.completed,a.expire_date=t.expire_date,a.badges=t.badges,a.labels=t.labels,a.members=t.members,a.watchers=t.watchers,a.todos=t.todos),i.locator.show_prj&&i.refresh_cache.task.update_full(t)}}),e.$on(kzi.constant.event_names.on_task_trash,function(t,i){if(i&&!i.archived){var n=k(i.tid);_.isEmpty(n)||S("uncompleted",i),e.daily_completed_tasks=_.reject(e.daily_completed_tasks,function(e){return e.tid==i.tid}),e.daily_created_tasks=_.reject(e.daily_created_tasks,function(e){return e.tid==i.tid})}}),e.$on(kzi.constant.event_names.on_task_complete,function(t,i){if(i){var n=k(i.tid),a=j(i.tid);i.completed||(_.isEmpty(n)||(n.completed=i.completed,e.daily_completed_tasks=_.reject(e.daily_completed_tasks,function(e){return e.tid==i.tid}),S("uncompleted",i)),_.isEmpty(a)||(a.completed=i.completed)),i.completed&&(_.isEmpty(a)&&(a=i),a.completed=i.completed,e.daily_completed_tasks.push(i),S("completed",i))}})}])}(),function(){"use strict";wt.project.controller("project_file_list_ctrl",["$scope","$routeParams","$rootScope","$location","$modal","$popbox",function(e,t,i,n,a,s){var r=t.pid,o=t.folder_id||"";e.pid=r,e.current_tab=0,e.page=1,e.filter=0,e.has_more_files=!0,e.files=[],e.current_filter="default";var l={"default":0,name:1,create_date:2,update_date:3,undefined:0};e.filter=0,e.files_controls={},e.files_controls.sort_method_id=l[e.current_filter],e.files_controls.filter=e.filter,e.files_controls.pid=r,e.files_controls.folder_id=o,e.files_controls.page=1,e.files_controls.files=[],e.files_controls.folders=[],_.isEmpty(o)&&(i.folder={folder_id:o}),e.token=kzi.get_cookie("sid");var c=[];e.filter_type=0,e.filter_type_text="全部",e.upload_enabled=!0;var d=function(t,i){wt.data.file.move(r,t.fid,t.folder_id,i.fid,function(){t.folder_id=i.fid,e.files_controls.files=_.reject(e.files_controls.files,function(e){return e.fid===t.fid})})},u=function(t){e.files_controls.files=_.reject(e.files_controls.files,function(e){return e.fid===t.fid||e.folder_id===t.fid}),i.refresh_cache.file.del(t.fid)};e.load_one_more_page_files2=function(){wt.bus.file.load_one_page_files(e)},e.js_change_tab=function(t){if(e.current_tab!==t)switch(e.current_tab=t,t){case 0:e.filter=0,e.files_controls.sort_method_id=l[e.current_filter],e.files_controls.filter=e.filter,e.files_controls.pid=r,e.files_controls.folder_id=o,e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e);break;case 1:e.filter=1,e.files_controls.sort_method_id=l[e.current_filter],e.files_controls.filter=e.filter,e.files_controls.pid=r,e.files_controls.folder_id=o,e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e);break;case 2:e.filter=2,e.files_controls.sort_method_id=l[e.current_filter],e.files_controls.filter=e.filter,e.files_controls.pid=r,e.files_controls.folder_id=o,e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e);break;default:}},e.js_select_filter=function(t){e.current_filter!==t&&(e.current_filter=t,kzi.localData.set("files_filter_type",t),e.files_controls.sort_method_id=l[e.current_filter],e.files_controls.page=1,e.files_controls.files=[],wt.bus.file.load_one_page_files(e))},i.load_project(r,!0,function(t){e.project=t;var i=kzi.localData.get("file_list_view_type");e.view_type="list"===i?"list":"icon";var n=kzi.localData.get("files_filter_type");n||(n="default"),e.current_filter=n,e.files_controls.sort_method_id=l[e.current_filter],e.load_one_more_page_files2()},function(e){e.code===kzi.statuses.prj_error.not_found.code?n.path("/project/"+r+"/notfound"):wt.data.error(e)}),e.set_view_type=function(t){e.view_type=t,kzi.localData.set("file_list_view_type",t)},e.js_filter_file=function(t){switch(e.filter_type=t,t){case 0:e.files=c,e.filter_type_text="全部";break;case 1:e.files=_.filter(c,function(e){return 1===e.is_watch}),e.filter_type_text="关注";break;case 2:e.files=_.filter(c,function(e){return e.ext===kzi.constant.exts.jpeg||e.ext===kzi.constant.exts.jpg||e.ext===kzi.constant.exts.gif||e.ext===kzi.constant.exts.png}),e.filter_type_text="图片";break;case 3:e.files=_.filter(c,function(e){return e.ext===kzi.constant.exts.doc||e.ext===kzi.constant.exts.xls||e.ext===kzi.constant.exts.ppt||e.ext===kzi.constant.exts.pdf||e.ext===kzi.constant.exts.docx||e.ext===kzi.constant.exts.xlsx||e.ext===kzi.constant.exts.pptx}),e.filter_type_text="文档";break;case 4:e.files=_.filter(c,function(e){return e.ext===kzi.constant.exts.zip||e.ext===kzi.constant.exts.rar}),e.filter_type_text="压缩";break;default:e.files=c}e.set_view_type(e.view_type)},e.js_show_more_menu=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_file_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.email=r+kzi.constant.mail.domain,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.file_upload_option={previewMaxWidth:100,previewMaxHeight:110,url:[kzi.config.box_url(),"?pid="+r,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"project",pid:r,folder_id:o}},e.$on(kzi.constant.event_names.on_file_add,function(t,i){i&&"project"===i.type&&(console.info("kzi.constant.event_names.on_file_add triggered"),e.files_controls.page=1,wt.bus.file.load_one_page_files(e,!0),e.set_view_type(e.view_type))}),e.global_fileupload_queue=function(){return i.upload_queue.get_project(r,o)},e.js_add_folder_pop=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_add_folder.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},e.js_add_folder=function(n,a){if(!_.isEmpty(a)){e.is_save_ing=!0;var s=i.scope.files_controls.folders.length,o=i.scope.files_controls.folders[s-1].fid;_.isEmpty(o)&&(o=""),wt.data.file.add_folder(r,a,o,function(e){e.data.icon=kzi.helper.build_file_icon(e.data),i.scope.files_controls.page=1,i.scope.files_controls.folder_id=o,i.scope.files_controls.files=[],i.scope.load_one_more_page_files2(),t.close()},function(){kzi.msg.error("创建文件夹失败")},function(){e.is_save_ing=!1})}},e.js_keydown_folder_input=function(t){13===t.keyCode&&e.js_add_folder(e.name)}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_menu=function(t,i,n,a){t.stopPropagation(),1===i.type?s.popbox({target:t,top:n,left:a,templateUrl:"/ycjs/tpl/project/file/pop_folder_menu.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.folder=i,e.folder_name=i.name,e.folder_icons=kzi.constant.get_folder_icons,e.data={},e.data.selected_move_to_node="",wt.data.file.get_folders(r,function(t){e.folder_structure={},e.folder_structure.name="根目录",e.folder_structure.fid="",e.folder_structure.children=t.data},function(){kzi.msg.error("读取目录错误")},function(){}),e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_change_name=function(n,a){wt.data.file.update(r,i.fid,a,"",function(){},null,function(){e.is_save_ing=!1}),i.name=a,t.close()},e.js_set_folder_icon=function(t){wt.data.file.update_ext(r,i.fid,t.ext,function(){}),e.folder.ext=t.ext,e.folder.icon=t.path},e.js_del_folder=function(){n.remove_file_and_refresh(i),wt.data.file.trash(r,i.fid,function(){}),t.close()},e.move=function(){return _.isEmpty(e.data.selected_move_to_node)?(t.close(),void 0):i.folder_id===e.data.selected_move_to_node.fid?(t.close(),void 0):(d(i,e.data.selected_move_to_node),t.close(),void 0)}}],resolve:{pop_data:function(){return{scope:e,remove_file_and_refresh:u}}}}).open():s.popbox({target:t,top:n,left:a,templateUrl:"/ycjs/tpl/project/file/pop_file_menu.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.file=i,e.pid=r,e.data={},e.data.selected_move_to_node="",wt.data.file.get_folders(r,function(t){e.folder_structure={},e.folder_structure.name="根目录",e.folder_structure.fid="",e.folder_structure.children=t.data},function(){kzi.msg.error("读取目录错误")},function(){}),e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_del_file=function(){n.remove_file_and_refresh(i),wt.data.file.trash(r,i.fid,function(){}),t.close()},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(r,i,kzi.constant.xtype.file,i.fid,t)},e.js_watch_all=function(e,i,n){wt.bus.watch.watch_all(r,n,kzi.constant.xtype.file,n.fid,i,null,null,function(){}),t.close()},e.move=function(){return _.isEmpty(e.data.selected_move_to_node)?(t.close(),void 0):i.folder_id===e.data.selected_move_to_node.fid?(t.close(),void 0):(d(i,e.data.selected_move_to_node),t.close(),void 0)}}],resolve:{pop_data:function(){return{scope:e,remove_file_and_refresh:u}}}}).open()},e.js_goto_folder=function(e){0!==e.type},e.file_draggable_options={accept:".file-item-icon",hoverClass:"file-state-on-draggable",placeholder:"wt-placeholder",containment:".centerpanel",helper:"clone",zIndex:2e3,delay:300,start:function(e,t){t.helper.addClass("file-state-on-draggable")},stop:function(){},drag:function(){}},e.folder_droppable_options={accept:".file-item-icon",over:function(e){var i=$(e.target).attr("file-type");"1"!==i||$(e.target).hasClass("folder-state-file-over")||$(e.target).addClass("folder-state-file-over")},out:function(e){$(e.target).removeClass("folder-state-file-over")},drop:function(t,i){var n=$(t.target).attr("file-type");if(i.draggable.attr("file-type"),$(t.target).attr("file-id"),i.draggable.attr("file-id"),"0"!==n){var o=$(t.target).attr("file-id"),l=i.helper.attr("file-id");_.isEmpty(o)||_.isEmpty(l)||(e.$apply(function(){var t=_.findWhere(e.files_controls.files,{fid:l}),i=_.findWhere(e.files_controls.files,{fid:o});d(t,i)}),$(t.target).removeClass("folder-state-file-over"))}}},e.dragfile_option={upload_option:e.file_upload_option},e.$on(kzi.constant.event_names.on_pastefile_to_folder,function(t,i,n){var a={type:2,ext:2};n.icon=kzi.constant.get_file_icon(a),n.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",$("#global_file_upload").fileupload("add",{url:e.file_upload_option.url,formData:e.file_upload_option.formData,files:n})}),e.$on(kzi.constant.event_names.on_file_trash,function(t,i){i&&(e.files_controls.files=_.reject(e.files_controls.files,function(e){return e.fid===i.fid}),e.set_view_type(e.view_type))}),e.$on(kzi.constant.event_names.on_file_move,function(t,i){i&&(e.files_controls.files=_.reject(e.files_controls.files,function(e){return e.fid===i.fid}),e.set_view_type(e.view_type))}),e.$on(kzi.constant.event_names.on_right_menu,function(t,n){var a=kzi.helper.mouse_position(n),s=null,r="file-item-mark";if($(n.target).hasClass(r))s=$(n.target).attr("file-id");else{if(!($(n.target).parents("."+r).length>0))return;s=$(n.target).parents("."+r).attr("file-id")}if(s){var o=_.findWhere(e.files_controls.files,{fid:s});o&&(o.type===kzi.constant.file_type.file&&i.global.prj_module.watch&e.project.info.permission?e.js_show_menu(n,o,a.y,a.x):i.global.prj_module.crud&e.project.info.permission&&e.js_show_menu(n,o,a.y,a.x))}})}])}(),function(){"use strict";wt.project.controller("project_page_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,i,n,a){var s=t.pid;e.pid=s,e.current_tab=1;var r=function(t){e.cached_pages=_.reject(e.cached_pages,function(e){return e.page_id===t}),e.pages=_.reject(e.pages,function(e){return e.page_id===t})};e.js_show_menu=function(t,i,a,o){t.stopPropagation(),n.popbox({target:t,top:a,left:o,templateUrl:"/ycjs/tpl/project/page/pop_page_action.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.step=0,e.pid=s,e.js_step=function(t){e.step=t},e.page=i,""===i.parent_id&&(e.show_sub_menu=!0),e.js_delete_page=function(t){e.is_deleting=!0,wt.data.page.trash(s,t.page_id,function(){e.is_deleting=!1,e.js_close(),r(t.page_id)})},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(s,i,kzi.constant.xtype.page,i.page_id,t)},e.js_watch_all=function(e,i,n){wt.bus.watch.watch_all(s,n,kzi.constant.xtype.page,n.page_id,i,null,null,function(){}),t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_add_subpage_pop=function(t){t.stopPropagation(),n.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_parents_page.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.pid=s,e.pages=_.where(i.scope.cached_pages,{parent_id:""}),e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var o=function(){"tree"===e.view_type?(e.pages=_.where(e.cached_pages,{parent_id:""}),_.each(e.pages,function(t){var i=[],n=_.where(e.cached_pages,{parent_id:t.page_id});_.each(n,function(e){i.push(e)}),t.sub_pages=_.sortBy(i,function(e){return e.create_date})})):e.pages=e.cached_pages};e.set_view_type=function(t){kzi.localData.set("page_list_view_type",t),e.view_type=t,o()},e.js_change_tab=function(t){if(e.current_tab!==t)switch(e.current_tab=t,t){case 1:_.each(e.cached_pages,function(e){e.is_hide=!1});break;case 2:_.each(e.cached_pages,function(e){e.is_hide=e.owner.uid===i.global.me.uid?!1:!0});break;case 3:_.each(e.cached_pages,function(e){var t=_.findWhere(e.watchers,{uid:i.global.me.uid});e.is_hide=t?!1:!0})}},e.js_goto_page_detail=function(e,t){e.preventDefault(),a.path("/project/"+t.pid+"/page/"+t.page_id)},i.load_project(s,!0,function(t){i.global.title="文档 | "+t.info.name,e.project=t,wt.data.page.get_all(s,function(t){e.cached_pages=t.data,i.global.loading_done=!0;var n=kzi.localData.get("page_list_view_type");_.isUndefined(n)||_.isNull(n)?(e.view_type="tree",kzi.localData.set("page_list_view_type",e.view_type)):e.view_type=n,o()})},function(e){e.code===kzi.statuses.prj_error.not_found.code?a.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.$on(kzi.constant.event_names.on_right_menu,function(t,n){if(i.global.prj_module.watch&e.project.info.permission){var a=kzi.helper.mouse_position(n),s=null,r="page-item-mark";if($(n.target).hasClass(r))s=$(n.target).attr("page-id");else{if(!($(n.target).parents("."+r).length>0))return;s=$(n.target).parents("."+r).attr("page-id")}if(s){var o=_.findWhere(e.pages,{page_id:s});o&&e.js_show_menu(n,o,a.y,a.x)}}}),e.$on(kzi.constant.event_names.on_page_trash,function(e,t){_.isEmpty(t)||r(t.page_id)})}]),wt.project.controller("project_page_add_edit_ctrl",["$rootScope","$scope","$location","$routeParams","$popbox",function(e,t,i,n,a){var s=n.pid,r=n.page_id,o=void 0!==n.parent_page_id?n.parent_page_id:"";t.pid=s,t.root_pages=[],e.global.loading_done=!1;var l=null;t.docTitleInputFocus=!1,wt.data.page.get_all(s,function(e){t.root_pages=_.filter(e.data,function(e){return""===e.parent_id})},function(e){e.code===kzi.statuses.prj_error.not_found.code?i.path("/project/"+s+"/notfound"):wt.data.error(e)}),_.isEmpty(r)?(t.page={name:"",content:"",message:"",parent_id:o,placeholder:"新建文档的简短说明（可选）"},_.isEmpty(o)?o="":t.page.message="",t.is_add=!0,l=angular.copy(t.page),t.docTitleInputFocus=!0):(wt.data.page.get(s,r,function(n){t.page=n.data,t.page.placeholder="此次修改的简短说明（可选）",t.page.message="",l=angular.copy(t.page),e.global.loading_done=!0,e.global.title="编辑文档 | "+t.page.name,t.docTitleInputFocus=!0,wt.data.page.locked(s,r),t.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){if(/\/project\/.*\/page\/.*\/edit/.test(location.pathname)){var e="/project/"+s+"/page";wt.bus.mkEditor.checkClose()||i.path(e)}})}),t.is_add=!1),t.showFullscreen=!!kzi.helper.get_query("fullscreen"),t.$on("$locationChangeStart",function(e){if(t.save_success!==!0){_.isEmpty(t.page.name)&&(t.page.name=""),_.isEmpty(t.page.content)&&(t.page.content=""),_.isEmpty(t.page.message)&&(t.page.message="");var a=!1;(l.name!==t.page.name||l.content!==t.page.content||l.message!==t.page.message)&&(a=!0),a&&(window.confirm("当前文档还没有保存,确定要退出编辑页面么？")||e.preventDefault()),wt.data.page.unlocked(s,r)}}),t.js_save_page=function(n,a){if(t.page.name=t.page.name.trim(),_.isEmpty(t.page.name))return kzi.msg.error("请输入文档标题"),void 0;if(!_.isEmpty(t.page)&&!n.$invalid)if(t.is_saving=!0,t.is_add)t.page.parent_id=null!=t.page.parent_id?t.page.parent_id:"",wt.data.page.add(s,t.page.name,t.page.content,t.page.message,t.page.parent_id,function(n){a?(kzi.msg.success("添加文档成功!"),t.is_add=!1,t.page=n.data,t.page.placeholder="此次修改的简短说明（可选）",t.page.message="",l=angular.copy(t.page),e.global.title="编辑文档 | "+t.page.name):(t.save_success=!0,i.path("/project/"+s+"/page"))},null,function(){t.is_saving=!1,t.is_saving_continue=!1});else{_.isUndefined(t.page.is_notify)&&(t.page.is_notify=!1);var r=1;a&&(r=0),wt.data.page.update(s,t.page.page_id,t.page.name,t.page.content,t.page.message,t.page.parent_id,t.page.is_notify,r,function(){a?(kzi.msg.success("更新文档成功!"),t.page.message="",l=angular.copy(t.page),e.global.title="编辑文档 | "+t.page.name):(t.save_success=!0,i.path("/project/"+s+"/page"))},null,function(){t.is_saving=!1,t.is_saving_continue=!1})}},t.js_cancel_edit=function(){t.is_add?history.go(-1):i.path("/project/"+s+"/page")},t.js_pop_delete=function(e){a.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(e,t,n){t.popbox=n,t.js_close=function(){n.close()},t.delete_message="确认要删除此文档吗？<br/>文删除后会放在回收站，可以在回收站选择恢复或者彻底删除。",t.delete_title="确认删除",t.js_sure_delete=function(){t.is_deleting=!0,wt.data.page.trash(s,r,function(){i.path("/project/"+s+"/page")},null,function(){t.is_deleting=!1})}}]}).open()},e.load_project(s,!0,function(i){t.is_add&&(e.global.loading_done=!0,e.global.title="添加文档 | "+i.info.name),t.project=i},function(e){e.code===kzi.statuses.prj_error.not_found.code?i.path("/project/"+s+"/notfound"):wt.data.error(e)}),t.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){if(/\/project\/.*\/page\/add/.test(location.pathname)){var e="/project/"+s+"/page";wt.bus.mkEditor.checkClose()||i.path(e)}}),t.$on(kzi.constant.event_names.page_created_by_editor,function(e,i){t.is_add=!1,r=i.page_id,o=i.parent_page_id,l=angular.copy(i),l.message=i.message?i.message:""}),t.$on(kzi.constant.event_names.page_updated_by_editor,function(e,t){l=angular.copy(t)})}]),wt.project.controller("project_page_versions_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){var n=t.pid,a=t.page_id;e.pid=n,i.global.loading_done=!1,i.load_project(n,!0,function(t){e.project=t,wt.data.page.get(n,a,function(t){e.page=t.data,i.global.title="文档历史版本 | "+e.page.name,t.data.is_deleted===kzi.constant.trash.yes&&(e.permission=kzi.constant.permission.entity_deleted),wt.data.page.get_versions(n,a,function(t){i.global.loading_done=!0,e.page_versions=t.data})},function(t){i.global.loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)})},null)}]),wt.project.controller("page_ver_diff_ctrl",["$scope","$rootScope","$routeParams","$location","$sce","$parse","$sanitize",function(e,t,i,n,a){var o=i.pid;e.pid=o;var l=i.page_id;e.page_vers=[],e.show_compare_result=!1,e.ready_to_compare=!1,e.current_page={};var c=[];t.global.loading_done=!1,e.breadcrumbs=[],e.diff_result_html="",t.load_project(o,!0,function(i){t.global.title="历史版本 | "+i.info.name,e.project=i,wt.data.page.get_versions(o,l,function(i){e.page_vers=i.data,wt.data.page.get(o,l,function(t){e.current_page=t.data,e.breadcrumbs.push(a.trustAsHtml('<a href="javascript:;" data-click="goto_page()">'+e.current_page.name+"</a>")),e.breadcrumbs.push("历史版本")},function(){kzi.msg.error("加载版本失败")},function(){t.global.loading_done=!0})},function(){kzi.msg.error("加载项目失败")},function(){})},function(e){e.code===kzi.statuses.prj_error.not_found.code?n.path("/project/"+o+"/notfound"):wt.data.error(e)}),e.show_diff=function(){t.global.loading_done=!1,wt.data.page.get_version_page(o,l,c[0],c[1],function(t){var i=difflib.stringAsLines(_.findWhere(t.data,{version:c[0]}).content),n=difflib.stringAsLines(_.findWhere(t.data,{version:c[1]}).content),s=new difflib.SequenceMatcher(i,n),r=s.get_opcodes();e.diff_result_html=a.trustAsHtml(diffview.buildView({baseTextLines:i,newTextLines:n,opcodes:r,baseTextName:"# "+c[0],newTextName:"# "+c[1],contextSize:null,viewType:0}).outerHTML)},function(){},function(){t.global.loading_done=!0,e.breadcrumbs.pop(),e.breadcrumbs.push(a.trustAsHtml('<a href="javascript:;" data-click="hide_diff()">历史版本</a>')),e.breadcrumbs.push("比对结果"),e.show_compare_result=!0})},e.goto_page=function(){n.path("/project/"+e.pid+"/page/"+l)},e.hide_diff=function(){e.breadcrumbs.pop(),e.breadcrumbs.pop(),e.breadcrumbs.push("历史版本"),e.show_compare_result=!1},e.child_event_handler=function(t){var i=$(t.currentTarget.innerHTML).data("click");i&&e.$eval(i)},e.select_version=function(t){var i=0;t.selected=!t.selected,t.selected===!0?c.push(t.version):c=_.without(c,t.version),e.page_vers.forEach(function(e){e.selected===!0&&i++}),e.ready_to_compare=2===i?!0:!1}}])}(),function(){"use strict";wt.project.controller("project_post_ctrl",["$rootScope","$scope","$routeParams","$popbox","$timeout","$location",function(e,t,i,n,a,s){var r=i.pid;t.pid=r;var o=0,l="last_reply_date";t.current_tab=0;var c=e.global.me;c.watched=!0,e.global.loading_done=!0,t.postEditTitleFocus=!1,t.edit_post={name:"",content:"",watchers:[c]},t.show_add_post=!1;var d=function(e){t.part_loading_done=!1,t.set_pop_watcher_options(),wt.data.post.get_list(r,o,kzi.config.default_count,l,1,t.current_tab,function(i){i.data.length>0&&(o=i.data[i.data.length-1][l]),t.posts=_.isEmpty(t.posts)?i.data:t.posts.concat(i.data),t.has_more=i.data.length===kzi.config.default_count?!0:!1,angular.isFunction(e)&&e(i.data),t.part_loading_done=!0})};t.js_show_add_post=function(){t.show_add_post=!t.show_add_post,t.edit_post.post_id=""},t.js_cancel_edit_post=function(){t.show_add_post=!1,t.edit_post.name="",t.edit_post.content="",t.edit_post.watchers=[c]},t.js_change_tab=function(e){if(t.current_tab!==e)switch(t.current_tab=e,o=0,t.posts=[],d(),e){case 0:break;case 1:break;case 2:break;default:}},t.js_save_post=function(){if(t.edit_post.name=t.edit_post.name.trim(),_.isEmpty(t.edit_post.name))return kzi.msg.error("请输入标题"),void 0;if(t.is_saving=!0,t.newPost)wt.data.post.update(r,t.newPost.post_id,t.edit_post.name,t.edit_post.content,function(){kzi.msg.success("更新话题成功"),e.$broadcast(kzi.constant.event_names.post_updated_by_editor,{name:t.edit_post.name,content:t.edit_post.content,pid:r,post_id:t.newPost.post_id}),t.is_saving=!1,t.js_cancel_edit_post()},function(){kzi.msg.error("更新话题失败")},function(){t.newPost=""});else{var n=_.pluck(t.edit_post.watchers,"uid");wt.data.post.add(r,t.edit_post.name,t.edit_post.content,n,function(i){t.is_saving=!1,2===t.current_tab?n.indexOf(e.global.me.uid)>=0&&t.posts.unshift(i.data):t.posts.unshift(i.data)},null,function(){t.js_cancel_edit_post()})}},t.js_show_post_menu=function(i,a,s,o){i.stopPropagation(),n.popbox({target:i,top:s,left:o,templateUrl:"/ycjs/tpl/project/post/pop_post_action.html",controller:["$scope","popbox","pop_data",function(t,i,n){t.popbox=i,t.step=0,t.js_step=function(e){t.step=e},t.edit_post=a,t.pid=r,e.global.me.watched=_.pluck(a.watchers,"uid").indexOf(e.global.me.uid)>=0,t.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(r,i,kzi.constant.xtype.post,i.post_id,t)},t.js_watch_all=function(e,t,n,a){wt.bus.watch.watch_all(r,n,kzi.constant.xtype.post,n.post_id,t,null,null,a),i.close()},t.js_delete_post=function(e){t.is_deleting=!0,wt.data.post.trash(r,e.post_id,function(){t.is_deleting=!1,t.js_close(),n.scope.posts=_.reject(n.scope.posts,function(t){return t.post_id===e.post_id})})},t.js_close=function(){i.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_show_more_menu=function(i){n.popbox({target:i,templateUrl:"/ycjs/tpl/project/post/pop_posts_more_menu.html",controller:["$scope","popbox","pop_data",function(t,i){t.popbox=i,t.email=r+kzi.constant.mail.domain,t.step=0,t.js_step=function(e){t.step=e},t.js_close=function(){i.close()},t.selected_filter=null,t.filter_items=[{name:"按回复时间",value:"last_reply_date",is_selected:!1},{name:"按发布时间",value:"create_date",is_selected:!1}],"last_reply_date"===l?(t.filter_items[0].is_selected=!0,t.selected_filter=t.filter_items[0]):(t.filter_items[1].is_selected=!0,t.selected_filter=t.filter_items[1]),t.js_select_filter=function(i){t.selected_filter.is_selected=!1,i.is_selected=!0,t.selected_filter=i,t.js_close(),e.$broadcast(kzi.constant.event_names.filter_posts_by_sort,i.value)}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.set_pop_watcher_options=function(){e.global.prj_module.watch&t.project.info.permission&&(t.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(e,i,n,a){n.watched=!0,wt.bus.watch.set_watcher_toggle(r,t.edit_post,kzi.constant.xtype.post,null,n),a()}}])},t.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(r,i,kzi.constant.xtype.post,null,t)},t.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(r,i,kzi.constant.xtype.post,null,t,null,null,n)},t.js_slide_change=function(e){e?t.show_add_post_empty=!!e:a(function(){t.show_add_post_empty=!!e},400)},e.load_project(r,!0,function(t){e.global.title="话题 | "+t.info.name,d()},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+r+"/notfound"):wt.data.error(e)}),t.js_load_more=function(){d()},t.show_post_entity=function(t,i){e.locator.to_post(t,i,!1)},t.$on(kzi.constant.event_names.filter_posts_by_sort,function(e,i){_.isEmpty(i)||(l=i),o=0,t.posts=null,d()}),t.$on(kzi.constant.event_names.on_post_comment,function(e,i){if(!_.isEmpty(i)){var n=_.findWhere(t.posts,{post_id:i.post_id});n&&(n.comment_count++,n.last_reply_user=i.last_reply_user,n.last_reply_date=i.last_reply_date)}}),t.$on(kzi.constant.event_names.on_post_trash,function(e,i){_.isEmpty(i)||(t.posts=_.reject(t.posts,function(e){return e.post_id===i.post_id}))}),t.$on(kzi.constant.event_names.on_post_update,function(e,i){if(!_.isEmpty(i)){var n=_.findWhere(t.posts,{post_id:i.post_id});n&&(n.name=i.name,n.summary=kzi.helper.substr(i.content,60))}}),t.$on(kzi.constant.event_names.on_right_menu,function(i,n){if(e.global.prj_module.watch&t.project.info.permission){var a=kzi.helper.mouse_position(n),s=null,r="post-item";if($(n.target).hasClass(r))s=$(n.target).attr("post-id");else{if(!($(n.target).parents("."+r).length>0))return;s=$(n.target).parents("."+r).attr("post-id")}if(s){var o=_.findWhere(t.posts,{post_id:s});o&&t.js_show_post_menu(n,o,a.y,a.x)}}}),t.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){/\/project\/.*\/post$/.test(location.pathname)&&e.locator.show_slide===!1&&!wt.bus.mkEditor.checkClose()}),t.$on(kzi.constant.event_names.post_created_by_editor,function(i,n){t.newPost=n;var a=_.pluck(t.edit_post.watchers,"uid");2===t.current_tab?a.indexOf(e.global.me.uid)>=0&&t.posts.unshift(n):t.posts.unshift(n)}),t.$on(kzi.constant.event_names.post_updated_by_editor,function(e,i){var n=_.find(t.posts,function(e){return e.post_id===i.post_id});n&&(n.name=i.name,n.content=i.content)})}]).controller("post_filter_ctrl",["$scope",function(e){var t=null;e.filter_items=[{name:"按发布时间",value:"create_date",is_selected:!1},{name:"按回复时间",value:"last_reply_date",is_selected:!0}],t=e.filter_items[1],e.js_select_filter=function(i){t.is_selected=!1,i.is_selected=!0,t=i,e.$emit(kzi.constant.event_names.filter_posts_by_sort,i.value)}}])}(),function(){"use strict";wt.project.controller("project_chats_ctrl",["$rootScope","$scope","$routeParams","$popbox","$timeout","$location",function(e,t,i,n,a,s){var r=i.pid,o=function(e){t.chat=null,t.loading_chat_done=!1,wt.data.project.get_chat_list(r,e,kzi.config.default_count,function(i){t.chat=i.data,wt.bus.chat.set_is_show_data(t.chat.messages),wt.bus.chat.set_messages_for_file(t.chat.messages,r),(1===e||"1"===e)&&(t.chats_pagination_opts={totalCount:i.data.total_count,opts:{callback:function(e){o(e+1)}}})},null,function(){t.loading_chat_done=!0})};e.load_project(r,!0,function(i){e.global.title="聊天 | "+i.info.name,e.global.loading_done=!0,t.project=i,1==t.project.info.archived?t.permission=kzi.constant.permission.project_archived:2==t.project.info.team.status&&(t.permission=kzi.constant.permission.ok),o(1)},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+r+"/notfound"):wt.data.error(e)})}])}(),function(){"use strict";angular.module("wt.calendar_controller",["ui.calendar"]).controller("calendar_ctrl",["$rootScope","$scope","$timeout","$popbox",function(e,t,i,n){function g(){var e=t.myCalendar.fullCalendar("getView");$("#calendar_title").html(e.title);var i=new Date(e.start).getTime(),n=new Date(e.end).getTime(),a=(new Date).getTime();i>a||a>n?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}e.global.title="日历",t.project_ids=[],t.filter_type="all",t.calendar_view="month",t.show_task_uid=e.global.me.uid,t.show_task_team_id=null,t.show_my_task=!0,t.show_all_events=1,t.current_team={},t.show_completed_tasks=1;var r,o,a=null,s=null,l=function(){t.show_completed_tasks=0===kzi.localData.get("cale_show_completed_tasks")?0:1,t.show_all_events=0===kzi.localData.get("cale_show_all_events")?0:1;var e=kzi.localData.get("calendar_checked_project_ids");t.project_ids=null!=e?"none"===e?[]:e.split(","):null,kzi.localData.get("calendar_view")?t.calendar_view=kzi.localData.get("calendar_view"):kzi.localData.set("calendar_view",t.calendar_view),t.calendar_sidebar_view=kzi.localData.get("calendar_sidebar_view")?kzi.localData.get("calendar_sidebar_view"):"event"},c=function(){t.calendar_teams=[],_.isEmpty(e.teams)?e.load_teams(function(e){_.each(e,function(e){"-1"!==e.team_id&&t.calendar_teams.push({name:e.name,team_id:e.team_id})})}):_.each(e.teams,function(e){"-1"!==e.team_id&&t.calendar_teams.push({name:e.name,team_id:e.team_id})})};c();var d=function(){var e=_.filter(t.projects,function(e){return e.is_checked}),i=_.pluck(e,"pid");t.project_ids=i,_.isEmpty(i)?kzi.localData.set("calendar_checked_project_ids","none"):kzi.localData.set("calendar_checked_project_ids",t.project_ids)};l();var u=function(){t.myCalendar.fullCalendar("refetchEvents")},p=function(){t.myCalendar.fullCalendar("removeEvents",[])},f=function(i){return t.calendar_projects?(i(),void 0):(e.load_projects(function(e){_.each(e,function(e){e.is_checked=null==t.project_ids?!0:0===t.project_ids.length?!1:_.contains(t.project_ids,e.pid)?!0:!1}),d(),t.projects=e,t.calendar_projects=_.filter(t.projects,function(e){return 1===e.is_calendar})},null,function(){i()}),void 0)},h=function(e,i,n,s,l){if(_.isEmpty(a)||r!==e||o!==i){var d=_.pluck(t.projects,"pid");wt.data.calendar.get_list(d,1,e,i,function(e){if(a=e.data,_.isFunction(n))if(t.show_all_events)n(a);
else{var i=[];_.each(a,function(e){e.extend.i_attended&&i.push(e)}),n(i)}},s,l)}else{if(_.isFunction(n))if(t.show_all_events)n(a);else{var c=[];_.each(a,function(e){e.extend.i_attended&&c.push(e)}),n(c)}_.isFunction(l)&&l()}},m=function(i,n,a,l,c){s&&r===i&&o===n?(_.isFunction(a)&&a(s),_.isFunction(c)&&c()):t.show_task_uid===e.global.me.uid&&null===t.show_task_team_id?wt.data.calendar.get_tasks_forme(1,i,n,function(e){s=e.data,_.isFunction(a)&&a(e.data)},l,c):wt.data.calendar.get_tasks(t.show_task_team_id,1,t.show_task_uid,i,n,function(e){s=e.data,_.isFunction(a)&&a(e.data)},l,c)};t.js_new_event_success=function(i){i.forEach(function(i){if(i.end.date>=r&&o>=i.start.date){var n=_.findWhere(e.projects,{pid:i.pid});if(n){var s=wt.bus.event.event_to_calEvent(i,n.bg);s.extend.i_attended=i.attendees&&i.attendees.indexOf(e.global.me.uid)>=0?1:0,n.is_calendar||(n.is_calendar=1,_.defaults(n,{is_checked:!0}),t.calendar_projects.push(n),t.calendar_projects=_.sortBy(t.calendar_projects,function(e){return e.pos})),a&&(a.push(s),p(),u())}else a=null,p(),u()}})},t.onEventClick=function(t,i){i.preventDefault(),i.stopPropagation(),t.extend&&t.extend.xtype===kzi.constant.xtype.event?e.locator.to_event(t.extend.pid,t.id,!0):e.locator.to_task(t.extend.pid,t.id,!0)},t.onDayClick=function(i,a,s){if(e.global.loading_done){var o=kzi.helper.mouse_position(s);$(s.currentTarget).attr("data-placement","right"),$(s.currentTarget).attr("data-align","top"),$(s.currentTarget).addClass("js-popbox"),$(s.currentTarget).attr("data-auto-adapt","true"),n.popbox({target:s,templateUrl:"/ycjs/tpl/project/event/pop_add_event.html",controller:"pop_new_event_ctrl",top:o.y,left:o.x,resolve:{pop_data:function(){return{save_success:function(e,i){t.js_new_event_success(i.event)},scope:t,start_date:i}}}}).open()}},t.calendarEventSources=[{events:function(e,i,n){var e=Math.round(e.getTime()),i=Math.round(i.getTime());f(function(){"event"===t.calendar_sidebar_view?h(e,i,function(a){var s=_.filter(t.calendar_projects,function(e){return e.is_checked}),l=_.pluck(s,"pid"),c=_.filter(a,function(e){return _.contains(l,e.extend.pid)});n(c),r=e,o=i}):"task"===t.calendar_sidebar_view&&m(e,i,function(a){if(t.show_completed_tasks)n(a);else{var s=[];_.each(a,function(e){e.extend.completed||s.push(e)}),n(s)}r=e,o=i})})}}],t.calendarConfig={header:!1,height:kzi.util.heightNoHeader()-95,editiable:!0,droppable:!0,titleFormat:{month:"yyyy年MM月",week:"yyyy年MM月d日 {&#8212; [ yyyy年][ MM月]d日}",day:"yyyy年MM月d日 dddd"},firstDay:0,weekMode:"liquid",allDayText:"全天",axisFormat:"HH:mm",timeFormat:"✓",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],buttonText:{today:"今天",month:"月",agendaWeek:"周",agendaDay:"日"},defaultView:t.calendar_view,dayClick:t.onDayClick,loading:function(t){g(),e.global.loading_done=t?!1:!0},eventClick:function(e,i,n){t.onEventClick(e,i,n)},eventDrop:function(t,i){if(0!==i){var c=t.extend.pid;if(t.extend.xtype===kzi.constant.xtype.task){var d=t.id,u=t.extend.expire_date,p=moment(u).add("days",i).endOf("day").valueOf();wt.data.task.set_expire(c,d,p,function(){if(t.extend.expire_date=p,t.extend.badges.expire_date=p,e.project.info&&e.project.info.pid===c){var i=_.findWhere(e.project.tasks,{tid:d});i&&(i.expire_date=p,i.badges.expire_date=p)}})}else if(t.extend.xtype===kzi.constant.xtype.event){var f=moment(t.start),h=moment(t.extend.end).add("days",i);wt.data.event.update_date(c,t.id,f.format("YYYY-MM-DD"),f.format("HH:mm"),h.format("YYYY-MM-DD"),h.format("HH:mm"),function(){t.extend.end=h.valueOf()})}}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.heightNoHeader()-95)}},t.changeView=function(e){t.myCalendar.fullCalendar("changeView",e),t.calendar_view=e,kzi.localData.set("calendar_view",e),g()},t.prev=function(){t.myCalendar.fullCalendar("prev"),g()},t.next=function(){t.myCalendar.fullCalendar("next"),g()},t.today=function(){t.myCalendar.fullCalendar("today"),g()},t.js_filter_calendar_toggle=function(e){e.is_checked=e.is_checked?!1:!0,d(),p(),u()},t.js_toggle_showall=function(){t.show_all_events=1==t.show_all_events?0:1,kzi.localData.set("cale_show_all_events",t.show_all_events),p(),u()},t.js_team_members_toggle=function(e){t.current_team.team_id===e.team_id?t.current_team.expand=!t.current_team.expand:(t.current_team.expand=!1,t.current_team=e,t.current_team.expand=!0,_.isEmpty(e.members)&&(t.members_loading_done=!1,wt.data.team.get_team_members(e.team_id,function(t){e.members=wt.bus.member.get_normal_members(t.data.members),_.each(e.members,function(t){t.team_id=e.team_id})},null,function(){t.members_loading_done=!0})))},t.js_view_member_tasks=function(e,i){t.show_task_uid=e.uid,t.show_task_team_id=i.team_id,t.show_my_task=!1,s=null,p(),u()},t.js_view_my_tasks=function(){t.show_task_uid=e.global.me.uid,t.show_my_task=!0,t.show_task_team_id=null,s=null,p(),u()},t.js_show_completed_tasks=function(){t.show_completed_tasks=t.show_completed_tasks?0:1,kzi.localData.set("cale_show_completed_tasks",t.show_completed_tasks),p(),u()},t.js_toggle_right=function(){e.global.calendar_fold=!e.global.calendar_fold,i(function(){$("#calendar").fullCalendar("render")},320)},$(".layout_content_sidebar").bind("transitionend",function(){$("#calendar").fullCalendar("render")}),t.js_change_calendar_siderview=function(e){t.calendar_sidebar_view!==e&&(t.calendar_sidebar_view=e,kzi.localData.set("calendar_sidebar_view",t.calendar_sidebar_view),p(),u())},t.$on(kzi.constant.event_names.on_task_update,function(e,t){var i=_.findWhere(s,{id:t.tid});i&&(i.title=t.name,i.start=t.expire_date.toString().substring(0,10)),p(),u()}),t.$on(kzi.constant.event_names.on_task_trash,function(e,t){var i=_.findWhere(s,{id:t.tid});i&&(s=_.reject(s,function(e){return e.id===t.tid})),p(),u()}),t.$on(kzi.constant.event_names.on_task_complete,function(e,t){var i=_.findWhere(s,{id:t.tid});i&&(t.completed?(i.className="cal_task_completed slide-trigger",i.extend.completed=1):(i.className="cal_task_uncompleted slide-trigger",i.extend.completed=0)),p(),u()}),t.$on(kzi.constant.event_names.on_event_update,function(t,i,n,s){if(a){var l=_.findWhere(a,{id:i.event_id});if(n===kzi.constant.event_update_type.one&&l&&(l.title=i.name,l.start=moment(i.start.date).valueOf().toString().substring(0,10),l.end=moment(i.end.date).valueOf().toString().substring(0,10),l.extend.i_attended=_.findWhere(i.attendees,{uid:e.global.me.uid})?1:0,p(),u()),n===kzi.constant.event_update_type.follow_up){var c=new Date(i.start.date)-new Date(l.start),d=new Date(i.end.date)-new Date(i.start.date),f=new Date(l.start);c>0?(a.forEach(function(e){var t=new Date(e.start);e.extend.recurrence_id===i.recurrence_id&&t>=f&&(e.start=moment(e.start).add("milliseconds",c),e.end=moment(e.start).add("milliseconds",d),e.start=e.start.valueOf().toString().substring(0,10),e.end=e.end.valueOf().toString().substring(0,10),s&&(e.extend.recurrence_id=s))}),p(),u()):(a=[],h(r,o,function(){p(),u()},null,function(){}))}}}),t.$on(kzi.constant.event_names.on_event_trash,function(e,i,n){if(a){var s=parseInt(n);switch(s){case kzi.constant.event_trash_type.one:a=_.reject(a,function(e){return e.id===i.event_id});break;case kzi.constant.event_trash_type.follow_up:a=_.reject(a,function(e){var t=new Date(e.start).getTime();return t>=i.start.date&&e.extend.recurrence_id===i.recurrence_id});break;case kzi.constant.event_trash_type.all:a=_.reject(a,function(e){return e.extend.recurrence_id===i.recurrence_id})}}t.calendar_projects=_.filter(t.projects,function(e){return 1===e.is_calendar}),p(),u()})}]).controller("calendar_subscribe_ctrl",["$rootScope","$scope","$location","$popbox",function(e,t,i,n){e.global.title="日历订阅",e.global.loading_done=!0,t.qrcode="";var a=function(e){t.suburl=["webcal://",i.$$host,"80"==i.$$port||"443"==i.$$port?"":":"+i.$$port,"/api/calendar/subscribe/",e].join(""),wt.data.utils.get_qrcode(t.suburl,5,function(e){t.qrcode=e})};wt.data.user.caltoken(e.global.me.uid,function(e){200==e.code&&a(e.data)}),t.reset_token=function(e){n.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(e,t,i){t.popbox=i,t.js_close=function(){i.close()},t.delete_message="重置订阅地址后，以前订阅的设备会失效，<br/>需要从新的地址重新订阅。确定重置订阅地址吗？",t.delete_title="确认重置订阅地址",t.delete_button="确认重置",t.js_sure_delete=function(){t.is_deleting=!0,wt.data.user.caltoken_reset(e.global.me.uid,function(e){200==e.code&&(a(e.data),kzi.msg.info("重置成功"),t.js_close())},null,function(){t.is_deleting=!1})}}]}).open()}}])}(),function(){"use strict";angular.module("wt.activity_controller",[]).controller("item_activity_ctrl",["$rootScope","$scope",function(e,t){var i=null,n=null;t.tpl_prefix="item_";var a=0,s=function(){t.loading_activity=!0,wt.data.activity.get_for_item(n,i,a,kzi.config.default_count,function(e){e.data.length>0&&(a=e.data[e.data.length-1].published);var i=[];i=_.isEmpty(t.activities)?e.data:t.activities.concat(e.data),t.has_more=e.data.length===kzi.config.default_count,wt.bus.activity.set_activities_show_date(i),t.activities=i},null,function(){t.loading_activity=!1})};t.js_load_more=function(){s()},t.$on(kzi.constant.event_names.reload_item_activities,function(e,r){a=0,n=r.xtype,i=r.xid,t.activities=null,s()}),t.$on(kzi.constant.event_names.clear_item_activities,function(){a=0,t.activities=[]})}]).controller("project_activity_ctrl",["$scope","$routeParams","$rootScope","$location",function(e,t,i,n){var a=t.pid;e.pid=a,e.tpl_prefix="project_";var s=0,r="all",o=function(){e.loading_activity=!0,wt.data.activity.get_for_project(a,r,s,kzi.config.default_count,function(t){t.data.length>0&&(s=t.data[t.data.length-1].published);var i=[];i=_.isEmpty(e.activities)?t.data:e.activities.concat(t.data),e.has_more=t.data.length===kzi.config.default_count,wt.bus.activity.set_activities_show_date(i),e.activities=i},null,function(){e.loading_activity=!1})};e.js_to_graph=function(e){kzi.localData.set("prj_graph_view_type",e),n.path("/project/"+a+"/graph")},i.load_project(a,!0,function(t){i.global.title="活动 | "+t.info.name,e.project=t,i.global.loading_done=!0,o()},function(){i.global.loading_done=!0,n.path("/project/"+a+"/notfound")}),e.js_load_more=function(t){e.eventTarget=t.target,o()},e.$on(kzi.constant.event_names.filter_activity_by_type,function(t,i){r=i.data,s=0,e.activities=null,o()})}]).controller("filter_activity_ctrl",["$rootScope","$scope",function(e,t){t.filter_items=[{type:"all",display_name:"全部",selected:!0},{type:"task",display_name:"任务"},{type:"post",display_name:"话题"},{type:"file",display_name:"文件"},{type:"page",display_name:"文档"},{type:"event",display_name:"日程"}],t.selected_item=t.filter_items[0],t.js_select_filter_item=function(e){e.type!==t.selected_item.type&&(t.selected_item.selected=!1,e.selected=!0,t.selected_item=e,t.$emit(kzi.constant.event_names.emit_filter_activity_by_type,t.selected_item.type))}}])}(),function(){"use strict";wt.project.controller("project_trash_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,i,n,a){var s=t.pid;e.pid=s;var r=[];e.filter_type=0,e.filter_type_text="全部",i.load_project(s,!0,function(t){return i.global.title="回收站 | "+t.info.name,e.project=t,i.global.prj_module.crud&e.project.info.permission?(wt.data.project.get_trash(s,function(t){i.global.loading_done=!0,e.wtobjs=t.data,r=t.data}),void 0):(a.path("/project/"+e.project.info.pid),void 0)},function(e){parseInt(e.code)===kzi.statuses.prj_error.not_found.code?a.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.js_filter=function(t){0===t?(e.wtobjs=r,e.filter_type=0,e.filter_type_text="全部"):1===t?(e.wtobjs=_.filter(r,function(e){return"task"===e.entity.etype||"entry"===e.entity.etype}),e.filter_type=1,e.filter_type_text="任务"):2===t?(e.wtobjs=_.filter(r,function(e){return"post"===e.entity.etype}),e.filter_type=2,e.filter_type_text="话题"):3===t?(e.wtobjs=_.filter(r,function(e){return"file"===e.entity.etype||"folder"===e.entity.etype}),e.filter_type=3,e.filter_type_text="文件"):4===t&&(e.wtobjs=_.filter(r,function(e){return"page"===e.entity.etype}),e.filter_type=4,e.filter_type_text="文档")},e.js_show_trash_menu=function(t,a){n.popbox({target:t,placement:"bottom",templateUrl:"/ycjs/tpl/project/trash/pop_trash_menu.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.entity=a.entity,e.project=n.scope.project,e.permission=n.scope.permission,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},i.load_tasks(s,function(t){e.entries=t.entries,_.each(e.entries,function(e){e.selected=0})}),e.js_restore=function(){if("entry"===a.entity.etype){var e=a.entity.eid;wt.data.entry.untrash(s,e,function(){i.project.entries=[],i.project.tasks=[],n.scope.wtobjs=_.reject(n.scope.wtobjs,function(t){return t.entity.eid===e})})}else if("folder"===a.entity.etype||"file"===a.entity.etype){var r=a.entity.eid;wt.data.file.untrash(s,r,function(){i.refresh_cache.file.clear(s),n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===r})})}else if("post"===a.entity.etype){var o=a.entity.eid;wt.data.post.untrash(s,o,function(){i.refresh_cache.file.clear(s),n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===o})})}else if("page"===a.entity.etype){var l=a.entity.eid;wt.data.page.untrash(s,l,function(){i.refresh_cache.file.clear(s),n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===l})})}else if("event"===a.entity.etype){var c=a.entity.eid;wt.data.event.untrash(s,c,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===c})})}t.close()},e.js_restore_task=function(o){if(_.each(e.entries,function(e){e.selected=0}),o.selected=1,o){var l=a.entity.eid;wt.data.task.untrash(s,o.entry_id,l,function(){i.project.entries=[],i.project.tasks=[],n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid==l}),r=n.scope.wtobjs}),t.close()}},e.js_destory=function(){if("task"===a.entity.etype){var e=a.entity.eid;wt.data.task.del(s,e,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(t){return t.entity.eid==e}),r=n.scope.wtobjs})}else if("entry"===a.entity.etype){var i=a.entity.eid;wt.data.entry.del(s,i,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid==i}),r=n.scope.wtobjs})}else if("folder"===a.entity.etype||"file"===a.entity.etype){var o=a.entity.eid;wt.data.file.del(s,o,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid==o}),r=n.scope.wtobjs})}else if("post"===a.entity.etype){var l=a.entity.eid;wt.data.post.del(s,l,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===l}),r=n.scope.wtobjs})}else if("page"===a.entity.etype){var c=a.entity.eid;wt.data.page.del(s,c,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===c}),r=n.scope.wtobjs})}else if("event"===a.entity.etype){var d=a.entity.eid;wt.data.event.del(s,d,function(){n.scope.wtobjs=_.reject(n.scope.wtobjs,function(e){return e.entity.eid===d}),r=n.scope.wtobjs})}t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_clear_trash=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/trash/pop_empty_trash.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.js_close=function(){t.close()},e.js_empty_trash=function(){i.global.loading_done=!1,wt.data.project.clear_trash(s,function(){i.global.loading_done=!0,n.scope.wtobjs=[],r=[]}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}(),function(){"use strict";function e(e,t,i,n,a){var s=kzi.helper.get_query("code");t.loading_done=!1,t.user={},t.get_invite_info=function(){return _.isEmpty(s)?(t.invalid_invite=!0,void 0):(wt.data.invite.get(s,function(i){return i.data?(t.invite=i.data,t.invite.has_signup?(t.user_name=t.invite.to.name,t.email=t.invite.to.email,_.isEmpty(e.global.me)?a.location.href="/signin?name="+t.email+"&return_url="+a.location.pathname+a.location.search:e.global.me.uid===i.data.to.uid?wt.data.invite.accept(s,function(){t.join_success=!0,t.show_join=!1,t.loading_done=!0},function(){t.show_join=!0,t.loading_done=!0}):(t.invalid_user=!0,t.loading_done=!0)):(t.loading_done=!0,t.show_join=!0),void 0):(t.invalid_invite=!0,t.loading_done=!0,void 0)},function(){},function(){}),void 0)},t.js_exit_signin=function(){e.logout(!0,function(){a.location.href="/signin?name="+t.email+"&return_url="+a.location.pathname+a.location.search})},t.js_join=function(i){t.is_joining=!0,wt.data.invite.join(s,t.user.name,t.user.display_name,t.user.password,function(){e.login(t.user.name,t.user.password,null,function(){t.join_success=!0,t.show_join=!1},null,function(){t.is_joining=!1})},function(){i.$errors.unshift("加入失败,请重新输入")},function(){t.is_joining=!1})},t.get_invite_info()}angular.module("wt.invite_controller",[]).controller("join_ctrl",["$rootScope","$scope","$timeout","$location","$window",e]).controller("join_project_ctrl",["$rootScope","$scope","$timeout","$location","$window",e])}(),function(){"use strict";angular.module("wt.link_join_controller",[]).controller("team_link_join_ctrl",["$rootScope","$scope","$timeout","$location","$window",function(e,t){var s=kzi.helper.get_query("code");t.loading_done=!1,t.step="",t.team={},t.current_account={},wt.data.team.join_info(s,function(i){if(t.team=i.data,_.isEmpty(e.global.me))t.step="not_login";else{var n=e.global.me.uid;t.step=_.isEmpty(_.find(t.team.members,function(e){return e===n}))?"already_login":"already_member",t.current_account=e.global.me}},function(e){25008===e.code&&(t.step="invalid_code")},function(){t.loading_done=!0}),t.change_step=function(e){t.step!==e&&(t.step=e)},t.go_to_login=function(){var e=window.location.origin,t=window.location.pathname,i=window.location.search;window.location.href=e+"/signin?return_url="+t+i},t.go_to_signup=function(){var e=window.location.origin,t=window.location.pathname,i=window.location.search;window.location.href=e+"/signup?return_url="+t+i},t.link_join=function(){wt.data.team.join_by_link(t.team.team_id,s,function(e){200===e.code&&(t.step="join_success")},function(e){(4050===e.code||5038===e.code)&&(t.step="already_member"),401===e.code&&(t.step="join_failure")},function(){})}}]).controller("project_link_join_ctrl",["$rootScope","$scope","$timeout","$location","$window",function(e,t){var s=kzi.helper.get_query("code");t.loading_done=!1,t.step="",t.project={},t.current_account={},wt.data.project.join_info(s,function(i){if(200===i.code)if(t.project=i.data,_.isEmpty(e.global.me))t.step="not_login";else{var n=e.global.me.uid;t.step=_.isEmpty(_.find(t.project.members,function(e){return e===n}))?"already_login":"already_member",t.current_account=e.global.me}},function(e){25008===e.code&&(t.step="invalid_code")},function(){t.loading_done=!0}),t.go_to_login=function(){var e=window.location.origin,t=window.location.pathname,i=window.location.search;window.location.href=e+"/signin?return_url="+t+i},t.go_to_signup=function(){var e=window.location.origin,t=window.location.pathname,i=window.location.search;window.location.href=e+"/signup?return_url="+t+i},t.link_join=function(){wt.data.project.join_by_link(t.project.pid,s,function(e){200===e.code&&(t.step="join_success")},function(e){4050===e.code&&(t.step="already_member"),401===e.code&&(t.step="join_failure")},function(){})}}])}(),function(){"use strict";wt.project.controller("prj_member_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$element","$location",function(e,t,i,n,a,s,r){var o=t.pid;e.shouldBeOpen=!0,e.pid=o,e.js_prj_member_pop=function(t,a){n.popbox({target:t,templateUrl:"/ycjs/tpl/project/member/pop_user_menu.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.step=0,e.selected_member=a;var s=0;_.each(e.project.members,function(e){e.role==kzi.constant.role.admin&&s++}),e.can_change=a.role==kzi.constant.role.admin&&1==s?!1:!0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_delete_prj_member=function(t){i.refresh_cache.user.remove(t.uid),t.uid==i.global.me.uid&&(i.refresh_cache.project.remove(o),r.path("/dashboard")),wt.data.project.del_member(o,t.uid),e.js_close()};var l=function(t,i){wt.data.project.set_member_role(o,e.selected_member.uid,t,function(n){e.selected_member.role=t,_.isFunction(i)&&i(n)})};e.js_set_user_as_admin=function(){l(kzi.constant.role.admin,function(){i.refresh_cache.project.add_admin(o,e.selected_member)})},e.js_set_user_as_member=function(){var t=e.selected_member.role;l(kzi.constant.role.member,function(){t&&i.refresh_cache.project.remove_admin(o,e.selected_member)})},e.js_add_user_as_guest=function(){var t=e.selected_member.role;l(kzi.constant.role.guest,function(){t&&i.refresh_cache.project.remove_admin(o,e.selected_member)})}}],resolve:{pop_data:function(){return{$scope:e}}}}).open()},e.draggable_options={appendTo:$("#main"),helper:"clone",zIndex:2e3,delay:300,start:function(e,t){t.helper.find("span.avatar-name").remove(),t.helper.find(".avatar-face > i").remove(),t.helper.addClass("member-state-on-drag")},stop:function(){},drag:function(){}}}]).controller("prj_sidebar_ctrl",["$scope","$routeParams","$rootScope","$location","$timeout","$popbox",function(e,t,i,n,a,s){var r=t.pid;e.pid=r,e.step=0,e.bodyOpen=!1,e.add_member_url=kzi.config.root_url+"/join"+r,e.create_by_mail=r+kzi.constant.mail.domain,e.member_inviting=!1,e.email_validation_error=!1,e.data={},e.data.invite_email="",e.prj_colors=kzi.constant.prj_colors,e.prj_icons=kzi.constant.prj_icons,e.visibilities=[{id:kzi.constant.prj_visibility.private,name:"私有项目"},{id:kzi.constant.prj_visibility.protected,name:"团队可见"},{id:kzi.constant.prj_visibility.public,name:"公开项目"}],e.webhook={actions:[]},e.$watch("project.info.team_id",function(t){"-1"===t&&(e.visibilities=_.reject(e.visibilities,function(e){return e.id===kzi.constant.prj_visibility.protected}))}),e.data={},e.data.transfer_to_tid=void 0,e.flashing_success=!1,e.transfer_to_teams=_.filter(i.teams,function(e){return"-1"===e.team_id||e.permission&i.global.team_module.add_project}),_.findWhere(e.transfer_to_teams,{team_id:"-1"})||e.transfer_to_teams.unshift({team_id:"-1",name:"个人项目"}),e.prj_copy={},e.prj_copy.name="",e.prj_copy.teams=[],e.prj_copy.dest_team="",e.prj_copy.keepTasks=!0,e.prj_copy.keepFiles=!0,e.prj_copy.keepPosts=!0,e.prj_copy.keepPages=!0,e.prj_copy.visibility_options=[{id:kzi.constant.prj_visibility.private,name:"私有项目"},{id:kzi.constant.prj_visibility.protected,name:"团队可见"},{id:kzi.constant.prj_visibility.public,name:"公开项目"}],e.prj_copy.selected_visibility=e.prj_copy.visibility_options[0],e.$watch("prj_copy.dest_team",function(t){"-1"===t.team_id?(e.prj_copy.visibility_options=[{id:kzi.constant.prj_visibility.private,name:"私有项目"},{id:kzi.constant.prj_visibility.public,name:"公开项目"}],e.prj_copy.selected_visibility=e.prj_copy.visibility_options[0]):(e.prj_copy.visibility_options=[{id:kzi.constant.prj_visibility.private,name:"私有项目"},{id:kzi.constant.prj_visibility.protected,name:"团队可见"},{id:kzi.constant.prj_visibility.public,name:"公开项目"}],e.prj_copy.selected_visibility=e.prj_copy.visibility_options[0])}),e.prj_navigations_all=kzi.constant.prj_navigations,e.prj_navigations_navids=[],i.load_project_from_cache(r,function(t){return t?(e.prj_navigations_navids=t.navs,e.prj_navigations=wt.bus.project.get_navs(t.navs),e.un_prj_navigations=wt.bus.project.get_un_navs(t.navs),void 0):(i.load_project(r,!0,function(t){e.prj_navigations_navids=t.info.navs,e.prj_navigations=wt.bus.project.get_navs(t.info.navs),e.un_prj_navigations=wt.bus.project.get_un_navs(t.info.navs)}),void 0)}),e.isCheckedFilter=function(){return function(t){return-1!=_.indexOf(t,_.pluck(e.prj_navigations,"id"))}},e.js_toggle_nav=function(t){var n=_.indexOf(_.pluck(e.prj_navigations,"id"),t.id),a=_.indexOf(_.pluck(e.un_prj_navigations,"id"),t.id);0==e.prj_navigations_navids.length&&(e.prj_navigations_navids=_.pluck(e.prj_navigations_all,"id"));var s=_.indexOf(e.prj_navigations_navids,t.id);if(t=_.omit(t,"$$hashKey","__proto__"),0>n)e.prj_navigations_navids.push(t.id),e.prj_navigations.push(t),e.un_prj_navigations.splice(a,1);else{if(1==e.prj_navigations.length)return kzi.msg.warn("必须保留一个应用"),void 0;e.prj_navigations_navids.splice(s,1),e.un_prj_navigations.push(t),e.prj_navigations.splice(n,1)}wt.data.project.change_navs(r,e.prj_navigations_navids,function(){i.refresh_cache.project.change_navs(r,e.prj_navigations_navids)})};var o=function(){e.nav_sortable_options={containment:".prj_sidebar_step_body",placeholder:"prj-nav-placeholder",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",connectWith:".js_sortable",start:function(e,t){t.item.addClass("picked-up"),$(".prj-nav-placeholder").css({height:t.item.css("height"),width:t.item.width()})},stop:function(t,n){n.item.removeClass("picked-up"),a(function(){var t=_.pluck(e.prj_navigations,"id");wt.data.project.change_navs(r,t,function(){i.refresh_cache.project.change_navs(r,t)})})}}};e.toggle_join_project_link=function(){e.join_project_link_open?wt.data.project.join_link_close(r,function(){delete i.project.info.link_join_code,e.join_project_link_open=!e.join_project_link_open},function(){kzi.msg.error("关闭加入项目链接失败")}):wt.data.project.join_link_open(r,function(t){i.project.info.link_join_code=t.data,e.join_project_link_open=!e.join_project_link_open,e.link_to_join=window.location.origin+"/project/link/join?code="+i.project.info.link_join_code},function(){kzi.msg.error("打开加入项目链接失败")},function(){})},e.js_change_prj_sidebar_view=function(t){i.global.project_sidebar_view=t,"chat"===t&&e.$broadcast("init_project_chat_list",{})},e.js_step=function(t,n){if(!n||!$(n.target.parentElement).hasClass("disabled")){if(1===t&&(e.labels_is_set=_.filter(e.$parent.$parent.project.info.labels,function(e){return""!=e.desc}),e.labels_is_filter=e.$parent.$parent.task_filters,e.task_filter_text=_.isArray(e.$parent.$parent.task_filters.texts)?e.$parent.$parent.task_filters.texts.join(" "):"",i.load_project_members(i.project.info.pid,function(t){e.assigned_team_members=wt.bus.member.get_normal_members(t.members)})),2===t&&_.each(kzi.constant.labels,function(t){var i=_.findWhere(e.$parent.$parent.project.info.labels,{name:t.name});i&&(e[t.name]=i.desc)}),6===t&&(i.global.right_sidebar_is_fold=!1,e.loading_team_members=!0,-1==i.project.info.team_id?(e.loading_team_members=!1,e.is_individual_project=!0):(e.is_individual_project=!1,i.load_team_members(i.project.info.team_id,function(t){e.unassigned_team_members=[],e.unassigned_team_visitors=[],i.load_project(r,!0,function(i){_.each(t.members,function(t){_.findWhere(i.members,{uid:t.uid})||(t.role===kzi.constant.role.guest?e.unassigned_team_visitors.push(t):e.unassigned_team_members.push(t))})}),e.loading_team_members=!1})),e.join_project_link_open=!_.isEmpty(i.project.info.link_join_code),e.join_project_link_open&&(e.link_to_join=window.location.origin+"/project/link/join?code="+i.project.info.link_join_code)),31===t&&(e.project.info.new_name=e.project.info.name,e.project.info.new_desc=e.project.info.desc,e.project.info.new_visibility=e.project.info.visibility),32===t&&(e.project.info.new_bg=e.project.info.bg,e.project.info.new_pic=e.project.info.pic),40===t&&o(),50===t&&(e.loading_prj_webhooks=!0,wt.data.webhook.get_webhooks(r,function(t){e.loading_prj_webhooks=!1,t.data=_.map(t.data,function(e){return 1==e.is_every?e:(e.actions=_.map(e.actions,function(e){return _.isEmpty(e)?"空":_.where(kzi.constant.actions,{action:e})[0].desc}),e.actions="("+e.actions.join(",")+")",e)}),e.prj_webhooks=t.data})),51===t&&(e.webhook={actions:[]},e.webhook_action=kzi.constant.actions),52===t&&(e.webhook_action=kzi.constant.actions),8===t&&(e.loading_prj_timingtasks=!0,wt.data.timingtask.get_timingtasks(r,function(t){e.loading_prj_timingtasks=!1,e.prj_timingtasks=t.data})),38===t){var a=_.filter(e.project.members,function(e){return e.uid!==i.global.me.uid&&e.role===kzi.constant.role.admin});e.has_other_admin=a.length>0}e.step=t}},e.js_goto_prj_setting=function(){4!==i.project.info.curr_role&&e.js_step(3)},e.js_label_is_filter=function(t){return-1!==_.indexOf(_.pluck(e.labels_is_filter.labels,"name"),t)?!0:void 0},e.js_member_is_filter=function(t){return-1!==_.indexOf(_.pluck(e.labels_is_filter.members,"uid"),t)?!0:void 0},e.js_watch_project=function(e){kzi.msg.error(e+"关注失败, 服务器端无接口.")},e.isMemberFilter=function(){return function(e){return e.status===kzi.constant.status.ok&&(e.role===kzi.constant.role.admin||e.role===kzi.constant.role.member)}},e.isGuestFilter=function(){return function(e){return e.status===kzi.constant.status.ok&&e.role==kzi.constant.role.guest}},e.isStatusPendingFilter=function(){return function(e){return e.status===kzi.constant.status.pending}},e.js_filter_text=function(){var t={},i=e.$parent.$parent.task_filters;if(_.isEmpty(this.task_filter_text))i.texts="",e.$emit(kzi.constant.event_names.on_project_tasks_filter,t);else{var n=this.task_filter_text.toLowerCase().replace("，",",").replace("　",",").replace(" ",",").replace("  ",",");i.texts=n.split(","),e.$emit(kzi.constant.event_names.on_project_tasks_filter,t)}},e.js_filter_label=function(t){var t=_.pick(t,"desc","name"),i=t.name,n=e.$parent.$parent.task_filters,a=_.pluck(n.labels,"name");-1===_.indexOf(a,i)?n.labels.push(t):n.labels.splice(_.indexOf(a,i),1),e.$emit(kzi.constant.event_names.on_project_tasks_filter,{})},e.js_filter_member=function(t){var t=_.pick(t,"uid","name","display_name","desc","avatar"),i=t.uid,n=e.$parent.$parent.task_filters,a=_.pluck(n.members,"uid");-1===_.indexOf(a,i)?n.members.push(t):n.members.splice(_.indexOf(a,i),1),e.$emit(kzi.constant.event_names.on_project_tasks_filter,{})},e.js_filter_date=function(t){var i=e.$parent.$parent.task_filters;i.date=i.date===t?"":t,e.$emit(kzi.constant.event_names.on_project_tasks_filter,{})},e.js_add_prj_member=function(t,n){n||(n=kzi.constant.role.member),wt.data.project.add_member(r,t.uid,n,function(n){kzi.msg.success("添加成员成功！"),i.project.members.push(n.data),e.unassigned_team_members=_.reject(e.unassigned_team_members,function(e){return e.uid===t.uid}),e.unassigned_team_visitors=_.reject(e.unassigned_team_visitors,function(e){return e.uid===t.uid})})},e.js_add_user_as_member=function(t){e.js_add_prj_member(t,kzi.constant.role.member)},e.js_invite_member=function(t){return _.isEmpty(t)||e.member_inviting?(e.email_validation_error=!0,void 0):(e.email_validation_error=!1,e.member_inviting=!0,wt.data.project.invite_member(r,t,function(t){_.findWhere(i.project.members,{uid:t.data.uid})||i.project.members.push(t.data),e.add_done=!0,e.shouldBeOpen=!1,e.data.invite_email="",t.data.status===kzi.constant.status.ok&&(e.unassigned_team_members=_.reject(e.unassigned_team_members,function(e){return e.uid===t.data.uid}))},null,function(){e.member_inviting=!1}),void 0)},e.clear_alert=function(){e.add_done===!0&&(e.add_done=!1,e.shouldBeOpen=!1)},e.js_set_lables=function(t,i,n,a,s,o){var l=[{name:"blue",desc:t},{name:"green",desc:i},{name:"orange",desc:n},{name:"purple",desc:a},{name:"red",desc:s},{name:"yellow",desc:o}];e.is_save_ing=!0,wt.data.project.set_labels(r,l,function(){e.$parent.$parent.project.info.labels=l},null,function(){kzi.msg.success("标签成功保存"),e.is_save_ing=!1,e.js_step(0)})},e.js_toggle_step_body=function(){e.bodyOpen=!e.bodyOpen},e.js_prj_update=function(){(e.project.info.new_name!=e.project.info.name||e.project.info.new_desc!=e.project.info.desc||e.project.info.new_visibility!=e.project.info.visibility)&&(e.is_prj_saveing=!0,e.project.name=e.project.new_name,e.project.desc=e.project.new_desc,_.isEmpty(e.project.desc)&&(e.project.desc=""),wt.data.project.update(r,e.project.info.new_name,e.project.info.new_desc,e.project.info.new_visibility,function(){i.refresh_cache.project.update(r,e.project.info.new_name,e.project.info.new_desc,e.project.info.new_visibility),kzi.msg.success("修改项目基本信息成功")},function(){kzi.msg.error("修改项目基本信息失败")},function(){e.is_prj_saveing=!1}))},e.js_prj_archive=function(){e.is_archiving=!0,wt.data.project.archive(r,function(){e.project.info.archived=1,i.projects=_.reject(i.projects,function(e){return e.pid===r
}),i.project&&i.project.info.pid===r&&i.project.info&&(i.project.info.archived=1,i.project.info.permission=kzi.constant.prj_module.view),kzi.msg.success("归档项目成功"),e.js_step(3)},null,function(){e.is_archiving=!1})},e.js_prj_unarchive=function(){e.is_unarchiving=!0,wt.data.project.unarchive(r,function(){e.project.info.archived=0,i.project&&i.project.info.pid===r&&i.project.info&&(i.project.info.archived=0),kzi.msg.success("激活项目成功"),e.js_step(3),i.reload_projects(function(e){if(i.project.info&&i.project.info.pid===r){var t=_.findWhere(e,{pid:r});t&&(i.project.info.permission=t.permission)}})},null,function(){e.is_unarchiving=!1})},e.js_color_select=function(t){e.project.info.new_bg=t},e.js_prj_set_logo=function(){(e.project.info.new_bg!==e.project.bg||e.project.info.new_pic!==e.project.pic)&&(e.is_logo_saving=!0,wt.data.project.set_logo(r,e.project.info.new_bg,e.project.info.new_pic,function(){kzi.msg.success("设置项目标识成功"),i.refresh_cache.project.set_logo(r,e.project.info.new_bg,e.project.info.new_pic)},function(){kzi.msg.success("设置项目标识失败")},function(){e.is_logo_saving=!1}))},e.js_icon_select=function(t){e.project.info.new_pic=t},e.js_autoarchive_is_open=function(){return!0},e.js_show_done_task=function(){return!0},e.js_prj_del=function(t){t===e.project.info.name?(e.is_deleting=!0,wt.data.project.del(r,function(){i.refresh_cache.project.remove(r),n.path("/dashboard")},null,function(){e.is_deleting=!1})):kzi.msg.warn("输入项目名字错误！请确认你要删除的项目！")},e.js_prj_unnotify=function(){e.project.info.is_notify=0,wt.data.project.set_prefs(r,"is_notify",0,function(){},function(){e.project.info.is_notify=1})},e.js_prj_notify=function(){e.project.info.is_notify=1,wt.data.project.set_prefs(r,"is_notify",1,function(){},function(){e.project.info.is_notify=0})},e.js_prj_quit=function(t){t===e.project.info.name?(e.is_quiting=!0,wt.data.project.member_leave(r,function(){i.projects=_.reject(i.projects,function(e){return e.pid==r}),n.path("/dashboard")},null,function(){e.is_quiting=!1})):kzi.msg.warn("输入项目名字错误！请确认你要退出的项目！")},e.ready_email_invite=function(){e.member_inviting=!1,e.add_done=!1,e.add_done=!1,e.data.invite_email=""},e.clear_task_filters=function(){this.task_filter_text="",e.$emit(kzi.constant.event_names.project_clear_task_filter,null)},e.js_toggle_autoarchive=function(){var e=1;e=1===i.project.info.auto_archived?0:1,wt.data.project.set_prefs(r,"auto_archived",e,function(){i.project.info.auto_archived=e})},e.js_toggle_show_done_task_in_event=function(){var e=1;e=1===i.project.info.show_completed?0:1,wt.data.project.set_prefs(r,"show_completed",e,function(){i.project.info.show_completed=e})},e.set_transfer_to=function(t){e.data.transfer_to_tid=t},e.transfer=function(){var t=e.data.transfer_to_tid;if(!_.isEmpty(t)){var n=i.project.info.pid;wt.data.project.transfer(n,t,function(){i.refresh_cache.project.shift(n,t),kzi.msg.success("项目移动成功")},function(){kzi.msg.error("项目移动失败")},function(){})}},e.js_goto_prj_copy=function(){e.prj_copy.teams=wt.bus.team.find_add_prj_teams(),e.prj_copy.dest_team=e.prj_copy.teams[0],e.js_step(7)},e.js_prj_copy=function(){var t="";e.is_prj_copying=!0,wt.data.project.copy_project(r,e.prj_copy.dest_team.team_id,e.prj_copy.name,e.prj_copy.keepTasks,e.prj_copy.keepFiles,e.prj_copy.keepPosts,e.prj_copy.keepPages,e.prj_copy.selected_visibility.id,function(e){i.refresh_cache.project.add(e.data),i.refresh_cache.team.add_project(e.data),t=e.data.pid,kzi.msg.success("拷贝项目成功")},function(){kzi.msg.error("拷贝项目成功")},function(){e.is_prj_copying=!1,n.path("/project/"+t)})},e.js_webhook_add_edit=function(){return e.webhook.is_every=parseInt(e.webhook.is_every),1!==e.webhook.is_every&&""===e.webhook.actions.join("")?(kzi.msg.warn("添加 Webhook 错误，至少选一个通知事件"),void 0):(e.webhook.actions=_.without(e.webhook.actions,""),e.webhook.actions=_.uniq(e.webhook.actions,""),e.webhook.wid?wt.data.webhook.change_webhook(r,e.webhook,function(){kzi.msg.info("Webhook 修改成功"),e.js_step(50)}):wt.data.webhook.add_webhook(r,e.webhook,function(){kzi.msg.info("Webhook 添加成功"),e.js_step(50)}),void 0)},e.js_webhook_del=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,n,a){t.popbox=n,t.js_close=function(){n.close()},t.delete_message="Webhook 删除后，通知事件将不会在通知到 Webhook 地址，确认删除吗？",t.delete_title="确认删除 Webhook",t.delete_button="确认删除",t.js_sure_delete=function(){t.is_deleting=!0,wt.data.webhook.del_webhook(r,i.wid,function(e){200==e.code&&(kzi.msg.info("Webhook 删除成功"),a.scope.js_step(50),t.js_close())},null,function(){t.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_webhook_edit=function(t,i){if(1!==i.is_every){i.actions=i.actions.substr(1,i.actions.length-2).split(","),i.actions=_.without(i.actions,"空"),i.actions=_.map(i.actions,function(e){return _.where(kzi.constant.actions,{desc:e})[0].action});var n=_.pluck(kzi.constant.actions,"action"),a=[];_.each(n,function(e){_.contains(i.actions,e)?a.push(e):a.push("")}),i.actions=a}e.webhook=i,e.js_step(52)},e.js_timingtask_del=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,n,a){t.popbox=n,t.js_close=function(){n.close()},t.delete_message="循环任务删除后，将停止创建任务，确认删除吗？",t.delete_title="确认删除 循环任务",t.delete_button="确认删除",t.js_sure_delete=function(){t.is_deleting=!0,wt.data.timingtask.del_timingtask(r,i.ttid,function(e){200==e.code&&(kzi.msg.info("循环任务 删除成功"),a.scope.js_step(8),t.js_close())},null,function(){t.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.show_project_tasks_filter,function(){i.global.right_sidebar_is_fold=!1,e.js_step(1)}),e.$on(kzi.constant.event_names.show_project_setting,function(){i.global.right_sidebar_is_fold=!1,e.js_step(3)}),e.$on(kzi.constant.event_names.show_project_setting_identify,function(){i.global.right_sidebar_is_fold=!1,e.js_step(32)}),e.$on(kzi.constant.event_names.show_project_timingtask_list,function(){i.global.right_sidebar_is_fold=!1,e.js_step(8)})}])}(),function(){"use strict";angular.module("wt.home_controller",[]).controller("home_share_ctrl",["$rootScope","$scope",function(e,t){e.global.title="推荐给好友",t.show_send_email=!1,t.share_link=_.isEmpty(e.global.me.name)?kzi.config.root_url:kzi.config.root_url+"?by="+e.global.me.name,t.share_desc="Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。",t.js_show_send_email=function(){t.show_send_email=!t.show_send_email},t.js_cancel_send_email=function(){t.show_send_email=!1},t.js_send_share_email=function(){t.is_sending=!0,wt.data.share.recommand(t.share_email,t.share_desc,function(){t.share_email="",t.share_desc="Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。"},null,function(){t.is_sending=!1})}}])}(),function(){"use strict";angular.module("wt.comment_controller",["ui.utils"]).controller("comment_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,i,n,a,s){e.comments=[],e.is_add_comment=!1,e.comments_loading_done=!1,e.comment={},e.xtype="";var r,o,l,c;e.$on(kzi.constant.event_names.load_comments,function(t,n){_.isEmpty(n.pid)||_.isEmpty(n.xid)||(_.isEmpty(e.comment.message)||o===n.xtype&&l===n.xid||(e.comment={message:""}),r=n.pid,o=n.xtype,l=n.xid,c=n.comment_id,e.xtype=o,e.comments_loading_done=!1,e.comments=[],wt.data.comment.get_list(r,o,l,function(t){e.comments=t.data,_.each(e.comments,function(e){e.files=_.each(e.files,function(e){e.icon=kzi.helper.build_file_icon(e)})}),e.comments_loading_done=!0},function(){e.comments_loading_done=!0}),_.isFunction(i.load_project_members)&&i.load_project_members(r,function(t){var n=_.filter(t.members,function(e){return e.uid!==i.global.me.uid&&1===e.status});e.atwho_members=n,s(function(){$("#atwho-container").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault()})})}))}),e.$on(kzi.constant.event_names.on_task_complete,function(t,n){n&&n.tid===l&&(0===n.completed?e.comments=_.reject(e.comments,function(e){return 3===e.type}):1===n.completed&&e.comments.push({cid:"-1",message:"完成了任务",create_date:(new Date).getTime(),type:3,format:1,owner:_.pick(i.global.me,"uid","name","display_name","avatar")}))}),e.$on(kzi.constant.event_names.on_comment_new,function(t,n){i.locator.show_slide&&r===n.pid&&o===n.xtype&&l===n.xid&&(n.comment.files=_.each(n.comment.files,function(e){e.icon=kzi.helper.build_file_icon(e)}),e.comments.push(n.comment))}),e.$on(kzi.constant.event_names.clear_comments,function(){e.comments=[]}),e.js_repeat_done=function(){if(!_.isEmpty(e.comments)){var t=e.comments[e.comments.length-1];c&&s(function(){var e="#comment_item_"+c;c===t.cid?$("#new_comment_"+o).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo","bottom"):$(e).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",e)},250)}},e.js_save_comment=function(){var t=i.upload_queue.get_comment_file(r,l);if(t.length>0)return kzi.msg.warn("评论文件正在上传中..."),void 0;var n=e.comment,a=_.where(n.files,{pid:e.pid});n.fids=_.pluck(a,"fid"),_.isEmpty(n.message)&&_.isEmpty(n.fids)||n.is_saving||(n.is_saving=!0,_.isEmpty(n.message)&&(n.message=a.length+"个附件，"+_.pluck(a,"name")),wt.data.comment.publish(r,o,l,n.message,n.fids||"",function(t){var n=t.data;if(_.isEmpty(n.files)||_.each(n.files,function(e){e.icon=kzi.helper.build_file_icon(e)}),e.comments.push(n),"tasks"===o)i.$broadcast(kzi.constant.event_names.on_task_comment,{tid:l});else if("posts"===o){var a={};a.post_id=l,a.last_reply_user=i.global.me,a.last_reply_date=(new Date).getTime(),i.$broadcast(kzi.constant.event_names.on_post_comment,a)}},null,function(){n.is_saving=!1,e.is_add_comment=!1}),n.message="",n.files&&(n.files=a.length==n.files.length?[]:_.reject(n.files,function(t){return t.pid==e.pid})),n.fids=[])},e.js_reply_comment=function(t){var i="回复 @"+t.owner.name+" : ",n=i.length,a="";a=t.raw_message.indexOf(">")>=0?t.raw_message.replace(/\n *>/i,"\n >>"):t.raw_message,a=a.length>60?"\n\n\n >"+a.substr(0,60)+"...":"\n\n\n >"+a,e.comment.message=i+a;var r="#new_comment_"+e.xtype;$(r).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",r),s(function(){var e=$(r).find("textarea")[0];if(e.focus(),document.selection){var t=e.createTextRange();t.moveStart("character",n),t.collapse(),t.select()}else"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(e.select(),e.selectionStart=e.selectionEnd=n)})},e.js_pop_delete_comment=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_comment_delete.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.js_sure_delete=function(){a.scope.comments=_.reject(a.scope.comments,function(e){return e.cid===n.cid}),wt.data.comment.del(r,n.cid,o,l,function(){if("tasks"===o){var t=_.findWhere(i.project.tasks,{tid:l});t&&(t.badges.comment_count-=1)}}),t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}(),function(){"use strict";angular.module("wt.account_controller",["ui.utils"]).controller("account_settings_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$sce",function(e,t,i,n,a,s){function r(){t.send_success=!0,t.sending_email=!1}function o(){t.send_fail=!0,t.sending_email=!1}function l(){}e.global.title="基本设置",t.current_menu="settings",t.current_tab="basic",t.email_step=1,t.upload_enabled=!0,t.token=kzi.get_cookie("sid"),t.part_loading_done=!1,t.action_url=e.global.config.box_url()+"?pid=avatar&token="+t.token,s.trustAsUrl(t.action_url),t.sending_email=!1,t.send_success=!1,t.send_fail=!1,t.change_tab=function(e){t.current_tab!==e&&(t.current_tab=e,t.send_success=!1,t.update_user_success=!1,t.change_pwd_success=!1)},t.js_user_update=function(i,n,a){(n!==e.global.me.display_name||a!=e.global.me.desc)&&(t.is_updating=!0,(void 0===a||null===a)&&(a="",t.desc=""),wt.data.user.update(n,a,function(){t.update_user_success=!0,t.name=n,t.desc=a,kzi.msg.success("修改个人资料成功！")},function(){kzi.msg.error("修改个人资料失败！")},function(){t.is_updating=!1}),e.refresh_cache.user.update(e.global.me.uid,n,a))},t.js_user_change_pwd=function(e,i,n){t.is_changing_pwd=!0,wt.data.user.change_pwd(i,n,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("原密码输入错误")},function(){t.is_changing_pwd=!1})},t.js_user_change_email=function(i,n){return n===e.global.me.email?(i.$errors.unshift("新邮箱地址和原来的邮箱地址一样"),void 0):(t.is_sending_email=!0,wt.data.user.email_change_apply(n,function(){t.send_success=!0},function(e){e.code===kzi.statuses.user_error.email_has_exist.code&&i.$errors.unshift("该邮箱地址已经存在，请重新输入")},function(){t.is_sending_email=!1}),void 0)},t.send_activation_email=function(e){e.preventDefault(),t.sending_email=!0,wt.data.user.resend_activation_email(r,o,l)},t.js_change_email_step=function(e){t.email_step=e},t.avatar_upload_option={processstart:function(){t.upload_enabled=!1},process:function(e,t){var i=0;_.isEmpty(t.files)||(i=t.files[0].size),$("[name=file_upload]").fileupload({formData:{size:i,target:"avatar"}})},processfail:function(e,i){!_.isEmpty(i.files)&&i.files.error&&_.each(i.files,function(e){e.error&&kzi.msg.error(e.error)}),t.upload_enabled=!0},done:function(i,n){if(200!=n.result.code){var a="上传头像失败，请重新再试！";return n.result.code==kzi.statuses.file_error.generate_thumbnail_error.code&&(a="生成缩略图失败，请重新再试！"),kzi.msg.error(a),t.upload_enabled=!0,void 0}if(!_.isEmpty(n.result.files)){var s=n.result.files[0];s&&!s.error&&(e.global.me.avatar=s.url,e.refresh_cache.user.avatar(e.global.me.uid,s.url),wt.data.user.set_avatar(s.url,function(){}))}t.upload_enabled=!0},acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,maxNumberOfFiles:100,imageMaxWidth:180,imageMaxHeight:180,imageCrop:!0},t.name="",t.desc="",wt.data.account.get_basic(function(i){e.global.me.desc=i.data.desc,t.name=e.global.me.display_name,t.desc=e.global.me.desc},null,function(){t.part_loading_done=!0}),e.global.loading_done=!0}]).controller("account_twofactor_ctrl",["$rootScope","$scope",function(e,t){e.global.title="两步验证",t.current_menu="twofactor",t.part_loading_done=!1,e.global.loading_done=!0,t.from_index=1,t.two_step=0,t.input={};var n=function(){t.recovery_codes=null,wt.data.account.get_recovery_codes(function(e){t.recovery_codes=e.data})};t.js_two_step=function(e){t.two_step!==e&&(t.two_step=e,3===e&&(t.twofactor_secret||(t.twofactor_secret=null,t.qrcode_html=null,t.loading_twofactor_secret_done=!1,wt.data.account.get_twofactor_secret(function(e){t.twofactor_secret=e.data},null,function(){t.loading_twofactor_secret_done=!0}))))},t.js_user_change_pwd=function(e,i,n){t.is_changing_pwd=!0,wt.data.user.change_pwd(i,n,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("原密码输入错误")},function(){t.is_changing_pwd=!1})},t.js_enable_twofactor=function(){return _.isEmpty(t.input.factor)?(t.input.enable_twofactor_errors="动态验证码不能为空",void 0):(t.is_enable_twofactoring=!0,wt.data.account.enable_twofactor(t.input.factor,function(){t.account_basic.twofactor_enabled=1,n(),t.js_two_step(0),t.twofactor_secret=null,t.input.enable_twofactor_errors=""},function(e){t.input.enable_twofactor_errors=e.code===kzi.statuses.user_error.twofactor_match_error.code?"输入动态验证码不正确,请重新再试！":"开启验证失败,请重新再试！"},function(){t.is_enable_twofactoring=!1}),void 0)},t.js_twofactor_focus=function(){t.input.enable_twofactor_errors=""},t.js_disable_twofactor=function(){t.is_disable_twofactoring=!0,wt.data.account.disable_twofactor(function(){t.account_basic.twofactor_enabled=0},function(){t.input.enable_twofactor_errors="关闭两步验证失败,请重新再试！"},function(){t.is_disable_twofactoring=!1})},wt.data.account.get_basic(function(e){t.account_basic=e.data,t.account_basic.twofactor_enabled&&n()},null,function(){t.part_loading_done=!0})}]).controller("account_message_ctrl",["$rootScope","$scope","$timeout","$location",function(e,t,i,n){e.global.title="消息设置",t.current_menu="message",t.part_loading_done=!1,e.global.loading_done=!0,t.js_desk_notice=function(e){t.desk_notice!==e&&(t.desk_notice=e,kzi.localData.set(kzi.config.desk_notify_key,e),kzi.msg.success("更改设置成功")),1===t.desk_notice?window.DesktopNotify.wt_show("/img/wt-logo.png","提醒","你打开了桌面提醒功能",function(){}):window.DesktopNotify.wt_show("/img/wt-logo.png","提醒","你关闭了桌面提醒功能",function(){})},t.js_email_notice=function(i){t.notice_by_email!==i&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_by_email",i,function(){kzi.msg.success("更改设置成功")})},t.js_smart_notice=function(i){t.notice_for_smart!==i&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_for_smart",i,function(){kzi.msg.success("更改设置成功")})},t.js_change_express=function(i){t.notice_for_express!==i&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_for_express",i,function(){kzi.msg.success("更改设置成功")})},t.js_change_daily_email=function(i){t.notice_for_daily_mail!==i&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_for_daily_mail",i,function(){kzi.msg.success("更改设置成功")})},t.js_change_weekly_email=function(i){t.notice_for_weekly_mail!==i&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_for_weekly_mail",i,function(){kzi.msg.success("更改设置成功")})},wt.data.account.get_basic(function(e){t.notice_by_email=_.find(e.data.prefs,function(e){return"notice_by_email"===e.key}).value,t.notice_for_smart=_.find(e.data.prefs,function(e){return"notice_for_smart"===e.key}).value,t.notice_for_express=_.find(e.data.prefs,function(e){return"notice_for_express"===e.key}).value,t.notice_for_daily_mail=_.find(e.data.prefs,function(e){return"notice_for_daily_mail"===e.key}).value,t.notice_for_weekly_mail=_.find(e.data.prefs,function(e){return"notice_for_weekly_mail"===e.key}).value,"express"===n.$$hash&&$(".center-panel-container").hasClass("mCustomScrollbar")&&i(function(){$(".center-panel-container").mCustomScrollbar("scrollTo","bottom")},300)},null,function(){t.part_loading_done=!0}),t.desk_notice=kzi.localData.get(kzi.config.desk_notify_key),_.isEmpty(t.desk_notice)&&(t.desk_notice=1,kzi.localData.set(kzi.config.desk_notify_key,1))}]).controller("account_projects_ctrl",["$rootScope","$scope",function(e,t){e.global.title="项目管理",t.current_menu="projects",wt.data.account.get_projects(function(i){t.account_projects=i.data,e.global.loading_done=!0},null,function(){e.global.loading_done=!0})}]).controller("account_teams_ctrl",["$rootScope","$scope",function(e,t){e.global.title="团队管理",t.current_menu="teams",t.part_loading_done=!1,e.global.loading_done=!0,wt.data.team.get_list(function(e){t.account_teams=e.data},null,function(){t.part_loading_done=!0})}]).controller("account_security_ctrl",["$rootScope","$scope",function(e,t){e.global.title="安全日志",t.part_loading_done=!1,e.global.loading_done=!0,t.current_menu="security",t.from_index=1,t.two_step=0,t.input={};var i=function(e){t.account_histories=[],t.part_loading_done=!1,wt.data.account.get_security(e,function(n){t.account_histories=n.data.histories,t.from_index=(e-1)*kzi.config.default_count+1,(1===e||"1"===e)&&(t.totalCount=n.data.totalCount,t.security_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){i(e+1)}}})},null,function(){t.part_loading_done=!0})};t.js_two_step=function(e){t.two_step!==e&&(t.two_step=e,3===e&&(t.twofactor_secret||(t.twofactor_secret=null,t.qrcode_html=null,t.loading_twofactor_secret_done=!1,wt.data.account.get_twofactor_secret(function(e){t.twofactor_secret=e.data},null,function(){t.loading_twofactor_secret_done=!0}))))},t.js_user_change_pwd=function(e,i,n){t.is_changing_pwd=!0,wt.data.user.change_pwd(i,n,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("原密码输入错误")},function(){t.is_changing_pwd=!1})},t.js_enable_twofactor=function(){return _.isEmpty(t.input.factor)?(t.input.enable_twofactor_errors="动态验证码不能为空",void 0):(t.is_enable_twofactoring=!0,wt.data.account.enable_twofactor(t.input.factor,function(){t.account_basic.twofactor_enabled=1,load_recovery_codes(),t.js_two_step(0),t.twofactor_secret=null,t.input.enable_twofactor_errors=""},function(e){t.input.enable_twofactor_errors=e.code===kzi.statuses.user_error.twofactor_match_error.code?"输入动态验证码不正确,请重新再试！":"开启验证失败,请重新再试！"},function(){t.is_enable_twofactoring=!1}),void 0)},t.js_twofactor_focus=function(){t.input.enable_twofactor_errors=""},t.js_disable_twofactor=function(){t.is_disable_twofactoring=!0,wt.data.account.disable_twofactor(function(){t.account_basic.twofactor_enabled=0},function(){t.input.enable_twofactor_errors="关闭两步验证失败,请重新再试！"},function(){t.is_disable_twofactoring=!1})},i(1)}]).controller("account_apps_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,i,n,a,s){e.global.title="应用中心",t.current_menu="apps",t.part_loading_done=!1,e.global.loading_done=!0,wt.data.account.get_apps(function(e){t.account_apps=e.data},null,function(){t.part_loading_done=!0});var r=function(e){t.account_apps=_.reject(t.account_apps,function(t){return t.app_id===e.app_id})};t.js_pop_decommissioning=function(e,t){s.popbox({target:e,templateUrl:"/ycjs/tpl/account/pop_decommissioning_confirm.html",controller:["$rootScope","$scope","popbox",function(e,i,n){i.popbox=n,i.js_close=function(){n.close()},i.js_decommissioning=function(){i.is_decommissioning=!0,wt.data.account.decommissioning_app(t.app_id,function(){r(t),n.close()},null,function(){i.is_decommissioning=!1})}}]}).open()}}])}(),function(){"use strict";var e=angular.module("wt.dashboard_controller",["ui.utils"]);e.controller("dashboard_ctrl",["$scope","$routeParams","$rootScope","$popbox",function(e,t,i,n){e.current_tab="feeds",e.dashbaord_top_tab=kzi.localData.get("dashboard_top_tab")||"my_feed",e.feeds=[],i.global.loading_done=!0;var a=1;e.my_feed_page_has_more=!0;var s=1;e.my_completed_task_page_has_more=!0,e.my_uncompleted_task_page_has_more=!0;var r=1;e.my_email_page_has_more=!0,e.initial_loading_done=!1,e.part_loading_done=!0,e.task_tab="uncompleted",e.switching_sub_tab_loading_done=!1;var o=function(){e.part_loading_done=!1,wt.data.activity.get_feeds("all",0,a,function(t){_.isEmpty(t.data)?e.feeds=e.feeds||[]:(a++,e.feeds=_.isEmpty(e.feeds)?t.data:e.feeds.concat(t.data)),e.my_feed_page_has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){e.part_loading_done=!0,e.initial_loading_done=!0,i.global.title="工作台"})},l=function(){e.part_loading_done=!1,wt.data.mail.get_list(r,"all",function(t){_.isEmpty(t.data)?e.mails=e.mails||[]:(r++,e.mails=_.isEmpty(e.mails)?t.data:e.mails.concat(t.data)),e.my_email_page_has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){e.part_loading_done=!0,e.initial_loading_done=!0,i.global.title="工作台"})},c=function(e){var t={today:[],tomorrow:[],week:[],nextweek:[],month:[],due:[],other:[]},i=moment(),n=moment().add("days",1),a=moment().endOf("week").add("days",1),s=moment().add("days",7).endOf("week").add("days",1),r=moment().endOf("month");_.each(e,function(e){var o=moment(e.expire_date);o.isSame(i,"day")?t.today.push(e):o.isSame(n,"day")?t.tomorrow.push(e):o>i&&a>o?t.week.push(e):o>i&&s>o?t.nextweek.push(e):o>i&&r>o?t.month.push(e):i>o&&o>0?t.due.push(e):t.other.push(e)});var o=[];return _.isEmpty(t.today)||o.push({phase:"今天",tasks:t.today}),_.isEmpty(t.tomorrow)||o.push({phase:"明天",tasks:t.tomorrow}),_.isEmpty(t.week)||o.push({phase:"本周",tasks:t.week}),_.isEmpty(t.nextweek)||o.push({phase:"下周",tasks:t.nextweek}),_.isEmpty(t.month)||o.push({phase:"本月",tasks:t.month}),_.isEmpty(t.due)||o.push({phase:"已过期",tasks:t.due}),_.isEmpty(t.other)||o.push({phase:"其它",tasks:t.other}),o},d=function(e){return c(e)},u=function(e,t){if(e.expire_date>0&&t.expire_date>0){var i=(new Date).getTime();return e.expire_date===t.expire_date?0:e.expire_date>i&&i>t.expire_date?-1:i>e.expire_date&&t.expire_date>i?1:e.expire_date>i&&t.expire_date>i?e.expire_date>t.expire_date?1:-1:e.expire_date>t.expire_date?-1:1}return e.expire_date>0&&0===t.expire_date?-1:0===e.expire_date&&t.expire_date>0?1:e.create_date>t.create_date?-1:1},p=function(){e.part_loading_done=!1,wt.data.task.get_for_uncompleted(function(t){i.global.loading_done=!0,e.uncompleted_tasks=t.data.sort(u)},null,function(){e.part_loading_done=!0,e.initial_loading_done=!0,e.grouped_uncompleted_task=d(e.uncompleted_tasks),i.global.title="工作台",e.switching_sub_tab_loading_done=!0})},f=function(){e.part_loading_done=!1,wt.data.task.get_for_completed(s,function(t){var i=e.last_date;_.each(t.data,function(e){var t=moment(e.completed_date).format("YYYY-MM-DD");t===i?e.is_show_date=!1:(e.is_show_date=!0,i=t)}),e.last_date=i,_.isEmpty(t.data)?e.completed_tasks=e.completed_tasks||[]:(s+=1,e.completed_tasks=_.isEmpty(e.completed_tasks)?t.data:e.completed_tasks.concat(t.data)),kzi.config.default_count>t.data.length&&(e.my_completed_task_page_has_more=!1)},null,function(){e.part_loading_done=!0,e.initial_loading_done=!0,i.global.title="工作台",e.switching_sub_tab_loading_done=!0})},h=function(){e.part_loading_done=!1,wt.data.task.get_for_expired(function(t){e.expired_tasks=t.data},null,function(){e.part_loading_done=!0,e.initial_loading_done=!0,i.global.title="工作台",e.switching_sub_tab_loading_done=!0})},m=function(){wt.data.event.get_today_events(function(t){e.today_events=t.data})},g=function(){wt.data.task.get_for_user_overview(function(t){e.overview=t.data},null,function(){})},v=function(){var t=new Date;e.show_date="今天是 "+kzi.util.getWeekday(t)+"，"+t.format("yyyy年MM月dd日");var i=t.getHours();6>i?e.hi_greetings="夜深了，注意休息":9>i?e.hi_greetings="早上好，喝杯茶吧！":11>i?e.hi_greetings="上午好！":12>i?e.hi_greetings="吃过午饭了么？":14>i?e.hi_greetings="下午好！准备工作了？":17>i?e.hi_greetings="下午好！起来运动一下":19>i?e.hi_greetings="傍晚好！":22>i?e.hi_greetings="还没下班，辛苦了":24>i&&(e.hi_greetings="夜深了，注意休息"),"my_task"===e.dashbaord_top_tab?"completed"===e.task_tab?f():"expired"===e.task_tab?h():p():"my_feed"===e.dashbaord_top_tab&&o(),"my_email"===e.dashbaord_top_tab&&l(),g(),m()};v(),e.change_top_tab=function(t){e.current_tab!==t&&(e.dashbaord_top_tab=t,e.initial_loading_done=!1,kzi.localData.set("dashboard_top_tab",t),"my_feed"===t?(a=1,e.my_feed_page_has_more=!0,e.feeds=void 0,o()):"my_task"===t?(s=1,e.my_completed_task_page_has_more=!0,e.completed_tasks=void 0,e.uncompleted_tasks=void 0,e.switching_sub_tab_loading_done=!1,e.task_tab="uncompleted",p()):"my_email"===t&&(r=1,e.my_email_page_has_more=!0,e.mails=void 0,l()))},e.change_task_tab=function(t){e.task_tab!==t&&(e.task_tab=t,e.switching_sub_tab_loading_done=!1,"completed"===e.task_tab?f():"expired"===e.task_tab?h():p())},e.go_to_my_task_uncompleted=function(){e.change_top_tab("my_task"),e.change_task_tab("uncompleted")},e.go_to_my_task_expired=function(){e.change_top_tab("my_task"),e.change_task_tab("expired")},e.go_to_my_task_completed=function(){e.change_top_tab("my_task"),e.change_task_tab("completed")},e.load_my_feed_more=function(){o()},e.reload_feed=function(){a=1,e.feeds=[],o()},e.js_refresh_feed=function(){e.reload_feed()},e.load_my_uncompleted_page_more=function(){p()},e.load_my_completed_page_more=function(){f()},e.load_my_email_page_more=function(){l()},e.js_set_mail_read=function(e,t){wt.data.mail.set_read(t.mail_id,function(){t.is_read=!0})},e.js_open_mail_detail=function(e){i.locator.to_mail(e.mail_id),wt.data.mail.set_read(e.mail_id,function(){e.is_read=!0})},e.js_pop_showhelp=function(t){n.popbox({target:t,templateUrl:"/ycjs/tpl/dashboard/pop_dashboard_mailhelp.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},e.pop_data=i}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.on_task_update,function(t,n){if(n){var a;switch(e.task_tab){case"uncompleted":a=_.findWhere(e.uncompleted_tasks,{tid:n.tid});break;case"completed":a=_.findWhere(e.completed_tasks,{tid:n.tid});break;case"expired":a=_.findWhere(e.expired_tasks,{tid:n.tid});break;default:kzi.msg.error("更新任务传入消息错误")}_.isEmpty(a)||(a.name=n.name,a.desc=n.desc,a.pos=n.pos,a.completed=n.completed,a.expire_date=n.expire_date,a.badges=n.badges,a.labels=n.labels,a.members=n.members,a.watchers=n.watchers,a.todos=n.todos),i.refresh_cache.task.update_full(n)}}),e.$on(kzi.constant.event_names.on_task_trash,function(t,i){if(i)switch(e.task_tab){case"uncompleted":e.uncompleted_tasks=_.reject(e.uncompleted_tasks,function(e){return e.tid===i.tid}),e.grouped_uncompleted_task=d(e.uncompleted_tasks);break;case"completed":e.completed_tasks=_.reject(e.completed_tasks,function(e){return e.tid===i.tid});break;case"expired":e.expired_tasks=_.reject(e.expired_tasks,function(e){return e.tid===i.tid});break;default:kzi.msg.error("删除任务传入消息错误")}}),e.$on(kzi.constant.event_names.on_task_complete,function(t,i){if(i){var n;switch(e.task_tab){case"uncompleted":n=_.findWhere(e.uncompleted_tasks,{tid:i.tid});break;case"expired":n=_.findWhere(e.expired_tasks,{tid:i.tid});break;case"completed":n=_.findWhere(e.completed_tasks,{tid:i.tid});break;default:kzi.msg.error("接受完成任务事件传入消息错误")}_.isEmpty(n)||(n.completed=i.completed)}}),e.$on(kzi.constant.event_names.on_event_update,function(t,i){if(e.today_events){var n=_.findWhere(e.today_events,{event_id:i.event_id});n&&(n.name=i.name,n.start.date=i.start.date,n.end.date=i.end.date)}}),e.$on(kzi.constant.event_names.on_event_trash,function(t,i){e.today_events&&(e.today_events=_.reject(e.today_events,function(e){return e.event_id===i.event_id}))}),e.$on(kzi.constant.event_names.on_mail_trash,function(t,i){e.mails&&(e.mails=_.reject(e.mails,function(e){return e.mail_id===i.mail_id}))})}]),e.controller("search_result_ctrl",["$scope","$routeParams","$rootScope","$location",function(e,t,i,n){i.global.title="搜索结果",e.keywords=t.keywords,e.js_filter_result=function(t){e.current_type=t,"all"==e.current_type?e.show_empty=_.isEmpty(e.tasks)&&_.isEmpty(e.files)&&_.isEmpty(e.posts)&&_.isEmpty(e.pages)&&_.isEmpty(e.mails)&&_.isEmpty(e.events)?!0:!1:"task"==e.current_type?e.show_empty=_.isEmpty(e.tasks)?!0:!1:"file"==e.current_type?e.show_empty=_.isEmpty(e.files)?!0:!1:"post"==e.current_type?e.show_empty=_.isEmpty(e.posts)?!0:!1:"page"==e.current_type?e.show_empty=_.isEmpty(e.pages)?!0:!1:"mail"==e.current_type?e.show_empty=_.isEmpty(e.mails)?!0:!1:"event"==e.current_type&&(e.show_empty=_.isEmpty(e.events)?!0:!1)};var a=function(){return _.isEmpty(e.keywords)?(e.js_filter_result(e.current_type),void 0):(e.loading_result=!0,wt.data.search_all("all",encodeURI(e.keywords),function(t){e.tasks=t.data.tasks,e.files=t.data.files,i.load_projects(function(){_.each(e.files,function(e){if(e.type===kzi.constant.file_type.folder){var t=_.findWhere(i.projects,{pid:e.pid});t&&(e.project_name=t.name)}})}),e.posts=t.data.posts,e.pages=t.data.pages,e.mails=t.data.mails,e.events=t.data.events,e.js_filter_result(e.current_type)},null,function(){e.loading_result=!1}),void 0)};e.js_search=function(){e.keywords.length>0&&a()},e.js_show_file=function(e){e.type===kzi.constant.file_type.file?i.locator.to_file(e.pid,e.fid,!0):n.path("/project/"+e.pid+"/folder/"+e.fid).search({})};var s=function(){i.global.loading_done=!0,e.current_type="all",a()};s()}]),e.controller("main_panel_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n){e.current_pid="";var s=!1;e.prj_sort_options={appendTo:$(".left_menu"),containment:".left_menu",placeholder:"wt-prj-placeholder",revert:10,dropOnEmpty:!0,tolerance:"pointer",over:function(){},start:function(e,t){s=!0,t.item.addClass("picked-up"),$(".wt-prj-placeholder").css({height:t.item.css("height"),width:t.item.outerWidth()}),t.item.width(t.item.outerWidth()-10),t.item.find("a").css("padding","15px 15px")},stop:function(t,n){n.item.removeClass("picked-up"),n.item.find("a").css("padding","15px 20px");var a=n.item.attr("pid"),r=n.item.prev().attr("pid"),o=n.item.next().attr("pid"),l=null,c=null;if(_.isEmpty(o)||(l=_.findWhere(e.projects,{pid:o})),_.isEmpty(r)||(c=_.findWhere(e.projects,{pid:r})),l||c){var d=wt.bus.project.calculate_prj_pos(c,l),u=_.findWhere(e.projects,{pid:a});u.pos=d,wt.data.project.prj_position(a,d,function(){i.sort_projects(),i.$broadcast(kzi.constant.event_names.project_sort_change),s=!1})}}},e.js_set_current_prj=function(t){s||(e.current_pid=t.pid)},e.js_section_expand_toggle=function(t,a){return e.left_panel_is_fold!==!0?(-1!=t.team_id&&a&&!$(a.target).hasClass("icon-angle")&&(n.path("/teams/"+t.team_id),i.team_in_edit=_.find(i.teams,function(e){return e.team_id===t.team_id
})),e.current_team&&e.current_team.team_id===t.team_id?(e.current_team.expand=!e.current_team.expand,void 0):(e.current_team&&(e.current_team.expand=!1),e.current_team=t,t.expand=!0,void 0)):void 0};var r=function(){var n=null;if("team"===i.global.header_menu){n=t.team_id;var a=_.findWhere(i.teams,{team_id:n});if(!a)return;e.current_team?e.current_team.team_id!==n&&e.js_section_expand_toggle(a):(a.expand=!0,e.current_team=a)}else{var s=e.current_pid,r=_.findWhere(i.projects,{pid:s});n="-1",r&&(n=r.team_id);var a=_.findWhere(i.teams,{team_id:n});a&&(a.expand=!0,e.current_team=a)}};e.$on(kzi.constant.event_names.load_teams_projects_sucess,function(){r()}),i.$on("$routeChangeSuccess",function(){if("team"===i.global.header_menu)r();else if("project"===i.global.header_menu){if("project"===i.global.header_menu){var o=t.pid;e.current_pid=_.isEmpty(o)?"":o}}else e.current_pid=""})}]),e.controller("global_file_ctrl",["$rootScope","$scope","$popbox",function(e,t,i){t.options={pasteZone:null,dropZone:null,url:kzi.config.box_url(),done:function(i,n){n.scope().$apply(function(){if(200===n.response().result.code){var i=n.response().result.files[0],a={};switch(a.target=i.formData.target,a.type=i.formData.type||"project",a.file={pid:i.formData.pid,name:i.fname,ext:kzi.constant.get_ext(i.ext),size:i.size,path:i.url},i.formData.type){case"task":a.ext={tid:i.formData.tid};break;case"post":a.ext={post_id:i.formData.post_id};break;case"file":a.ext={fid:i.formData.fid};break;case"event":a.ext={event_id:i.formData.event_id};break;default:a.ext={folder_id:i.formData.folder_id}}wt.data.file.new_upload(i.formData.pid,a,function(s){a.file=_.extend(a.file,i,s.data),a.file.icon=kzi.helper.build_file_icon(a.file),e.refresh_cache.file.add(a.file),e.$broadcast(kzi.constant.event_names.on_file_add,a),_.isFunction(n.files[0].formData.successCallback)&&n.files[0].formData.successCallback(s),t.queue=_.reject(t.queue,function(e){try{return"pending"===e.$state()?!1:e.$response().result.files[0]===n.response().result.files[0]}catch(t){return!1}})},null,function(){})}else n.files[0].error="上传出错"})}},t.js_pop_global_fileupload=function(e){i.popbox({target:e,templateUrl:"/ycjs/tpl/header/pop_global_fileupload.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},e.pop_data=i,e.$watch("pop_data.scope.",function(e){0===e&&t.close()})}],resolve:{pop_data:function(){return{scope:t}}}}).open()}}]),e.controller("broadcast_widget_ctrl",["$rootScope","$scope",function(e,t){t.is_show=!1,t.broadcast_msg={},wt.data.broadcast.get_latest(function(e){t.broadcast_msg=e.data,t.is_show=!_.isEmpty(kzi.localData.get("latest_broadcast_msg_id"))&&kzi.localData.get("latest_broadcast_msg_id").indexOf(t.broadcast_msg.broadcast_id)>-1||_.isEmpty(t.broadcast_msg)?!1:!0},function(){kzi.msg.error("获取广播失败")},function(){}),t.js_close=function(){kzi.localData.set("latest_broadcast_msg_id",t.broadcast_msg.broadcast_id),t.is_show=!1}}])}(),function(){"use strict";var e=angular.module("wt.browse_controller",["ui.utils"]);e.controller("explore_task_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.title="发现任务",i.global.loading_done=!0,e.current_tab=0,e.browse_top_tab=" ";var n=1,a=function(){e.part_loading_done=!1,i.explore_route_main_tab_id=0,wt.data.task.get_all_list(e.current_tab,n,function(t){var i=e.last_date;_.each(t.data,function(e){var t=moment(e.create_date).format("YYYY-MM-DD");t===i?e.is_show_date=!1:(e.is_show_date=!0,i=t)}),e.last_date=i,_.isEmpty(t.data)?e.tasks=[]:(n+=1,e.tasks=_.isEmpty(e.tasks)?t.data:e.tasks.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){e.part_loading_done=!0})};a(),e.load_tasks_more=function(){a()},e.js_change_tab=function(t){e.current_tab=t,n=1,e.tasks=[],e.last_date=0,a()},e.js_change_main_tab=function(e){i.explore_route_main_tab_id=e}}]),e.controller("explore_file_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.title="发现文件",e.browse_top_tab="files",i.global.loading_done=!0,e.current_tab=0,i.explore_route_main_tab_id=1;var n=1,a=function(){i.part_loading_done=!1,wt.data.file.get_all_list(e.current_tab,n,function(t){_.each(t.data,function(e){e.icon=kzi.helper.build_file_icon(e)}),_.isEmpty(t.data)?e.files=[]:(n+=1,e.files=_.isEmpty(e.files)?t.data:e.files.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){i.part_loading_done=!0})};a(),e.load_files_more=function(){a()},e.js_change_tab=function(t){e.current_tab=t,n=1,e.files=[],a()},e.js_change_main_tab=function(e){i.explore_route_main_tab_id=e}}]),e.controller("explore_post_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.title="发现话题",e.browse_top_tab="posts",i.global.loading_done=!0,e.current_tab=0,i.explore_route_main_tab_id=2;var n=1;e.posts=[];var a=function(){i.part_loading_done=!1,wt.data.post.get_all_list(e.current_tab,n,function(t){_.isEmpty(t.data)?e.posts=[]:(n+=1,e.posts=_.isEmpty(e.posts)?t.data:e.posts.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){i.part_loading_done=!0})};a(),e.load_posts_more=function(){a()},e.js_change_tab=function(t){e.current_tab=t,n=1,e.posts=[],a()},e.js_change_main_tab=function(e){i.explore_route_main_tab_id=e}}]),e.controller("explore_page_ctrl",["$scope","$routeParams","$rootScope",function(e,t,i){i.global.title="发现文档",e.browse_top_tab="pages",i.global.loading_done=!0,e.current_tab=0,i.explore_route_main_tab_id=3;var n=1;e.pages=[];var a=function(){i.part_loading_done=!1,wt.data.page.get_all_list(e.current_tab,n,function(t){_.isEmpty(t.data)?e.pages=[]:(n+=1,e.pages=_.isEmpty(e.pages)?t.data:e.pages.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){i.part_loading_done=!0})};a(),e.load_pages_more=function(){a()},e.js_change_tab=function(t){e.current_tab=t,n=1,e.pages=[],a()},e.js_change_main_tab=function(e){i.explore_route_main_tab_id=e}}])}(),function(){"use strict";var e=angular.module("wt.dashboard_controller");e.controller("inbox_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,i,n,a,s){var r=e.vm={read_notices:[],unread_notices:[],pending_notices:[],tab:"unread"},o=0,l=function(){r.part_loading_done=!1,wt.data.notice.get_list("all",o,kzi.config.default_count,1,function(e){_.isEmpty(e.data)||(o=e.data[e.data.length-1].published,r.read_notices=_.isEmpty(r.read_notices)?e.data:r.read_notices.concat(e.data)),kzi.config.default_count>e.data.length&&(r.has_no_more=!0)},null,function(){r.part_loading_done=!0})},c=function(){r.part_loading_done=!1,wt.data.notice.get_list("all",0,"all",0,function(e){r.unread_notices=e.data,i.notice_count!==r.unread_notices.length&&(i.notice_count=r.unread_notices.length)},null,function(){r.part_loading_done=!0})},d=function(){return _.isEmpty(r.pending_notices)?(r.part_loading_done=!1,wt.data.notice.get_pending_list(function(e){r.pending_notices=e.data},null,function(){r.part_loading_done=!0}),void 0):(r.pending_notices=_.reject(r.pending_notices,function(e){return!e.is_pending}),void 0)};e.js_load_more_notice=function(){l()},e.js_switch_tab=function(e){e!==r.tab&&(r.tab=e,"unread"===r.tab?_.isEmpty(r.unread_notices)||(r.unread_notices=_.reject(r.unread_notices,function(e){return 1===e.is_read})):"read"===r.tab?0===o&&l():"pending"===r.tab&&d())},e.$on("wtInboxTriggerSuccess",function(t,i){i?c():s(function(){r.tab="",r.unread_notices=[],r.read_notices=[],r.has_no_more=!1,r.pending_notices=[],o=0,e.js_switch_tab("unread")})});var u=function(){c()};u(),e.$on(kzi.constant.event_names.notice_new,function(e,t){r.unread_notices.unshift(t)}),e.js_show_slide_detail=function(t,i){e.js_set_notice_read(null,i)},e.js_toggle_notice_pending=function(e,t){e.stopPropagation();var n=t.is_pending?0:1;wt.data.notice.update_pending(t.nid,n,function(){var a=_.findWhere(r.unread_notices,{nid:t.nid});a&&(a.is_pending=n,n||(a.is_read=1,i.notice_count>=1&&i.notice_count--)),a=_.findWhere(r.read_notices,{nid:t.nid}),a&&(a.is_pending=n),a=_.findWhere(r.pending_notices,{nid:t.nid}),a&&(a.is_pending=n,n||(a.is_read=1))})},e.js_handle_all_notice=function(){r.set_allhandleing||(r.set_allhandleing=!0,wt.data.notice.set_allhandle(function(){_.each(r.pending_notices,function(e){var t=_.findWhere(r.unread_notices,{nid:e.nid});t&&(t.is_pending=0,t.is_read||(t.is_read=1,i.notice_count>=1&&i.notice_count--)),t=_.findWhere(r.read_notices,{nid:e.nid}),t&&(t.is_pending=0)}),r.pending_notices=[]},null,function(){r.set_allhandleing=!1}))},e.js_set_notice_read=function(e,t){_.isEmpty(e)||e.stopPropagation(),0===t.is_read&&(t.is_read=1,wt.data.notice.set_read(t.nid,function(){_.isEmpty(r.read_notices)||_.findWhere(r.read_notices,{nid:t.nid})||r.read_notices.unshift(t),t.is_read=1,i.notice_count>=1&&i.notice_count--},function(){t.is_read=0,kzi.msg.error("标记消息为已读失败!")}))},e.js_set_all_notice_read=function(){!r.setting_all_notice_read&&r.part_loading_done&&(r.setting_all_notice_read=!0,wt.data.notice.set_allread("all",function(){if(!_.isEmpty(r.unread_notices)){var e=0;_.each(r.unread_notices,function(t){1!==t.is_read&&(t.is_read=1,e++,_.isEmpty(r.read_notices)||_.findWhere(r.read_notices,{nid:t.nid})||r.read_notices.unshift(t))}),r.unread_notices=[],i.notice_count=i.notice_count>=e?i.notice_count-e:0}r.setting_all_notice_read=!1},function(){r.setting_all_notice_read=!1}))}}])}(),function(){"use strict";var e=angular.module("wt.task_controller",["ui.utils"]);e.controller("entity_task_ctrl",["$scope","$element","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,i,n,a,s,r){function h(){return n.global.prj_module.crud&e.entity_permission?(e.pop_member_options=[{name:"从任务移除",ongoing:"移除中...",click:function(t,i,a,s){a.assigned=!0,wt.bus.member.set_task_member_toggle(o,e.task,a,function(){a.setting_toggle_member=!1,n.$broadcast(kzi.constant.event_names.on_task_update,e.task),a.assigned=!1},null,s)}}],void 0):(e.pop_member_options=null,void 0)}function m(){e.pop_watcher_options=n.global.prj_module.crud&e.entity_permission?[{name:"取消关注",ongoing:"取消中...",click:function(t,i,n,a){wt.bus.watch.unwatch(o,e.task,kzi.constant.xtype.task,e.task.tid,n,function(){},null,a)}}]:null}var o,l;e.pid="",e.token=kzi.get_cookie("sid"),e.todo={};var c,d=function(e,t,i){var a=0;_.isEmpty(e.todos)||(a=_.max(e.todos,function(e){return e.pos}).pos);var s=t.temp_name.split(/\n/),r=0;s.forEach(function(t){a+=kzi.config.default_pos,wt.data.task.add_todo(o,l,t,a,function(t){e.todos.push(t.data),e.todos=_.sortBy(e.todos,function(e){return e.pos})},null,function(){r++,r===s.length&&_.isFunction(i)&&(e=u(e),n.$broadcast(kzi.constant.event_names.on_task_update,e),i())})}),t.temp_name=""},u=function(e){e.todos||(e.todos=[]);var t=_.size(e.todos),i=_.size(_.where(e.todos,{checked:1}));return t>0?(e.percentage=parseInt(100*(i/t),10),e.status=i+"/"+t):e.percentage=0,e.badges.todo_checked_count=i,e.badges.todo_count=t,e},p=function(){_.isEmpty(e.task.todos)||(e.task.todos=_.sortBy(e.task.todos,function(e){return e.pos}))},f=function(){e.todo_sort_options={containment:".task-todos",placeholder:"todo-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,start:function(e,t){$(".todo-placeholder").css({height:t.item.outerHeight()+10,width:t.item.css("width")})},stop:function(t,i){var n=i.item.attr("todo-id"),a=_.findWhere(e.task.todos,{todo_id:n}),s=i.item.prev().attr("todo-id"),r=i.item.next().attr("todo-id"),l=0;if(_.isEmpty(s)){var c=_.findWhere(e.task.todos,{todo_id:r});l=c.pos/2+1}else if(_.isEmpty(r)){var d=_.findWhere(e.task.todos,{todo_id:s});l=d.pos+kzi.config.default_pos+1}else{var c=_.findWhere(e.task.todos,{todo_id:r}),d=_.findWhere(e.task.todos,{todo_id:s});l=(c.pos+d.pos)/2+1}a.pos!==l&&(a.pos=l,wt.data.task.update_todo_pos(o,e.task.tid,a.todo_id,l,function(){p()}))}}};e.task={},e.$on(kzi.constant.event_names.on_slide_hide,function(){if(n.locator.type===kzi.constant.entity_type.task){var a={tid:e.task.tid};_.isEmpty(e.task.temp_name)||(a.temp_name=e.task.temp_name),_.isEmpty(e.task.temp_desc)||(a.temp_desc=e.task.temp_desc),e.task=a,e.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:o,xid:l,xtype:kzi.constant.xtype.task})}}),e.$on(kzi.constant.event_names.load_entity_task,function(t,i){$(".slide-content > :visible").find("a").blur(),_.isEmpty(i.pid)||_.isEmpty(i.tid)||(o=e.pid=i.pid,l=i.tid,e.section_loading_done=!1,e.is_show_more=!1,e.entity_not_found_msg="",n.load_task(o,l,function(t,a){e.project=t,e.task&&e.task.tid===a.tid&&(_.isEmpty(e.task.temp_name)||(a.temp_name=e.task.temp_name),_.isEmpty(e.task.temp_desc)||(a.temp_desc=e.task.temp_desc)),e.todo_atwho_members=_.filter(t.members,function(e){return 1===e.status}),r(function(){$("#atwho-container").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault()})}),e.task=a,e.entity_permission=t.info.permission,n.global.prj_module.view&e.entity_permission&&(a.archived||a.is_deleted)&&(e.entity_permission=kzi.constant.prj_permission.viewer),kzi.constant.prj_module.crud&e.entity_permission&&f(),m(),h(),n.global.me.watched=_.pluck(a.watchers,"uid").indexOf(n.global.me.uid)>=0,r(function(){e.task=u(a),p()}),_.isEmpty(a.files)?wt.data.file.get_attach_list(o,"tasks",l,function(e){e.data&&e.data.length>0&&(_.each(e.data,function(e){e.icon=kzi.helper.build_file_icon(e)}),a.files=e.data)},null,function(){e.section_loading_done=!0}):(_.each(a.files,function(e){e.icon=kzi.helper.build_file_icon(e)}),e.section_loading_done=!0),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:o,xid:l,xtype:kzi.constant.xtype.task,comment_id:i.comment_id})},function(t){t.code===kzi.statuses.task_error.not_found.code?(e.entity_permission=kzi.constant.prj_permission.deny,e.entity_not_found_msg="你访问的任务不存在或者被彻底删除。"):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(wt.data.error(i),e.entity_permission=kzi.constant.prj_permission.deny),e.section_loading_done=!0}))}),e.js_show_more=function(){e.is_show_more=!0},e.show_task_move_dialog=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_move_task.html",controller:["$scope","popbox","pop_data",function(e,t,s){e.popbox=t,e.task_move={},e.task_move.move_to_prj={},e.task_move.from_entry={},e.is_task_moving=!1,n.projects=_.filter(n.projects,function(e){return!_.isEmpty(e.team_id)}),e.task_move.projects=_.filter(n.projects,function(e){return e.permission&n.global.prj_module.crud}),e.task_move.projects.forEach(function(e){var t=_.find(n.teams,function(t){return t.team_id===e.team_id});t&&(e.create_time="-1"===t.team_id?1e4:t.create_date,e.team_name=t.name)}),e.task_move.projects=_.sortBy(e.task_move.projects,function(e){return e.create_time}),e.task_move.move_to_prj=_.find(e.task_move.projects,function(e){return e.pid===o});var r=!0;e.handle_move_to_prj_change=function(){wt.data.entry.get_list(e.task_move.move_to_prj.pid,!0,function(t){e.task_move.entries=t.data.entries,r?(r=!1,e.task_move.move_to_entry=_.find(e.task_move.entries,function(e){return e.entry_id===s.scope.task.entry_id}),e.task_move.from_entry=_.find(e.task_move.entries,function(e){return e.entry_id===s.scope.task.entry_id})):e.task_move.move_to_entry=e.task_move.entries[0]})},e.handle_move_to_prj_change(),e.js_close=function(){t.close()},e.move_task=function(){if(e.task_move.move_to_prj.pid===o){e.is_task_moving=!0;var t=kzi.config.default_pos;e.task_move.move_to_entry.tasks&&(t=_.max(e.task_move.move_to_entry.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),wt.data.task.change_entry(o,i.tid,e.task_move.from_entry.entry_id,e.task_move.move_to_entry.entry_id,t,function(){e.is_task_moving=!1,i.entry_id=e.task_move.move_to_entry.entry_id,i.entry_name=e.task_move.move_to_entry.name,n.$broadcast(kzi.constant.event_names.on_task_move,i,e.task_move.from_entry.entry_id),e.js_close()})}else{if(e.is_task_moving=!0,_.isEmpty(e.task_move.move_to_entry))return e.is_task_moving=!1,void 0;wt.data.task.move(o,i.tid,e.task_move.move_to_prj.pid,e.task_move.move_to_entry.entry_id,function(){var e=/project/.test(a.path());e&&n.project.entries.forEach(function(e){e.tasks=_.reject(e.tasks,function(e){return e.tid===i.tid})}),n.$broadcast(kzi.constant.event_names.on_task_trash,i),n.refresh_cache.task.trash(i.tid),n.locator.show_slide=!1},function(){kzi.msg.error("移动任务失败")},function(){e.is_task_moving=!1,e.js_close()})}}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_timingtask=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_timingtask.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.timingtask={name:"循环创建任务 "+i.scope.task.name},e.js_timingtask_add=function(){e.timingtask.recurrence=parseInt(e.timingtask.recurrence),e.timingtask.tid=i.scope.task.tid,wt.data.timingtask.add_timingtask(o,e.timingtask,function(){kzi.msg.info("循环任务添加成功"),n.$broadcast(kzi.constant.event_names.show_project_timingtask_list),t.close()})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_copy=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_copy_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.new_task=wt.bus.task.get_copy_task(i),e.js_copy_task=function(t){_.isEmpty(t.name)||(e.is_copying=!0,wt.data.task.copy_task(o,t.tid,t.name,0,t.keep_comments,t.keep_members,t.keep_labels,t.keep_attachments,t.keep_todos,t.keep_watchers,function(i){e.js_close();var a=_.findWhere(n.project.tasks,{tid:t.tid});a||n.project.tasks.push(t),n.$broadcast("socket_message_task_add",{task:i.data})},null,function(){e.is_copying=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trash=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_delete_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete_task=function(){n.project.tasks=_.reject(n.project.tasks,function(e){return e.tid===l}),wt.data.task.trash(o,l,function(){i.is_deleted=1,n.$broadcast(kzi.constant.event_names.on_task_trash,i),n.locator.hide_slide(),t.close()})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_archive=function(){n.project.tasks=_.reject(n.project.tasks,function(e){return e.tid===l}),wt.data.task.archive(o,l,function(){e.task.archived=1,n.$broadcast(kzi.constant.event_names.on_task_trash,e.task),n.locator.hide_slide()})},e.js_complete_task=function(t){n.global.prj_module.crud&e.entity_permission&&(t.completed?(t.completed=0,wt.data.task.uncomplete(o,l,function(){n.$broadcast(kzi.constant.event_names.on_task_complete,t)})):(t.completed=1,wt.data.task.complete(o,l,function(){n.$broadcast(kzi.constant.event_names.on_task_complete,t)})))},e.$on(kzi.constant.event_names.on_task_complete,function(t,i){n.locator.show_slide&&n.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(i)||i.tid!==e.task.tid||(e.task.completed=i.completed))}),e.$on(kzi.constant.event_names.on_task_comment,function(t,i){n.locator.show_slide&&n.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(i)||i.tid!==e.task.tid||(e.task.badges.comment_count+=1,n.$broadcast(kzi.constant.event_names.on_task_update,e.task)))}),e.$on(kzi.constant.event_names.on_task_badges_file,function(t,i){n.locator.show_slide&&n.locator.type===kzi.constant.entity_type.task&&i&&"task"===i.type&&e.task.tid===i.file.formData.tid&&(_.isArray(e.task.files)?e.task.files.push(i.file):e.task.files=[i.file],_.isArray(e.task.files)&&(e.task.badges.file_count=e.task.files.length))}),e.$on(kzi.constant.event_names.on_task_badges_check,function(t,i){n.locator.show_slide&&n.locator.type===kzi.constant.entity_type.task&&e.task&&i.tid===e.task.tid&&u(e.task)}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){n.locator.show_slide&&n.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(e.task)||e.js_show_editor(e.task))}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){n.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(e.task)||e.task.is_edit!==!0?n.locator.show_slide===!0&&n.locator.hide_slide():e.js_cancel_editor(e.task))}),e.js_show_editor=function(t){n.global.prj_module.crud&e.entity_permission&&(t.is_edit=!0,t.shouldBeOpen=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),_.isEmpty(t.temp_desc)&&(t.temp_desc=t.desc))},e.js_cancel_editor=function(e){e.is_edit=!1,e.shouldBeOpen=!1,e.temp_desc="",e.temp_name=""},e.js_set_update=function(e,t){if(t.is_saving!==!0){if(_.isEmpty(t.temp_name))return t.temp_name=t.name,void 0;t.is_saving=!0,wt.data.task.update(o,l,t.temp_name,t.temp_desc,function(){t.is_edit=!1,t.name=t.temp_name,t.desc=t.temp_desc,t.temp_name=null,t.temp_desc=null,n.$broadcast(kzi.constant.event_names.on_task_update,t)},null,function(){t.is_saving=!1})}},e.js_show_datepicker=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_datepicker.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,i.expire_date_temp=i.expire_date?moment(i.expire_date).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),e.task=i,e.js_close=function(){t.close()},e.js_today=function(){var t=moment().format("YYYY-MM-DD");e.set_expire(t)},e.js_tomorrow=function(){var t=moment().add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_week=function(){var t=moment().endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_next_week=function(){var t=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_month=function(){var t=moment().endOf("month").format("YYYY-MM-DD");e.set_expire(t)},e.js_set_expire=function(t){e.set_expire(t)},e.js_cancel_expire=function(){i.expire_date=0,i.badges.expire_date=0,wt.data.task.set_expire(o,l,0,function(){}),n.$broadcast(kzi.constant.event_names.on_task_update,i),t.close()},e.set_expire=function(e){var a=moment(e).endOf("day").valueOf();wt.data.task.set_expire(o,l,a,function(){i.expire_date=a,n.$broadcast(kzi.constant.event_names.on_task_update,i),t.close()})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_todo=function(e){e.is_todo_edit=!0,e.is_add_todo_edit=!0},e.js_cancel_todo_editor=function(e){e.is_todo_edit=!1},e.js_show_todo_editor=function(t){n.global.prj_module.crud&e.entity_permission&&(t.is_todo_edit=!0,c=t.name)},e.js_show_add_todo_editor=function(e){e.is_add_todo_edit=!0},e.js_cancel_add_todo_editor=function(e){e.is_todo_edit=!1,e.is_add_todo_edit=!1},e.js_add_todo=function(e,t){return _.isUndefined(t)||_.isUndefined(t.temp_name)||_.isEmpty(t.temp_name)?(e.is_add_todo_edit=!1,void 0):(t.is_saving=!0,d(e,t,function(){t.is_saving=!1}),void 0)},e.js_save_todo=function(e,t){return _.isEmpty(t.name)?(t.is_todo_edit=!1,t.name=c,void 0):c===t.name?(t.is_todo_edit=!1,void 0):(t.is_saving=!0,wt.data.task.update_todo(o,l,t.todo_id,t.name,t.pos,function(e){t.name=e.data.name},null,function(){t.is_saving=!1,t.is_todo_edit=!1}),void 0)},e.js_keydown_edit_todo=function(t,i,n){var a=t.which||t.keyCode;27===a?(e.js_cancel_todo_editor(n),t.stopPropagation()):13===a&&e.js_save_todo(t,n),t.preventDefault()},e.js_keydown_add_todo=function(t,i,n){var a=t.which||t.keyCode;27===a?(e.js_cancel_add_todo_editor(i),t.stopPropagation()):13===a&&e.js_add_todo(i,n),t.preventDefault()},e.js_remove_label=function(t){e.task.labels=_.reject(e.task.labels,function(e){return e.name===t.name}),wt.data.task.del_labels(o,l,t.name,function(){})},e.js_del_todo=function(e,t){e.todos=_.reject(e.todos,function(e){return e.todo_id===t.todo_id}),wt.data.task.del_todo(o,l,t.todo_id,function(){}),e=u(e),t.is_todo_edit=!1,0===e.todos.length&&(e.is_todo_edit=!1),n.$broadcast(kzi.constant.event_names.on_task_update,e)},e.js_complete_todo=function(t,i){if(n.global.prj_module.crud&e.entity_permission){var a=i.todo_id;i.checked?(i.checked=0,wt.data.task.uncomplete_todo(o,l,a,function(){})):(i.checked=1,wt.data.task.complete_todo(o,l,a,function(){})),t=u(t),n.$broadcast(kzi.constant.event_names.on_task_update,t)}},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(o,i,kzi.constant.xtype.task,i.tid,t)},e.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(o,i,kzi.constant.xtype.task,i.tid,t,null,null,n)},e.js_toggle_member=function(e,t,i){wt.bus.member.set_task_member_toggle(o,i,t,function(){n.$broadcast(kzi.constant.event_names.on_task_update,i)})},e.js_assign_label=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_assign_label.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.labels=wt.bus.project.label.load(i,a.scope.project.info.labels),e.js_toggle_label=function(e){wt.bus.task.set_toggle_label(o,a.scope.task,e),n.$broadcast(kzi.constant.event_names.on_task_update,a.scope.task)},e.js_goto_set_labels=function(){_.each(kzi.constant.labels,function(t){var i=_.findWhere(a.scope.project.info.labels,{name:t.name});i&&(e[t.name]=i.desc)}),e.step=1},e.js_set_lables=function(t,n,s,r,l,c){var d=[{name:"blue",desc:t},{name:"green",desc:n},{name:"orange",desc:s},{name:"purple",desc:r},{name:"red",desc:l},{name:"yellow",desc:c}];e.is_save_ing=!0,wt.data.project.set_labels(o,d,function(){a.scope.project.info.labels=d,e.labels=wt.bus.project.label.load(i,d),e.step=0},null,function(){e.is_save_ing=!1})}}],resolve:{pop_data:function(){return{scope:e,labels:e.project.info.labels}}}}).open()},e.js_show_entry_menu=function(t,i){t.stopPropagation(),s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_unarchive_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},n.load_tasks(i.pid,function(t){e.entries=t.entries,_.each(e.entries,function(e){e.selected=0})}),e.js_unarchive_task=function(a){_.each(e.entries,function(e){e.selected=0}),a.selected=1,wt.data.task.unarchive(i.pid,i.tid,a.entry_id,function(){n.project.entries=[],n.project.tasks=[]}),t.close(),n.$broadcast(kzi.constant.event_names.on_task_unarchived,i),n.locator.hide_slide()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("task",function(t){t&&!_.isEmpty(t)&&(e.file_upload_option={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"task",pid:t.pid,tid:t.tid}},e.file_upload_option_comment={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,tid:t.tid,successCallback:function(e){console.info("data.data",e.data);var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.dragfile_option={upload_option:e.file_upload_option},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.uploadlink_option={url:[kzi.config.box_url(),"uploadbylink","?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:e.file_upload_option.formData},e.global_fileupload_queue=function(){return n.upload_queue.get_task(t.pid,t.tid)},e.global_fileupload_queue_comment=function(){return n.upload_queue.get_comment_task(t.pid,t.tid)})}),e.$on(kzi.constant.event_names.on_pastefile_to_task,function(t,i,n){var a={type:2,ext:2};n.icon=kzi.constant.get_file_icon(a),n.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",$("#global_file_upload").fileupload("add",{url:e.file_upload_option.url,formData:e.file_upload_option.formData,files:n})}),e.js_uploadbylink_uploading=!1,e.js_uploadbylink=function(t){if(_.isEmpty(e.uploadlink_url)||!kzi.validator.isUrl(e.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),$(t.target).prev().focus(),void 0;e.js_uploadbylink_uploading=!0;var i=_.extend({link:escape(e.uploadlink_url)},e.uploadlink_option.formData);wt.data.file.uploadlink(e.uploadlink_option.url,i,function(i){8100==i.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200==i.code&&n.file_new_upload(i,function(){e.uploadlink_url="",$(t.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){e.js_uploadbylink_uploading=!1})},e.js_goto_file=function(e,t){var a=i.pid;_.isEmpty(a)?n.locator.to_file(e,t,!0):n.locator.to_file(e,t,!1)},e.js_del_attachment=function(t,i){e.task.badges.file_count--;var a=_.findWhere(e.task.files,{fid:i.fid});a&&(e.task.files=_.reject(e.task.files,function(e){return e.fid==i.fid})),wt.data.file.detach(o,"tasks",l,i.fid),n.$broadcast(kzi.constant.event_names.on_task_update,e.task)},e.js_close=function(){n.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.event_controller",["ui.utils"]);e.controller("entity_event_ctrl",["$scope","$element","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a,s){var r,o;e.pid="",e.token=kzi.get_cookie("sid"),e.event={},e.temp_event={},e.eventTitleInputFocus=!1,e.repeat_intervals=kzi.constant.event_repeat_intervals,e.update={},e.update.options_for_recurring_event=[{key:kzi.constant.event_update_type.one,desc:"只应用于当前日程"},{key:kzi.constant.event_update_type.follow_up,desc:"应用于当前和之后所有日程"}],e.update.option=e.update.options_for_recurring_event[1];var l=function(){e.temp_event={event_id:e.event.event_id,name:e.event.name,summary:e.event.summary,location:e.event.location,start_date:moment(e.event.start.date).format("YYYY-MM-DD"),end_date:moment(e.event.end.date).format("YYYY-MM-DD"),start_hour:moment(e.event.start.date).format("HH"),start_minute:moment(e.event.start.date).format("mm"),end_hour:moment(e.event.end.date).format("HH"),end_minute:moment(e.event.end.date).format("mm")}},c=function(){e.temp_event={}},d=function(){e.event.show_start_date=kzi.util.datetimeToDTW(e.event.start.date),e.event.show_end_date=kzi.util.datetimeToDTW(e.event.end.date)};e.$on(kzi.constant.event_names.on_slide_hide,function(){n.locator.type===kzi.constant.entity_type.event&&(e.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:r,xid:o,xtype:kzi.constant.xtype.event}),e.event=e.event.is_edit?{is_edit:e.event.is_edit,event_id:e.event.event_id}:{})}),e.$on(kzi.constant.event_names.load_entity_event,function(t,i){_.isEmpty(i.pid)||_.isEmpty(i.event_id)||(r=e.pid=i.pid,o=i.event_id,e.temp_event.event_id!==i.event_id&&(e.temp_event.name=""),e.section_loading_done=!1,n.load_event(r,o,function(t,a){e.project=t,e.event&&e.event.is_edit&&e.event.event_id===a.event_id&&(a.is_edit=e.event.is_edit),e.event=a,e.new_repeat_interval=_.findWhere(e.repeat_intervals,{key:e.event.recurrence}),e.section_loading_done=!0,e.entity_permission=t.info.permission,n.global.prj_module.view&e.entity_permission&&a.is_deleted&&(e.entity_permission=kzi.constant.prj_permission.viewer),d(),e.set_pop_attendee_options(),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:r,xid:o,xtype:kzi.constant.xtype.event,comment_id:i.comment_id}),e.event.is_edit===!0&&(e.eventTitleInputFocus=!0)},function(t){e.section_loading_done=!0,t.code===kzi.statuses.event_error.not_found.code?(e.entity_not_found_msg="你访问的日程不存在或者被彻底删除。",e.entity_permission=kzi.constant.prj_permission.deny):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(e.entity_permission=kzi.constant.prj_permission.deny,wt.data.error(i))}))}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){n.locator.type!==kzi.constant.entity_type.event||_.isEmpty(e.event)||(e.event.is_edit?e.js_cancel_editor(e.event):e.js_show_editor(e.event))}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){n.locator.type===kzi.constant.entity_type.event&&(_.isEmpty(e.event)||e.event.is_edit!==!0?n.locator.show_slide===!0&&n.locator.hide_slide():e.js_cancel_editor(e.event))}),e.js_show_trash=function(t,i){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_delete_event.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.is_repeat_event=0!==i.recurrence,e.del={},e.del.del_option=1,e.js_close=function(){t.close()
},e.js_delete_event=function(){e.is_deleting=!0,wt.data.event.trash(r,i.event_id,e.del.del_option,function(a){n.locator.hide_slide(),i.is_deleted=1;var s=_.findWhere(n.projects,{pid:i.pid});s&&(s.is_calendar=a.data.is_calendar),n.$broadcast(kzi.constant.event_names.on_event_trash,i,e.del.del_option),t.close()},null,function(){e.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var u=function(){var t=e.temp_event.start_date,i=e.temp_event.start_minute,n=e.temp_event.start_hour;t>=e.temp_event.end_date?(e.temp_event.end_date=e.temp_event.start_date,e.temp_event.start_hour>=e.temp_event.end_hour?(e.temp_event.end_hour=e.temp_event.start_hour,e.temp_event.start_minute>=e.temp_event.end_minute&&(e.temp_event.end_minute=e.temp_event.start_minute),e.end_minute_sections=_.filter(kzi.constant.all_minute_sections,function(e){return e>=i}),e.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(e){return e>=n})):(e.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(e){return e>=n}),e.end_minute_sections=kzi.constant.all_minute_sections)):(e.end_hour_sections=kzi.constant.all_hour_sections,e.end_minute_sections=kzi.constant.all_minute_sections)};e.start_date_options={default_date:moment(e.temp_event.start_date).format("YYYY-MM-DD"),set_date:function(t){e.temp_event.start_date=moment(t).format("YYYY-MM-DD"),e.start_date_options.default_date=e.temp_event.start_date,e.end_date_options.min_date=moment(e.temp_event.start_date).format("YYYY-MM-DD")}},e.end_date_options={default_date:moment(e.temp_event.end_date).format("YYYY-MM-DD"),min_date:moment(e.temp_event.start_date).format("YYYY-MM-DD"),set_date:function(t){e.temp_event.end_date=moment(t).format("YYYY-MM-DD"),e.end_date_options.default_date=e.temp_event.end_date,u()}},e.start_hour_sections=kzi.constant.all_hour_sections,e.start_minute_sections=kzi.constant.all_minute_sections,e.$watch("[temp_event.start_date,temp_event.start_hour,temp_event.start_minute]",function(){u(),e.start_date_options.default_date=moment(e.temp_event.start_date).format("YYYY-MM-DD"),e.end_date_options.default_date=moment(e.temp_event.end_date).format("YYYY-MM-DD"),e.end_date_options.min_date=moment(e.temp_event.start_date).format("YYYY-MM-DD")},!0),e.$watch("temp_event.end_hour",function(){u()},!0),e.js_show_editor=function(t){n.global.prj_module.crud&e.entity_permission&&(t.is_edit=!0,_.isEmpty(e.temp_event.name)&&l(),e.eventTitleInputFocus=!0)},e.js_cancel_editor=function(e){e.is_edit=!1,c()},e.js_set_update=function(t,i,a){if(i.is_saving!==!0){if(_.isEmpty(a.name))return a.name=i.name,void 0;i.is_saving=!0,wt.data.event.update(r,i.event_id,a.name,a.summary,a.location,a.start_date,a.start_hour+":"+a.start_minute,a.end_date,a.end_hour+":"+a.end_minute,e.update.option.key,function(t){i.is_edit=!1,i.name=a.name,i.summary=a.summary,i.location=a.location,i.start.date=a.start_date+" "+a.start_hour+":"+a.start_minute,i.end.date=a.end_date+" "+a.end_hour+":"+a.end_minute,i.recurrence_id&&e.update.option.key==kzi.constant.event_update_type.one&&(i.recurrence_id="",i.recurrence=0,e.new_repeat_interval=_.findWhere(e.repeat_intervals,{key:i.recurrence})),c();var s=t.data&&t.data.recurrence_id?t.data.recurrence_id:null;n.$broadcast(kzi.constant.event_names.on_event_update,i,e.update.option.key,s),d()},null,function(){i.is_saving=!1})}},e.js_toggle_member=function(e,t,i){t.setting_toggle_member!==!0&&(t.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(r,i,t,function(){},null,function(){t.setting_toggle_member=!1}))},e.js_attendee_all=function(e,t,i,n){wt.bus.member.event_attend_all(r,i,t,null,null,n)},e.set_pop_attendee_options=function(){e.pop_attendee_options=n.global.prj_module.crud&e.entity_permission?[{name:"移除",ongoing:"移除中...",click:function(t,i,n,a){n.assigned=!0,wt.bus.member.set_event_attendees_toggle(r,e.event,n,function(){n.assigned=!1},null,function(){n.setting_toggle_member=!1,a()})}}]:null},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("event",function(t){t&&!_.isEmpty(t)&&(e.file_upload_option={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"event",pid:t.pid,event_id:t.event_id}},e.file_upload_option_comment={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,event_id:t.event_id,successCallback:function(e){var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.dragfile_option={upload_option:e.file_upload_option},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.uploadlink_option={url:[kzi.config.box_url(),"uploadbylink","?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:e.file_upload_option.formData},e.global_fileupload_queue=function(){return n.upload_queue.get_event(t.pid,t.event_id)},e.global_fileupload_queue_comment=function(){return n.upload_queue.get_comment_event(t.pid,t.event_id)})}),e.$on(kzi.constant.event_names.on_pastefile_to_event,function(t,i,n){var a={type:2,ext:2};n.icon=kzi.constant.get_file_icon(a),n.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",$("#global_file_upload").fileupload("add",{url:e.file_upload_option.url,formData:e.file_upload_option.formData,files:n})}),e.js_uploadbylink_uploading=!1,e.js_uploadbylink=function(t){if(_.isEmpty(e.uploadlink_url)||!kzi.validator.isUrl(e.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),$(t.target).prev().focus(),void 0;e.js_uploadbylink_uploading=!0;var i=_.extend({link:escape(e.uploadlink_url)},e.uploadlink_option.formData);wt.data.file.uploadlink(e.uploadlink_option.url,i,function(i){8100==i.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200==i.code&&n.file_new_upload(i,function(){e.uploadlink_url="",$(t.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){e.js_uploadbylink_uploading=!1})},e.$on(kzi.constant.event_names.on_file_add,function(t,i){i&&"event"===i.type&&e.event.event_id===i.file.formData.event_id&&(_.isArray(e.event.files)?e.event.files.push(i.file):e.event.files=[i.file])}),e.js_goto_file=function(e,t){var a=i.pid;_.isEmpty(a)?n.locator.to_file(e,t,!0):n.locator.to_file(e,t,!1)},e.js_del_attachment=function(t,i){var n=_.findWhere(e.event.files,{fid:i.fid});n&&(e.event.files=_.reject(e.event.files,function(e){return e.fid===i.fid})),wt.data.file.detach(r,kzi.constant.xtype.event,e.event.event_id,i.fid)},e.js_close=function(){n.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.post_controller",["ui.utils"]);e.controller("entity_post_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a){var s,r;e.pid="",e.token=kzi.get_cookie("sid"),e.$on(kzi.constant.event_names.on_slide_hide,function(){i.locator.type===kzi.constant.entity_type.post&&e.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:s,xid:r,xtype:kzi.constant.xtype.post})}),e.post={},e.js_show_editor=function(t){i.global.prj_module.crud&e.entity_permission&&(t.is_edit=!0,e.postEditFocus=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),_.isEmpty(t.temp_content)&&(t.temp_content=t.content))},e.js_cancel_editor=function(e){e.is_edit=!1,e.temp_name=null,e.temp_content=null},e.js_update_post=function(t){e.is_setting_content=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),wt.data.post.update(s,t.post_id,t.temp_name,t.temp_content,function(){t.name=t.temp_name,t.content=t.temp_content,t.is_edit=!1},null,function(){e.is_setting_content=!1,i.$broadcast(kzi.constant.event_names.on_post_update,t)})},e.js_trash=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/post/pop_delete_post.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.post=n,e.js_close=function(){t.close()},e.js_del_post=function(){wt.data.post.trash(s,n.post_id,function(){e.js_close(),i.locator.hide_slide(),i.$broadcast(kzi.constant.event_names.on_post_trash,{post_id:n.post_id})})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_share=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/post/pop_share_post.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.post=i,e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.set_pop_watcher_options=function(){return i.global.prj_module.watch&e.entity_permission?(e.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(t,i,n,a){wt.bus.watch.unwatch(s,e.post,kzi.constant.xtype.post,e.post.post_id,n,function(){},null,a)}}],void 0):(e.pop_watcher_options=null,void 0)},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(s,i,kzi.constant.xtype.post,i.post_id,t)},e.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(s,i,kzi.constant.xtype.post,i.post_id,t,null,null,n)},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("post",function(t){t&&(e.file_upload_option={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"post",pid:t.pid,post_id:t.post_id}},e.file_upload_option_comment={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,post_id:t.post_id,successCallback:function(e){var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.dragfile_option={upload_option:e.file_upload_option},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.uploadlink_option={url:[kzi.config.box_url(),"uploadbylink","?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:e.file_upload_option.formData},e.global_fileupload_queue=function(){return i.upload_queue.get_post(t.pid,t.post_id)},e.global_fileupload_queue_comment=function(){return i.upload_queue.get_comment_post(t.pid,t.post_id)})}),e.$on(kzi.constant.event_names.load_entity_post,function(t,n){if(e.upload_enabled=!0,!_.isEmpty(n.pid)&&!_.isEmpty(n.post_id)){s=e.pid=n.pid,r=n.post_id,e.section_loading_done=!1,e.entity_not_found_msg="";var a=null;e.post&&e.post.post_id&&(a={post_id:e.post.post_id,is_edit:e.post.is_edit},_.isEmpty(e.post.temp_name)||(a.temp_name=e.post.temp_name),_.isEmpty(e.post.temp_content)||(a.temp_content=e.post.temp_content)),e.post={},i.load_post(s,r,function(t,o){e.section_loading_done=!0,e.project=t,a&&a.post_id===o.post_id&&(o.temp_name=a.temp_name,o.temp_content=a.temp_content,o.is_edit=a.is_edit),e.post=o,i.global.me.watched=_.pluck(o.watchers,"uid").indexOf(i.global.me.uid)>=0,o.is_edit===!0&&(e.postEditFocus=!0),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:s,xid:r,xtype:kzi.constant.xtype.post,comment_id:n.comment_id}),e.entity_permission=e.project.info.permission,i.global.prj_module.view&e.entity_permission&&o.is_deleted&&(e.entity_permission=kzi.constant.prj_permission.viewer),e.set_pop_watcher_options()},function(t){e.section_loading_done=!0,t.code===kzi.statuses.post_error.not_found.code?(e.entity_permission=kzi.constant.prj_permission.deny,e.entity_not_found_msg="你访问的话题不存在或者被彻底删除。"):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(wt.data.error(n),e.entity_permission=kzi.constant.prj_permission.deny)})}}),e.$on(kzi.constant.event_names.on_pastefile_to_post,function(t,i,n){var a={type:2,ext:2};n.icon=kzi.constant.get_file_icon(a),n.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",$("#global_file_upload").fileupload("add",{url:e.file_upload_option.url,formData:e.file_upload_option.formData,files:n})}),e.$on(kzi.constant.event_names.on_post_comment,function(t,i){_.isEmpty(i)||i.post_id===e.post.post_id&&e.post.comment_count++}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){i.locator.type!==kzi.constant.entity_type.post||_.isEmpty(e.post)||e.js_show_editor(e.post)}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.post&&(_.isEmpty(e.post)||e.post.is_edit!==!0?i.locator.show_slide===!0&&i.locator.hide_slide():wt.bus.mkEditor.checkClose()||e.js_cancel_editor(e.post))}),e.$on(kzi.constant.event_names.on_file_add,function(t,i){i&&"post"===i.type&&e.post.post_id===i.file.formData.post_id&&(_.isArray(e.post.files)?e.post.files.push(i.file):e.post.files=[i.file])}),e.$on(kzi.constant.event_names.post_updated_by_editor,function(t,i){e.post.content=i.content,e.post.name=i.name}),e.js_uploadbylink_uploading=!1,e.js_uploadbylink=function(t){if(_.isEmpty(e.uploadlink_url)||!kzi.validator.isUrl(e.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),$(t.target).prev().focus(),void 0;e.js_uploadbylink_uploading=!0;var n=_.extend({link:escape(e.uploadlink_url)},e.uploadlink_option.formData);wt.data.file.uploadlink(e.uploadlink_option.url,n,function(n){8100==n.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200==n.code&&i.file_new_upload(n,function(){e.uploadlink_url="",$(t.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){e.js_uploadbylink_uploading=!1})},e.js_goto_file=function(e,n){var a=t.pid;_.isEmpty(a)?i.locator.to_file(e,n,!0):i.locator.to_file(e,n,!1)},e.js_del_attachment=function(t,i){var n=_.findWhere(e.post.files,{fid:i.fid});n&&(e.post.files=_.reject(e.post.files,function(e){return e.fid==i.fid})),wt.data.file.detach(s,"posts",r,i.fid)},e.js_close=function(){i.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.file_controller",["ui.utils"]);e.controller("entity_file_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a){var s,r;e.pid="",e.token=kzi.get_cookie("sid"),e.version_loading_done=!0,e.fileNameInputFocus=!1,e.file={},e.$on(kzi.constant.event_names.on_slide_hide,function(){i.locator.type===kzi.constant.entity_type.file&&(e.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:s,xid:r,xtype:kzi.constant.xtype.file}),e.file={})}),e.$on(kzi.constant.event_names.load_entity_file,function(t,n){_.isEmpty(n.pid)||_.isEmpty(n.fid)||(e.file={},s=e.pid=n.pid,r=n.fid,e.section_loading_done=!1,e.is_show_version=!1,e.entity_not_found_msg="",i.load_file(s,r,function(t,a){e.project=t,e.file=a,a.is_img="-1"===kzi.constant.get_file_icon(a)?!0:!1,e.entity_permission=e.project.info.permission,i.global.prj_module.view&e.entity_permission&&a.is_deleted&&(e.entity_permission=kzi.constant.prj_permission.viewer),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:s,xid:r,xtype:kzi.constant.xtype.file,comment_id:n.comment_id}),e.set_pop_watcher_options(),i.global.me.watched=_.pluck(a.watchers,"uid").indexOf(i.global.me.uid)>=0,wt.data.file.get_target(s,r,function(t){e.file.link_count=0,_.isEmpty(t.data.tasks)||(e.file.link_count=t.data.tasks.length),_.isEmpty(t.data.posts)||(e.file.link_count+=t.data.posts.length),_.isEmpty(t.data.events)||(e.file.link_count+=t.data.events.length),e.file.tasks=t.data.tasks,e.file.posts=t.data.posts,e.file.events=t.data.events,e.file.is_edit===!0&&(e.fileNameInputFocus=!0)},null,function(){e.section_loading_done=!0})},function(t){e.section_loading_done=!0,t.code===kzi.statuses.file_error.not_found.code?(e.entity_not_found_msg="你访问的文件不存在或者被彻底删除。",e.entity_permission=kzi.constant.prj_permission.deny):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(e.entity_permission=kzi.constant.prj_permission.deny,wt.data.error(n))}))}),e.$watch("file",function(t){t&&(e.file_upload_new_option={previewMaxWidth:540,previewMaxHeight:400,url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"file",pid:t.pid,fid:t.fid}},e.file_upload_option_comment={previewMaxWidth:540,previewMaxHeight:400,url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,fid:t.fid,successCallback:function(e){var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.dragfile_option={upload_option:e.file_upload_new_option},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.global_fileupload_queue=function(){return i.upload_queue.get_file(t.pid,t.fid)},e.global_fileupload_queue_comment=function(){return i.upload_queue.get_comment_file(t.pid,t.fid)})}),e.$on(kzi.constant.event_names.on_pastefile_to_file,function(t,i,n){var a={type:2,ext:2};n.icon=kzi.constant.get_file_icon(a),n.name="["+wt.me.display_name+"]"+moment().format("YYYY-MM-DD hh:mm:ss a")+"-粘贴上传.png",$("#global_file_upload").fileupload("add",{url:e.file_upload_new_option.url,formData:e.file_upload_new_option.formData,files:n})}),e.$on(kzi.constant.event_names.on_file_add,function(t,i){i&&"file"===i.type&&e.file.fid===i.file.formData.fid&&(e.file.icon=i.file.icon,e.file.path=i.file.path,e.file.size=i.file.size,e.file.update_date=i.file.update_date,e.file.update_user=i.file.update_user,e.file.dt=(new Date).getTime())}),e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(s,i,kzi.constant.xtype.file,i.fid,t)},e.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(s,i,kzi.constant.xtype.file,i.fid,t,null,null,n)},e.set_pop_watcher_options=function(){e.pop_watcher_options=i.global.prj_module.watch&e.entity_permission?[{name:"取消关注",ongoing:"取消中...",click:function(t,i,n,a){wt.bus.watch.unwatch(s,e.file,kzi.constant.xtype.file,e.file.fid,n,function(){},null,a)}}]:null},e.js_show_move_to_dialog=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_move_file.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=n,e.pid=n.pid;var r=function(e,t){wt.data.file.move(s,e.fid,e.folder_id,t.fid,function(){e.folder_id=t.fid,i.$broadcast(kzi.constant.event_names.on_file_move,e)})};e.folder_structure_loading=!0,e.data={},e.data.selected_move_to_node="",wt.data.file.get_folders(s,function(t){e.folder_structure={},e.folder_structure.name="根目录",e.folder_structure.fid="",e.folder_structure.children=t.data},function(){kzi.msg.error("读取目录错误")},function(){e.folder_structure_loading=!1}),e.move=function(){return _.isEmpty(e.data.selected_move_to_node)?(t.close(),void 0):n.folder_id===e.data.selected_move_to_node.fid?(t.close(),void 0):(r(n,e.data.selected_move_to_node),t.close(),void 0)},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_trash_dialog=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_delete_file.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=n,e.js_close=function(){t.close()},e.js_del_file=function(){e.is_deleting||(e.is_deleting=!0,wt.data.file.trash(s,r,function(){i.refresh_cache.file.del(r),t.close(),i.locator.hide_slide(),i.$broadcast(kzi.constant.event_names.on_file_trash,n)},null,function(){e.is_deleting=!1}))}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_versions=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_show_versions.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=i,e.js_close=function(){t.close()},e.file_version_loaded=!1,wt.data.file.get_versions(i.pid,i.fid,function(t){_.each(t.data,function(e){e.icon=kzi.helper.build_file_icon(e),e.fid=r,e.pid=s}),t.data.reverse(),e.file_version_loaded=!0,e.versions=t.data})}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){i.locator.type!==kzi.constant.entity_type.file||_.isEmpty(e.file)||e.js_show_editor(e.file)}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.file&&(_.isEmpty(e.file)||e.file.is_edit!==!0?i.locator.show_slide===!0&&i.locator.hide_slide():e.js_cancel_editor(e.file))}),e.js_show_editor=function(t){i.global.prj_module.crud&e.entity_permission&&(t.is_edit=!0,e.fileNameInputFocus=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),_.isEmpty(t.temp_desc)&&(t.temp_desc=t.desc))},e.js_cancel_editor=function(e){e.is_edit=!1,e.temp_name=null,e.temp_desc=null},e.js_set_update=function(e,t){return t.is_edit=!1,_.isEmpty(t.temp_name)?(t.temp_name=t.name,void 0):(wt.data.file.update(s,r,t.temp_name,t.temp_desc,function(){t.name=t.temp_name,t.desc=t.temp_desc,t.temp_name=null,t.temp_desc=null}),void 0)},e.js_close=function(){i.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.page_controller",["ui.utils"]);e.controller("entity_page_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a){function l(e){var t=/\/page$/.test(n.$$path),a=$("#wt_scroll_element .mCSB_container").height();i.locator.show_slide===!0&&t&&(a-600>o&&(o+=e),$("#wt_scroll_element").mCustomScrollbar("scrollTo",o))}function c(e){var t=/\/page$/.test(n.$$path);i.locator.show_slide===!0&&t&&(o>0&&(o-=e),$("#wt_scroll_element").mCustomScrollbar("scrollTo",o))}var s,r;e.pid="",e.token=kzi.get_cookie("sid"),e.page={},e.$on(kzi.constant.event_names.on_slide_hide,function(){i.locator.type===kzi.constant.entity_type.page&&(e.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:s,xid:r,xtype:kzi.constant.xtype.page}),e.page={})}),e.$on(kzi.constant.event_names.load_entity_page,function(t,n){_.isEmpty(n.pid)||_.isEmpty(n.page_id)||(o=0,s=e.pid=n.pid,r=n.page_id,e.section_loading_done=!1,i.load_page(s,r,function(t,a){e.project=t,e.page=a,e.section_loading_done=!0,e.entity_permission=t.info.permission,i.global.prj_module.view&e.entity_permission&&a.is_deleted&&(e.entity_permission=kzi.constant.prj_permission.viewer),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:s,xid:r,xtype:kzi.constant.xtype.page,comment_id:n.comment_id}),e.set_pop_watcher_options(),i.global.me.watched=_.pluck(a.watchers,"uid").indexOf(i.global.me.uid)>=0},function(t){e.section_loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?(e.entity_permission=kzi.constant.prj_permission.deny,e.entity_not_found_msg="你访问的文档不存在或者被彻底删除。"):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(wt.data.error(t),e.entity_permission=kzi.constant.prj_permission.deny)}))}),e.set_pop_watcher_options=function(){e.pop_watcher_options=i.global.prj_module.watch&e.entity_permission?[{name:"取消关注",ongoing:"取消中...",click:function(t,i,n,a){wt.bus.watch.unwatch(s,e.page,kzi.constant.xtype.page,e.page.page_id,n,function(){},null,a)}}]:null},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(s,i,kzi.constant.xtype.page,i.page_id,t)},e.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(s,i,kzi.constant.xtype.page,i.page_id,t,null,null,n)},e.js_show_trash=function(t){var r=e.page;a.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_delete_page.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete=function(){wt.data.page.trash(s,r.page_id,function(){e.js_close(),i.locator.hide_slide(),i.$broadcast(kzi.constant.event_names.on_page_trash,{page_id:r.page_id})}),n.path("/project/"+s+"/page")}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_share=function(t){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_share_page.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$watch("page",function(t){t&&(e.file_upload_option_comment={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,post_id:t.page_id,successCallback:function(e){var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.global_fileupload_queue_comment=function(){return i.upload_queue.get_comment_page(t.pid,t.page_id)})}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){if(i.global.prj_module.crud&e.entity_permission&&i.locator.type===kzi.constant.entity_type.page){var a="/project/"+s+"/page/"+r+"/edit";n.path(a)}}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.page&&i.locator.show_slide===!0&&i.locator.hide_slide()});var o=0;e.$on(kzi.constant.event_names.scroll_down,function(){l(200)}),e.$on(kzi.constant.event_names.scroll_page_down,function(){l(500)}),e.$on(kzi.constant.event_names.scroll_up,function(){c(200)}),e.$on(kzi.constant.event_names.scroll_page_up,function(){c(500)}),e.$on(kzi.constant.event_names.page_go_full_screen,function(){i.locator.type===kzi.constant.entity_type.page&&i.locator.show_slide===!0&&n.path("/project/"+e.page.pid+"/page/"+e.page.page_id)}),e.js_goto_page=function(e,n){var a=t.pid;_.isEmpty(a)?i.locator.to_page(e,n,!0):i.locator.to_page(e,n,!1)},e.js_close=function(){i.locator.show_slide=!1},e.js_got_page_ver_diff=function(){var e="/project/"+s+"/pages/"+r+"/versions";n.path(e)}}])}(),function(){"use strict";var e=angular.module("wt.page_controller");e.controller("page_detail_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a){function c(e){var t=/\/page$/.test(n.$$path),a=$("#wt_scroll_element .mCSB_container").height();i.locator.show_slide===!0&&t&&(a-600>l&&(l+=e),$("#wt_scroll_element").mCustomScrollbar("scrollTo",l))}function d(e){var t=/\/page$/.test(n.$$path);i.locator.show_slide===!0&&t&&(l>0&&(l-=e),$("#wt_scroll_element").mCustomScrollbar("scrollTo",l))}var s,r;s=e.pid=t.pid,r=e.page_id=t.page_id,e.token=kzi.get_cookie("sid");var o=function(){e.pages=_.where(e.cached_pages,{parent_id:""}),_.each(e.pages,function(t){var i=[],n=_.where(e.cached_pages,{parent_id:t.page_id});_.each(n,function(e){i.push(e)}),t.sub_pages=_.sortBy(i,function(e){return e.create_date})})};e.pages=[],wt.data.page.get_all(s,function(t){e.cached_pages=t.data,o()},function(e){e.code===kzi.statuses.prj_error.not_found.code?n.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.page={},i.load_page(e.pid,e.page_id,function(t,n){i.global.title="文档 | "+n.name,e.project=t,e.page=n,i.global.loading_done=!0,e.section_loading_done=!0,e.entity_permission=t.info.permission,i.global.prj_module.view&e.entity_permission&&n.is_deleted&&(e.entity_permission=kzi.constant.prj_permission.viewer),e.$broadcast(kzi.constant.event_names.select_comment_tab,{pid:s,xid:r,xtype:kzi.constant.xtype.page,comment_id:!1}),e.set_pop_watcher_options(),i.global.me.watched=_.pluck(n.watchers,"uid").indexOf(i.global.me.uid)>=0},function(t){e.section_loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?(e.entity_permission=kzi.constant.prj_permission.deny,e.entity_not_found_msg="你访问的文档不存在或者被彻底删除。"):t.code===kzi.statuses.error.permission_deny.code?e.entity_permission=kzi.constant.prj_permission.deny:(wt.data.error(t),e.entity_permission=kzi.constant.prj_permission.deny)}),e.set_pop_watcher_options=function(){e.pop_watcher_options=i.global.prj_module.watch&e.entity_permission?[{name:"取消关注",ongoing:"取消中...",click:function(t,i,n,a){wt.bus.watch.unwatch(s,e.page,kzi.constant.xtype.page,e.page.page_id,n,function(){},null,a)}}]:null},e.js_toggle_watch=function(e,t,i){wt.bus.watch.set_watcher_toggle(s,i,kzi.constant.xtype.page,i.page_id,t)},e.js_watch_all=function(e,t,i,n){wt.bus.watch.watch_all(s,i,kzi.constant.xtype.page,i.page_id,t,null,null,n)},e.js_show_trash=function(t){var r=e.page;a.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_delete_page.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete=function(){wt.data.page.trash(s,r.page_id,function(){e.js_close(),i.locator.hide_slide(),i.$broadcast(kzi.constant.event_names.on_page_trash,{page_id:r.page_id})}),n.path("/project/"+s+"/page")}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_share=function(t){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_share_page.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$watch("page",function(t){t&&(e.file_upload_option_comment={url:[kzi.config.box_url(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"comment",pid:t.pid,post_id:t.page_id,successCallback:function(e){var t=angular.element(".comment-list:visible").scope().comment;_.isEmpty(t.files)&&(t.files=[]),e.data.icon=kzi.helper.build_file_icon(e.data),t.files.push(_.omit(e.data,"watchers"))}}},e.pastefile_option_comment={upload_option:e.file_upload_option_comment},e.global_fileupload_queue_comment=function(){return i.upload_queue.get_comment_page(t.pid,t.page_id)})}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){if(i.global.prj_module.crud&e.entity_permission&&i.locator.type===kzi.constant.entity_type.page){var a="/project/"+s+"/page/"+r+"/edit";n.path(a)}}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.page&&i.locator.show_slide===!0&&i.locator.hide_slide()});var l=0;e.$on(kzi.constant.event_names.scroll_down,function(){c(200)}),e.$on(kzi.constant.event_names.scroll_page_down,function(){c(500)}),e.$on(kzi.constant.event_names.scroll_up,function(){d(200)}),e.$on(kzi.constant.event_names.scroll_page_up,function(){d(500)}),e.js_goto_page=function(e,n){var a=t.pid;_.isEmpty(a)?i.locator.to_page(e,n,!0):i.locator.to_page(e,n,!1)},e.js_got_page_ver_diff=function(){var e="/project/"+s+"/pages/"+r+"/versions";n.path(e)}}])}(),function(){"use strict";var e=angular.module("wt.mail_controller",["ui.utils"]);e.controller("entity_mail_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,i,n,a){var s,r;e.token=kzi.get_cookie("sid"),e.mail={},e.$on(kzi.constant.event_names.load_entity_mail,function(t,i){e.upload_enabled=!0,_.isEmpty(i.mail_id)||(r=i.mail_id,e.section_loading_done=!1,wt.data.mail.get(r,function(t){e.mail=t.data},null,function(){e.section_loading_done=!0}))}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.mail&&i.locator.show_slide===!0&&i.locator.hide_slide()}),e.js_close=function(){i.locator.show_slide=!1},e.js_pop_trash=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.mail=n,e.delete_message="确认删除该邮件？",e.js_close=function(){t.close()},e.js_sure_delete=function(){e.is_deleting=!0,wt.data.mail.trash(n.mail_id,function(){e.js_close(),i.locator.hide_slide(),i.$broadcast(kzi.constant.event_names.on_mail_trash,{mail_id:n.mail_id})},null,function(){e.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_pop_move=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/mail/pop_convert_to_post.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.mail=n,e.step=0,e.new_post={watchers:[i.global.me]},e.js_step=function(t){e.step=t},e.js_to_watchers=function(){e.members=[],e.loading_members=!0,i.load_project_members(e.new_post.pid,function(t){e.members=wt.bus.watch.get_scope_watcher_members(t.members,e.new_post.watchers),e.loading_members=!1},function(){e.loading_members=!1}),e.js_step(1)},e.js_change_project=function(){e.new_post.pid!==e.new_post.original_pid&&(e.new_post.watchers=[i.global.me],e.new_post.original_pid=e.new_post.pid)
},e.js_toggle_member=function(t){t.setting_toggle_member!==!0&&(t.setting_toggle_member=!0,wt.bus.watch.mail_convert_post_watch_toggle(s,e.new_post,t,function(){},null,function(){t.setting_toggle_member=!1}))},e.js_add_all=function(){_.each(e.members,function(t){t.watched=!0,_.findWhere(e.new_post.watchers,{uid:t.uid})||e.new_post.watchers.push(t)}),e.js_step(0)},i.load_projects(function(t){e.selected_projects=wt.bus.project.get_member_projects(t);var i=wt.bus.team.find_add_prj_teams();e.selected_projects.forEach(function(e){var t=_.find(i,function(t){return t.team_id===e.team_id});t&&(e.create_time="-1"===t.team_id?1e4:t.create_date,e.team_name=t.name)}),e.selected_projects=_.sortBy(e.selected_projects,function(e){return e.create_time}),_.isEmpty(e.selected_projects)||(e.new_post.pid=e.selected_projects[0].pid,e.new_post.original_pid=e.new_post.pid)}),e.js_close=function(){t.close()},e.js_convert_to_post=function(t,i){var a=_.pluck(i.watchers,"uid");i.is_saving=!0,wt.data.mail.convert(i.pid,n.mail_id,"post",a,function(){e.convert_success=!0},null,function(){i.is_saving=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}(),function(){"use strict";angular.module("wt.entityshare_controller",["ui.utils"]).controller("entity_share_qrcode",["$scope","$location",function(e,t){e.qrcode="",wt.data.utils.get_qrcode(t.$$absUrl,5,function(t){e.qrcode=t})}]).controller("entity_post_share_ctrl",["$scope","$routeParams","$rootScope","$timeout","sanitize",function(e,t,i,n,a){var s=a(/\/share\/\w+\/(\w+)$/.exec(window.location.pathname)[1]);wt.data.share.get_share_posts(s,function(t){if(t.data){e.post=t.data;var i={xtype:"posts",pid:e.post.project.pid,xid:e.post.post_id};n(function(){e.$broadcast(kzi.constant.event_names.load_comments,i)},500),t.data||(e.invalid_input=!0)}},function(){e.invalid_input=!0},function(){i.global.loading_done=!0})}]).controller("entity_file_share_ctrl",["$scope","$routeParams","$rootScope","$timeout","sanitize",function(e,t,i,n,a){var s=a(/\/share\/\w+\/(\w+)$/.exec(window.location.pathname)[1]);wt.data.share.get_share_files(s,function(t){e.file=t.data,t.data||(e.invalid_input=!0)},function(){e.invalid_input=!0},function(){i.global.loading_done=!0})}]).controller("entity_task_share_ctrl",["$scope","$routeParams","$rootScope","$timeout",function(e,t,i,n){n(function(){wt.data.share.get_share_tasks(e.share_id,function(t){if(200===t.code&&t.data){e.task=t.data;var i=_.size(e.task.todos),n=_.size(_.where(e.task.todos,{checked:1}));i>0?(e.task.percentage=parseInt(100*(n/i),10),e.task.status=n+"/"+i):e.task.percentage=0}else e.invalid_input=!0},function(){e.invalid_input=!0},function(){i.global.loading_done=!0})})}]).controller("entity_page_share_ctrl",["$scope","$routeParams","$rootScope","$timeout","sanitize",function(e,t,i,n,a){var s=a(/\/share\/\w+\/(\w+)$/.exec(window.location.pathname)[1]);wt.data.share.get_share_pages(s,function(t){e.page=t.data,t.data||(e.invalid_input=!0)},function(){e.invalid_input=!0},function(){i.global.loading_done=!0})}]).controller("entity_event_share_ctrl",["$scope","$routeParams","$rootScope","$timeout","sanitize",function(e,t,i,n,a){var s=a(/\/share\/\w+\/(\w+)$/.exec(window.location.pathname)[1]);wt.data.share.get_share_events(s,function(t){e.event=t.data,t.data||(e.invalid_input=!0)},function(){e.invalid_input=!0},function(){i.global.loading_done=!0})}])}();var initInnerApp=function(){"use strict";var e=window.wt||{};e.version="2.0";var t=["ngRoute","ngSanitize","ngAnimate","wt.directive.tpls","wt.header_controller","wt.index_controller","wt.user_controller","wt.activity_controller","wt.project_controller","wt.team_controller","wt.team_admin_controller","wt.calendar_controller","wt.comment_controller","wt.fileupload_controller","wt.dashboard_controller","wt.browse_controller","wt.account_controller","wt.home_controller","wt.task_controller","wt.event_controller","wt.post_controller","wt.file_controller","wt.page_controller","wt.mail_controller","wt.service","wt.bus","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.attachment","wt.directive.markdown","wt.directive.notice","wt.directive.feed","wt.directive.uploadfile","wt.directive.activity","wt.directive.dragfile","wt.directive.pastefile","wt.directive.event","wt.directive.post_item","wt.directive.page_item","wt.directive.page_detail","wt.directive.file_item","wt.filter","ui.bootstrap.popbox","ui.sortable","directive.master_new_dialog","wt.directive.file","sf.treeRepeat","pasvaz.bindonce","wt.new.editor"];e.ng=angular.module("wt",t).config(["$routeProvider","$locationProvider",function(e,t){e.when("/share",{templateUrl:"/ycjs/tpl/user/share.html",controller:"home_share_ctrl",header_menu:"",need_load:!1}).when("/project/:pid",{template:"",controller:"project_center",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/project/:pid/notfound",{templateUrl:"/ycjs/tpl/project/prj_not_found.html",controller:"project_notfound_ctrl",header_menu:"project",need_load:!1}).when("/project/:pid/task",{templateUrl:"/ycjs/tpl/project/task/project_tasks.html",controller:"task_list_ctrl",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/project/:pid/post",{templateUrl:"/ycjs/tpl/project/post/project_posts.html",controller:"project_post_ctrl",header_menu:"project",project_iconmenu:"post",need_load:!0}).when("/project/:pid/chat",{templateUrl:"/ycjs/tpl/project/chat/project_chats.html",controller:"project_chats_ctrl",header_menu:"project",project_iconmenu:"chat",need_load:!0}).when("/project/:pid/file",{templateUrl:"/ycjs/tpl/project/file/project_files.html",controller:"project_file_list_ctrl",header_menu:"project",project_iconmenu:"file",need_load:!0}).when("/project/:pid/folder/:folder_id",{templateUrl:"/ycjs/tpl/project/file/project_files.html",controller:"project_file_list_ctrl",header_menu:"project",project_iconmenu:"file",need_load:!0}).when("/project/:pid/page",{templateUrl:"/ycjs/tpl/project/page/project_pages.html",controller:"project_page_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/add",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/add/:parent_page_id",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/:page_id",{templateUrl:"/ycjs/tpl/project/page/page.html",controller:"page_detail_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/:page_id/edit",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/pages/:page_id/versions",{templateUrl:"/ycjs/tpl/project/page/version_diff.html",controller:"page_ver_diff_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/event",{templateUrl:"/ycjs/tpl/project/event/project_events.html",controller:"project_event_ctrl",header_menu:"project",project_iconmenu:"event",need_load:!0}).when("/project/:pid/graph",{templateUrl:"/ycjs/tpl/project/graph/project_graphs.html",controller:"project_graph_ctrl",header_menu:"project",project_iconmenu:"graph",need_load:!0}).when("/project/:pid/activity",{templateUrl:"/ycjs/tpl/activity/project_activities.html",controller:"project_activity_ctrl",header_menu:"project",project_iconmenu:"graph",need_load:!0}).when("/project/:pid/trash",{templateUrl:"/ycjs/tpl/project/trash/project_trash.html",controller:"project_trash_ctrl",header_menu:"project",project_iconmenu:"trash",need_load:!0}).when("/project/:pid/archive",{templateUrl:"/ycjs/tpl/project/task/project_archive_tasks.html",controller:"project_archive_ctrl",header_menu:"project",project_iconmenu:"task_archive",need_load:!0}).when("/projects/archive",{templateUrl:"/ycjs/tpl/dashboard/projects_archive.html",controller:"projects_archive_ctrl",header_menu:"projects",need_load:!0}).when("/projects/fav",{templateUrl:"/ycjs/tpl/dashboard/projects_fav.html",controller:"projects_fav_ctrl",header_menu:"projects",need_load:!0}).when("/projects",{templateUrl:"/ycjs/tpl/dashboard/projects.html",controller:"projects_ctrl",header_menu:"projects",need_load:!0}).when("/dashboard",{templateUrl:"/ycjs/tpl/dashboard/dashboard.html",controller:"dashboard_ctrl",header_menu:"dashboard",need_load:!0}).when("/calendar",{templateUrl:"/ycjs/tpl/dashboard/calendar.html",controller:"calendar_ctrl",header_menu:"calendar",need_load:!0}).when("/calendar/subscribe",{templateUrl:"/ycjs/tpl/dashboard/calendar_subscribe.html",controller:"calendar_subscribe_ctrl",header_menu:"calendar",need_load:!0}).when("/explore",{templateUrl:"/ycjs/tpl/browse/browse_tasks.html",controller:"explore_task_ctrl",header_menu:"explore",need_load:!0}).when("/explore/files",{templateUrl:"/ycjs/tpl/browse/browse_files.html",controller:"explore_file_ctrl",header_menu:"explore",need_load:!0}).when("/explore/posts",{templateUrl:"/ycjs/tpl/browse/browse_posts.html",controller:"explore_post_ctrl",header_menu:"explore",need_load:!0}).when("/explore/pages",{templateUrl:"/ycjs/tpl/browse/browse_pages.html",controller:"explore_page_ctrl",header_menu:"explore",need_load:!0}).when("/search",{templateUrl:"/ycjs/tpl/dashboard/search_result.html",controller:"search_result_ctrl",header_menu:"result",need_load:!0}).when("/teams/:team_id",{templateUrl:"/ycjs/tpl/team/team.html",controller:"team_ctrl",header_menu:"team",need_load:!0}).when("/teams/:team_id/projects",{templateUrl:"/ycjs/tpl/team/team_projects.html",controller:"team_ctrl",header_menu:"team",need_load:!0}).when("/teams/:team_id/tasks",{templateUrl:"/ycjs/tpl/team/team_tasks.html",controller:"team_task_ctrl",header_menu:"team",need_load:!0}).when("/teams/:team_id/invite",{templateUrl:"/ycjs/tpl/team/team_member_invite.html",controller:"team_member_invite_ctrl",header_menu:"team",need_load:!0}).when("/teams/:team_id/setting",{templateUrl:"/ycjs/tpl/team/team_setting.html",controller:"team_setting_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin",{templateUrl:"/ycjs/tpl/team/team_admin_summary.html",controller:"team_admin_summary_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/basic",{templateUrl:"/ycjs/tpl/team/team_admin_basic.html",controller:"team_admin_basic_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/summary",{templateUrl:"/ycjs/tpl/team/team_admin_summary.html",controller:"team_admin_summary_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/members",{templateUrl:"/ycjs/tpl/team/team_admin_members.html",controller:"team_admin_members_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/projects",{templateUrl:"/ycjs/tpl/team/team_admin_projects.html",controller:"team_admin_projects_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/security",{templateUrl:"/ycjs/tpl/team/team_admin_security.html",controller:"team_admin_security_ctrl",header_menu:"",need_load:!0}).when("/account/settings",{templateUrl:"/ycjs/tpl/account/account_settings.html",controller:"account_settings_ctrl",header_menu:"",need_load:!0}).when("/account/twofactor",{templateUrl:"/ycjs/tpl/account/account_twofactor.html",controller:"account_twofactor_ctrl",header_menu:"",need_load:!0}).when("/account/message",{templateUrl:"/ycjs/tpl/account/account_message.html",controller:"account_message_ctrl",header_menu:"",need_load:!0}).when("/account/projects",{templateUrl:"/ycjs/tpl/account/account_projects.html",controller:"account_projects_ctrl",header_menu:"",need_load:!0}).when("/account/teams",{templateUrl:"/ycjs/tpl/account/account_teams.html",controller:"account_teams_ctrl",header_menu:"",need_load:!0}).when("/account/security",{templateUrl:"/ycjs/tpl/account/account_security.html",controller:"account_security_ctrl",header_menu:"",need_load:!0}).when("/account/apps",{templateUrl:"/ycjs/tpl/account/account_apps.html",controller:"account_apps_ctrl",header_menu:"",need_load:!0}).when("/not_found",{templateUrl:"/ycjs/tpl/404.html",need_load:!1,header_menu:"index",controller:["$rootScope",function(e){e.global.loading_init=!1,e.global.title="404"}],is_outter:!0}).otherwise({template:"",controller:[function(){window.location.href=/^\/(club|feedback|blog|videos|guide|help|mobile|plan)($|\/(.*$))/.test(window.location.pathname)?window.location.href:"/dashboard"}]}),t.html5Mode(!0)}]).config(["$httpProvider","fileUploadProvider","$tooltipProvider","$sceDelegateProvider","$compileProvider",function(e,t,i,n,a){delete e.defaults.headers.common["X-Requested-With"],i.options({appendToBody:!0}),angular.extend(t.defaults,{pasteZone:null,drapZone:null,disableImageResize:!0,minFileSize:0,maxFileSize:1e8,maxNumberOfFiles:100,autoUpload:!0,messages:{maxNumberOfFiles:"超过文件最大数",acceptFileTypes:"文件格式不支持",maxFileSize:"文件太大",minFileSize:"文件太小"}}),n.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"]),a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|webcal):/)}]).run(["$rootScope","$rootElement","$location","$route","data","bus","$routeParams","$modal","$window","$timeout","$cacheFactory","$log","feed",function(t,i,n,a,s,r,o,l,c,d,u,p,f){e.log=p,e.data=s,e.bus=r,e.cache=u("wt");var h=!1,m=null;t.global={config:kzi.config,title:"",me:e.me,is_login:!_.isUndefined(e.me)&&!_.isEmpty(e.me.uid),loading_init:!0,loading_done:!1,header_menu:"index",right_isfold:!0,is_outter:!1,show_msg:!1,project_iconmenu:"",project_sidebar_view:"member",project_sidebar_foldview:"module",left_panel_is_fold:!1,right_sidebar_is_fold:1,calendar_fold:!0,loaded_notice_count:!1,wohoo_show:!1,tour_version:"00",team_module:kzi.constant.team_module,prj_module:kzi.constant.prj_module,show_inbox:!1},t.pid="",t.notice_count=0,t.teams=[],t.projects=[],t.project={info:{},members:[],entries:[],tasks:[],files:[],posts:[],pages:[],events:[],feeds:[],currentEntry:null,currentTask:null,entryIndex:0,taskIndex:0},t.locator={hide_slide:function(){t.locator.show_slide=!1,t.locator.show_detail_task_id=null,t.locator.show_detail_post_id=null,t.locator.show_detail_event_id=null,t.locator.show_detail_file_id=null,t.locator.show_detail_page_id=null,t.locator.show_detail_mail_id=null,t.$broadcast(kzi.constant.event_names.on_slide_hide)},to_project:function(e){t.locator.hide_slide(),n.path("/project/"+e)},to_task:function(e,i,n,a){t.locator.show_detail_task_id=i,t.locator.type="task",t.locator.show_slide=!0,t.locator.show_prj=n,t.$broadcast(kzi.constant.event_names.load_entity_task,{pid:e,tid:i,comment_id:a})},to_event:function(e,i,n,a){t.locator.type="event",t.locator.show_slide=!0,t.locator.show_detail_event_id=i,t.locator.show_prj=n,t.$broadcast(kzi.constant.event_names.load_entity_event,{pid:e,event_id:i,comment_id:a})},to_file:function(e,i,n,a){t.locator.type="file",t.locator.show_slide=!0,t.locator.show_detail_file_id=i,t.locator.show_prj=n,t.$broadcast(kzi.constant.event_names.load_entity_file,{pid:e,fid:i,comment_id:a})},to_post:function(e,i,n,a){t.locator.type="post",t.locator.show_detail_post_id=i,t.locator.show_slide=!0,t.locator.show_prj=n,t.$broadcast(kzi.constant.event_names.load_entity_post,{pid:e,post_id:i,comment_id:a})},to_page:function(e,i,n,a){t.locator.type="page",t.locator.show_slide=!0,t.locator.show_detail_page_id=i,t.locator.show_prj=n,t.$broadcast(kzi.constant.event_names.load_entity_page,{pid:e,page_id:i,comment_id:a})},to_mail:function(e,i){t.locator.type="mail",t.locator.show_slide=!0,t.locator.show_detail_mail_id=e,t.$broadcast(kzi.constant.event_names.load_entity_mail,{mail_id:e,comment_id:i})},to_entity:function(e,i,n,a){switch(i.etype){case kzi.constant.entity_type.task:t.locator.to_task(e,i.eid,n,a);break;case kzi.constant.entity_type.file:t.locator.to_file(e,i.eid,n,a);break;case kzi.constant.entity_type.post:t.locator.to_post(e,i.eid,n,a);break;case kzi.constant.entity_type.page:t.locator.to_page(e,i.eid,n,a);break;case kzi.constant.entity_type.event:t.locator.to_event(e,i.eid,n,a);break;default:}}},t.upload_queue={get_queue:function(){if($.isFunction($("#global_file_upload").scope)){var e=$("#global_file_upload").scope();if("object"==typeof e&&$("#global_file_upload").scope().hasOwnProperty("queue")&&"object"==typeof $("#global_file_upload").scope().queue){var t=$("#global_file_upload").scope().queue;return t.length}}},_get_queue:function(e,t,i){var n=[];try{if("object"==typeof $("#global_file_upload").scope().queue){var a=$("#global_file_upload").scope().queue;n=_.filter(a,function(n){var a=!0;if(_.isUndefined(n.formData))return a=!1;if(!_.isEmpty(n.ext))return a=!1;if(n.formData.type!==t)a=!1;else if(n.formData.pid!==e)a=!1;else switch(t){case"task":n.formData.tid!==i.tid&&(a=!1);break;case"post":n.formData.post_id!==i.post_id&&(a=!1);break;case"file":n.formData.fid!==i.fid&&(a=!1);break;case"project":n.formData.folder_id!==i.folder_id&&(a=!1);break;case"comment":_.isUndefined(i.tid)||n.formData.tid===i.tid||(a=!1),_.isUndefined(i.event_id)||n.formData.event_id===i.event_id||(a=!1),_.isUndefined(i.post_id)||n.formData.post_id===i.post_id||(a=!1),_.isUndefined(i.page_id)||n.formData.page_id===i.page_id||(a=!1)}return a})}return n}catch(s){return n}},get_chat:function(e){return this._get_queue(e,"chat")},get_task:function(e,t){return this._get_queue(e,"task",{tid:t})},get_event:function(e,t){return this._get_queue(e,"event",{event_id:t})},get_post:function(e,t){return this._get_queue(e,"post",{post_id:t})},get_file:function(e,t){var i=this._get_queue(e,"file",{fid:t});return i.length>0&&(i=[i[i.length-1]]),i},get_project:function(e,t){return this._get_queue(e,"project",{folder_id:t})},get_comment_task:function(e,t){return this._get_queue(e,"comment",{tid:t})},get_comment_event:function(e,t){return this._get_queue(e,"comment",{event_id:t})},get_comment_post:function(e,t){return this._get_queue(e,"comment",{post_id:t})},get_comment_page:function(e,t){return this._get_queue(e,"comment",{page_id:t})},get_comment_file:function(e,t){var i=this._get_queue(e,"comment",{fid:t});return i.length>0&&(i=[i[i.length-1]]),i}},t.returnToSignin=function(){t.global.is_login=!1,t.locator.hide_slide(),c.location.href="/signin?return_url="+c.location.pathname},t.login=function(i,a,s,r,o,l){e.data.signin(i,a,function(e){t.global.me=e.data.session,t.global.is_login=!0,kzi.config.feed_turn_on&&f.connect(),t.clear_project(),t.teams=[],t.projects=[],t.global.loaded_notice_count=!1,null!==s&&n.path(s),angular.isFunction(r)&&r(e)},o,l)},t.logout=function(i){f.close(),delete t.global.me,t.global.is_login=!1,e.data.signout(function(){i||(c.location.href="/")})},t.auth=function(i,n){e.data.auth(function(e){200===e.code?(t.global.me=e.data.session,t.global.me.role="1",t.global.is_login=!0,null!==i&&"function"==typeof i&&i()):(delete t.global.me,t.global.is_login=!1,null!==n&&"function"==typeof n&&n())})},t.load_teams=function(i,n,a){var s=t.teams;s&&s.length>0?(angular.isFunction(i)&&i(s),angular.isFunction(a)&&a()):e.data.team.get_list(function(e){t.teams=e.data,angular.isFunction(i)&&i(e.data)},n,a)},t.load_team=function(t,i,n,a){e.data.team.get(t,function(e){angular.isFunction(i)&&i(e.data)},n,a)},t.load_team_from_cache=function(e,i){var n=null;t.teams&&t.teams.length>0&&(n=_.findWhere(t.teams,{team_id:e})),angular.isFunction(i)&&i(n)},t.load_projects=function(i,n,a){var s=t.projects;_.isEmpty(s)?e.data.project.get_all("active",function(e){t.projects=e.data,t.sort_projects(),angular.isFunction(i)&&i(t.projects),t.$broadcast(kzi.constant.event_names.load_teams_projects_sucess),t.global.loading_init=!1},n,a):(angular.isFunction(i)&&i(s),angular.isFunction(a)&&a())},t.reload_projects=function(i,n,a){e.data.project.get_all("active",function(e){t.projects=e.data,t.sort_projects(),angular.isFunction(i)&&i(t.projects)},n,a)},t.sort_projects=function(){t.projects=_.sortBy(t.projects,function(e){return e.pos})},t.load_project=function(i,n,a,s,r){var o=t.project;o&&o.info&&o.info.pid===i&&o.members&&o.members.length>0?(a(o),_.isFunction(r)&&r()):(n&&(t.project.members=[],t.project.entries=[],t.project.tasks=[],t.project.files=[],t.project.posts=[],t.project.pages=[],t.project.events=[],t.project.feeds=[],t.project.init_chat=null,t.project.currentEntry=null,t.project.currentTask=null,t.project.entryIndex=0,t.project.taskIndex=0),e.data.project.get(i,function(e){n?(t.project.info=e.data.info,t.project.members=e.data.members,a(t.project)):a(e.data)},s,r))},t.load_project_from_cache=function(e,i){var n=null;t.projects&&t.projects.length>0&&(n=_.findWhere(t.projects,{pid:e})),angular.isFunction(i)&&i(n)},t.load_tasks=function(i,n,a,s){t.load_project(i,!0,function(r){r.entries&&r.entries.length>0?(n(r),_.isFunction(s)&&s()):e.data.entry.get_list(i,!1,function(e){var i=_.sortBy(e.data.entries,function(e){return e.pos}),a=e.data.tasks;t.project.entries=i,t.project.tasks=a,n(r)},a,s)},function(e){_.isFunction(a)&&a(e),_.isFunction(s)&&s(e)})},t.load_task=function(i,n,a,s){t.load_project(i,!1,function(t){if(t.tasks&&t.tasks.length>0){var r=_.findWhere(t.tasks,{tid:n});r?a(t,r):e.data.task.get(i,n,function(e){a(t,e.data)},s)}else e.data.task.get(i,n,function(e){a(t,e.data)},s)},s)},t.load_post=function(i,n,a,s){t.load_project(i,!1,function(t){e.data.post.get(i,n,function(e){_.isFunction(a)&&a(t,e.data)},s)},s)},t.load_page=function(i,n,a,s){t.load_project(i,!1,function(t){e.data.page.get(i,n,function(e){_.isFunction(a)&&a(t,e.data)},s)},s)},t.load_event=function(i,n,a,s){t.load_project(i,!1,function(t){e.data.event.get(i,n,function(e){_.isFunction(a)&&a(t,e.data)},s)},s)},t.reload_entries=function(i){e.data.entry.get_list(i,!1,function(e){var i=_.sortBy(e.data.entries,function(e){return e.pos}),n=e.data.tasks;t.project.entries=i,t.project.tasks=n,t.$broadcast("socket_message_entry_list",null)})},t.sort_entries=function(){var e=t.project.entries;e&&(e=_.sortBy(e,function(e){return e.pos}),t.project.entries=e)},t.load_files_db=function(i,n,a,s,r,o,l,c,d){e.data.file.get_list(i,n,a,s,r,function(e){t.folder={folder_id:e.data.folder.folder_id,name:e.data.folder.name},_.each(e.data.files,function(e){if(e.icon=kzi.helper.build_file_icon(e),o){var i=_.findWhere(t.project.files,{fid:e.fid});i||t.project.files.push(e)}}),o?l(t.project):l(e.data)},c,d)},t.load_file=function(i,n,a,s){t.load_project(i,!1,function(r){if(r.files&&r.files.length>0){var o=_.findWhere(t.project.files,{fid:n});o?a(r,o):e.data.file.get(i,n,function(e){var t=e.data;t.icon=kzi.helper.build_file_icon(t),a(r,t)},s)}else e.data.file.get(i,n,function(e){var t=e.data;t.icon=kzi.helper.build_file_icon(t),a(r,t)},s)},s)},t.load_project_feeds=function(i,n,a,s){_.isEmpty(t.project.info)||(t.project.info.pid!==i||_.isEmpty(t.project.feeds)?e.data.activity.get_prj_feed(i,function(e){t.project.feeds=e.data,_.isFunction(n)&&n(t.project.feeds)},a,s):(_.isFunction(n)&&n(t.project.feeds),_.isFunction(s)&&s()))},t.load_project_init_chat=function(i,n,a,s){_.isEmpty(t.project)||(t.project.info&&t.project.info.pid===i&&!_.isEmpty(t.project.init_chat)?(_.isFunction(n)&&n(t.project.init_chat),_.isFunction(s)&&s()):e.data.project.get_chat_list(i,1,5,function(e){t.project.init_chat=e.data,_.isFunction(n)&&n(t.project.init_chat)},a,s))},t.clear_project_init_chat=function(){t.project.init_chat=null},t.clear_project_feeds=function(){t.project.feeds=[]},t.clear_project=function(){t.project.info={},t.project.members=[],t.project.entries=[],t.project.tasks=[],t.project.files=[],t.project.posts=[],t.project.pages=[],t.project.events=[],t.project.feeds=[],t.project.init_chat=null,t.project.currentEntry=null,t.project.currentTask=null,t.project.entryIndex=0,t.project.taskIndex=0},t.load_project_members=function(i,n,a){t.project&&t.project.info&&t.project.info.pid===i?t.project.members&&t.project.members.length>0?angular.isFunction(n)&&n(t.project):e.data.project.get_members(i,function(e){t.project.members=e.data,angular.isFunction(n)&&n(t.project)},a):e.data.project.get_members(i,function(e){angular.isFunction(n)&&n({members:e.data})},a)},t.load_team_members=function(t,i,n,a){e.data.team.get_team_members(t,function(e){angular.isFunction(i)&&i(e.data)},n,a)},t.reload_team_members=function(t,i,n,a){e.data.team.get_team_members(t,function(e){angular.isFunction(i)&&i(e.data)},n,a)},t.load_unread_notices=function(i){t.global.loaded_notice_count!==!0&&(t.global.loaded_notice_count=!0,e.data.notice.unread_count(function(e){t.notice_count=e.data,angular.isFunction(i)&&i(t.notice_count)},function(){t.global.loaded_notice_count=!1}))};var g=function(e){var t=_.size(e.todos),i=_.size(_.where(e.todos,{checked:1}));t>0?(e.percentage=parseInt(100*(i/t)),e.status=i+"/"+t):e.percentage=0,e.badges.todo_checked_count=i,e.badges.todo_count=t},v=function(e,i){_.findWhere(i,{team_id:"-1"})&&!_.findWhere(e,{team_id:"-1"})&&e.unshift({team_id:"-1",name:"个人项目"}),!_.findWhere(i,{team_id:"-1"})&&_.findWhere(e,{team_id:"-1"})&&(t.teams=e=_.reject(e,function(e){return"-1"==e.team_id})),_.each(e,function(e){e.projects=_.where(i,{team_id:e.team_id})})};t.set_team_projects=function(){v(t.teams,t.projects)},t.refresh_cache={team:{dismiss:function(e){t.teams=_.reject(t.teams,function(t){return t.team_id===e}),t.projects=_.reject(t.projects,function(t){return t.team_id===e})},leave:function(e){t.teams=_.reject(t.teams,function(t){return t.team_id===e}),t.projects=_.reject(t.projects,function(t){return t.team_id===e})},update_base:function(e,i,n,a){var s=_.findWhere(t.teams,{team_id:e});s&&(s.name=i,s.desc=n,s.url=a)},update_visibility:function(e,i){var n=_.findWhere(t.teams,{team_id:e});n&&(n.visibility=i)},add_project:function(e){var i="";void 0===_.findWhere(t.teams,{team_id:"-1"})&&t.teams.unshift({name:"个人项目",team_id:"-1",curr_role:"1",projects:[]}),t.teams.forEach(function(t){i=_.find(t.projects,function(t){return t.pid===e.pid})}),_.isEmpty(i)&&t.teams.forEach(function(t){t.team_id===e.team_id&&t.projects.push(e)})}},project:{add:function(e){var i=_.findWhere(t.projects,{pid:e.pid});i||t.projects.push(e)},update:function(e,i,n,a){e===t.project.info.pid&&(t.project.info.name=i,t.project.info.desc=n,t.project.info.visibility=a);var s=_.findWhere(t.projects,{pid:e});s&&(s.name=i,s.desc=n,s.visibility=a)},set_logo:function(e,i,n){e===t.project.info.pid&&(t.project.info.bg=i,t.project.info.pic=n);var a=_.findWhere(t.projects,{pid:e});a&&(a.bg=i,a.pic=n)},remove:function(e){t.projects&&t.projects.length>0&&(t.projects=_.reject(t.projects,function(t){return t.pid==e}),t.set_team_projects())},add_admin:function(e,i){if(t.projects&&t.projects.length>0){var n=_.findWhere(t.projects,{pid:e});if(n){var a=_.findWhere(n.admins,{uid:i.uid});a||n.admins.push(i)}}},remove_admin:function(e,i){if(t.projects&&t.projects.length>0){var n=_.findWhere(t.projects,{pid:e});n&&(n.admins=_.reject(n.admins,function(e){return e.uid==i.uid}))}},set_star:function(e,i){e===t.project.info.pid&&(t.project.info.is_star=i,t.project.info.is_star=i);var n=_.findWhere(t.projects,{pid:e});n&&(n.is_star=i)},shift:function(e,i){t.project.info&&t.project.info.pid===e&&(t.project.info.team_id=i,t.project.info.visibility===kzi.constant.prj_visibility.protected&&-1==i&&(t.project.info.visibility=kzi.constant.prj_visibility.private));var n=_.findWhere(t.projects,{pid:e});n&&(n.team_id=i,n.visibility===kzi.constant.prj_visibility.protected&&-1==i&&(n.visibility=kzi.constant.prj_visibility.private),t.set_team_projects())},change_navs:function(e,i){e===t.project.info.pid&&(t.project.info.navs=i);var n=_.findWhere(t.projects,{pid:e});n&&(n.navs=i)}},task:{add:function(e){var i=_.findWhere(t.project.tasks,{tid:e.tid});i||t.project.tasks.push(e)},update_full:function(e){var i=_.findWhere(t.project.tasks,{tid:e.tid});i&&(i.name=e.name,i.desc=e.desc,i.pos=e.pos,i.completed=e.completed,i.is_expire=e.is_expire,i.expire_date=e.expire_date,i.badges=e.badges,i.labels=e.labels,i.members=e.members,i.watchers=e.watchers,i.todos=e.todos)},update:function(e,i,n){var a=_.findWhere(t.project.tasks,{tid:e});a&&(a.name=i,a.desc=n)},trash:function(e){t.project.tasks=_.reject(t.project.tasks,function(t){return t.tid===e})},change_entry:function(e,i,n,a){var s=_.findWhere(t.project.tasks,{tid:e});if(s){s.pos=a,s.entry_id=n;var r=_.findWhere(t.project.entries,{entry_id:n});if(r){_.isEmpty(r.tasks)?(r.tasks=[],r.tasks.push(s)):r.tasks.push(s);var o=_.findWhere(t.project.entries,{entry_id:i});o&&(o.tasks=_.reject(o.tasks,function(t){return t.tid==e}),o.tasks=_.sortBy(o.tasks,function(e){return e.pos}),r.tasks=_.sortBy(r.tasks,function(e){return e.pos}))}}},complete:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});n&&(n.completed=i)},set_expire:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});n&&(n.expire_date=i,n.badges.expire_date=i)},assign:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.members,{uid:i.uid});a||(n.members.push(i),i.assigned=1)}},unassign:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.members,{uid:i.uid});a&&(n.members=_.reject(n.members,function(e){return e.uid==i.uid})),i.assigned=0}},set_labels:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.labels,{name:i.name});a||(n.labels.push(i),i.assigned=1)}},del_labels:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.labels,{name:i.name});a&&(n.labels=_.reject(n.labels,function(e){return e.name==i.name})),i.assigned=0}},watch:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.watchers,{uid:i.uid});a||(n.watchers.push(i),i.is_watch=1)}},unwatch:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.watchers,{uid:i.uid});a&&(n.watchers=_.reject(n.watchers,function(e){return e.uid==i.uid})),i.is_watch=0}},add_todo:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});if(n){var a=_.findWhere(n.todos,{todo_id:i.todo_id});a||(n.todos.push(i),g(n))}},update_todo:function(e,i,n){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:i});s&&(s.name=n)}},del_todo:function(e,i){var n=_.findWhere(t.project.tasks,{tid:e});n&&(n.todos=_.reject(n.todos,function(e){return e.todo_id===i}),g(n))},change_todo_pos:function(e,i,n){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:i});s&&(s.pos=n)}},complete_todo:function(e,i,n){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:i});s&&(s.checked=n,g(a))}}},entry:{add:function(e){var i=_.findWhere(t.project.entries,{entry_id:e.entry_id});i||t.project.entries.push(e)},move:function(e,i,n,a){var s=_.findWhere(t.project.entries,{entry_id:a});if(s){var r=_.findWhere(t.project.tasks,{tid:e});r.pos=i,n!=a&&(r.entry_id=a)}},del:function(e){var i=_.findWhere(t.project.entries,{entry_id:e});i&&(t.project.entries=_.reject(t.project.entries,function(t){return t.entry_id===e}),t.project.tasks=_.reject(t.project.tasks,function(t){return t.entry_id===e}))}},file:{add:function(e){if(t.project&&t.project.info&&t.project.info.pid===e.pid&&!_.isEmpty(t.project.files)){var i=_.findWhere(t.project.files,{fid:e.fid});i||t.project.files.push(e)}},del:function(e){t.project.files=_.reject(t.project.files,function(t){return t.fid===e})},clear:function(e){t.project&&t.project.info&&t.project.info.pid===e&&(t.project.files=[])}},user:{avatar:function(e,i){if(t.projects&&t.projects.length>0&&_.each(t.projects,function(t){if(t.admins&&t.admins.length>0){var n=_.findWhere(t.admins,{uid:e});n&&(n.avatar=i)}}),t.project&&t.project.members&&t.project.members.length>0){var n=_.findWhere(t.project.members,{uid:e});n&&(n.avatar=i),t.project.tasks&&t.project.tasks.length>0&&_.each(t.project.tasks,function(t){if(t.members&&t.members.length>0){var n=_.findWhere(t.members,{uid:e});n&&(n.avatar=i)}})}t.global.me.avatar=i},update:function(e,i,n){if(t.project&&t.project.members&&t.project.members.length>0){var a=_.findWhere(t.project.members,{uid:e});
a&&(a.display_name=i,a.desc=n),t.project.tasks&&t.project.tasks.length>0&&_.each(t.project.tasks,function(t){if(t.members&&t.members.length>0){var a=_.findWhere(t.members,{uid:e});a&&(a.display_name=i,a.desc=n)}})}t.global.me.display_name=i,t.global.me.desc=n},remove:function(e){t.project&&t.project.members&&t.project.members.length>0&&(t.project.members=_.reject(t.project.members,function(t){return t.uid==e}),t.project.tasks&&t.project.tasks.length>0&&(_.each(t.project.tasks,function(i){i.members&&i.members.length>0&&(t.project.members=_.reject(t.project.members,function(t){return t.uid==e}))}),t.$broadcast("socket_message_project_member_remove",{uid:e})))},change_state:function(e,i){if(t.$broadcast(kzi.constant.event_names.member_state_change,{uid:e,state:i}),t.project){var n=_.findWhere(t.project.members,{uid:e});n&&(n.online=i)}}}},t.load_common_data_in=function(e,i,n){t.load_teams(function(a){t.load_projects(function(t){v(a,t),_.isFunction(e)&&e({teams:a,projects:t})},i,n)},function(){_.isFunction(i)&&i(),_.isFunction(n)&&n()}),t.load_unread_notices(function(){t.global.loaded_notice_count=!0})},t.reload_common_data_in=function(e,i,n){t.teams=[],t.projects=[],t.global.loaded_notice_count=!1,t.load_common_data_in(e,i,n)},t.$on(kzi.constant.event_names.emit_filter_activity_by_type,function(e,i){t.$broadcast(kzi.constant.event_names.filter_activity_by_type,{data:i})}),t.$on(kzi.constant.event_names.emit_filter_watch_by_type,function(e,i){t.$broadcast(kzi.constant.event_names.filter_watch_by_type,{data:i})}),t.$on(kzi.constant.event_names.on_file_add,function(e,i){if(i&&"task"===i.type){var n=_.findWhere(t.project.tasks,{tid:i.file.formData.tid});n?(_.isArray(n.files)?n.files.push(i.file):n.files=[i.file],_.isArray(n.files)&&(n.badges.file_count=n.files.length)):t.$broadcast(kzi.constant.event_names.on_task_badges_file,i)}}),t.$on("$routeChangeStart",function(e,i){t.global.show_inbox=!1,t.global.loading_done=null==i.need_load||1==i.need_load?!1:!0,i.is_outter?t.global.is_outter=!0:(t.global.is_outter=!1,i&&i.$$route&&"projects_ctrl"==i.$$route.controller||t.load_common_data_in()),kzi.console.group("RouteChange："+n.$$absUrl),kzi.console.time("$routeChange"),kzi.console.log("$routeChangeStart"),i.$$route&&(t.global.header_menu=i.$$route.header_menu,i.$$route.project_iconmenu&&(t.global.project_iconmenu=i.$$route.project_iconmenu)),t.global.is_login||i.is_outter===!0?i.is_outter===!0:/^\/signin/g.test(n.$$path)||(c.location.href="/signin?return_url="+n.$$path)}),t.$on("$routeChangeSuccess",function(){t.global.is_outter!==!0&&t.locator.show_slide===!0&&t.locator.hide_slide(),kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeChangeSuccess"),kzi.console.groupEnd("RouteChange："+n.$$absUrl)}),t.$on("$routeChangeError",function(){kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeChangeError"),kzi.console.groupEnd("RouteChange："+n.$$absUrl)}),t.$on("$routeUpdate",function(){kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeUpdate"),kzi.console.groupEnd("RouteChange："+n.$$absUrl)}),t.$on("$locationChangeSuccess",function(){t.actualLocation=n.path()});var b=function(e,i){if(i&&!e){var n=_.findWhere(t.projects,{pid:i});n&&(e=n.team_id)}e&&t.$broadcast("socket_message_team_projects",{team_id:e,pid:i})},y={notice_new:function(e){t.notice_count++,t.$broadcast(kzi.constant.event_names.notice_new,e.notice);var i=kzi.localData.get(kzi.config.desk_notify_key);if(1==i&&e&&e.notice){var n=e.notice;if("task_assign"==n.template)window.DesktopNotify.wt_show("/img/wt-logo.png","新任务",n.sender.display_name+" 给你分配了新的任务 "+n.data.entity.name,function(){t.locator.to_task(n.filter.prj,n.data.entity.eid,!1)});else if("task_complete"==n.template)window.DesktopNotify.wt_show("/img/wt-logo.png","任务完成",n.sender.display_name+" 完成了任务 "+n.data.entity.name,function(){t.locator.to_task(n.filter.prj,n.data.entity.eid,!1)});else if("metion_at_comment"==n.template){var a="";"task"==n.data.target.etype?(a="任务",window.DesktopNotify.wt_show("/img/wt-logo.png","提到你",n.sender.display_name+" 在"+a+n.data.target.name+" 提到你 "+n.data.entity.name,function(){t.locator.to_task(n.filter.prj,n.data.target.eid,!1)})):"file"==n.data.target.etype?(a="文件",window.DesktopNotify.wt_show("/img/wt-logo.png","提到你",n.sender.display_name+" 在"+a+n.data.target.name+" 提到你 "+n.data.entity.name,function(){t.locator.to_file(n.filter.prj,n.data.target.eid,!1)})):"post"==n.data.target.etype?(a="话题",window.DesktopNotify.wt_show("/img/wt-logo.png","提到你",n.sender.display_name+" 在"+a+n.data.target.name+" 提到你 "+n.data.entity.name,function(){t.locator.to_post(n.filter.prj,n.data.target.eid,!1)})):"page"==n.data.target.etype?(a="文档",window.DesktopNotify.wt_show("/img/wt-logo.png","提到你",n.sender.display_name+" 在"+a+n.data.target.name+" 提到你 "+n.data.entity.name,function(){t.locator.to_page(n.filter.prj,n.data.target.eid,!1)})):"event"==n.data.target.etype&&(a="事件")}}},project_list:function(i){i.uid!=t.global.me.uid&&(i.owner===t.global.me.uid&&"remove_member"===i.action||"delete_project"===i.action?(t.refresh_cache.project.remove(i.pid),t.project.info&&t.project.info.pid===i.pid&&(t.clear_project(),o.pid===i.pid&&n.path("/projects")),b(i.team_id,i.pid)):(t.project.info&&i.pid===t.project.info.pid&&"archive_project"===i.action&&(t.project.info.permission=kzi.constant.prj_module.view,t.project.info.archived=1,t.$broadcast(kzi.constant.event_names.project_permission_change,i)),b(i.team_id,i.pid),e.data.project.get_all("active",function(e){if(t.projects=e.data,v(t.teams,t.projects),t.sort_projects(),t.$broadcast("socket_message_project_list",null),t.project.info&&i.pid===t.project.info.pid&&"unarchive_project"===i.action){var n=_.findWhere(t.projects,{pid:i.pid});n&&(t.project.info.permission=n.permission),t.project.info.archived=0,t.$broadcast(kzi.constant.event_names.project_permission_change,i)}})))},project_single:function(i){var n=_.findWhere(t.projects,{pid:i.pid});(n||t.project&&i.pid===t.project.info.pid)&&i.uid!==t.global.me.uid&&e.data.project.get(i.pid,function(e){if(t.project&&i.pid===t.project.info.pid){var a=!1;t.project.info.permission!==e.data.info.permission&&(a=!0),t.project.info=e.data.info,b(t.project.info.team_id,i.pid),a&&t.$broadcast(kzi.constant.event_names.project_permission_change,i)}n&&(n.name=e.data.info.name,n.desc=e.data.info.desc,n.archived=e.data.info.archived,n.pic=e.data.info.pic,n.bg=e.data.info.bg,n.is_star=e.data.info.is_star,n.curr_role=e.data.info.curr_role,n.show_completed=e.data.info.show_completed,n.permission=e.data.info.permission,b(i.team_id,i.pid))})},team_list:function(e){if(e.owner===t.global.me.uid&&e.uid!==t.global.me.uid){var i=_.findWhere(t.teams,{team_id:e.team_id});if(i&&"remove_member"===e.action){t.refresh_cache.team.leave(e.team_id);var a=o.team_id;a&&a===e.team_id&&(kzi.constant.team_module.view_base&e.team_permission?t.$broadcast(kzi.constant.event_names.team_member_role_change,e):n.path("/projects"))}else t.reload_common_data_in(function(){var e=o.team_id;e&&!_.findWhere(t.teams,{team_id:e})&&n.path("/projects")})}},project_members:function(i){if(t.project&&t.project.info&&i.pid==t.project.info.pid&&i.uid!==t.global.me.uid){if(i.owner===t.global.me.uid&&"remove_member"===i.action)return;t.project.members=null,e.data.project.get_members(i.pid,function(e){var i=e.data;t.project.members=i})}},project_member_role:function(e){t.project&&t.project.info&&e.pid===t.project.info.pid&&e.owner===t.global.me.uid&&(t.project.info.permission=e.permission,o.pid!==e.pid||kzi.constant.prj_module.view&e.permission||n.path("/projects"),t.$broadcast(kzi.constant.event_names.project_permission_change,e));var i=_.findWhere(t.projects,{pid:e.pid});i&&e.owner===t.global.me.uid&&(i.permission=e.permission,t.$broadcast(kzi.constant.event_names.project_permission_change,e))},entry_list:function(e){t.project&&e.pid==t.project.info.pid&&e.uid!=t.global.me.uid&&t.reload_entries(e.pid)},task_single:function(i){if(t.project&&i.pid==t.project.info.pid&&i.uid!=t.global.me.uid){var n=_.findWhere(t.project.tasks,{tid:i.tid});n?e.data.task.get(i.pid,i.tid,function(e){if(n.name=e.data.name,n.desc=e.data.desc,n.pos=e.data.pos,n.completed=e.data.completed,n.expire_date=e.data.expire_date,n.badges=e.data.badges,n.labels=e.data.labels,n.members=e.data.members,n.watchers=e.data.watchers,n.todos=e.data.todos,n.files=[],t.$broadcast(kzi.constant.event_names.on_task_badges_check,{tid:n.tid}),i.moved){var a=n.entry_id;n.entry_id=e.data.entry_id,t.$broadcast("socket_message_task_move",{from_entry_id:a,task:e.data})}}):e.data.task.get(i.pid,i.tid,function(e){var n=e.data,a=_.findWhere(t.project.tasks,{tid:i.tid});a||t.project.tasks.push(n),t.$broadcast("socket_message_task_add",{task:n})})}},task_delete:function(e){t.project&&e.pid==t.project.info.pid&&e.uid!=t.global.me.uid&&(t.project.tasks=_.reject(t.project.tasks,function(t){return t.tid==e.tid}),t.$broadcast("socket_message_task_delete",{tid:e.tid}))},team_member_role:function(e){if(e.owner===t.global.me.uid){var i=_.findWhere(t.teams,{team_id:e.team_id});i&&kzi.constant.team_module.view&e.team_permission?(i.permission=e.team_permission,t.$broadcast(kzi.constant.event_names.team_member_role_change,e)):i&&(t.refresh_cache.team.leave(e.team_id),t.$broadcast(kzi.constant.event_names.team_member_role_change,e))}},comment_new:function(e){t.global.me.uid!==e.uid&&t.$broadcast(kzi.constant.event_names.on_comment_new,e)},notice_read:function(e){e.owner===t.global.me.uid&&(t.notice_count="all"===e.nid?0:t.notice_count>0?t.notice_count-1:0)}},w=null;c.onblur=function(){w||(w=setTimeout(function(){t.global.me.online=kzi.constant.state.leave,f.leave(),clearTimeout(w),w=null},9e5))},c.onfocus=function(){f.getStatus()!==Strophe.Status.CONNECTED&&f.getStatus()!==Strophe.Status.CONNECTING&&(kzi.config.feed_turn_on&&f.connect(t.global.me.uid,t.global.me.sid),t.global.loaded_notice_count=!1,t.load_unread_notices(function(){t.global.loaded_notice_count=!0})),t.global.me.online!=kzi.constant.state.online&&f.online(),clearTimeout(w),w=null},t.global.me&&(f.onMessage(function(e){e.getAttribute("to"),e.getAttribute("from"),e.getAttribute("type");var s=e.getElementsByTagName("body"),r=JSON.parse(s[0].textContent);return y[r.args]&&t.$apply(function(){y[r.args](r.data)}),!0}),f.onPresence(function(e){var i=e.getAttribute("from"),n=e.getAttribute("type"),a=e.getElementsByTagName("show"),s=i.substr(0,i.indexOf("@im.worktile.com")),r=0,o=t.global.me.uid;return"unavailable"===n&&o!==s?r=kzi.constant.state.offline:a.length>0&&o!=s?(a[0].textContent,r=kzi.constant.state.leave):r=kzi.constant.state.online,t.$apply(function(){t.refresh_cache.user.change_state(s,r)}),!0}),kzi.config.feed_turn_on&&f.connect(t.global.me.uid,t.global.me.sid)),Heyoffline!==void 0&&new Heyoffline({text:{title:"掉线了?",content:"请确认网络是否连通,否则会造成当前工作丢失.",button:"好的,我知道了."}}),c.onbeforeunload=function(){return $("#global_file_upload").scope()&&$("#global_file_upload").scope().queue.length>0?"您的上传队列中还有文件，退出该页面将丢失上传进度。":(f&&f.close(),void 0)};var k=function(){return h===!0?(m&&m.close(),void 0):(h=!0,m=l.open({templateUrl:"/ycjs/tpl/common/shortcutkey_dialog.html",controller:["$scope","$modalInstance",function(e){var i=o.pid;e.pid=_.isEmpty(i)?"all":i}],size:"lg",resolve:{}}),m.result.then(function(){h=!1,m=null},function(){h=!1,m=null}),void 0)};t.js_shortcut_key_dialog=function(){k()},t.js_shift_cutover=function(e){var i=o.pid;_.isEmpty(i)||t.global.is_outter===!0||h!==!0&&(e===kzi.constant.keyASCIIs.T?n.path("project/"+i+"/task"):e===kzi.constant.keyASCIIs.C?n.path("project/"+i+"/post"):e===kzi.constant.keyASCIIs.F?n.path("project/"+i+"/file"):e===kzi.constant.keyASCIIs.D?n.path("project/"+i+"/page"):e===kzi.constant.keyASCIIs.A?n.path("project/"+i+"/activity"):e===kzi.constant.keyASCIIs.E?n.path("project/"+i+"/event"):e===kzi.constant.keyASCIIs.R?n.path("project/"+i+"/trash"):e===kzi.constant.keyASCIIs.G&&n.path("project/"+i+"/graph"))},t.js_shortcut_key=function(e,i){t.global.is_outter!==!0&&((e===kzi.constant.keyASCIIs.QuestionMark||e===kzi.constant.keyASCIIs.Slash)&&k(),h!==!0&&($(".fancybox-wrap:visible").length>0||$(".popbox:visible").length>0||$(".dropdown-menu:visible").length>0||(e===kzi.constant.keyASCIIs.E?t.$broadcast(kzi.constant.event_names.shortcut_key_to_edit):e===kzi.constant.keyASCIIs.ESC?(t.global.show_slide_menu===!0&&(t.global.show_slide_menu=!1),t.$broadcast(kzi.constant.event_names.shortcut_key_to_cancel)):e===kzi.constant.keyASCIIs.Key96&&t.$broadcast(kzi.constant.event_names.shortcut_key_left_menu_toggle,null),!i.ctrlKey&&!i.altKey&&!i.metaKey&&$.inArray(e,kzi.constant.entry_shortcut_keys)>-1&&t.$broadcast(kzi.constant.event_names.shortcut_key_to_task,e),e!==kzi.constant.keyASCIIs.VK_DOWN||i.metaKey||t.$broadcast(kzi.constant.event_names.scroll_down,e),e===kzi.constant.keyASCIIs.VK_UP&&t.$broadcast(kzi.constant.event_names.scroll_up,e),(e===kzi.constant.keyASCIIs.VK_PAGEDOWN||i.metaKey===!0&&e===kzi.constant.keyASCIIs.VK_DOWN)&&t.$broadcast(kzi.constant.event_names.scroll_page_down),(e===kzi.constant.keyASCIIs.VK_PAGEUP||i.metaKey===!0&&e===kzi.constant.keyASCIIs.VK_UP)&&t.$broadcast(kzi.constant.event_names.scroll_page_up),e===kzi.constant.keyASCIIs.L&&1==i.ctrlKey&&t.$broadcast(kzi.constant.event_names.page_go_full_screen))))},$("body").bind("drop dragover",function(e){e.preventDefault()}),$(c).bind("blur.dragfile",function(){$(".dragfile-hover").removeClass("dragfile-hover")}),t.js_root_pastefile=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName){var a=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items;a&&a.length&&_.each(a,function(i){if("file"===i.kind&&i.type.match(/^image\//i)){var a=i.getAsFile&&i.getAsFile();if(t.locator.show_slide){switch(t.locator.type){case"task":t.$broadcast(kzi.constant.event_names.on_pastefile_to_task,e,a);break;case"event":t.$broadcast(kzi.constant.event_names.on_pastefile_to_event,e,a);break;case"file":t.$broadcast(kzi.constant.event_names.on_pastefile_to_file,e,a);break;case"post":t.$broadcast(kzi.constant.event_names.on_pastefile_to_post,e,a)}return}if("file"===t.global.project_iconmenu&&(n.$$path.length===n.$$path.indexOf("/file")+5||void 0!=o.folder_id))return t.$broadcast(kzi.constant.event_names.on_pastefile_to_folder,e,a),void 0}})}},t.js_left_panel_toggle=function(){t.global.left_panel_is_fold=!t.global.left_panel_is_fold,t.global.left_panel_is_fold?kzi.localData.set("left_panel_is_fold",1):kzi.localData.set("left_panel_is_fold",0)},t.global.left_panel_is_fold=parseInt(kzi.localData.get("left_panel_is_fold"))?!0:!1,t.$on(kzi.constant.event_names.shortcut_key_left_menu_toggle,function(){t.js_left_panel_toggle()}),t.js_right_sidebar_toggle=function(){t.global.right_sidebar_is_fold=!t.global.right_sidebar_is_fold,t.global.right_sidebar_is_fold?kzi.localData.set("right_sidebar_is_fold",1):kzi.localData.set("right_sidebar_is_fold",0)},t.global.right_sidebar_is_fold=parseInt(kzi.localData.get("right_sidebar_is_fold"))?!0:!1,kzi.localData.remove("wooho_show_version"),t.global.wohoo_show=!1,t.file_new_upload=function(i,n,a,s){var r=i.files[0],o={};switch(o.target=r.formData.target,o.type=r.formData.type||"project",o.file={pid:r.formData.pid,name:r.fname,ext:kzi.constant.get_ext(r.ext),size:r.size,path:r.url},r.formData.type){case"task":o.ext={tid:r.formData.tid};break;case"post":o.ext={post_id:r.formData.post_id};break;case"file":o.ext={fid:r.formData.fid};break;case"event":o.ext={event_id:r.formData.event_id};break;default:o.ext={folder_id:r.formData.folder_id}}e.data.file.new_upload(r.formData.pid,o,function(e){o.file=_.extend(o.file,r,e.data),o.file.icon=kzi.helper.build_file_icon(o.file),t.refresh_cache.file.add(o.file),t.$broadcast(kzi.constant.event_names.on_file_add,o),_.isFunction(n)&&n(e)},function(e){_.isFunction(a)&&a(e)},function(){_.isFunction(s)&&s()})};var j=["right_click_trigger","entry_header"];document.oncontextmenu=function(e){e=e||window.event;var i=!0;return _.each(j,function(n){($(e.target).hasClass(n)||$(e.target).parents("."+n).length>0)&&(t.$broadcast(kzi.constant.event_names.on_right_menu,e),i=!1)}),i},$(document).bind("selectstart",function(e){var t=!0;return _.each(j,function(i){($(e.target).hasClass(i)||$(e.target).parents("."+i).length>0)&&(t=!1)}),t})}])},initOuterApp=function(){"use strict";var e=window.wt||{};e.version="2.0";var t=["ngRoute","ngSanitize","wt.directive.tpls","wt.header_controller","wt.invite_controller","wt.link_join_controller","wt.index_controller","wt.user_controller","wt.home_controller","wt.fileupload_controller","wt.service","wt.bus","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.markdown","wt.directive.notice","wt.directive.feed","wt.directive.uploadfile","wt.directive.activity","wt.filter","ui.bootstrap","ui.bootstrap.popbox"];e.ng=angular.module("wt",t).config(["$httpProvider","fileUploadProvider","$sceDelegateProvider",function(e,t,i){delete e.defaults.headers.common["X-Requested-With"],angular.extend(t.defaults,{pasteZone:null,disableImageResize:!0,minFileSize:0,maxFileSize:5e7,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|wmv|doc|docx|pdf|xlsx|xls|ppt|pptx|txt|zip|rar|xml|html|7zip|key|pages|numbers|ipa|apk|xap|cs|java|rb|py|css|js|cpp|c|h|php|cc|hh|vb|mp3|avi|chm|vsd|rp|psd|cvs|ai|json|7z|tar|swf|wim|bat|sh|wab|vba|ost|msi|log|svg|less|md|bin|obj)$/i,maxNumberOfFiles:100,autoUpload:!0,messages:{maxNumberOfFiles:"超过文件最大数",acceptFileTypes:"文件格式不支持",maxFileSize:"文件太大",minFileSize:"文件太小"}}),i.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"])}]).run(["$rootScope","$location","data","bus","$window",function(t,i,n,a,s){e.data=n,e.bus=a,t.global={config:kzi.config,title:"",me:e.me,is_login:!_.isUndefined(e.me)&&!_.isEmpty(e.me.uid),loading_done:!1,header_menu:"index",right_isfold:!0,is_outter:!1,show_msg:!1,project_iconmenu:"task",project_sidebar_view:"member",loaded_notice_count:!1},t.returnToSignin=function(){t.global.is_login=!1,/^\/signin/g.test(i.$$path)||(s.location.href="/signin")},t.returnToDashboard=function(){s.location.href="/dashboard"},t.login=function(t,i,n,a,r,o){e.data.signin(t,i,function(e){null!==n&&(s.location.href=n),angular.isFunction(a)&&a(e)},r,o)},t.logout=function(i,n){i||(s.location.href="/"),t.global.is_login&&(delete t.global.me,t.global.is_login=!1,e.data.signout(n))}}])},initShareApp=function(){"use strict";var e=window.wt||{};e.version="2.0";var t=["ngRoute","ngSanitize","wt.directive.tpls","wt.fileupload_controller","wt.comment_controller","wt.activity_controller","wt.entityshare_controller","wt.service","wt.bus","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.markdown","wt.directive.notice","wt.directive.feed","wt.filter","ui.bootstrap","ui.bootstrap.popbox","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.attachment","wt.directive.markdown"];e.ng=angular.module("wt",t).config(["$httpProvider","fileUploadProvider","$sceDelegateProvider",function(e,t,i){delete e.defaults.headers.common["X-Requested-With"],angular.extend(t.defaults,{pasteZone:null,disableImageResize:!0,minFileSize:0,maxFileSize:5e7,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|wmv|doc|docx|pdf|xlsx|xls|ppt|pptx|txt|zip|rar|xml|html|7zip|key|pages|numbers|ipa|apk|xap|cs|java|rb|py|css|js|cpp|c|h|php|cc|hh|vb|mp3|avi|chm|vsd|rp|psd|cvs|ai|json|7z|tar|swf|wim|bat|sh|wab|vba|ost|msi|log|svg|less|md|bin|obj)$/i,maxNumberOfFiles:100,autoUpload:!0,messages:{maxNumberOfFiles:"超过文件最大数",acceptFileTypes:"文件格式不支持",maxFileSize:"文件太大",minFileSize:"文件太小"}}),i.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"])}]).run(["$rootScope","$location","data","bus",function(t,i,n,a){e.data=n,e.bus=a,t.global={config:kzi.config,title:"",me:e.me,is_login:!_.isUndefined(e.me)&&!_.isEmpty(e.me.uid),loading_done:!1,header_menu:"index",right_isfold:!0,is_outter:!1,show_msg:!1,project_iconmenu:"task",project_sidebar_view:"member",loaded_notice_count:!1}}])};(function(){function e(){var e=this,i=null,n=null,a=null;e.build_status=function(t){for(var i in t)e[i]=t[i],e[i].type="statusType"},e.getMsgByCode=function(t){var i=e.getStatusByCode(t);return null!=i&&null!=i.msg?i.msg:"未知错误，错误码：["+t+"]，请联系管理员。"},e.getStatusByCode=function(t){if(null==i){i={};for(var n=e.getStatuses(),a=0;n.length>a;a++){var s=n[a];if(null!=i[s.code])throw new Error("有重复的Code("+s.code+").");i[s.code]=s}}return i[t]},e.getStatuses=function(){if(null==a){a=[],n=e.getStatusTypes();for(var i=0;n.length>i;i++){var s=n[i];for(var r in s){var o=s[r];o.hasOwnProperty("code")&&"object"==typeof o&&null!=o.code&&a.push(new t(o.code,o.msg))}}}return a},e.getStatusTypes=function(){if(null==n){n=[];for(var e in this){var t=this[e];this.hasOwnProperty(e)&&e.length>0&&"_"!=e[0]&&"object"==typeof t&&"statusType"===t.type&&n.push(t)}}return n}}function t(e,t){this.code=e,this.msg=t,this.toString=function(){return this.code}}kzi.statuses=new e,kzi.statuses.ok=200,kzi.statuses.invalid_input=401,kzi.statuses.not_found=404,kzi.statuses.build_status({error:{sig:{code:1001,msg:"错误的签名"},ver:{code:1002,msg:"错误的接口版本号"},err_client_ver:{code:1003,msg:"错误的接口版本号"},invalid_token:{code:1004,msg:"无效的访问令牌"},permission_deny:{code:1005,msg:"无权限访问"},server_error:{code:500,msg:"服务端错误"},unknown:{code:404,msg:"找不到资源"}},user_error:{not_found:{code:2001,msg:"用户不存在"},invalid_user:{code:2002,msg:"错误的用户"},login_err:{code:2003,msg:"用户登录的时候出现异常"},invalid_userinfo:{code:2004,msg:"用户登录失败，用户名或密码错"},not_login:{code:2005,msg:"没有登录,无权限访问"},signup_error:{code:2006,msg:"登录错误"},get_user_error:{code:2007,msg:"获取用户错误"},search_user_error:{code:2008,msg:"搜索用户错误"},update_user_error:{code:2009,msg:"更新用户错误"},update_avatar_error:{code:2010,msg:"更新头像错误"},change_pwd_error:{code:2011,msg:"修改密码错误"},check_email_error:{code:2012,msg:"检查邮箱错误"},check_name_error:{code:2013,msg:"检查用户名错误"},invalid_pwd_error:{code:2014,msg:"验证密码错误"},email_not_exist:{code:2015,msg:"邮件不存在"},forgot_apply_error:{code:2016,msg:"修改忘记密码错误"},invalid_token_error:{code:2017,msg:"无效的身份"},prefs_get_error:{code:2018,msg:"获取个性化设置错误"},prefs_set_error:{code:2019,msg:"设置个性化设置错误"},invalid_name_error:{code:2020,msg:"用户名无效"},email_has_exist:{code:2021,msg:"邮箱地址已经存在"},name_has_exist:{code:2022,msg:"用户名已经存在"},change_email_error:{code:2023,msg:"修改邮箱地址失败"},email_match_error:{code:2024,msg:"邮箱地址匹配失败"},get_secret_error:{code:2025,msg:"获取验证密钥失败"},enable_twofactor_error:{code:2026,msg:"启动验证失败"},disable_twofactor_error:{code:2027,msg:"禁用验证失败"},twofactor_match_error:{code:2028,msg:"验证匹配错误"},recovery_match_error:{code:2029,msg:"验证匹配错误"}},team_error:{not_found:{code:4001,msg:"团队不存在"},invalid_team:{code:4002,msg:"错误的用户"},user_team_error:{code:4003,msg:"用户团队错误"},create_team_error:{code:4004,msg:"创建团队错误"},update_team_error:{code:4005,msg:"团队更新错误"},del_team_error:{code:4006,msg:"删除团队错误"},member_add_error:{code:4007,msg:"添加会员错误"},member_get_error:{code:4008,msg:"获取会员错误"},member_remove_error:{code:4009,msg:"移除会员错误"},member_role_error:{code:4010,msg:"会员角色错误"},member_group_error:{code:4011,msg:"会员分组错误"},group_add_error:{code:4012,msg:"添加团队成员分组错误"},group_remove_error:{code:4013,msg:"移除团队成员分组错误"},group_update_error:{code:4014,msg:"更新团队成员分组错误"},group_get_error:{code:4015,msg:"获取团队成员分组错误"},trans_team_error:{code:4016,msg:"转换团队错误"},get_team_error:{code:4017,msg:"获取团队错误"},update_logo_error:{code:4018,msg:"更新团队logo错误"},set_current_error:{code:4019,msg:"设置当前团队正确"},member_invite_error:{code:4020,msg:"邀请成员错误"},member_uninvite_error:{code:4021,msg:"取消邀请成员错误"},member_projects_error:{code:4022,msg:"获取成员项目错误"}},prj_error:{not_found:{code:5001,msg:"项目不存在"},invalid_prj:{code:5002,msg:"错误的项目"},user_prj_error:{code:5003,msg:"用户项目错误"},create_prj_error:{code:5004,msg:"创建项目错误"},prj_name_exist:{code:5005,msg:"同一团队下的项目名重复"},prj_activity_error:{code:5006,msg:"获取项目活动错误"},update_prj_error:{code:5007,msg:"项目更新错误"},update_prj_pic_error:{code:5008,msg:"项目封面更新错误"},remove_only_admin_error:{code:5009,msg:"只有一个管理员用户，不允许从项目移除成员。"},add_member_error:{code:5010,msg:"添加项目成员错误"},remove_member_error:{code:5011,msg:"移除项目成员错误"},close_prj_error:{code:5012,msg:"关闭项目失败"}},entry_error:{not_found:{code:6001,msg:"列表不存在"},invalid_entry:{code:6002,msg:"错误的列表"},create_entry_error:{code:6003,msg:"创建列表错误"},update_entry_error:{code:6004,msg:"列表更新错误"},get_entry_error:{code:6005,msg:"获取列表错误"},trash_entry_error:{code:6006,msg:"回收列表错误"},del_entry_error:{code:6007,msg:"删除列表错误"},archive_entry_error:{code:6008,msg:"列表存档错误"},pos_entry_error:{code:6009,msg:"还原列表错误"}},task_error:{not_found:{code:7001,msg:"任务不存在"},invalid_task:{code:7002,msg:"错误的任务"},create_task_error:{code:7003,msg:"创建任务错误"},update_task_error:{code:7004,msg:"任务更新错误"},task_activity_error:{code:7005,msg:"获取任务活动错误"},task_add_user_error:{code:7006,msg:"添加任务成员错误"},get_task_list_error:{code:7007,msg:"获取任务错误"},get_task_items_error:{code:7008,msg:"加载任务条目列表失败"},get_task_attachments_error:{code:7009,msg:"加载任务条目附件失败"},task_del_user_error:{code:7010,msg:"移除任务成员失败"},add_task_item_error:{code:7011,msg:"添加任务条目失败"},change_task_item_status_error:{code:7012,msg:"修改任务条目状态失败"},del_task_item_error:{code:7013,msg:"移除任务条目失败"},update_task_item_error:{code:7014,msg:"更新任务条目失败"},del_comment_error:{code:7015,msg:"删除评论失败"},update_task_tag_error:{code:7016,msg:"定义任务标签失败"},todo_update_error:{code:7017,msg:"更新TODO错误"},todo_checked_error:{code:7018,msg:"完成检查项错误"},todo_unchecked_error:{code:7019,msg:"设置检查项错误"},todo_position_error:{code:7020,msg:"todo_position_error"},watcher_add_error:{code:7021,msg:"watcher_add_error"},watcher_remove_error:{code:7022,msg:"watcher_remove_error"},get_tasks_forme_error:{code:7033,msg:"获取我的任务错误"}},file_error:{not_found:{code:8001,msg:"找不到文件"},invalid_file:{code:8002,msg:"文件无效"},create_file_error:{code:8003,msg:"创建文件错误"},update_file_error:{code:8004,msg:"上次文件错误"},trash_file_error:{code:8005,msg:"回收文件错误"},del_file_error:{code:8006,msg:"删除文件错误"},get_file_error:{code:8007,msg:"获取文件错误"},get_list_error:{code:8008,msg:"获取文件列表错误"},version_new_error:{code:8009,msg:"上次新版本错误"},version_get_error:{code:8010,msg:"获取新版本错误"},get_attach_error:{code:8011,msg:"获取附件错误"},attach_file_error:{code:8012,msg:"关联附件错误"},detach_file_error:{code:8013,msg:"取消附件关联错误"},get_targets_error:{code:8014,msg:"获取标签错误"},generate_thumbnail_error:{code:8308,msg:"获取标签错误"}},comment_error:{not_found:{code:20001,msg:"找不到评论"},add_error:{code:20002,msg:"添加评论错误"},update_error:{code:20003,msg:"更新评论错误"},delete_error:{code:20004,msg:"删除评论错误"},get_error:{code:20005,msg:"获取评论错误"}},watch_error:{not_found:{code:21001,msg:"找不到关注"},add_error:{code:21002,msg:"添加关注错误"},remove_error:{code:21003,msg:"移除关注错误"},get_watcher_error:{code:21004,msg:"获取关注错误"},get_watch_forme_error:{code:21005,msg:"移除关注错误"}},post_error:{not_found:{code:9001,msg:"话题不存在"}},page_error:{not_found:{code:10001,msg:"文档不存在"}},event_error:{add_event_error:{code:13001,msg:"添加日程失败"},get_event_error:{code:13002,msg:"获取日程失败"},attendee_add_error:{code:13003,msg:"attendee_add_error"},attendee_remove_error:{code:13004,msg:"attendee_remove_error"},trash_event_error:{code:13005,msg:"trash_event_error"},update_event_error:{code:13006,msg:"update_event_error"},not_found:{code:13007,msg:"not_found"}},upload_error:{upload_error:{code:22001,msg:"上传错误"}},notice_error:{get_unread_error:{code:23001,msg:"获取未读通知错误"},get_list_error:{code:23002,msg:"获取通知列表错误"},set_all_read_error:{code:23003,msg:"设置通知已读错误"}},activity_error:{get_list_error:{code:24001,msg:"获取活动列表错误"}},invite_error:{invalid_invite_code:{code:25001,msg:"邀请错误"},accept_invite_code:{code:25002,msg:"接受邀请错误"},join_invite_code:{code:25003,msg:"补充资料并接受邀请错误"},refuse_invite_code:{code:25004,msg:"拒绝邀请错误"},get_invite_code:{code:25005,msg:"获取邀请码错误"},get_new_invite_code:{code:25006,msg:"获取最新邀请码错误"}},others:{invalid_input:{code:401,msg:"输入格式不正确"}}})})(),function(){"use strict";kzi.constant=kzi.constant||{},kzi.constant.operation={add:1,update:2,remove:3},kzi.constant.get_role_name=function(e){switch(e){case kzi.constant.role.admin:return"管理员";case kzi.constant.role.member:return"普通成员";case kzi.constant.role.visitor:return"访问者";default:return"没有该角色"}},kzi.constant.get_member_roles=function(){return[{role:kzi.constant.role.admin,name:"管理员"},{role:kzi.constant.role.member,name:"成员"}]},kzi.constant.event_names={emit_filter_activity_by_type:"emit_filter_activities_by_type",filter_activity_by_type:"filter_activities_by_type",filter_activity_by_prj:"filter_activities_by_prj",reload_item_activities:"reload_item_activities",clear_item_activities:"clear_item_activities",clear_comment_activity:"clear_comment_activity",emit_filter_watch_by_type:"emit_filter_watch_by_type",filter_watch_by_type:"filter_watch_by_type",filter_posts_by_sort:"filter_posts_by_sort",post_comment_add:"post_comment_add",shortcut_key_to_edit:"shortcut_key_to_edit",shortcut_key_to_cancel:"shortcut_key_to_cancel",shortcut_key_to_task:"shortcut_key_to_task",shortcut_key_left_menu_toggle:"shortcut_key_left_menu_toggle",load_entity_task:"load_entity_task",load_entity_event:"load_entity_event",load_entity_post:"load_entity_post",load_entity_file:"load_entity_file",load_entity_page:"load_entity_page",load_entity_mail:"load_entity_mail",load_comments:"load_comments",clear_comments:"clear_comments",select_comment_tab:"select_comment_tab",select_activity_tab:"select_activity_tab",load_teams_projects_sucess:"load_teams_projects_sucess",notice_new:"notice_new",load_prj_feed:"load_prj_feed",on_project_tasks_filter:"on_project_tasks_filter",show_project_tasks_filter:"show_project_tasks_filter",show_project_setting:"show_project_setting",show_project_setting_identify:"show_project_setting_identify",show_project_timingtask_list:"show_project_timingtask_list",project_clear_task_filter:"project_clear_task_filter",project_sort_change:"project_sort_change",on_pastefile_to_task:"on_pastefile_to_task",on_pastefile_to_event:"on_pastefile_to_event",on_pastefile_to_file:"on_pastefile_to_file",on_pastefile_to_post:"on_pastefile_to_post",on_pastefile_to_folder:"on_pastefile_to_folder",on_task_trash:"on_task_trash",on_task_complete:"on_task_complete",on_task_move:"on_task_move",on_task_update:"on_task_update",on_task_comment:"on_task_comment",on_task_badges_file:"on_task_badges_file",on_task_unarchived:"on_task_unarchived",on_task_badges_check:"on_task_badges_check",on_event_update:"on_event_update",on_event_trash:"on_event_trash",on_file_add:"on_file_add",on_file_trash:"on_file_trash",on_file_move:"on_file_move",on_file_update:"on_file_update",on_post_trash:"on_post_trash",on_post_comment:"on_post_comment",on_post_update:"on_post_update",on_page_trash:"on_page_trash",on_slide_hide:"on_slide_hide",on_mail_trash:"on_mail_trash",on_right_menu:"on_right_menu",member_state_change:"member_state_change",team_member_role_change:"team_member_role_change",project_permission_change:"project_permission_change",on_comment_new:"on_comment_new",scroll_up:"scroll_up",scroll_down:"scroll_down",scroll_page_up:"scroll_page_up",scroll_page_down:"scroll_page_down",page_go_full_screen:"page_go_full_screen",header_hide:"header_hide",header_show:"header_show",post_updated_by_editor:"post_updated_by_editor",post_created_by_editor:"post_created_by_editor",page_updated_by_editor:"page_saved_by_editor",page_created_by_editor:"page_created_by_editor"},kzi.constant.shift_cutover_keys=[84,67,70,68,65,69,82,71],kzi.constant.global_shortcut_keys=[63,69,27,47,96],kzi.constant.entry_shortcut_keys=[37,38,39,40,13,67,27,68,76,77,32,87,60,62,74,75,73,78,65],kzi.constant.keyASCIIs={T:84,C:67,F:70,D:68,A:65,E:69,G:71,R:82,L:76,M:77,W:87,At:64,ESC:27,Slash:47,I:73,J:74,K:75,N:78,Key96:96,QuestionMark:63,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_RETURN:13,VK_SPACE:32,VK_LessThan:60,VK_GreaterThan:62,ENTER:13,VK_PAGEUP:33,VK_PAGEDOWN:34},kzi.constant.all_hour_sections=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],kzi.constant.all_minute_sections=["00","10","20","30","40","50"],kzi.constant.mail={domain:"@mail.worktile.com"},kzi.constant.role={admin:1,member:2,guest:3,visitor:4},kzi.constant.status={ok:1,pending:2},kzi.constant.state={offline:0,online:1,busy:2,leave:3},kzi.constant.user_status={ok:1,pending:2,inactived:3},kzi.constant.trash={no:0,yes:1},kzi.constant.archived={yes:1,no:0},kzi.constant.star={yes:1,no:0},kzi.constant.completed={yes:1,no:0},kzi.constant.checked={yes:1,no:0},kzi.constant.notify={yes:1,no:0},kzi.constant.entity_type={task:"task",file:"file",post:"post",page:"page",event:"event",mail:"mail"},kzi.constant.notice_type_icon={task:{name:"task",icon:"icon-check"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},event:{name:"event",icon:"icon-calendar"},project:{name:"project",icon:"icon-inbox"},comment:{name:null,icon:"icon-comment-alt"},team:{name:"team",icon:"icon-sitemap"}},kzi.constant.feed_type_icon={task:{name:"task",icon:"icon-check"},event:{name:"event",icon:"icon-calendar"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},completed:{name:"task",icon:"icon-check"},comment:{name:null,icon:"icon-comment-alt"}},kzi.constant.notice_types={all:"all",assign:"assign",complete:"complete",metion:"metion",watch:"watch",comment:"comment",other:"other"},kzi.constant.get_notice_types=function(){return[{type:kzi.constant.notice_types.all,name:"全部消息",icon_class:"icon-bell"},{type:kzi.constant.notice_types.assign,name:"分配任务",icon_class:"icon-user"},{type:kzi.constant.notice_types.complete,name:"完成任务",icon_class:"icon-check-sign"},{type:kzi.constant.notice_types.metion,name:"提到我的",icon_class:"icon-quote-left"},{type:kzi.constant.notice_types.watch,name:"提醒关注",icon_class:"icon-eye-open"},{type:kzi.constant.notice_types.comment,name:"评论",icon_class:"icon-comment-alt"},{type:kzi.constant.notice_types.other,name:"更多",icon_class:"icon-ellipsis-horizontal"}]
},kzi.constant.xtype={task:"tasks",file:"files",post:"posts",page:"pages",event:"events"},kzi.constant.exts={none:0,txt:1,png:2,jpeg:3,jpg:4,gif:5,doc:6,xls:7,ppt:8,pdf:9,zip:10,rar:11,xml:12,html:13,docx:14,xlsx:15,pptx:16,mail:17,pages:18,key:19,numbers:20,ipa:21,apk:22,xap:23,cs:24,java:25,rb:26,py:27,css:28,js:29,cpp:30,c:31,h:32,php:33,cc:34,hh:35,vb:36,mp3:37,avi:38,chm:39,vsd:40,rp:41,wmv:42,bmp:43,psd:44,cvs:45,ai:46,json:47,"7z":48,tar:49,swf:50,wim:51,bat:52,sh:53,wab:54,vba:55,ost:56,msi:57,log:58,svg:59,less:60,md:61,bin:62,obj:63,edx:64,mmap:65,thmx:66,dump:67,one:68,pst:69,vcf:70,ini:71,csv:72,wps:73,et:74,dps:75,pfx:76},kzi.constant.permission={holder:0,ok:1,project_archived:4,entity_not_found:8,entity_deleted:16,entity_archived:32,team_not_found:64,team_stop_service:128},kzi.constant.prj_permission={admin:31,member:15,guest:7,viewer:1,deny:0},kzi.constant.team_module={setting:16,add_project:8,add_member:4,view:2,view_base:1},kzi.constant.team_permission={owner:31,admin:15,member:3,guest:1,deny:0},kzi.constant.prj_module={setting:16,crud:8,comment:4,watch:2,view:1},kzi.constant.client_name={unknown:0,web:1,mail:2,iphone:3,ipad:4,android:5,androidHD:6,winphone:7,win8:8,wap:9,weinxin:10},kzi.constant.get_ext=function(e){return kzi.constant.exts[e.toLowerCase()]?kzi.constant.exts[e.toLowerCase()]:0},kzi.constant.image_exts=[2,3,4,5,43],kzi.constant.get_file_icon=function(e){if(1===e.type)switch(e.ext){case 1:return"res/icon/icon-folder-green.png";case 2:return"res/icon/icon-folder-orange.png";case 3:return"res/icon/icon-folder-purple.png";case 4:return"res/icon/icon-folder-red.png";case 8:return"res/icon/icon-folder-blue.png";default:return"res/icon/icon-folder-yellow.png"}else switch(e.ext){case 1:return"res/icon/icon-txt.png";case 2:return"-1";case 3:return"-1";case 4:return"-1";case 5:return"-1";case 6:return"res/icon/icon-word.png";case 7:return"res/icon/icon-excel.png";case 8:return"res/icon/icon-ppt.png";case 9:return"res/icon/icon-pdf.png";case 10:return"res/icon/icon-zip.png";case 11:return"res/icon/icon-rar.png";case 12:return"res/icon/icon-xml.png";case 13:return"res/icon/icon-html.png";case 14:return"res/icon/icon-word.png";case 15:return"res/icon/icon-excel.png";case 16:return"res/icon/icon-ppt.png";case 17:return"res/icon/icon-mail.png";case 18:return"res/icon/icon-pages.png";case 19:return"res/icon/icon-keynote.png";case 20:return"res/icon/icon-numbers.png";case 21:return"res/icon/icon-ipa.png";case 22:return"res/icon/icon-apk.png";case 23:return"res/icon/icon-xap.png";case 24:return"res/icon/icon-csharp.png";case 25:return"res/icon/icon-java.png";case 26:return"res/icon/icon-ruby.png";case 27:return"res/icon/icon-python.png";case 28:return"res/icon/icon-css.png";case 29:return"res/icon/icon-js.png";case 30:return"res/icon/icon-cpp.png";case 31:return"res/icon/icon-c.png";case 32:return"res/icon/icon-h.png";case 33:return"res/icon/icon-php.png";case 34:return"res/icon/icon-c.png";case 35:return"res/icon/icon-h.png";case 36:return"res/icon/icon-vb.png";case 37:return"res/icon/icon-mp3.png";case 38:return"res/icon/icon-avi.png";case 39:return"res/icon/icon-chm.png";case 40:return"res/icon/icon-visio.png";case 41:return"res/icon/icon-rp.png";case 42:return"res/icon/icon-wmv.png";case 43:return"-1";case 44:return"res/icon/icon-psd.png";case 45:return"res/icon/icon-cvs.png";case 46:return"res/icon/icon-ai.png";case 47:return"res/icon/icon-json.png";case 48:return"res/icon/icon-7z.png";case 49:return"res/icon/icon-tar.png";case 50:return"res/icon/icon-swf.png";case 51:return"res/icon/icon-wim.png";case 52:return"res/icon/icon-bat.png";case 53:return"res/icon/icon-sh.png";case 54:return"res/icon/icon-wab.png";case 55:return"res/icon/icon-vba.png";case 56:return"res/icon/icon-ost.png";case 57:return"res/icon/icon-msi.png";case 58:return"res/icon/icon-log.png";case 59:return"res/icon/icon-svg.png";case 60:return"res/icon/icon-less.png";case 61:return"res/icon/icon-md.png";case 62:return"res/icon/icon-bin.png";case 63:return"res/icon/icon-obj.png";case 64:return"res/icon/icon-edx.png";case 65:return"res/icon/icon-mmap.png";case 66:return"res/icon/icon-thmx.png";case 67:return"res/icon/icon-dump.png";case 68:return"res/icon/icon-one.png";case 69:return"res/icon/icon-pst.png";case 70:return"res/icon/icon-vcf.png";case 71:return"res/icon/icon-ini.png";case 72:return"res/icon/icon-csv.png";case 73:return"res/icon/icon-wps.png";case 74:return"res/icon/icon-et.png";case 75:return"res/icon/icon-dps.png";case 76:return"res/icon/icon-pfx.png";default:return"res/icon/icon-file-default.png"}},kzi.constant.get_folder_icons=[{ext:1,path:"res/icon/icon-folder-green.png"},{ext:2,path:"res/icon/icon-folder-orange.png"},{ext:3,path:"res/icon/icon-folder-purple.png"},{ext:4,path:"res/icon/icon-folder-red.png"},{ext:8,path:"res/icon/icon-folder-blue.png"},{ext:0,path:"res/icon/icon-folder-yellow.png"}],kzi.constant.labels=[{name:"blue",desc:""},{name:"green",desc:""},{name:"orange",desc:""},{name:"purple",desc:""},{name:"red",desc:""},{name:"yellow",desc:""}],kzi.constant.verbs={create:"create",update:"update",add:"add",remove:"remove"},kzi.constant.atypes={project:"project",entry:"entry",task:"task",post:"post",page:"page",file:"file",folder:"folder",todo:"todo",vote:"vote"},kzi.constant.img_exts=[kzi.constant.exts.jpg,kzi.constant.exts.jpeg,kzi.constant.exts.gif,kzi.constant.exts.png,kzi.constant.exts.bmp],kzi.constant.preview_exts=[kzi.constant.exts.doc,kzi.constant.exts.docx,kzi.constant.exts.ppt,kzi.constant.exts.pptx,kzi.constant.exts.xls,kzi.constant.exts.xlsx,kzi.constant.exts.pdf],kzi.constant.text_exts=[kzi.constant.exts.txt,kzi.constant.exts.xml,kzi.constant.exts.html,kzi.constant.exts.cs,kzi.constant.exts.java,kzi.constant.exts.rb,kzi.constant.exts.py,kzi.constant.exts.css,kzi.constant.exts.js,kzi.constant.exts.cpp,kzi.constant.exts.c,kzi.constant.exts.h,kzi.constant.exts.php,kzi.constant.exts.cc,kzi.constant.exts.hh,kzi.constant.exts.vb,kzi.constant.exts.cvs,kzi.constant.exts.json,kzi.constant.exts.log,kzi.constant.exts.less,kzi.constant.exts.md,kzi.constant.exts.csv],kzi.constant.file_type={file:0,folder:1},kzi.constant.folder_ext={normal:0,image:1,mail:2},kzi.constant.prj_colors=["#6b0516","#ac050f","#d61818","#dc428e","#9c2867","#765c9d","#6f6eb4","#4761b5","#286391","#3c8cad","#38a8aa","#94ccc3","#6ea182","#15945f","#5d8d0b","#47634c","#c19c01","#ecba05","#dc8310","#aa6517","#ac8671","#805f4c","#70736c","#444444"],kzi.constant.prj_icons=["icon-apple","icon-android","icon-html5","icon-desktop","icon-mobile-phone","icon-tablet","icon-github","icon-dribbble","icon-linux","icon-windows","icon-qrcode","icon-bug","icon-suitcase","icon-beaker","icon-plane","icon-truck","icon-money","icon-book","icon-music","icon-facetime-video","icon-picture","icon-cloud","icon-gift","icon-coffee","icon-heart","icon-flag","icon-bar-chart","icon-lock","icon-gears","icon-fire"],kzi.constant.team={edition:{free:1,business:2,nonprofit:3},status:{normal:1,trial:2,expired:3},quota_free:10,quota_nonprofit:50},kzi.constant.subscription={status:{normal:1,arrears:2,trial:3,expired:4},step:{pay_online:1,already_fee:2,next_fee:3,already_fee_and_next_new:4},price:10,dividing_day:15},kzi.constant.payment={status:{unpaid:1,successed:2,failed:3,cancel:4},method:{unknown:0,online:1,manual:2,remit:3,transfer:4,recharge:5},type:{unknown:0,alipay:1,bank:2,paypal:3,credit:4,cash:5,coupon:6},direction:{payment:1,refund:2},scheme:{one_month:1,one_quarter:3,half_year:6,one_year:12,two_year:24}},kzi.constant.client={unknown:0,web:1,mail:2,iphone:3,ipad:4,android:5,androidHD:6,winphone:7,win8:8,wap:9,weinxin:10},kzi.constant.prj_visibility={"private":1,"protected":2,"public":3},kzi.constant.team_visibility={"private":1,"public":2},kzi.constant.event_trash_type={one:1,follow_up:2,all:3},kzi.constant.event_update_type={one:1,follow_up:2},kzi.constant.event_recurrence={no_repeat:0,day:1,week:2,month:3,year:4},kzi.constant.event_repeat_intervals=[{key:0,desc:"不重复"},{key:1,desc:"每日重复"},{key:2,desc:"每周重复"},{key:3,desc:"每月重复"},{key:4,desc:"每年重复"}],kzi.constant.prj_navigations=[{id:1,name:"task",title:"任务",icon:"icon-check",shortcuts:"(Shift+T)",desc:"提供看板式任务管理功能，通过拖拽来分配任务或者在不同列表间移动任务"},{id:2,name:"event",title:"日历",icon:"icon-calendar",shortcuts:"(Shift+E)",desc:"通过日历方便的安排团队日程，设置了截止日期的任务也会在日历中显示"},{id:3,name:"file",title:"文件",icon:"icon-file",shortcuts:"(Shift+F)",desc:"与团队成员共享文件资源，支持文件在线预览，支持文件历史版本管理"},{id:4,name:"post",title:"话题",icon:"icon-list-alt",shortcuts:"(Shift+C)",desc:"通过话题随时随地与团队成员发起讨论，打造属于团队内部的讨论组"},{id:5,name:"page",title:"文档",icon:"icon-file-text-alt",shortcuts:"(Shift+D)",desc:"在线编写文档，形成团队知识库，支持文档历史版本管理和比对功能"},{id:6,name:"graph",title:"简报",icon:"icon-bar-chart",shortcuts:"(Shift+G)",desc:"通过对项目中的任务完成情况进行统计，形成周报和日报，查看项目的历史活动"}],kzi.constant.prj_menues={task:1,event:2,file:3,post:4,page:5,graph:6},kzi.constant.actions=[{action:"create_task",desc:"创建任务"},{action:"complete_task",desc:"完成任务"},{action:"expire_task",desc:"任务设置截止时间"},{action:"assign_task",desc:"任务分配"},{action:"create_event",desc:"新建日程"},{action:"pick_post",desc:"发起话题"},{action:"create_page",desc:"新建文档"},{action:"page_version",desc:"文档新版本"}]}(),function(){function a(){var e=i.Window.open(location.protocol+"//"+location.host+"/ycjs/nw-plugins/nw-desktop-notifications.html",{frame:!1,toolbar:!1,width:t,height:0,"always-on-top":!0,show:!1,resizable:!1});window.LOCAL_NW.DesktopNotificationsWindow=e,window.LOCAL_NW.DesktopNotificationsWindowIsLoaded=!1,e.on("loaded",function(){window.LOCAL_NW.DesktopNotificationsWindowIsLoaded=!0,$(e.window.document.body).find("#closer").click(function(){d()})})}function s(){return i?(window.LOCAL_NW.DesktopNotificationsWindow&&(window.LOCAL_NW.DesktopNotificationsWindow.close(!0),window.LOCAL_NW.DesktopNotificationsWindow=null),void 0):!1}function r(e,t,n,s){if(!i)return!1;window.LOCAL_NW.DesktopNotificationsWindow||a();var r=function(){l(e,t,n,s),c(),$(window.LOCAL_NW.DesktopNotificationsWindow.window.document.body).find("#shouldstart").text("true")};return window.LOCAL_NW.DesktopNotificationsWindowIsLoaded?r():window.LOCAL_NW.DesktopNotificationsWindow.on("loaded",r),!0}function o(e,t,i,n){return"<li id='"+n+"'>"+"<div class='icon'>"+"<img src='"+e+"' />"+"</div>"+"<div class='title'>"+f(t,35)+"</a></div>"+"<div class='description'>"+f(i,37)+"</div>"+"</li>"}function l(e,t,i,n){var a=p(),s=o(e,t,i,a),r=$(window.LOCAL_NW.DesktopNotificationsWindow.window.document.body);r.find("#notifications").append(s),r.find("#"+a).click(n)}function c(){function a(){setTimeout(function(){60>i&&(e.resizeTo(n,i),i+=10,a())},5)}var e=window.LOCAL_NW.DesktopNotificationsWindow;if(!e.NOTIFICATION_IS_SHOWING){var i=screen.availTop,n=t;e.moveTo(u(e),i),e.show(),e.NOTIFICATION_IS_SHOWING=!0,document.hasFocus(),a()}}function d(e){function s(){setTimeout(function(){n>-10?(i.resizeTo(a,n),n-=10,s()):(i.hide(),e&&e())},5)}var i=window.LOCAL_NW.DesktopNotificationsWindow,n=i.height,a=t;s(),i.NOTIFICATION_IS_SHOWING=!1}function u(){return screen.availLeft+screen.availWidth-(t+10)}function p(){return+new Date+"-"+n++}function f(e,t){return e=$.trim(e),e.length>t?$.trim(e.substr(0,t))+"...":e}var e=window.require,t=290,i=null,n=0;e&&(i=e("nw.gui")),window.LOCAL_NW||(window.LOCAL_NW={}),window.LOCAL_NW.desktopNotifications={notify:r,closeAnyOpenNotificationWindows:s}}();